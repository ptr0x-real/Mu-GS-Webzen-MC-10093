; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29111.0 

	TITLE	C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?__empty_global_delete@@YAXPAX@Z		; __empty_global_delete
PUBLIC	?__empty_global_delete@@YAXPAXI@Z		; __empty_global_delete
PUBLIC	??0CObjAttack@@QAE@XZ				; CObjAttack::CObjAttack
PUBLIC	??1CObjAttack@@UAE@XZ				; CObjAttack::~CObjAttack
PUBLIC	?Attack@CObjAttack@@QAEHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z ; CObjAttack::Attack
PUBLIC	?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z ; CObjAttack::GetAttackDamage
PUBLIC	?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z ; CObjAttack::GetAttackDamageWizard
PUBLIC	??_GCObjAttack@@UAEPAXI@Z			; CObjAttack::`scalar deleting destructor'
PUBLIC	?gObjDenorantSprite@@YAHPAVOBJECTSTRUCT@@@Z	; gObjDenorantSprite
PUBLIC	?gObjDarkHorse@@YAHPAVOBJECTSTRUCT@@@Z		; gObjDarkHorse
PUBLIC	??_7CObjAttack@@6B@				; CObjAttack::`vftable'
PUBLIC	?gclassObjAttack@@3VCObjAttack@@A		; gclassObjAttack
PUBLIC	??_C@_0DB@MDAHJJLM@error?9Level1?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Str?3?$CFd?5@ ; `string'
PUBLIC	??_R4CObjAttack@@6B@				; CObjAttack::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCObjAttack@@@8				; CObjAttack `RTTI Type Descriptor'
PUBLIC	??_R3CObjAttack@@8				; CObjAttack::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CObjAttack@@8				; CObjAttack::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CObjAttack@@8			; CObjAttack::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R1A@?0A@EA@CObjBaseAttack@@8			; CObjBaseAttack::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R0?AVCObjBaseAttack@@@8			; CObjBaseAttack `RTTI Type Descriptor'
PUBLIC	??_R3CObjBaseAttack@@8				; CObjBaseAttack::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CObjBaseAttack@@8				; CObjBaseAttack::`RTTI Base Class Array'
PUBLIC	__real@00000000
PUBLIC	__real@3f800000
PUBLIC	__real@40400000
PUBLIC	__real@41200000
PUBLIC	__real@42c80000
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	_atexit:PROC
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	_rand:PROC
EXTRN	?IsItem@CItem@@QAEHXZ:PROC			; CItem::IsItem
EXTRN	?IsDinorantReduceAttackDamaege@CItem@@QAEHXZ:PROC ; CItem::IsDinorantReduceAttackDamaege
EXTRN	?GetDamage@CMagicInf@@QAEHXZ:PROC		; CMagicInf::GetDamage
EXTRN	?gObjCheckAttackTypeMagic@@YAHHH@Z:PROC		; gObjCheckAttackTypeMagic
EXTRN	?gObjIsConnected@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjIsConnected
EXTRN	?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z:PROC ; gObjAddMsgSendDelay
EXTRN	?gObjDuelCheck@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjDuelCheck
EXTRN	?gObjDuelCheck@@YAHPAVOBJECTSTRUCT@@0@Z:PROC	; gObjDuelCheck
EXTRN	?gObjSetPosition@@YAXHHH@Z:PROC			; gObjSetPosition
EXTRN	?gObjWeaponDurDown@@YAXPAVOBJECTSTRUCT@@0H@Z:PROC ; gObjWeaponDurDown
EXTRN	?gObjArmorRandomDurDown@@YAXPAVOBJECTSTRUCT@@0@Z:PROC ; gObjArmorRandomDurDown
EXTRN	?gObjTargetGuildWarCheck@@YAHPAVOBJECTSTRUCT@@0@Z:PROC ; gObjTargetGuildWarCheck
EXTRN	?gObjCheckSelfDefense@@YAXPAVOBJECTSTRUCT@@H@Z:PROC ; gObjCheckSelfDefense
EXTRN	?gObjAttackQ@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjAttackQ
EXTRN	?gObjLifeCheck@@YAXPAVOBJECTSTRUCT@@0HHHHE@Z:PROC ; gObjLifeCheck
EXTRN	?gObjSpriteDamage@@YAXPAVOBJECTSTRUCT@@H@Z:PROC	; gObjSpriteDamage
EXTRN	?gObjSatanSprite@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjSatanSprite
EXTRN	?gObjAngelSprite@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjAngelSprite
EXTRN	?gObjWingSprite@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjWingSprite
EXTRN	?gObjUniriaSprite@@YAHPAVOBJECTSTRUCT@@@Z:PROC	; gObjUniriaSprite
EXTRN	?GCReFillSend@@YAXHGEE@Z:PROC			; GCReFillSend
EXTRN	?GCManaSend@@YAXHFEEG@Z:PROC			; GCManaSend
EXTRN	?GCDamageSend@@YAXHHHHH@Z:PROC			; GCDamageSend
EXTRN	?GCMagicCancelSend@@YAXPAVOBJECTSTRUCT@@E@Z:PROC ; GCMagicCancelSend
EXTRN	?GCActionSend@@YAXPAVOBJECTSTRUCT@@EH@Z:PROC	; GCActionSend
EXTRN	?GCMagicAttackNumberSend@@YAXPAVOBJECTSTRUCT@@EHE@Z:PROC ; GCMagicAttackNumberSend
EXTRN	?Main@cBalanceSystem@@QAEXPAVOBJECTSTRUCT@@0AAH@Z:PROC ; cBalanceSystem::Main
EXTRN	?MakeItemNumber@@YAHHH@Z:PROC			; MakeItemNumber
EXTRN	?GetBattleSoccerGoalMove@@YAHH@Z:PROC		; GetBattleSoccerGoalMove
EXTRN	?gObjMonsterStateProc@@YAXPAVOBJECTSTRUCT@@HH@Z:PROC ; gObjMonsterStateProc
EXTRN	?gObjCallMonsterSetEnemy@@YAHPAVOBJECTSTRUCT@@H@Z:PROC ; gObjCallMonsterSetEnemy
EXTRN	?GetSkillAttr@CMagicDamage@@QAEHH@Z:PROC	; CMagicDamage::GetSkillAttr
EXTRN	??0CObjBaseAttack@@QAE@XZ:PROC			; CObjBaseAttack::CObjBaseAttack
EXTRN	??1CObjBaseAttack@@UAE@XZ:PROC			; CObjBaseAttack::~CObjBaseAttack
EXTRN	?DecreaseArrow@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@@Z:PROC ; CObjBaseAttack::DecreaseArrow
EXTRN	?CheckAttackArea@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0@Z:PROC ; CObjBaseAttack::CheckAttackArea
EXTRN	?PkCheck@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0@Z:PROC ; CObjBaseAttack::PkCheck
EXTRN	?ResistanceCheck@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0H@Z:PROC ; CObjBaseAttack::ResistanceCheck
EXTRN	?MissCheck@CObjBaseAttack@@UAEHPAVOBJECTSTRUCT@@0HHHAAH@Z:PROC ; CObjBaseAttack::MissCheck
EXTRN	?GetTargetDefense@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0AAE@Z:PROC ; CObjBaseAttack::GetTargetDefense
EXTRN	?GetPartyMemberCount@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@@Z:PROC ; CObjBaseAttack::GetPartyMemberCount
EXTRN	??_ECObjAttack@@UAEPAXI@Z:PROC			; CObjAttack::`vector deleting destructor'
EXTRN	?SetTarget@CDarkSpirit@@QAEXH@Z:PROC		; CDarkSpirit::SetTarget
EXTRN	@__security_check_cookie@4:PROC
EXTRN	__except_handler4:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?DefMagicInf@@3PAVCMagicInf@@A:BYTE		; DefMagicInf
EXTRN	?gObj@@3PAVOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?g_GlobalConfig@@3VCGlobalConfig@@A:BYTE	; g_GlobalConfig
EXTRN	?gBalanceSystem@@3VcBalanceSystem@@A:BYTE	; gBalanceSystem
EXTRN	?MagicDamageC@@3VCMagicDamage@@A:BYTE		; MagicDamageC
EXTRN	?gDarkSpirit@@3PAVCDarkSpirit@@A:BYTE		; gDarkSpirit
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?gclassObjAttack@@3VCObjAttack@@A DD 01H DUP (?)	; gclassObjAttack
?g_iChaosCastle_MonsterItems@@3PAY111HA DD 018H DUP (?)	; g_iChaosCastle_MonsterItems
_BSS	ENDS
CRT$XCU	SEGMENT
?g_iChaosCastle_MonsterItems$initializer$@@3P6AXXZA DD FLAT:??__Eg_iChaosCastle_MonsterItems@@YAXXZ ; g_iChaosCastle_MonsterItems$initializer$
CRT$XCU	ENDS
;	COMDAT __real@42c80000
CONST	SEGMENT
__real@42c80000 DD 042c80000r			; 100
CONST	ENDS
;	COMDAT __real@41200000
CONST	SEGMENT
__real@41200000 DD 041200000r			; 10
CONST	ENDS
;	COMDAT __real@40400000
CONST	SEGMENT
__real@40400000 DD 040400000r			; 3
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@00000000
CONST	SEGMENT
__real@00000000 DD 000000000r			; 0
CONST	ENDS
;	COMDAT ??_R2CObjBaseAttack@@8
rdata$r	SEGMENT
??_R2CObjBaseAttack@@8 DD FLAT:??_R1A@?0A@EA@CObjBaseAttack@@8 ; CObjBaseAttack::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CObjBaseAttack@@8
rdata$r	SEGMENT
??_R3CObjBaseAttack@@8 DD 00H				; CObjBaseAttack::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CObjBaseAttack@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCObjBaseAttack@@@8
data$r	SEGMENT
??_R0?AVCObjBaseAttack@@@8 DD FLAT:??_7type_info@@6B@	; CObjBaseAttack `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCObjBaseAttack@@', 00H
data$r	ENDS
;	COMDAT ??_R1A@?0A@EA@CObjBaseAttack@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CObjBaseAttack@@8 DD FLAT:??_R0?AVCObjBaseAttack@@@8 ; CObjBaseAttack::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CObjBaseAttack@@8
rdata$r	ENDS
;	COMDAT ??_R1A@?0A@EA@CObjAttack@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CObjAttack@@8 DD FLAT:??_R0?AVCObjAttack@@@8 ; CObjAttack::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	01H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CObjAttack@@8
rdata$r	ENDS
;	COMDAT ??_R2CObjAttack@@8
rdata$r	SEGMENT
??_R2CObjAttack@@8 DD FLAT:??_R1A@?0A@EA@CObjAttack@@8	; CObjAttack::`RTTI Base Class Array'
	DD	FLAT:??_R1A@?0A@EA@CObjBaseAttack@@8
rdata$r	ENDS
;	COMDAT ??_R3CObjAttack@@8
rdata$r	SEGMENT
??_R3CObjAttack@@8 DD 00H				; CObjAttack::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	02H
	DD	FLAT:??_R2CObjAttack@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCObjAttack@@@8
data$r	SEGMENT
??_R0?AVCObjAttack@@@8 DD FLAT:??_7type_info@@6B@	; CObjAttack `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCObjAttack@@', 00H
data$r	ENDS
;	COMDAT ??_R4CObjAttack@@6B@
rdata$r	SEGMENT
??_R4CObjAttack@@6B@ DD 00H				; CObjAttack::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCObjAttack@@@8
	DD	FLAT:??_R3CObjAttack@@8
rdata$r	ENDS
;	COMDAT ??_C@_0DB@MDAHJJLM@error?9Level1?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Str?3?$CFd?5@
CONST	SEGMENT
??_C@_0DB@MDAHJJLM@error?9Level1?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Str?3?$CFd?5@ DB 'e'
	DB	'rror-Level1 : [%s][%s] Str:%d %d %d %d %d %d %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_7CObjAttack@@6B@
CONST	SEGMENT
??_7CObjAttack@@6B@ DD FLAT:??_R4CObjAttack@@6B@	; CObjAttack::`vftable'
	DD	FLAT:??_ECObjAttack@@UAEPAXI@Z
	DD	FLAT:?MissCheck@CObjBaseAttack@@UAEHPAVOBJECTSTRUCT@@0HHHAAH@Z
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__sehtable$?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z DD 0ffffffe4H
	DD	00H
	DD	0ffffff38H
	DD	00H
	DD	0fffffffeH
	DD	FLAT:$LN26@GetAttackD
	DD	FLAT:$LN22@GetAttackD
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__sehtable$?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z DD 0fffffffeH
	DD	00H
	DD	0ffffff54H
	DD	00H
	DD	0fffffffeH
	DD	FLAT:$LN56@GetAttackD
	DD	FLAT:$LN47@GetAttackD
	DD	0fffffffeH
	DD	FLAT:$LN57@GetAttackD
	DD	FLAT:$LN51@GetAttackD
xdata$x	ENDS
CRT$XCU	SEGMENT
?gclassObjAttack$initializer$@@3P6AXXZA DD FLAT:??__EgclassObjAttack@@YAXXZ ; gclassObjAttack$initializer$
CRT$XCU	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??__FgclassObjAttack@@YAXXZ
text$yd	SEGMENT
??__FgclassObjAttack@@YAXXZ PROC			; `dynamic atexit destructor for 'gclassObjAttack'', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	b9 00 00 00 00	 mov	 ecx, OFFSET ?gclassObjAttack@@3VCObjAttack@@A ; gclassObjAttack
  0000e	e8 00 00 00 00	 call	 ??1CObjAttack@@UAE@XZ	; CObjAttack::~CObjAttack
  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
??__FgclassObjAttack@@YAXXZ ENDP			; `dynamic atexit destructor for 'gclassObjAttack''
text$yd	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ??__EgclassObjAttack@@YAXXZ
text$di	SEGMENT
??__EgclassObjAttack@@YAXXZ PROC			; `dynamic initializer for 'gclassObjAttack'', COMDAT

; 64   : CObjAttack gclassObjAttack;

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	b9 00 00 00 00	 mov	 ecx, OFFSET ?gclassObjAttack@@3VCObjAttack@@A ; gclassObjAttack
  0000e	e8 00 00 00 00	 call	 ??0CObjAttack@@QAE@XZ	; CObjAttack::CObjAttack
  00013	68 00 00 00 00	 push	 OFFSET ??__FgclassObjAttack@@YAXXZ ; `dynamic atexit destructor for 'gclassObjAttack''
  00018	e8 00 00 00 00	 call	 _atexit
  0001d	83 c4 04	 add	 esp, 4
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??__EgclassObjAttack@@YAXXZ ENDP			; `dynamic initializer for 'gclassObjAttack''
text$di	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ChaosCastle.h
;	COMDAT ??__Eg_iChaosCastle_MonsterItems@@YAXXZ
text$di	SEGMENT
??__Eg_iChaosCastle_MonsterItems@@YAXXZ PROC		; `dynamic initializer for 'g_iChaosCastle_MonsterItems'', COMDAT

; 359  : };

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 337  : 	MAKE_ITEMNUM(14, 13),		1,								// 1번 캐슬 - 축석

  00009	6a 0d		 push	 13			; 0000000dH
  0000b	6a 0e		 push	 14			; 0000000eH
  0000d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00012	83 c4 08	 add	 esp, 8
  00015	a3 00 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA, eax
  0001a	c7 05 04 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+4, 1

; 338  : 	MAKE_ITEMNUM(14, 14),		2,								// 1번 캐슬 - 영석

  00024	6a 0e		 push	 14			; 0000000eH
  00026	6a 0e		 push	 14			; 0000000eH
  00028	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0002d	83 c4 08	 add	 esp, 8
  00030	a3 08 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+8, eax
  00035	c7 05 0c 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+12, 2

; 339  : 	
; 340  : 	MAKE_ITEMNUM(14, 13),		1,								// 2번 캐슬 - 축석

  0003f	6a 0d		 push	 13			; 0000000dH
  00041	6a 0e		 push	 14			; 0000000eH
  00043	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00048	83 c4 08	 add	 esp, 8
  0004b	a3 10 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+16, eax
  00050	c7 05 14 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+20, 1

; 341  : 	MAKE_ITEMNUM(14, 14),		3,								// 2번 캐슬 - 영석

  0005a	6a 0e		 push	 14			; 0000000eH
  0005c	6a 0e		 push	 14			; 0000000eH
  0005e	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00063	83 c4 08	 add	 esp, 8
  00066	a3 18 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+24, eax
  0006b	c7 05 1c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+28, 3

; 342  : 	
; 343  : 	MAKE_ITEMNUM(14, 13),		1,								// 3번 캐슬 - 축석

  00075	6a 0d		 push	 13			; 0000000dH
  00077	6a 0e		 push	 14			; 0000000eH
  00079	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0007e	83 c4 08	 add	 esp, 8
  00081	a3 20 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+32, eax
  00086	c7 05 24 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+36, 1

; 344  : 	MAKE_ITEMNUM(14, 14),		3,								// 3번 캐슬 - 영석

  00090	6a 0e		 push	 14			; 0000000eH
  00092	6a 0e		 push	 14			; 0000000eH
  00094	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00099	83 c4 08	 add	 esp, 8
  0009c	a3 28 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+40, eax
  000a1	c7 05 2c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+44, 3

; 345  : 	
; 346  : 	MAKE_ITEMNUM(14, 13),		2,								// 4번 캐슬 - 축석

  000ab	6a 0d		 push	 13			; 0000000dH
  000ad	6a 0e		 push	 14			; 0000000eH
  000af	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000b4	83 c4 08	 add	 esp, 8
  000b7	a3 30 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+48, eax
  000bc	c7 05 34 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+52, 2

; 347  : 	MAKE_ITEMNUM(14, 14),		2,								// 4번 캐슬 - 영석

  000c6	6a 0e		 push	 14			; 0000000eH
  000c8	6a 0e		 push	 14			; 0000000eH
  000ca	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000cf	83 c4 08	 add	 esp, 8
  000d2	a3 38 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+56, eax
  000d7	c7 05 3c 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+60, 2

; 348  : 	
; 349  : 	MAKE_ITEMNUM(14, 13),		2,								// 5번 캐슬 - 축석

  000e1	6a 0d		 push	 13			; 0000000dH
  000e3	6a 0e		 push	 14			; 0000000eH
  000e5	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000ea	83 c4 08	 add	 esp, 8
  000ed	a3 40 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+64, eax
  000f2	c7 05 44 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+68, 2

; 350  : 	MAKE_ITEMNUM(14, 14),		3,								// 5번 캐슬 - 영석

  000fc	6a 0e		 push	 14			; 0000000eH
  000fe	6a 0e		 push	 14			; 0000000eH
  00100	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00105	83 c4 08	 add	 esp, 8
  00108	a3 48 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+72, eax
  0010d	c7 05 4c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+76, 3

; 351  : 	
; 352  : 	MAKE_ITEMNUM(14, 13),		2,								// 6번 캐슬 - 축석

  00117	6a 0d		 push	 13			; 0000000dH
  00119	6a 0e		 push	 14			; 0000000eH
  0011b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00120	83 c4 08	 add	 esp, 8
  00123	a3 50 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+80, eax
  00128	c7 05 54 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+84, 2

; 353  : 	MAKE_ITEMNUM(14, 14),		3,								// 6번 캐슬 - 영석

  00132	6a 0e		 push	 14			; 0000000eH
  00134	6a 0e		 push	 14			; 0000000eH
  00136	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0013b	83 c4 08	 add	 esp, 8
  0013e	a3 58 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+88, eax
  00143	c7 05 5c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+92, 3
  0014d	5f		 pop	 edi
  0014e	5e		 pop	 esi
  0014f	5b		 pop	 ebx
  00150	8b e5		 mov	 esp, ebp
  00152	5d		 pop	 ebp
  00153	c3		 ret	 0
??__Eg_iChaosCastle_MonsterItems@@YAXXZ ENDP		; `dynamic initializer for 'g_iChaosCastle_MonsterItems''
text$di	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?gObjDarkHorse@@YAHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_Denorant$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?gObjDarkHorse@@YAHPAVOBJECTSTRUCT@@@Z PROC		; gObjDarkHorse, COMDAT

; 3806 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 3807 : 	if( lpObj->Type != OBJTYPE_CHARACTER ) return FALSE;

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000c	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00010	83 f9 01	 cmp	 ecx, 1
  00013	74 04		 je	 SHORT $LN2@gObjDarkHo
  00015	33 c0		 xor	 eax, eax
  00017	eb 63		 jmp	 SHORT $LN1@gObjDarkHo
$LN2@gObjDarkHo:

; 3808 : 
; 3809 : 	// 아이템이 없으면 종료
; 3810 : 	if( lpObj->pInventory[EQUIPMENT_HELPER].IsItem() == FALSE ) return FALSE;

  00019	b9 a8 00 00 00	 mov	 ecx, 168		; 000000a8H
  0001e	c1 e1 03	 shl	 ecx, 3
  00021	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00024	03 88 5c 0c 00
	00		 add	 ecx, DWORD PTR [eax+3164]
  0002a	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0002f	85 c0		 test	 eax, eax
  00031	75 04		 jne	 SHORT $LN3@gObjDarkHo
  00033	33 c0		 xor	 eax, eax
  00035	eb 45		 jmp	 SHORT $LN1@gObjDarkHo
$LN3@gObjDarkHo:

; 3811 : 
; 3812 : 	CItem	*Denorant = &lpObj->pInventory[EQUIPMENT_HELPER];		

  00037	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0003c	c1 e0 03	 shl	 eax, 3
  0003f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00042	03 81 5c 0c 00
	00		 add	 eax, DWORD PTR [ecx+3164]
  00048	89 45 fc	 mov	 DWORD PTR _Denorant$[ebp], eax

; 3813 : 	
; 3814 : 	if( Denorant->m_Type == MAKE_ITEMNUM(13,4) )

  0004b	8b 45 fc	 mov	 eax, DWORD PTR _Denorant$[ebp]
  0004e	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00052	6a 04		 push	 4
  00054	6a 0d		 push	 13			; 0000000dH
  00056	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0005b	83 c4 08	 add	 esp, 8
  0005e	3b f0		 cmp	 esi, eax
  00060	75 18		 jne	 SHORT $LN5@gObjDarkHo

; 3815 : 	{
; 3816 : 		if( Denorant->m_Durability > 0 )

  00062	8b 45 fc	 mov	 eax, DWORD PTR _Denorant$[ebp]
  00065	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  0006a	0f 2f 05 00 00
	00 00		 comiss	 xmm0, DWORD PTR __real@00000000
  00071	76 07		 jbe	 SHORT $LN5@gObjDarkHo

; 3817 : 		{
; 3818 : 			return TRUE;

  00073	b8 01 00 00 00	 mov	 eax, 1
  00078	eb 02		 jmp	 SHORT $LN1@gObjDarkHo
$LN5@gObjDarkHo:

; 3819 : 		}
; 3820 : 	}
; 3821 : 	return FALSE;

  0007a	33 c0		 xor	 eax, eax
$LN1@gObjDarkHo:

; 3822 : }

  0007c	5f		 pop	 edi
  0007d	5e		 pop	 esi
  0007e	5b		 pop	 ebx
  0007f	8b e5		 mov	 esp, ebp
  00081	5d		 pop	 ebp
  00082	c3		 ret	 0
?gObjDarkHorse@@YAHPAVOBJECTSTRUCT@@@Z ENDP		; gObjDarkHorse
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?gObjDenorantSprite@@YAHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_Denorant$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?gObjDenorantSprite@@YAHPAVOBJECTSTRUCT@@@Z PROC	; gObjDenorantSprite, COMDAT

; 3785 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 3786 : 	if( lpObj->Type != OBJTYPE_CHARACTER ) return FALSE;

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000c	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00010	83 f9 01	 cmp	 ecx, 1
  00013	74 04		 je	 SHORT $LN2@gObjDenora
  00015	33 c0		 xor	 eax, eax
  00017	eb 63		 jmp	 SHORT $LN1@gObjDenora
$LN2@gObjDenora:

; 3787 : 
; 3788 : 	// 아이템이 없으면 종료
; 3789 : 	if( lpObj->pInventory[EQUIPMENT_HELPER].IsItem() == FALSE ) return FALSE;

  00019	b9 a8 00 00 00	 mov	 ecx, 168		; 000000a8H
  0001e	c1 e1 03	 shl	 ecx, 3
  00021	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00024	03 88 5c 0c 00
	00		 add	 ecx, DWORD PTR [eax+3164]
  0002a	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0002f	85 c0		 test	 eax, eax
  00031	75 04		 jne	 SHORT $LN3@gObjDenora
  00033	33 c0		 xor	 eax, eax
  00035	eb 45		 jmp	 SHORT $LN1@gObjDenora
$LN3@gObjDenora:

; 3790 : 
; 3791 : 	CItem	*Denorant = &lpObj->pInventory[EQUIPMENT_HELPER];		

  00037	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0003c	c1 e0 03	 shl	 eax, 3
  0003f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00042	03 81 5c 0c 00
	00		 add	 eax, DWORD PTR [ecx+3164]
  00048	89 45 fc	 mov	 DWORD PTR _Denorant$[ebp], eax

; 3792 : 	
; 3793 : 	if( Denorant->m_Type == MAKE_ITEMNUM(13,3) )

  0004b	8b 45 fc	 mov	 eax, DWORD PTR _Denorant$[ebp]
  0004e	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00052	6a 03		 push	 3
  00054	6a 0d		 push	 13			; 0000000dH
  00056	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0005b	83 c4 08	 add	 esp, 8
  0005e	3b f0		 cmp	 esi, eax
  00060	75 18		 jne	 SHORT $LN5@gObjDenora

; 3794 : 	{
; 3795 : 		if( Denorant->m_Durability > 0 )

  00062	8b 45 fc	 mov	 eax, DWORD PTR _Denorant$[ebp]
  00065	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  0006a	0f 2f 05 00 00
	00 00		 comiss	 xmm0, DWORD PTR __real@00000000
  00071	76 07		 jbe	 SHORT $LN5@gObjDenora

; 3796 : 		{
; 3797 : 			return TRUE;

  00073	b8 01 00 00 00	 mov	 eax, 1
  00078	eb 02		 jmp	 SHORT $LN1@gObjDenora
$LN5@gObjDenora:

; 3798 : 		}
; 3799 : 	}
; 3800 : 	return FALSE;

  0007a	33 c0		 xor	 eax, eax
$LN1@gObjDenora:

; 3801 : }

  0007c	5f		 pop	 edi
  0007d	5e		 pop	 esi
  0007e	5b		 pop	 ebx
  0007f	8b e5		 mov	 esp, ebp
  00081	5d		 pop	 ebp
  00082	c3		 ret	 0
?gObjDenorantSprite@@YAHPAVOBJECTSTRUCT@@@Z ENDP	; gObjDenorantSprite
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCObjAttack@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCObjAttack@@UAEPAXI@Z PROC				; CObjAttack::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CObjAttack@@UAE@XZ	; CObjAttack::~CObjAttack
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0e		 je	 SHORT $LN2@scalar
  0001c	6a 04		 push	 4
  0001e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00021	50		 push	 eax
  00022	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00027	83 c4 08	 add	 esp, 8
$LN2@scalar:
  0002a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c2 04 00	 ret	 4
??_GCObjAttack@@UAEPAXI@Z ENDP				; CObjAttack::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z
_TEXT	SEGMENT
_subd$ = -120						; size = 4
_damage$2 = -116					; size = 4
_Right$ = -112						; size = 4
_SkillAttr$3 = -108					; size = 4
_SkillAttr$4 = -104					; size = 4
_CountDamage$5 = -100					; size = 4
_SkillHellFire2CountDamageTable$6 = -96			; size = 52
_ad$ = -44						; size = 4
_damagemax$ = -40					; size = 4
_damagemin$ = -36					; size = 4
_this$ = -32						; size = 4
__$ArrayPad$ = -28					; size = 4
__$SEHRec$ = -24					; size = 24
_lpObj$ = 8						; size = 4
_targetDefense$ = 12					; size = 4
_lpMagic$ = 16						; size = 4
_effect$ = 20						; size = 4
_bIsOnDuel$ = 24					; size = 4
?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z PROC ; CObjAttack::GetAttackDamageWizard, COMDAT
; _this$ = ecx

; 3537 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a fe		 push	 -2			; fffffffeH
  00005	68 00 00 00 00	 push	 OFFSET __sehtable$?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z
  0000a	68 00 00 00 00	 push	 OFFSET __except_handler4
  0000f	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00015	50		 push	 eax
  00016	81 c4 58 ff ff
	ff		 add	 esp, -168		; ffffff58H
  0001c	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00021	31 45 f8	 xor	 DWORD PTR __$SEHRec$[ebp+16], eax
  00024	33 c5		 xor	 eax, ebp
  00026	89 45 e4	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00029	53		 push	 ebx
  0002a	56		 push	 esi
  0002b	57		 push	 edi
  0002c	50		 push	 eax
  0002d	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  00030	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00036	89 65 e8	 mov	 DWORD PTR __$SEHRec$[ebp], esp
  00039	89 4d e0	 mov	 DWORD PTR _this$[ebp], ecx

; 3538 : #ifdef DUEL_SYSTEM_20031028
; 3539 : 	#ifdef ADD_SHIELD_POINT_01_20060403
; 3540 : 		if( g_ShieldSystemOn == TRUE )
; 3541 : 		{
; 3542 : 			if( bIsOnDuel == TRUE )
; 3543 : 			{
; 3544 : 				bIsOnDuel = FALSE;
; 3545 : 			}
; 3546 : 		}
; 3547 : 	#endif
; 3548 : #endif
; 3549 : 
; 3550 : 	int damagemin;
; 3551 : 	int damagemax;
; 3552 : 
; 3553 : #ifdef ADD_SKILL_WITH_COMBO
; 3554 : 	int ad;
; 3555 : 	if( lpMagic->m_Skill == AT_SKILL_EXPHELL )

  0003c	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  0003f	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  00043	83 f9 28	 cmp	 ecx, 40			; 00000028H
  00046	0f 85 3b 01 00
	00		 jne	 $LN2@GetAttackD

; 3556 : 	{	// 헬파이어의 경우 추가 데미지 계산이 있어야 된다
; 3557 : 		if( lpObj->SkillHellFire2Count >= 0 )

  0004c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0004f	0f b6 88 1d 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3869]
  00056	85 c9		 test	 ecx, ecx
  00058	0f 8c 24 01 00
	00		 jl	 $LN7@GetAttackD

; 3558 : 		{	
; 3559 : 			int	SkillHellFire2CountDamageTable[] = {0, 20,50,99,160,225,325,425,550,700,880,1090,1320};

  0005e	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp], 0
  00065	c7 45 a4 14 00
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+4], 20 ; 00000014H
  0006c	c7 45 a8 32 00
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+8], 50 ; 00000032H
  00073	c7 45 ac 63 00
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+12], 99 ; 00000063H
  0007a	c7 45 b0 a0 00
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+16], 160 ; 000000a0H
  00081	c7 45 b4 e1 00
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+20], 225 ; 000000e1H
  00088	c7 45 b8 45 01
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+24], 325 ; 00000145H
  0008f	c7 45 bc a9 01
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+28], 425 ; 000001a9H
  00096	c7 45 c0 26 02
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+32], 550 ; 00000226H
  0009d	c7 45 c4 bc 02
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+36], 700 ; 000002bcH
  000a4	c7 45 c8 70 03
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+40], 880 ; 00000370H
  000ab	c7 45 cc 42 04
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+44], 1090 ; 00000442H
  000b2	c7 45 d0 28 05
	00 00		 mov	 DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+48], 1320 ; 00000528H

; 3560 : 
; 3561 : 			int CountDamage;
; 3562 : 			
; 3563 : 			if( lpObj->SkillHellFire2Count > 12 )

  000b9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000bc	0f b6 88 1d 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3869]
  000c3	83 f9 0c	 cmp	 ecx, 12			; 0000000cH
  000c6	7e 09		 jle	 SHORT $LN5@GetAttackD

; 3564 : 				CountDamage = 0;

  000c8	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR _CountDamage$5[ebp], 0
  000cf	eb 11		 jmp	 SHORT $LN6@GetAttackD
$LN5@GetAttackD:

; 3565 : 			else
; 3566 : 				CountDamage = SkillHellFire2CountDamageTable[lpObj->SkillHellFire2Count];

  000d1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d4	0f b6 88 1d 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3869]
  000db	8b 54 8d a0	 mov	 edx, DWORD PTR _SkillHellFire2CountDamageTable$6[ebp+ecx*4]
  000df	89 55 9c	 mov	 DWORD PTR _CountDamage$5[ebp], edx
$LN6@GetAttackD:

; 3567 : 
; 3568 : 			ad = (lpObj->Strength+lpObj->AddStrength)/2+CountDamage;

  000e2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e5	0f b7 80 b4 00
	00 00		 movzx	 eax, WORD PTR [eax+180]
  000ec	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000ef	0f b7 91 e0 00
	00 00		 movzx	 edx, WORD PTR [ecx+224]
  000f6	03 c2		 add	 eax, edx
  000f8	99		 cdq
  000f9	2b c2		 sub	 eax, edx
  000fb	d1 f8		 sar	 eax, 1
  000fd	03 45 9c	 add	 eax, DWORD PTR _CountDamage$5[ebp]
  00100	89 45 d4	 mov	 DWORD PTR _ad$[ebp], eax

; 3569 : 
; 3570 : 			damagemin = ad+(lpObj->m_MagicDamageMin);

  00103	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00106	8b 4d d4	 mov	 ecx, DWORD PTR _ad$[ebp]
  00109	03 88 bc 02 00
	00		 add	 ecx, DWORD PTR [eax+700]
  0010f	89 4d dc	 mov	 DWORD PTR _damagemin$[ebp], ecx

; 3571 : 			damagemax = ad+(lpObj->m_MagicDamageMax);

  00112	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00115	8b 4d d4	 mov	 ecx, DWORD PTR _ad$[ebp]
  00118	03 88 c0 02 00
	00		 add	 ecx, DWORD PTR [eax+704]
  0011e	89 4d d8	 mov	 DWORD PTR _damagemax$[ebp], ecx

; 3572 : 
; 3573 : 		// 세트옵션 : 스킬 공격력 증가
; 3574 : 		damagemin += lpObj->SetOpAddSkillAttack;

  00121	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00124	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  0012b	03 4d dc	 add	 ecx, DWORD PTR _damagemin$[ebp]
  0012e	89 4d dc	 mov	 DWORD PTR _damagemin$[ebp], ecx

; 3575 : 		damagemax += lpObj->SetOpAddSkillAttack;

  00131	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00134	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  0013b	03 4d d8	 add	 ecx, DWORD PTR _damagemax$[ebp]
  0013e	89 4d d8	 mov	 DWORD PTR _damagemax$[ebp], ecx

; 3576 : 
; 3577 : 		int SkillAttr = MagicDamageC.GetSkillAttr(lpMagic->m_Skill);

  00141	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00144	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  00148	51		 push	 ecx
  00149	b9 00 00 00 00	 mov	 ecx, OFFSET ?MagicDamageC@@3VCMagicDamage@@A ; MagicDamageC
  0014e	e8 00 00 00 00	 call	 ?GetSkillAttr@CMagicDamage@@QAEHH@Z ; CMagicDamage::GetSkillAttr
  00153	89 45 98	 mov	 DWORD PTR _SkillAttr$4[ebp], eax

; 3578 : 		if( SkillAttr != -1 )

  00156	83 7d 98 ff	 cmp	 DWORD PTR _SkillAttr$4[ebp], -1
  0015a	74 26		 je	 SHORT $LN7@GetAttackD

; 3579 : 		{
; 3580 : #ifdef UPDATE_GM_FUNCTION_20070228	// GM 캐릭터 변신반지 착용 시 Resistance값은 MAX값
; 3581 : 			if( (lpObj->Authority&AUTHORITY_EVENT_GM) == AUTHORITY_EVENT_GM  
; 3582 : 				&& ( lpObj->pInventory[EQUIPMENT_RING_RIGHT].m_Type == MAKE_ITEMNUM( 13, 42 )  
; 3583 : 				|| lpObj->pInventory[EQUIPMENT_RING_LEFT].m_Type == MAKE_ITEMNUM( 13, 42 ) ) )
; 3584 : 			{
; 3585 : 				damagemin += 255;
; 3586 : 				damagemax += 255;
; 3587 : 			}
; 3588 : #else
; 3589 : 			damagemin += lpObj->m_AddResistance[SkillAttr];

  0015c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0015f	03 45 98	 add	 eax, DWORD PTR _SkillAttr$4[ebp]
  00162	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  00169	03 4d dc	 add	 ecx, DWORD PTR _damagemin$[ebp]
  0016c	89 4d dc	 mov	 DWORD PTR _damagemin$[ebp], ecx

; 3590 : 			damagemax += lpObj->m_AddResistance[SkillAttr];

  0016f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00172	03 45 98	 add	 eax, DWORD PTR _SkillAttr$4[ebp]
  00175	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  0017c	03 4d d8	 add	 ecx, DWORD PTR _damagemax$[ebp]
  0017f	89 4d d8	 mov	 DWORD PTR _damagemax$[ebp], ecx
$LN7@GetAttackD:

; 3591 : #endif
; 3592 : 		}
; 3593 : 
; 3594 : 
; 3595 : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3596 : 			// 조화의보석 강화 아이템 옵션 : 스킬 공격력 증가
; 3597 : 			damagemin += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3598 : 			damagemax += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3599 : #endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3600 : 		}
; 3601 : 	}

  00182	e9 90 00 00 00	 jmp	 $LN8@GetAttackD
$LN2@GetAttackD:

; 3602 : 	else
; 3603 : 	{
; 3604 : 		ad = lpMagic->GetDamage();

  00187	8b 4d 10	 mov	 ecx, DWORD PTR _lpMagic$[ebp]
  0018a	e8 00 00 00 00	 call	 ?GetDamage@CMagicInf@@QAEHXZ ; CMagicInf::GetDamage
  0018f	89 45 d4	 mov	 DWORD PTR _ad$[ebp], eax

; 3605 : 		damagemin = lpMagic->m_DamageMin+(lpObj->m_MagicDamageMin);

  00192	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00195	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  00198	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0019b	03 8a bc 02 00
	00		 add	 ecx, DWORD PTR [edx+700]
  001a1	89 4d dc	 mov	 DWORD PTR _damagemin$[ebp], ecx

; 3606 : 		damagemax = lpMagic->m_DamageMax+(lpObj->m_MagicDamageMax);

  001a4	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  001a7	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  001aa	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001ad	03 8a c0 02 00
	00		 add	 ecx, DWORD PTR [edx+704]
  001b3	89 4d d8	 mov	 DWORD PTR _damagemax$[ebp], ecx

; 3607 : 
; 3608 : 		// 세트옵션 : 스킬 공격력 증가
; 3609 : 		damagemin += lpObj->SetOpAddSkillAttack;

  001b6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001b9	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  001c0	03 4d dc	 add	 ecx, DWORD PTR _damagemin$[ebp]
  001c3	89 4d dc	 mov	 DWORD PTR _damagemin$[ebp], ecx

; 3610 : 		damagemax += lpObj->SetOpAddSkillAttack;

  001c6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001c9	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  001d0	03 4d d8	 add	 ecx, DWORD PTR _damagemax$[ebp]
  001d3	89 4d d8	 mov	 DWORD PTR _damagemax$[ebp], ecx

; 3611 : 
; 3612 : 		int SkillAttr = MagicDamageC.GetSkillAttr(lpMagic->m_Skill);

  001d6	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  001d9	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  001dd	51		 push	 ecx
  001de	b9 00 00 00 00	 mov	 ecx, OFFSET ?MagicDamageC@@3VCMagicDamage@@A ; MagicDamageC
  001e3	e8 00 00 00 00	 call	 ?GetSkillAttr@CMagicDamage@@QAEHH@Z ; CMagicDamage::GetSkillAttr
  001e8	89 45 94	 mov	 DWORD PTR _SkillAttr$3[ebp], eax

; 3613 : 		if( SkillAttr != -1 )

  001eb	83 7d 94 ff	 cmp	 DWORD PTR _SkillAttr$3[ebp], -1
  001ef	74 26		 je	 SHORT $LN8@GetAttackD

; 3614 : 		{
; 3615 : #ifdef UPDATE_GM_FUNCTION_20070228	// GM 캐릭터 변신반지 착용 시 Resistance값은 MAX값
; 3616 : 			if( (lpObj->Authority&AUTHORITY_EVENT_GM) == AUTHORITY_EVENT_GM  
; 3617 : 				&& ( lpObj->pInventory[EQUIPMENT_RING_RIGHT].m_Type == MAKE_ITEMNUM( 13, 42 )  
; 3618 : 				|| lpObj->pInventory[EQUIPMENT_RING_LEFT].m_Type == MAKE_ITEMNUM( 13, 42 ) ) )
; 3619 : 			{
; 3620 : 				damagemin += 255;
; 3621 : 				damagemax += 255;
; 3622 : 			}
; 3623 : #else
; 3624 : 			damagemin += lpObj->m_AddResistance[SkillAttr];

  001f1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001f4	03 45 94	 add	 eax, DWORD PTR _SkillAttr$3[ebp]
  001f7	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  001fe	03 4d dc	 add	 ecx, DWORD PTR _damagemin$[ebp]
  00201	89 4d dc	 mov	 DWORD PTR _damagemin$[ebp], ecx

; 3625 : 			damagemax += lpObj->m_AddResistance[SkillAttr];

  00204	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00207	03 45 94	 add	 eax, DWORD PTR _SkillAttr$3[ebp]
  0020a	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  00211	03 4d d8	 add	 ecx, DWORD PTR _damagemax$[ebp]
  00214	89 4d d8	 mov	 DWORD PTR _damagemax$[ebp], ecx
$LN8@GetAttackD:

; 3626 : #endif
; 3627 : 		}
; 3628 : 
; 3629 : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3630 : 		// 조화의보석 강화 아이템 옵션 : 스킬 공격력 증가
; 3631 : 		damagemin += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3632 : 		damagemax += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3633 : #endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3634 : 
; 3635 : 	}
; 3636 : #else
; 3637 : 	int ad = lpMagic->GetDamage();
; 3638 : 	damagemin = lpMagic->m_DamageMin+(lpObj->m_MagicDamageMin);
; 3639 : 	damagemax = lpMagic->m_DamageMax+(lpObj->m_MagicDamageMax);
; 3640 : #endif	// ADD_SKILL_WITH_COMBO
; 3641 : 
; 3642 : 	CItem	*Right = &lpObj->pInventory[EQUIPMENT_WEAPON_RIGHT];

  00217	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0021c	6b c8 00	 imul	 ecx, eax, 0
  0021f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00222	03 8a 5c 0c 00
	00		 add	 ecx, DWORD PTR [edx+3164]
  00228	89 4d 90	 mov	 DWORD PTR _Right$[ebp], ecx

; 3643 : 
; 3644 : 
; 3645 : #ifdef ADD_ITEM
; 3646 : 	if( Right->IsItem() && 

  0022b	8b 4d 90	 mov	 ecx, DWORD PTR _Right$[ebp]
  0022e	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00233	85 c0		 test	 eax, eax
  00235	0f 84 e3 00 00
	00		 je	 $LN12@GetAttackD
  0023b	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  0023e	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00242	6a 00		 push	 0
  00244	6a 05		 push	 5
  00246	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0024b	83 c4 08	 add	 esp, 8
  0024e	3b f0		 cmp	 esi, eax
  00250	7c 17		 jl	 SHORT $LN11@GetAttackD
  00252	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  00255	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00259	6a 20		 push	 32			; 00000020H
  0025b	6a 05		 push	 5
  0025d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00262	83 c4 08	 add	 esp, 8
  00265	3b f0		 cmp	 esi, eax
  00267	7c 45		 jl	 SHORT $LN10@GetAttackD
$LN11@GetAttackD:
  00269	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  0026c	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00270	6a 1f		 push	 31			; 0000001fH
  00272	6a 00		 push	 0
  00274	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00279	83 c4 08	 add	 esp, 8
  0027c	3b f0		 cmp	 esi, eax
  0027e	74 2e		 je	 SHORT $LN10@GetAttackD
  00280	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  00283	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00287	6a 15		 push	 21			; 00000015H
  00289	6a 00		 push	 0
  0028b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00290	83 c4 08	 add	 esp, 8
  00293	3b f0		 cmp	 esi, eax
  00295	74 17		 je	 SHORT $LN10@GetAttackD
  00297	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  0029a	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  0029e	6a 19		 push	 25			; 00000019H
  002a0	6a 00		 push	 0
  002a2	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  002a7	83 c4 08	 add	 esp, 8
  002aa	3b f0		 cmp	 esi, eax
  002ac	75 70		 jne	 SHORT $LN12@GetAttackD
$LN10@GetAttackD:

; 3647 : 	    ( 
; 3648 : 		  ( Right->m_Type >= MAKE_ITEMNUM(5,0) && Right->m_Type < MAKE_ITEMNUM(5,MAX_ITEM_INDEX) ) // 지팡이류
; 3649 : 		  || Right->m_Type == MAKE_ITEMNUM(0,31)  // 데스 브로드
; 3650 : 	
; 3651 : 	#ifdef ADD_CRITICAL_DAMAGE_OF_DEATH_BLADE_20050419
; 3652 : 		  || Right->m_Type == MAKE_ITEMNUM(0,21)  // 데스 블레이드
; 3653 : 	#endif // ADD_CRITICAL_DAMAGE_OF_DEATH_BLADE_20050419
; 3654 : 		  
; 3655 : 	#ifdef ADD_NEW_ITEM_01_20050823
; 3656 : 		  || Right->m_Type == MAKE_ITEMNUM(0,23)  // 익스플로전 블레이드
; 3657 : 	#endif
; 3658 : 		  
; 3659 : 	#ifdef MODIFY_350ITEM_BUGFIX2_20060823
; 3660 : 		  || Right->m_Type == MAKE_ITEMNUM(0,25)  // 350아이템. 소드댄서
; 3661 : 	#endif
; 3662 : 		  
; 3663 : 	#ifdef MODIFY_SEASON4_UPDATE_BUGFIX_01_20080722
; 3664 : 		  || Right->m_Type == MAKE_ITEMNUM( 0, 28 ) // 룬바스타드
; 3665 : 	#endif // MODIFY_SEASON4_UPDATE_BUGFIX_01_20080722
; 3666 : 		)
; 3667 : 	  )
; 3668 : 
; 3669 : #else // else ADD_ITEM
; 3670 : 	if( Right->IsItem() && (Right->m_Type >= MAKE_ITEMNUM(5,0) && Right->m_Type < MAKE_ITEMNUM(5,MAX_ITEM_INDEX)) )
; 3671 : #endif // ADD_ITEM
; 3672 : 	{
; 3673 : 
; 3674 : 		if( Right->m_IsValidItem )

  002ae	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  002b1	0f b6 88 94 00
	00 00		 movzx	 ecx, BYTE PTR [eax+148]
  002b8	85 c9		 test	 ecx, ecx
  002ba	74 62		 je	 SHORT $LN12@GetAttackD

; 3675 : 		{
; 3676 : 			int damage = (Right->m_Magic/2)+(Right->m_Level*2);

  002bc	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  002bf	0f b7 40 20	 movzx	 eax, WORD PTR [eax+32]
  002c3	99		 cdq
  002c4	2b c2		 sub	 eax, edx
  002c6	d1 f8		 sar	 eax, 1
  002c8	8b 4d 90	 mov	 ecx, DWORD PTR _Right$[ebp]
  002cb	0f bf 51 08	 movsx	 edx, WORD PTR [ecx+8]
  002cf	8d 04 50	 lea	 eax, DWORD PTR [eax+edx*2]
  002d2	89 45 8c	 mov	 DWORD PTR _damage$2[ebp], eax

; 3677 : 			// 지팡이는 마력증가 계산량에서 내구력 감소에 대한 패널티가 적용된다
; 3678 : 			damage -= (WORD)(damage*Right->m_CurrentDurabilityState);		

  002d5	f3 0f 2a 45 8c	 cvtsi2ss xmm0, DWORD PTR _damage$2[ebp]
  002da	8b 45 90	 mov	 eax, DWORD PTR _Right$[ebp]
  002dd	f3 0f 59 80 8c
	00 00 00	 mulss	 xmm0, DWORD PTR [eax+140]
  002e5	f3 0f 2c c8	 cvttss2si ecx, xmm0
  002e9	0f b7 d1	 movzx	 edx, cx
  002ec	8b 45 8c	 mov	 eax, DWORD PTR _damage$2[ebp]
  002ef	2b c2		 sub	 eax, edx
  002f1	89 45 8c	 mov	 DWORD PTR _damage$2[ebp], eax

; 3679 : 
; 3680 : 			damagemin += damagemin * damage / 100;

  002f4	8b 45 dc	 mov	 eax, DWORD PTR _damagemin$[ebp]
  002f7	0f af 45 8c	 imul	 eax, DWORD PTR _damage$2[ebp]
  002fb	99		 cdq
  002fc	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00301	f7 f9		 idiv	 ecx
  00303	03 45 dc	 add	 eax, DWORD PTR _damagemin$[ebp]
  00306	89 45 dc	 mov	 DWORD PTR _damagemin$[ebp], eax

; 3681 : 			damagemax += damagemax * damage / 100;

  00309	8b 45 d8	 mov	 eax, DWORD PTR _damagemax$[ebp]
  0030c	0f af 45 8c	 imul	 eax, DWORD PTR _damage$2[ebp]
  00310	99		 cdq
  00311	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00316	f7 f9		 idiv	 ecx
  00318	03 45 d8	 add	 eax, DWORD PTR _damagemax$[ebp]
  0031b	89 45 d8	 mov	 DWORD PTR _damagemax$[ebp], eax
$LN12@GetAttackD:

; 3682 : 		}
; 3683 : 	}
; 3684 : 
; 3685 : 	int subd = damagemax-damagemin;

  0031e	8b 45 d8	 mov	 eax, DWORD PTR _damagemax$[ebp]
  00321	2b 45 dc	 sub	 eax, DWORD PTR _damagemin$[ebp]
  00324	89 45 88	 mov	 DWORD PTR _subd$[ebp], eax

; 3686 : 	
; 3687 : 	__try

  00327	9b		 fwait
  00328	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$SEHRec$[ebp+20], 0

; 3688 : 	{
; 3689 : #ifdef DUEL_SYSTEM_20031028
; 3690 : // 		if (bIsOnDuel)
; 3691 : // 			ad = (damagemin+(rand()%(subd+1))) * 60 / 100 -targetDefense;
; 3692 : // 		else
; 3693 : #endif
; 3694 : 			ad = (damagemin+(rand()%(subd+1)))-targetDefense;

  0032f	e8 00 00 00 00	 call	 _rand
  00334	8b 4d 88	 mov	 ecx, DWORD PTR _subd$[ebp]
  00337	83 c1 01	 add	 ecx, 1
  0033a	99		 cdq
  0033b	f7 f9		 idiv	 ecx
  0033d	03 55 dc	 add	 edx, DWORD PTR _damagemin$[ebp]
  00340	2b 55 0c	 sub	 edx, DWORD PTR _targetDefense$[ebp]
  00343	89 55 d4	 mov	 DWORD PTR _ad$[ebp], edx

; 3695 : 
; 3696 : 		if( lpObj->m_CriticalDamage > 0 ) 

  00346	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00349	83 b8 04 03 00
	00 00		 cmp	 DWORD PTR [eax+772], 0
  00350	7e 47		 jle	 SHORT $LN15@GetAttackD

; 3697 : 		{
; 3698 : 			if( (rand()%100) < lpObj->m_CriticalDamage )

  00352	e8 00 00 00 00	 call	 _rand
  00357	99		 cdq
  00358	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0035d	f7 f9		 idiv	 ecx
  0035f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00362	3b 90 04 03 00
	00		 cmp	 edx, DWORD PTR [eax+772]
  00368	7d 2f		 jge	 SHORT $LN15@GetAttackD

; 3699 : 			{
; 3700 : #ifdef DUEL_SYSTEM_20031028
; 3701 : // 				if (bIsOnDuel)
; 3702 : // 					ad = damagemax * 60 / 100 -targetDefense;
; 3703 : // 				else
; 3704 : #endif
; 3705 : 					ad = damagemax-targetDefense;

  0036a	8b 45 d8	 mov	 eax, DWORD PTR _damagemax$[ebp]
  0036d	2b 45 0c	 sub	 eax, DWORD PTR _targetDefense$[ebp]
  00370	89 45 d4	 mov	 DWORD PTR _ad$[ebp], eax

; 3706 : 				//LogAdd("크리티컬 : %d %d : %d",damagemax,targetDefense, ad);
; 3707 : 
; 3708 : 				ad += lpObj->SetOpAddCriticalDamage;

  00373	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00376	0f bf 88 32 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3890]
  0037d	03 4d d4	 add	 ecx, DWORD PTR _ad$[ebp]
  00380	89 4d d4	 mov	 DWORD PTR _ad$[ebp], ecx

; 3709 : 
; 3710 : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3711 : 				// 조화의 보석 강화 아이템 옵션 : 크리티컬 데미지 증가
; 3712 : 				ad += lpObj->m_JewelOfHarmonyEffect.HJOpAddCriticalDamage;
; 3713 : #endif
; 3714 : 
; 3715 : #ifdef DARKLORD_WORK
; 3716 : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 3717 : 				int iValue = 0;
; 3718 : 				gObjGetValueOfBuffIndex( lpObj, BUFFTYPE_CRITICAL_DMG_INC, &iValue );
; 3719 : 				ad += iValue;
; 3720 : 	#else
; 3721 : 				ad += lpObj->SkillAddCriticalDamage;

  00383	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00386	0f b7 88 16 1a
	00 00		 movzx	 ecx, WORD PTR [eax+6678]
  0038d	03 4d d4	 add	 ecx, DWORD PTR _ad$[ebp]
  00390	89 4d d4	 mov	 DWORD PTR _ad$[ebp], ecx

; 3722 : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004			
; 3723 : #endif
; 3724 : 
; 3725 : 
; 3726 : 				
; 3727 : #ifdef ADD_SKILL_WITH_COMBO
; 3728 : 				effect = DT_CRITICAL;			// 크리티컬 데미지

  00393	8b 45 14	 mov	 eax, DWORD PTR _effect$[ebp]
  00396	c6 00 03	 mov	 BYTE PTR [eax], 3
$LN15@GetAttackD:

; 3729 : #else
; 3730 : 				effect = 0x80;
; 3731 : #endif
; 3732 : 			}
; 3733 : 		}
; 3734 : 		if( lpObj->m_ExcelentDamage > 0 )

  00399	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0039c	83 b8 08 03 00
	00 00		 cmp	 DWORD PTR [eax+776], 0
  003a3	7e 49		 jle	 SHORT $LN17@GetAttackD

; 3735 : 		{
; 3736 : 
; 3737 : 			if( (rand()%100) < lpObj->m_ExcelentDamage )

  003a5	e8 00 00 00 00	 call	 _rand
  003aa	99		 cdq
  003ab	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  003b0	f7 f9		 idiv	 ecx
  003b2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003b5	3b 90 08 03 00
	00		 cmp	 edx, DWORD PTR [eax+776]
  003bb	7d 31		 jge	 SHORT $LN17@GetAttackD

; 3738 : 			{
; 3739 : #ifdef DUEL_SYSTEM_20031028
; 3740 : // 				if (bIsOnDuel)					
; 3741 : // 					ad = damagemax * 60 /100 -targetDefense;										
; 3742 : // 				else
; 3743 : #endif
; 3744 : 					ad = damagemax-targetDefense;

  003bd	8b 45 d8	 mov	 eax, DWORD PTR _damagemax$[ebp]
  003c0	2b 45 0c	 sub	 eax, DWORD PTR _targetDefense$[ebp]
  003c3	89 45 d4	 mov	 DWORD PTR _ad$[ebp], eax

; 3745 : 					
; 3746 : 				ad += damagemax*20/100;

  003c6	6b 45 d8 14	 imul	 eax, DWORD PTR _damagemax$[ebp], 20
  003ca	99		 cdq
  003cb	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  003d0	f7 f9		 idiv	 ecx
  003d2	03 45 d4	 add	 eax, DWORD PTR _ad$[ebp]
  003d5	89 45 d4	 mov	 DWORD PTR _ad$[ebp], eax

; 3747 : 
; 3748 : 				ad += lpObj->SetOpAddExDamage;

  003d8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003db	0f bf 88 2e 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3886]
  003e2	03 4d d4	 add	 ecx, DWORD PTR _ad$[ebp]
  003e5	89 4d d4	 mov	 DWORD PTR _ad$[ebp], ecx

; 3749 : 
; 3750 : #ifdef ADD_SKILL_WITH_COMBO
; 3751 : 				effect = DT_EXCELLENT;		// 엑설런트 데미지

  003e8	8b 45 14	 mov	 eax, DWORD PTR _effect$[ebp]
  003eb	c6 00 02	 mov	 BYTE PTR [eax], 2
$LN17@GetAttackD:

; 3752 : #else
; 3753 : 				effect = 0x40;
; 3754 : #endif
; 3755 : 			}
; 3756 : 		}
; 3757 : 	}

  003ee	9b		 fwait
  003ef	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
  003f6	eb 17		 jmp	 SHORT $LN24@GetAttackD
$LN21@GetAttackD:
$LN26@GetAttackD:

; 3758 : 	__except( subd=1, EXCEPTION_EXECUTE_HANDLER )

  003f8	c7 45 88 01 00
	00 00		 mov	 DWORD PTR _subd$[ebp], 1
  003ff	b8 01 00 00 00	 mov	 eax, 1
$LN23@GetAttackD:
$LN25@GetAttackD:
  00404	c3		 ret	 0
$LN22@GetAttackD:
  00405	8b 65 e8	 mov	 esp, DWORD PTR __$SEHRec$[ebp]

; 3752 : #else
; 3753 : 				effect = 0x40;
; 3754 : #endif
; 3755 : 			}
; 3756 : 		}
; 3757 : 	}

  00408	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
$LN24@GetAttackD:

; 3759 : 	{
; 3760 : 	}
; 3761 : 
; 3762 : #ifndef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004					// !! NOT
; 3763 : 	ad += lpObj->m_SkillAttack;

  0040f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00412	8b 4d d4	 mov	 ecx, DWORD PTR _ad$[ebp]
  00415	03 88 24 1a 00
	00		 add	 ecx, DWORD PTR [eax+6692]
  0041b	89 4d d4	 mov	 DWORD PTR _ad$[ebp], ecx

; 3764 : #endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 3765 : 
; 3766 : #ifdef MODIFY_BUFFSYSTEM_BUGFIX_03_20071211
; 3767 : 	int iIncreaseDamage = 0;
; 3768 : 	iIncreaseDamage = gObjGetTotalValueOfEffect( lpObj, EFFECTTYPE_IMPROVE_DAMAGE );
; 3769 : 	iIncreaseDamage += gObjGetTotalValueOfEffect( lpObj, EFFECTTYPE_MAGICDAMAGE );
; 3770 : 	
; 3771 : 	ad += iIncreaseDamage;
; 3772 : #endif // MODIFY_BUFFSYSTEM_BUGFIX_03_20071211
; 3773 : 
; 3774 : 	if( lpObj->m_SkillAttack2 )

  0041e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00421	83 b8 80 02 00
	00 00		 cmp	 DWORD PTR [eax+640], 0
  00428	74 09		 je	 SHORT $LN18@GetAttackD

; 3775 : 	{	// 사랑의 묘약이 적용되면 마력 +10
; 3776 : 		ad += 10;

  0042a	8b 45 d4	 mov	 eax, DWORD PTR _ad$[ebp]
  0042d	83 c0 0a	 add	 eax, 10			; 0000000aH
  00430	89 45 d4	 mov	 DWORD PTR _ad$[ebp], eax
$LN18@GetAttackD:

; 3777 : 	}
; 3778 : 
; 3779 : 	return ad;

  00433	8b 45 d4	 mov	 eax, DWORD PTR _ad$[ebp]
$LN1@GetAttackD:

; 3780 : }

  00436	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00439	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00440	59		 pop	 ecx
  00441	5f		 pop	 edi
  00442	5e		 pop	 esi
  00443	5b		 pop	 ebx
  00444	8b 4d e4	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00447	33 cd		 xor	 ecx, ebp
  00449	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0044e	8b e5		 mov	 esp, ebp
  00450	5d		 pop	 ebp
  00451	c2 14 00	 ret	 20			; 00000014H
?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z ENDP ; CObjAttack::GetAttackDamageWizard
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z
_TEXT	SEGMENT
_iadddamage$2 = -92					; size = 4
_addskilldamage$3 = -88					; size = 4
_addskilldamage$4 = -84					; size = 4
_iPartyCount$5 = -80					; size = 4
_SkillAttr$6 = -76					; size = 4
_cDamage$7 = -72					; size = 4
_AttackMin$8 = -68					; size = 4
_bTwoHandWeapon$ = -64					; size = 4
_Left$ = -60						; size = 4
_Right$ = -56						; size = 4
_SkillLeftMinDamage$ = -52				; size = 4
_SkillLeftMaxDamage$ = -48				; size = 4
_SkillRightMinDamage$ = -44				; size = 4
_SkillRightMaxDamage$ = -40				; size = 4
_sub$ = -36						; size = 4
_ad$ = -32						; size = 4
_this$ = -28						; size = 4
__$SEHRec$ = -24					; size = 24
_lpObj$ = 8						; size = 4
_targetDefense$ = 12					; size = 4
_effect$ = 16						; size = 4
_bIsOnDuel$ = 20					; size = 4
_lpMagic$ = 24						; size = 4
?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z PROC ; CObjAttack::GetAttackDamage, COMDAT
; _this$ = ecx

; 3085 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a fe		 push	 -2			; fffffffeH
  00005	68 00 00 00 00	 push	 OFFSET __sehtable$?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z
  0000a	68 00 00 00 00	 push	 OFFSET __except_handler4
  0000f	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00015	50		 push	 eax
  00016	81 c4 74 ff ff
	ff		 add	 esp, -140		; ffffff74H
  0001c	53		 push	 ebx
  0001d	56		 push	 esi
  0001e	57		 push	 edi
  0001f	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00024	31 45 f8	 xor	 DWORD PTR __$SEHRec$[ebp+16], eax
  00027	33 c5		 xor	 eax, ebp
  00029	50		 push	 eax
  0002a	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  0002d	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00033	89 65 e8	 mov	 DWORD PTR __$SEHRec$[ebp], esp
  00036	89 4d e4	 mov	 DWORD PTR _this$[ebp], ecx

; 3086 : // CODEREVIEW_SHIELD : bIsOnDuel 이 TRUE 일 경우 강제적으로 FALSE
; 3087 : #ifdef DUEL_SYSTEM_20031028
; 3088 : 	#ifdef ADD_SHIELD_POINT_01_20060403
; 3089 : 		if( g_ShieldSystemOn == TRUE )
; 3090 : 		{
; 3091 : 			if( bIsOnDuel == TRUE )
; 3092 : 			{
; 3093 : 				bIsOnDuel = FALSE;
; 3094 : 			}
; 3095 : 		}
; 3096 : 	#endif
; 3097 : #endif
; 3098 : 		
; 3099 : 	int ad;
; 3100 : 	int sub;
; 3101 : 
; 3102 : 	int SkillRightMaxDamage = 0;

  00039	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], 0

; 3103 : 	int SkillRightMinDamage = 0;

  00040	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _SkillRightMinDamage$[ebp], 0

; 3104 : 
; 3105 : 	int SkillLeftMaxDamage = 0;

  00047	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], 0

; 3106 : 	int SkillLeftMinDamage = 0;

  0004e	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], 0

; 3107 : 
; 3108 : 
; 3109 : 	CItem	*Right = &lpObj->pInventory[EQUIPMENT_WEAPON_RIGHT];

  00055	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0005a	6b c8 00	 imul	 ecx, eax, 0
  0005d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00060	03 8a 5c 0c 00
	00		 add	 ecx, DWORD PTR [edx+3164]
  00066	89 4d c8	 mov	 DWORD PTR _Right$[ebp], ecx

; 3110 : 	CItem	*Left  = &lpObj->pInventory[EQUIPMENT_WEAPON_LEFT];

  00069	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0006e	c1 e0 00	 shl	 eax, 0
  00071	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00074	03 81 5c 0c 00
	00		 add	 eax, DWORD PTR [ecx+3164]
  0007a	89 45 c4	 mov	 DWORD PTR _Left$[ebp], eax

; 3111 : 	BOOL	bTwoHandWeapon = FALSE;

  0007d	c7 45 c0 00 00
	00 00		 mov	 DWORD PTR _bTwoHandWeapon$[ebp], 0

; 3112 : 
; 3113 : 	if( lpObj->Type == OBJTYPE_MONSTER || lpObj->Type == OBJTYPE_NPC)

  00084	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00087	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0008b	83 f9 02	 cmp	 ecx, 2
  0008e	74 0c		 je	 SHORT $LN4@GetAttackD
  00090	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00093	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00097	83 f9 03	 cmp	 ecx, 3
  0009a	75 53		 jne	 SHORT $LN2@GetAttackD
$LN4@GetAttackD:

; 3114 : 	{
; 3115 : 		int AttackMin = 0;

  0009c	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR _AttackMin$8[ebp], 0

; 3116 : 		sub = (lpObj->m_AttackDamageMax)-(lpObj->m_AttackDamageMin);

  000a3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a6	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000a9	8b 90 b8 02 00
	00		 mov	 edx, DWORD PTR [eax+696]
  000af	2b 91 b4 02 00
	00		 sub	 edx, DWORD PTR [ecx+692]
  000b5	89 55 dc	 mov	 DWORD PTR _sub$[ebp], edx

; 3117 : 		AttackMin = (lpObj->m_AttackDamageMin)+(rand()%(sub+1));

  000b8	e8 00 00 00 00	 call	 _rand
  000bd	8b 4d dc	 mov	 ecx, DWORD PTR _sub$[ebp]
  000c0	83 c1 01	 add	 ecx, 1
  000c3	99		 cdq
  000c4	f7 f9		 idiv	 ecx
  000c6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000c9	03 90 b4 02 00
	00		 add	 edx, DWORD PTR [eax+692]
  000cf	89 55 bc	 mov	 DWORD PTR _AttackMin$8[ebp], edx

; 3118 : 
; 3119 : 		lpObj->m_AttackDamageRight = AttackMin;

  000d2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d5	8b 4d bc	 mov	 ecx, DWORD PTR _AttackMin$8[ebp]
  000d8	89 88 c8 02 00
	00		 mov	 DWORD PTR [eax+712], ecx

; 3120 : 		lpObj->m_AttackDamageLeft  = AttackMin;

  000de	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e1	8b 4d bc	 mov	 ecx, DWORD PTR _AttackMin$8[ebp]
  000e4	89 88 c4 02 00
	00		 mov	 DWORD PTR [eax+708], ecx

; 3121 : 	}

  000ea	e9 ae 05 00 00	 jmp	 $LN3@GetAttackD
$LN2@GetAttackD:

; 3122 : 	else
; 3123 : 	{
; 3124 : 		int		cDamage=0;	

  000ef	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR _cDamage$7[ebp], 0

; 3125 : 
; 3126 : 	#ifdef DARKLORD_WORK					
; 3127 : 		if( lpObj->Class == CLASS_DARKLORD || lpObj->Class == CLASS_KNIGHT || lpObj->Class == CLASS_MAGUMSA )		

  000f6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000f9	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00100	83 f9 04	 cmp	 ecx, 4
  00103	74 1e		 je	 SHORT $LN6@GetAttackD
  00105	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00108	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  0010f	83 f9 01	 cmp	 ecx, 1
  00112	74 0f		 je	 SHORT $LN6@GetAttackD
  00114	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00117	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  0011e	83 f9 03	 cmp	 ecx, 3
  00121	75 57		 jne	 SHORT $LN5@GetAttackD
$LN6@GetAttackD:

; 3128 : 	#else
; 3129 : 		if(lpObj->Class == CLASS_KNIGHT || lpObj->Class == CLASS_MAGUMSA )
; 3130 : 	#endif
; 3131 : 		{
; 3132 : 			if( Right->m_Type >= 0 && Right->m_Type < ITEM_BOW && Left->m_Type >= 0 && Left->m_Type < ITEM_BOW ) 

  00123	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00126	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  0012a	85 c9		 test	 ecx, ecx
  0012c	7c 4c		 jl	 SHORT $LN5@GetAttackD
  0012e	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00131	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00135	81 f9 80 00 00
	00		 cmp	 ecx, 128		; 00000080H
  0013b	7d 3d		 jge	 SHORT $LN5@GetAttackD
  0013d	8b 45 c4	 mov	 eax, DWORD PTR _Left$[ebp]
  00140	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00144	85 c9		 test	 ecx, ecx
  00146	7c 32		 jl	 SHORT $LN5@GetAttackD
  00148	8b 45 c4	 mov	 eax, DWORD PTR _Left$[ebp]
  0014b	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  0014f	81 f9 80 00 00
	00		 cmp	 ecx, 128		; 00000080H
  00155	7d 23		 jge	 SHORT $LN5@GetAttackD

; 3133 : 			{
; 3134 : 				if( Right->m_IsValidItem && Left->m_IsValidItem )				

  00157	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  0015a	0f b6 88 94 00
	00 00		 movzx	 ecx, BYTE PTR [eax+148]
  00161	85 c9		 test	 ecx, ecx
  00163	74 15		 je	 SHORT $LN5@GetAttackD
  00165	8b 45 c4	 mov	 eax, DWORD PTR _Left$[ebp]
  00168	0f b6 88 94 00
	00 00		 movzx	 ecx, BYTE PTR [eax+148]
  0016f	85 c9		 test	 ecx, ecx
  00171	74 07		 je	 SHORT $LN5@GetAttackD

; 3135 : 					bTwoHandWeapon = TRUE;

  00173	c7 45 c0 01 00
	00 00		 mov	 DWORD PTR _bTwoHandWeapon$[ebp], 1
$LN5@GetAttackD:

; 3136 : 			}
; 3137 : 		}
; 3138 : 		
; 3139 : #if defined( ADD_SKILL_WITH_COMBO ) || GAME_VERSION == G_V_97D
; 3140 : 		if( lpMagic )

  0017a	83 7d 18 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  0017e	0f 84 a8 02 00
	00		 je	 $LN9@GetAttackD

; 3141 : 		{
; 3142 : 				// 스킬 데미지
; 3143 : #ifdef DARKLORD_WORK
; 3144 : 			if( lpMagic->m_Skill == AT_SKILL_SPEAR && lpObj->SkillLongSpearChange )

  00184	8b 45 18	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00187	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  0018b	83 f9 3c	 cmp	 ecx, 60			; 0000003cH
  0018e	75 32		 jne	 SHORT $LN10@GetAttackD
  00190	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00193	0f b6 88 82 10
	00 00		 movzx	 ecx, BYTE PTR [eax+4226]
  0019a	85 c9		 test	 ecx, ecx
  0019c	74 24		 je	 SHORT $LN10@GetAttackD

; 3145 : 			{	// 롱스피어 어택 데미지를 적용해 준다
; 3146 : 				SkillRightMaxDamage = DefMagicInf[AT_SKILL_LONGSPEAR].m_DamageMax;

  0019e	b8 10 00 00 00	 mov	 eax, 16			; 00000010H
  001a3	6b c8 42	 imul	 ecx, eax, 66
  001a6	8b 91 0c 00 00
	00		 mov	 edx, DWORD PTR ?DefMagicInf@@3PAVCMagicInf@@A[ecx+12]
  001ac	89 55 d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], edx

; 3147 : 				SkillRightMinDamage = DefMagicInf[AT_SKILL_LONGSPEAR].m_DamageMin;

  001af	b8 10 00 00 00	 mov	 eax, 16			; 00000010H
  001b4	6b c8 42	 imul	 ecx, eax, 66
  001b7	8b 91 08 00 00
	00		 mov	 edx, DWORD PTR ?DefMagicInf@@3PAVCMagicInf@@A[ecx+8]
  001bd	89 55 d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], edx

; 3148 : 			}

  001c0	eb 12		 jmp	 SHORT $LN11@GetAttackD
$LN10@GetAttackD:

; 3149 : 			else
; 3150 : #endif
; 3151 : 			{
; 3152 : 				SkillRightMaxDamage = lpMagic->m_DamageMax;

  001c2	8b 45 18	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  001c5	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  001c8	89 4d d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], ecx

; 3153 : 				SkillRightMinDamage = lpMagic->m_DamageMin;

  001cb	8b 45 18	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  001ce	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  001d1	89 4d d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], ecx
$LN11@GetAttackD:

; 3154 : 			}
; 3155 : 
; 3156 : 				if( !bTwoHandWeapon )

  001d4	83 7d c0 00	 cmp	 DWORD PTR _bTwoHandWeapon$[ebp], 0
  001d8	75 0c		 jne	 SHORT $LN12@GetAttackD

; 3157 : 				{
; 3158 : 					SkillLeftMaxDamage = SkillRightMaxDamage;

  001da	8b 45 d8	 mov	 eax, DWORD PTR _SkillRightMaxDamage$[ebp]
  001dd	89 45 d0	 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], eax

; 3159 : 					SkillLeftMinDamage = SkillRightMinDamage;

  001e0	8b 45 d4	 mov	 eax, DWORD PTR _SkillRightMinDamage$[ebp]
  001e3	89 45 cc	 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], eax
$LN12@GetAttackD:

; 3160 : 				}
; 3161 : 				
; 3162 : 				// 세트옵션 : 스킬 공격력 증가
; 3163 : 				SkillRightMaxDamage += lpObj->SetOpAddSkillAttack;

  001e6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001e9	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  001f0	03 4d d8	 add	 ecx, DWORD PTR _SkillRightMaxDamage$[ebp]
  001f3	89 4d d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], ecx

; 3164 : 				SkillRightMinDamage += lpObj->SetOpAddSkillAttack;

  001f6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001f9	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  00200	03 4d d4	 add	 ecx, DWORD PTR _SkillRightMinDamage$[ebp]
  00203	89 4d d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], ecx

; 3165 : 				
; 3166 : 				SkillLeftMaxDamage += lpObj->SetOpAddSkillAttack;

  00206	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00209	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  00210	03 4d d0	 add	 ecx, DWORD PTR _SkillLeftMaxDamage$[ebp]
  00213	89 4d d0	 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], ecx

; 3167 : 				SkillLeftMinDamage += lpObj->SetOpAddSkillAttack;

  00216	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00219	0f bf 88 2c 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3884]
  00220	03 4d cc	 add	 ecx, DWORD PTR _SkillLeftMinDamage$[ebp]
  00223	89 4d cc	 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], ecx

; 3168 : 
; 3169 : 				int SkillAttr = MagicDamageC.GetSkillAttr(lpMagic->m_Skill);

  00226	8b 45 18	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00229	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  0022d	51		 push	 ecx
  0022e	b9 00 00 00 00	 mov	 ecx, OFFSET ?MagicDamageC@@3VCMagicDamage@@A ; MagicDamageC
  00233	e8 00 00 00 00	 call	 ?GetSkillAttr@CMagicDamage@@QAEHH@Z ; CMagicDamage::GetSkillAttr
  00238	89 45 b4	 mov	 DWORD PTR _SkillAttr$6[ebp], eax

; 3170 : 				if( SkillAttr != -1 )

  0023b	83 7d b4 ff	 cmp	 DWORD PTR _SkillAttr$6[ebp], -1
  0023f	74 4c		 je	 SHORT $LN13@GetAttackD

; 3171 : 				{
; 3172 : #ifdef UPDATE_GM_FUNCTION_20070228	// GM 캐릭터 변신반지 착용 시 Resistance값은 MAX값
; 3173 : 					if( (lpObj->Authority&AUTHORITY_EVENT_GM) == AUTHORITY_EVENT_GM  
; 3174 : 						&& ( lpObj->pInventory[EQUIPMENT_RING_RIGHT].m_Type == MAKE_ITEMNUM( 13, 42 )  
; 3175 : 						|| lpObj->pInventory[EQUIPMENT_RING_LEFT].m_Type == MAKE_ITEMNUM( 13, 42 ) ) )
; 3176 : 					{
; 3177 : 						SkillRightMaxDamage += 255;
; 3178 : 						SkillRightMinDamage += 255;
; 3179 : 						
; 3180 : 						SkillLeftMaxDamage += 255;
; 3181 : 						SkillLeftMinDamage += 255;
; 3182 : 					}
; 3183 : 					else
; 3184 : 					{
; 3185 : 						SkillRightMaxDamage += lpObj->m_AddResistance[SkillAttr];
; 3186 : 						SkillRightMinDamage += lpObj->m_AddResistance[SkillAttr];
; 3187 : 
; 3188 : 						SkillLeftMaxDamage += lpObj->m_AddResistance[SkillAttr];
; 3189 : 						SkillLeftMinDamage += lpObj->m_AddResistance[SkillAttr];
; 3190 : 					}
; 3191 : #else
; 3192 : 					SkillRightMaxDamage += lpObj->m_AddResistance[SkillAttr];

  00241	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00244	03 45 b4	 add	 eax, DWORD PTR _SkillAttr$6[ebp]
  00247	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  0024e	03 4d d8	 add	 ecx, DWORD PTR _SkillRightMaxDamage$[ebp]
  00251	89 4d d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], ecx

; 3193 : 					SkillRightMinDamage += lpObj->m_AddResistance[SkillAttr];

  00254	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00257	03 45 b4	 add	 eax, DWORD PTR _SkillAttr$6[ebp]
  0025a	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  00261	03 4d d4	 add	 ecx, DWORD PTR _SkillRightMinDamage$[ebp]
  00264	89 4d d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], ecx

; 3194 : 
; 3195 : 					SkillLeftMaxDamage += lpObj->m_AddResistance[SkillAttr];

  00267	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0026a	03 45 b4	 add	 eax, DWORD PTR _SkillAttr$6[ebp]
  0026d	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  00274	03 4d d0	 add	 ecx, DWORD PTR _SkillLeftMaxDamage$[ebp]
  00277	89 4d d0	 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], ecx

; 3196 : 					SkillLeftMinDamage += lpObj->m_AddResistance[SkillAttr];

  0027a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0027d	03 45 b4	 add	 eax, DWORD PTR _SkillAttr$6[ebp]
  00280	0f b6 88 3c 03
	00 00		 movzx	 ecx, BYTE PTR [eax+828]
  00287	03 4d cc	 add	 ecx, DWORD PTR _SkillLeftMinDamage$[ebp]
  0028a	89 4d cc	 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], ecx
$LN13@GetAttackD:

; 3197 : #endif	// UPDATE_GM_FUNCTION_20070228
; 3198 : 				}
; 3199 : 
; 3200 : 	#ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3201 : 				// 조화의보석 강화 아이템 옵션 : 스킬 공격력 증가
; 3202 : 				SkillRightMaxDamage += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3203 : 				SkillRightMinDamage += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3204 : 				
; 3205 : 				SkillLeftMaxDamage += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3206 : 				SkillLeftMinDamage += lpObj->m_JewelOfHarmonyEffect.HJOpAddSkillAttack;
; 3207 : 	#endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530			
; 3208 : 
; 3209 : #ifdef DARKLORD_WORK			
; 3210 : 			if( lpMagic->m_Skill == AT_SKILL_ELECTRICSPARK )

  0028d	8b 45 18	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00290	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  00294	83 f9 41	 cmp	 ecx, 65			; 00000041H
  00297	75 5f		 jne	 SHORT $LN14@GetAttackD

; 3211 : 			{	// 일렉트릭은 스킬 공격력 외에 파티원에 따른 추가 데미지가 있다				
; 3212 : 				int iPartyCount = GetPartyMemberCount(lpObj);

  00299	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0029c	50		 push	 eax
  0029d	8b 4d e4	 mov	 ecx, DWORD PTR _this$[ebp]
  002a0	e8 00 00 00 00	 call	 ?GetPartyMemberCount@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@@Z ; CObjBaseAttack::GetPartyMemberCount
  002a5	89 45 b0	 mov	 DWORD PTR _iPartyCount$5[ebp], eax

; 3213 : 				int addskilldamage = (lpObj->Leadership+lpObj->AddLeadership)/10+iPartyCount*50;

  002a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002ab	0f b7 80 d8 00
	00 00		 movzx	 eax, WORD PTR [eax+216]
  002b2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002b5	0f b7 91 da 00
	00 00		 movzx	 edx, WORD PTR [ecx+218]
  002bc	03 c2		 add	 eax, edx
  002be	99		 cdq
  002bf	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  002c4	f7 f9		 idiv	 ecx
  002c6	6b 55 b0 32	 imul	 edx, DWORD PTR _iPartyCount$5[ebp], 50
  002ca	03 c2		 add	 eax, edx
  002cc	89 45 ac	 mov	 DWORD PTR _addskilldamage$4[ebp], eax

; 3214 : 
; 3215 : 				SkillRightMaxDamage += addskilldamage;

  002cf	8b 45 d8	 mov	 eax, DWORD PTR _SkillRightMaxDamage$[ebp]
  002d2	03 45 ac	 add	 eax, DWORD PTR _addskilldamage$4[ebp]
  002d5	89 45 d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], eax

; 3216 : 				SkillRightMinDamage += addskilldamage;

  002d8	8b 45 d4	 mov	 eax, DWORD PTR _SkillRightMinDamage$[ebp]
  002db	03 45 ac	 add	 eax, DWORD PTR _addskilldamage$4[ebp]
  002de	89 45 d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], eax

; 3217 : 				
; 3218 : 				SkillLeftMaxDamage += addskilldamage;

  002e1	8b 45 d0	 mov	 eax, DWORD PTR _SkillLeftMaxDamage$[ebp]
  002e4	03 45 ac	 add	 eax, DWORD PTR _addskilldamage$4[ebp]
  002e7	89 45 d0	 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], eax

; 3219 : 				SkillLeftMinDamage += addskilldamage;

  002ea	8b 45 cc	 mov	 eax, DWORD PTR _SkillLeftMinDamage$[ebp]
  002ed	03 45 ac	 add	 eax, DWORD PTR _addskilldamage$4[ebp]
  002f0	89 45 cc	 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], eax

; 3220 : 			}

  002f3	e9 34 01 00 00	 jmp	 $LN9@GetAttackD
$LN14@GetAttackD:

; 3221 : #ifdef ADD_MASTER_LEVEL_SKILL_SYSTEM_ACTIVE_20080107	// 액티브스킬 - 어스퀘이크강화 : 다크호스를 타고 있어야 된다.
; 3222 : 			else if( lpMagic->m_Skill == AT_SKILL_DARKHORSE_ATTACK 
; 3223 : 				|| g_MasterSkillSystem.GetBaseMasterLevelSkill( lpMagic->m_Skill ) == AT_SKILL_ML_STRENGTHEN_DARKHORSE_ATTACK 
; 3224 : 				)
; 3225 : #else
; 3226 : 			else if( lpMagic->m_Skill == AT_SKILL_DARKHORSE_ATTACK )

  002f8	8b 45 18	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  002fb	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  002ff	83 f9 3e	 cmp	 ecx, 62			; 0000003eH
  00302	0f 85 ae 00 00
	00		 jne	 $LN16@GetAttackD

; 3227 : #endif
; 3228 : 			{	// 어스 퀘이크
; 3229 : 				if( lpObj->pInventory[EQUIPMENT_HELPER].m_Type == MAKE_ITEMNUM(13,4) )

  00308	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0030d	c1 e0 03	 shl	 eax, 3
  00310	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00313	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  00319	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0031e	6a 04		 push	 4
  00320	6a 0d		 push	 13			; 0000000dH
  00322	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00327	83 c4 08	 add	 esp, 8
  0032a	3b f0		 cmp	 esi, eax
  0032c	0f 85 82 00 00
	00		 jne	 $LN18@GetAttackD

; 3230 : 				{	// 다크호스를 타고 있어야 된다
; 3231 : 					int addskilldamage = (lpObj->Strength+lpObj->AddStrength)/10+

  00332	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00335	0f b7 80 b4 00
	00 00		 movzx	 eax, WORD PTR [eax+180]
  0033c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0033f	0f b7 91 e0 00
	00 00		 movzx	 edx, WORD PTR [ecx+224]
  00346	03 c2		 add	 eax, edx
  00348	99		 cdq
  00349	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  0034e	f7 f9		 idiv	 ecx
  00350	8b c8		 mov	 ecx, eax
  00352	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00355	0f b7 82 d8 00
	00 00		 movzx	 eax, WORD PTR [edx+216]
  0035c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0035f	0f b7 92 da 00
	00 00		 movzx	 edx, WORD PTR [edx+218]
  00366	03 c2		 add	 eax, edx
  00368	99		 cdq
  00369	be 05 00 00 00	 mov	 esi, 5
  0036e	f7 fe		 idiv	 esi
  00370	03 c8		 add	 ecx, eax
  00372	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00377	c1 e0 03	 shl	 eax, 3
  0037a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0037d	8b 92 5c 0c 00
	00		 mov	 edx, DWORD PTR [edx+3164]
  00383	6b 84 02 a0 00
	00 00 0a	 imul	 eax, DWORD PTR [edx+eax+160], 10
  0038b	03 c8		 add	 ecx, eax
  0038d	89 4d a8	 mov	 DWORD PTR _addskilldamage$3[ebp], ecx

; 3232 : 										 (lpObj->Leadership+lpObj->AddLeadership)/5+
; 3233 : 										 lpObj->pInventory[EQUIPMENT_HELPER].m_PetItem_Level*10;
; 3234 : 					
; 3235 : 					//int addpetdamage = lpObj->pInventory[EQUIPMENT_WEAPON_RIGHT].m_Magic/2;
; 3236 : 					//addpetdamage = addskilldamage*addpetdamage/100;
; 3237 : 					//addpetdamage -= (addpetdamage*lpObj->pInventory[EQUIPMENT_WEAPON_RIGHT].m_CurrentDurabilityState);						
; 3238 : 					//addskilldamage += addpetdamage;
; 3239 : 
; 3240 : 					SkillRightMaxDamage += addskilldamage;

  00390	8b 45 d8	 mov	 eax, DWORD PTR _SkillRightMaxDamage$[ebp]
  00393	03 45 a8	 add	 eax, DWORD PTR _addskilldamage$3[ebp]
  00396	89 45 d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], eax

; 3241 : 					SkillRightMinDamage += addskilldamage;

  00399	8b 45 d4	 mov	 eax, DWORD PTR _SkillRightMinDamage$[ebp]
  0039c	03 45 a8	 add	 eax, DWORD PTR _addskilldamage$3[ebp]
  0039f	89 45 d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], eax

; 3242 : 					
; 3243 : 					SkillLeftMaxDamage += addskilldamage;

  003a2	8b 45 d0	 mov	 eax, DWORD PTR _SkillLeftMaxDamage$[ebp]
  003a5	03 45 a8	 add	 eax, DWORD PTR _addskilldamage$3[ebp]
  003a8	89 45 d0	 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], eax

; 3244 : 					SkillLeftMinDamage += addskilldamage;

  003ab	8b 45 cc	 mov	 eax, DWORD PTR _SkillLeftMinDamage$[ebp]
  003ae	03 45 a8	 add	 eax, DWORD PTR _addskilldamage$3[ebp]
  003b1	89 45 cc	 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], eax
$LN18@GetAttackD:

; 3245 : 				}				
; 3246 : 			}

  003b4	eb 76		 jmp	 SHORT $LN9@GetAttackD
$LN16@GetAttackD:

; 3247 : #ifdef ADD_SEASON4_NEW_SKILL_20080522	// 카오틱 디세이어 스킬시(다크로드)
; 3248 : 			else if( lpObj->Class == CLASS_DARKLORD && lpMagic->m_Skill == AT_SKILL_CHAOTICDESAIR )
; 3249 : 			{
; 3250 : 				int iadddamage = (lpObj->Strength+lpObj->AddStrength)/30+(lpObj->Energy+lpObj->AddEnergy)/55;
; 3251 : 
; 3252 : 				SkillRightMaxDamage += iadddamage;
; 3253 : 				SkillRightMinDamage += iadddamage;
; 3254 : 				
; 3255 : 				SkillLeftMaxDamage += iadddamage;
; 3256 : 				SkillLeftMinDamage += iadddamage;
; 3257 : 			}
; 3258 : #endif	// ADD_SEASON4_NEW_SKILL_20080522
; 3259 : 			else  if( lpObj->Class == CLASS_DARKLORD )

  003b6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003b9	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  003c0	83 f9 04	 cmp	 ecx, 4
  003c3	75 67		 jne	 SHORT $LN9@GetAttackD

; 3260 : 			{
; 3261 : 				//int ipartycount = GetPartyMemberCount(lpObj)*2;
; 3262 : 				int iadddamage = (lpObj->Strength+lpObj->AddStrength)/25+(lpObj->Energy+lpObj->AddEnergy)/50;

  003c5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003c8	0f b7 80 b4 00
	00 00		 movzx	 eax, WORD PTR [eax+180]
  003cf	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003d2	0f b7 91 e0 00
	00 00		 movzx	 edx, WORD PTR [ecx+224]
  003d9	03 c2		 add	 eax, edx
  003db	99		 cdq
  003dc	b9 19 00 00 00	 mov	 ecx, 25			; 00000019H
  003e1	f7 f9		 idiv	 ecx
  003e3	8b c8		 mov	 ecx, eax
  003e5	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003e8	0f b7 82 ba 00
	00 00		 movzx	 eax, WORD PTR [edx+186]
  003ef	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003f2	0f b7 92 e6 00
	00 00		 movzx	 edx, WORD PTR [edx+230]
  003f9	03 c2		 add	 eax, edx
  003fb	99		 cdq
  003fc	be 32 00 00 00	 mov	 esi, 50			; 00000032H
  00401	f7 fe		 idiv	 esi
  00403	03 c8		 add	 ecx, eax
  00405	89 4d a4	 mov	 DWORD PTR _iadddamage$2[ebp], ecx

; 3263 : 
; 3264 : 				SkillRightMaxDamage += iadddamage;

  00408	8b 45 d8	 mov	 eax, DWORD PTR _SkillRightMaxDamage$[ebp]
  0040b	03 45 a4	 add	 eax, DWORD PTR _iadddamage$2[ebp]
  0040e	89 45 d8	 mov	 DWORD PTR _SkillRightMaxDamage$[ebp], eax

; 3265 : 				SkillRightMinDamage += iadddamage;

  00411	8b 45 d4	 mov	 eax, DWORD PTR _SkillRightMinDamage$[ebp]
  00414	03 45 a4	 add	 eax, DWORD PTR _iadddamage$2[ebp]
  00417	89 45 d4	 mov	 DWORD PTR _SkillRightMinDamage$[ebp], eax

; 3266 : 				
; 3267 : 				SkillLeftMaxDamage += iadddamage;

  0041a	8b 45 d0	 mov	 eax, DWORD PTR _SkillLeftMaxDamage$[ebp]
  0041d	03 45 a4	 add	 eax, DWORD PTR _iadddamage$2[ebp]
  00420	89 45 d0	 mov	 DWORD PTR _SkillLeftMaxDamage$[ebp], eax

; 3268 : 				SkillLeftMinDamage += iadddamage;

  00423	8b 45 cc	 mov	 eax, DWORD PTR _SkillLeftMinDamage$[ebp]
  00426	03 45 a4	 add	 eax, DWORD PTR _iadddamage$2[ebp]
  00429	89 45 cc	 mov	 DWORD PTR _SkillLeftMinDamage$[ebp], eax
$LN9@GetAttackD:

; 3269 : 			}
; 3270 : 			
; 3271 : #endif	// DARKLORD_WORK
; 3272 : 
; 3273 : #ifdef ADD_SEASON4_NEW_SKILL_20080522
; 3274 : 		if( lpObj->Class == CLASS_ELF && lpMagic->m_Skill == AT_SKILL_MULTISHOT )
; 3275 : 		{
; 3276 : 			SkillLeftMaxDamage = SkillLeftMaxDamage * 80 / 100;
; 3277 : 			SkillLeftMinDamage = SkillLeftMinDamage * 80 / 100;
; 3278 : 		}
; 3279 : #endif	// ADD_SEASON4_NEW_SKILL_20080522
; 3280 : 		}
; 3281 : 	#endif
; 3282 : 
; 3283 : 		if( lpObj->m_CriticalDamage > 0 ) 

  0042c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0042f	83 b8 04 03 00
	00 00		 cmp	 DWORD PTR [eax+772], 0
  00436	7e 25		 jle	 SHORT $LN20@GetAttackD

; 3284 : 		{
; 3285 : 			if( (rand()%100) < lpObj->m_CriticalDamage )

  00438	e8 00 00 00 00	 call	 _rand
  0043d	99		 cdq
  0043e	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00443	f7 f9		 idiv	 ecx
  00445	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00448	3b 90 04 03 00
	00		 cmp	 edx, DWORD PTR [eax+772]
  0044e	7d 0d		 jge	 SHORT $LN20@GetAttackD

; 3286 : 			{
; 3287 : 				cDamage = 1;

  00450	c7 45 b8 01 00
	00 00		 mov	 DWORD PTR _cDamage$7[ebp], 1

; 3288 : 
; 3289 : #ifdef ADD_SKILL_WITH_COMBO
; 3290 : 				effect = DT_CRITICAL;		// 크리티컬 데미지

  00457	8b 45 10	 mov	 eax, DWORD PTR _effect$[ebp]
  0045a	c6 00 03	 mov	 BYTE PTR [eax], 3
$LN20@GetAttackD:

; 3291 : #else
; 3292 : 				effect = 0x80;
; 3293 : #endif
; 3294 : 			}
; 3295 : 		}
; 3296 : 		if( lpObj->m_ExcelentDamage > 0 )

  0045d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00460	83 b8 08 03 00
	00 00		 cmp	 DWORD PTR [eax+776], 0
  00467	7e 25		 jle	 SHORT $LN22@GetAttackD

; 3297 : 		{
; 3298 : 			// 세트 옵션 ; 엑설런트 데미지 확률 증가적용
; 3299 : 			if( (rand()%100) < lpObj->m_ExcelentDamage )

  00469	e8 00 00 00 00	 call	 _rand
  0046e	99		 cdq
  0046f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00474	f7 f9		 idiv	 ecx
  00476	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00479	3b 90 08 03 00
	00		 cmp	 edx, DWORD PTR [eax+776]
  0047f	7d 0d		 jge	 SHORT $LN22@GetAttackD

; 3300 : 			{
; 3301 : 				cDamage = 1;

  00481	c7 45 b8 01 00
	00 00		 mov	 DWORD PTR _cDamage$7[ebp], 1

; 3302 : #ifdef ADD_SKILL_WITH_COMBO
; 3303 : 				effect = DT_EXCELLENT;		// 엑설런트 데미지

  00488	8b 45 10	 mov	 eax, DWORD PTR _effect$[ebp]
  0048b	c6 00 02	 mov	 BYTE PTR [eax], 2
$LN22@GetAttackD:

; 3304 : #else
; 3305 : 				effect = 0x40;
; 3306 : #endif
; 3307 : 			}
; 3308 : 		}
; 3309 : #ifdef SEASON4_PATCH_GROOVING
; 3310 : 		// 버서커 사용시 물리 공격력 증가값을 미리 설정해 준다.
; 3311 : 		int	iAttackBerserkerMin = 0;
; 3312 : 		int	iAttackBerserkerMax = 0;
; 3313 : 
; 3314 : 		if( true == gObjCheckUsedBuffEffect(lpObj, BUFFTYPE_BERSERKER) )
; 3315 : 		{
; 3316 : 			GetBuffTypePhysicalIncrease(lpObj, iAttackBerserkerMin, iAttackBerserkerMax);	
; 3317 : 		}
; 3318 : #endif
; 3319 : 		__try

  0048e	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$SEHRec$[ebp+20], 0

; 3320 : 		{
; 3321 : 			
; 3322 : #ifdef SEASON4_PATCH_GROOVING
; 3323 : 			//------>
; 3324 : 			// 시즌 4.0 추가 스킬  grooving 2008/04/24
; 3325 : 			//grooving 처음 공격 데미지 계산
; 3326 : 				sub = (lpObj->m_AttackDamageMaxRight + SkillRightMaxDamage + iAttackBerserkerMax)-(lpObj->m_AttackDamageMinRight+SkillRightMinDamage+iAttackBerserkerMin);
; 3327 : 				lpObj->m_AttackDamageRight = (lpObj->m_AttackDamageMinRight+SkillRightMinDamage+iAttackBerserkerMin)+(rand()%(sub+1));
; 3328 : 			//<------
; 3329 : #else
; 3330 : 				sub = (lpObj->m_AttackDamageMaxRight+SkillRightMaxDamage)-(lpObj->m_AttackDamageMinRight+SkillRightMinDamage);

  00495	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00498	8b 88 d4 02 00
	00		 mov	 ecx, DWORD PTR [eax+724]
  0049e	03 4d d8	 add	 ecx, DWORD PTR _SkillRightMaxDamage$[ebp]
  004a1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004a4	8b 82 d8 02 00
	00		 mov	 eax, DWORD PTR [edx+728]
  004aa	03 45 d4	 add	 eax, DWORD PTR _SkillRightMinDamage$[ebp]
  004ad	2b c8		 sub	 ecx, eax
  004af	89 4d dc	 mov	 DWORD PTR _sub$[ebp], ecx

; 3331 : 				lpObj->m_AttackDamageRight = (lpObj->m_AttackDamageMinRight+SkillRightMinDamage)+(rand()%(sub+1));

  004b2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004b5	8b b0 d8 02 00
	00		 mov	 esi, DWORD PTR [eax+728]
  004bb	03 75 d4	 add	 esi, DWORD PTR _SkillRightMinDamage$[ebp]
  004be	e8 00 00 00 00	 call	 _rand
  004c3	8b 4d dc	 mov	 ecx, DWORD PTR _sub$[ebp]
  004c6	83 c1 01	 add	 ecx, 1
  004c9	99		 cdq
  004ca	f7 f9		 idiv	 ecx
  004cc	03 f2		 add	 esi, edx
  004ce	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004d1	89 b2 c8 02 00
	00		 mov	 DWORD PTR [edx+712], esi

; 3332 : #endif
; 3333 : 		}

  004d7	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
  004de	eb 17		 jmp	 SHORT $LN49@GetAttackD
$LN46@GetAttackD:
$LN56@GetAttackD:

; 3334 : 		__except( sub = 1, EXCEPTION_EXECUTE_HANDLER )

  004e0	c7 45 dc 01 00
	00 00		 mov	 DWORD PTR _sub$[ebp], 1
  004e7	b8 01 00 00 00	 mov	 eax, 1
$LN48@GetAttackD:
$LN54@GetAttackD:
  004ec	c3		 ret	 0
$LN47@GetAttackD:
  004ed	8b 65 e8	 mov	 esp, DWORD PTR __$SEHRec$[ebp]

; 3332 : #endif
; 3333 : 		}

  004f0	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
$LN49@GetAttackD:

; 3335 : 		{
; 3336 : 		}
; 3337 : 		__try

  004f7	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR __$SEHRec$[ebp+20], 1

; 3338 : 		{	
; 3339 : #ifdef SEASON4_PATCH_GROOVING
; 3340 : 			//------>
; 3341 : 			// 시즌 4.0 추가 스킬  grooving 2008/04/24
; 3342 : 			//grooving 처음 공격 데미지 계산
; 3343 : 			sub = (lpObj->m_AttackDamageMaxLeft+SkillLeftMaxDamage+iAttackBerserkerMax) - (lpObj->m_AttackDamageMinLeft+SkillLeftMinDamage+iAttackBerserkerMin);
; 3344 : 			lpObj->m_AttackDamageLeft  = (lpObj->m_AttackDamageMinLeft+SkillLeftMinDamage+iAttackBerserkerMin)+(rand()%(sub+1));
; 3345 : 			//<------
; 3346 : #else
; 3347 : 			sub = (lpObj->m_AttackDamageMaxLeft+SkillLeftMaxDamage) - (lpObj->m_AttackDamageMinLeft+SkillLeftMinDamage);

  004fe	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00501	8b 88 cc 02 00
	00		 mov	 ecx, DWORD PTR [eax+716]
  00507	03 4d d0	 add	 ecx, DWORD PTR _SkillLeftMaxDamage$[ebp]
  0050a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0050d	8b 82 d0 02 00
	00		 mov	 eax, DWORD PTR [edx+720]
  00513	03 45 cc	 add	 eax, DWORD PTR _SkillLeftMinDamage$[ebp]
  00516	2b c8		 sub	 ecx, eax
  00518	89 4d dc	 mov	 DWORD PTR _sub$[ebp], ecx

; 3348 : 			lpObj->m_AttackDamageLeft  = (lpObj->m_AttackDamageMinLeft+SkillLeftMinDamage)+(rand()%(sub+1));			

  0051b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0051e	8b b0 d0 02 00
	00		 mov	 esi, DWORD PTR [eax+720]
  00524	03 75 cc	 add	 esi, DWORD PTR _SkillLeftMinDamage$[ebp]
  00527	e8 00 00 00 00	 call	 _rand
  0052c	8b 4d dc	 mov	 ecx, DWORD PTR _sub$[ebp]
  0052f	83 c1 01	 add	 ecx, 1
  00532	99		 cdq
  00533	f7 f9		 idiv	 ecx
  00535	03 f2		 add	 esi, edx
  00537	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0053a	89 b2 c4 02 00
	00		 mov	 DWORD PTR [edx+708], esi

; 3349 : #endif
; 3350 : 		}

  00540	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
  00547	eb 17		 jmp	 SHORT $LN53@GetAttackD
$LN50@GetAttackD:
$LN57@GetAttackD:

; 3351 : 		__except( sub = 1, EXCEPTION_EXECUTE_HANDLER )

  00549	c7 45 dc 01 00
	00 00		 mov	 DWORD PTR _sub$[ebp], 1
  00550	b8 01 00 00 00	 mov	 eax, 1
$LN52@GetAttackD:
$LN55@GetAttackD:
  00555	c3		 ret	 0
$LN51@GetAttackD:
  00556	8b 65 e8	 mov	 esp, DWORD PTR __$SEHRec$[ebp]

; 3349 : #endif
; 3350 : 		}

  00559	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
$LN53@GetAttackD:

; 3352 : 		{
; 3353 : 		}
; 3354 : 
; 3355 : 		if( cDamage )

  00560	83 7d b8 00	 cmp	 DWORD PTR _cDamage$7[ebp], 0
  00564	0f 84 33 01 00
	00		 je	 $LN3@GetAttackD

; 3356 : 		{
; 3357 : #ifdef SEASON4_PATCH_GROOVING
; 3358 : 
; 3359 : 			lpObj->m_AttackDamageRight = lpObj->m_AttackDamageMaxRight+SkillRightMaxDamage + iAttackBerserkerMax;
; 3360 : 			lpObj->m_AttackDamageLeft  = lpObj->m_AttackDamageMaxLeft+SkillLeftMaxDamage + iAttackBerserkerMax;
; 3361 : #else
; 3362 : 			lpObj->m_AttackDamageRight = lpObj->m_AttackDamageMaxRight+SkillRightMaxDamage;

  0056a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0056d	8b 88 d4 02 00
	00		 mov	 ecx, DWORD PTR [eax+724]
  00573	03 4d d8	 add	 ecx, DWORD PTR _SkillRightMaxDamage$[ebp]
  00576	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00579	89 8a c8 02 00
	00		 mov	 DWORD PTR [edx+712], ecx

; 3363 : 			lpObj->m_AttackDamageLeft  = lpObj->m_AttackDamageMaxLeft+SkillLeftMaxDamage;

  0057f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00582	8b 88 cc 02 00
	00		 mov	 ecx, DWORD PTR [eax+716]
  00588	03 4d d0	 add	 ecx, DWORD PTR _SkillLeftMaxDamage$[ebp]
  0058b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0058e	89 8a c4 02 00
	00		 mov	 DWORD PTR [edx+708], ecx

; 3364 : 
; 3365 : #endif //SEASON4_PATCH_GROOVING
; 3366 : 
; 3367 : 			// 세트 옵션 ; 크리티컬 데미지 증가
; 3368 : 			lpObj->m_AttackDamageRight += lpObj->SetOpAddCriticalDamage;

  00594	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00597	0f bf 88 32 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3890]
  0059e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  005a1	03 8a c8 02 00
	00		 add	 ecx, DWORD PTR [edx+712]
  005a7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005aa	89 88 c8 02 00
	00		 mov	 DWORD PTR [eax+712], ecx

; 3369 : 			lpObj->m_AttackDamageLeft += lpObj->SetOpAddCriticalDamage;

  005b0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005b3	0f bf 88 32 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3890]
  005ba	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  005bd	03 8a c4 02 00
	00		 add	 ecx, DWORD PTR [edx+708]
  005c3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005c6	89 88 c4 02 00
	00		 mov	 DWORD PTR [eax+708], ecx

; 3370 : 
; 3371 : 			#ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 3372 : 				// 조화의 보석 강화 아이템 옵션 : 크리티컬 데미지 증가
; 3373 : 				lpObj->m_AttackDamageRight += lpObj->m_JewelOfHarmonyEffect.HJOpAddCriticalDamage;
; 3374 : 				lpObj->m_AttackDamageLeft  += lpObj->m_JewelOfHarmonyEffect.HJOpAddCriticalDamage;
; 3375 : 			#endif
; 3376 : 
; 3377 : #ifdef DARKLORD_WORK
; 3378 : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 3379 : 			int iValue = 0;
; 3380 : 			gObjGetValueOfBuffIndex( lpObj, BUFFTYPE_CRITICAL_DMG_INC, &iValue );
; 3381 : 			lpObj->m_AttackDamageRight += iValue;
; 3382 : 			lpObj->m_AttackDamageLeft += iValue;
; 3383 : 	#else
; 3384 : 			lpObj->m_AttackDamageRight += lpObj->SkillAddCriticalDamage;

  005cc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005cf	0f b7 88 16 1a
	00 00		 movzx	 ecx, WORD PTR [eax+6678]
  005d6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  005d9	03 8a c8 02 00
	00		 add	 ecx, DWORD PTR [edx+712]
  005df	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005e2	89 88 c8 02 00
	00		 mov	 DWORD PTR [eax+712], ecx

; 3385 : 			lpObj->m_AttackDamageLeft += lpObj->SkillAddCriticalDamage;

  005e8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005eb	0f b7 88 16 1a
	00 00		 movzx	 ecx, WORD PTR [eax+6678]
  005f2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  005f5	03 8a c4 02 00
	00		 add	 ecx, DWORD PTR [edx+708]
  005fb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005fe	89 88 c4 02 00
	00		 mov	 DWORD PTR [eax+708], ecx

; 3386 : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 3387 : #endif
; 3388 : 			
; 3389 : 
; 3390 : 			if( effect == DT_EXCELLENT )

  00604	8b 45 10	 mov	 eax, DWORD PTR _effect$[ebp]
  00607	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0060a	83 f9 02	 cmp	 ecx, 2
  0060d	0f 85 8a 00 00
	00		 jne	 $LN3@GetAttackD

; 3391 : 			{	// 엑설런트 데미지일때는 20%추가
; 3392 : 				lpObj->m_AttackDamageRight += (lpObj->m_AttackDamageMaxRight+SkillRightMaxDamage)*20/100;

  00613	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00616	8b 88 d4 02 00
	00		 mov	 ecx, DWORD PTR [eax+724]
  0061c	03 4d d8	 add	 ecx, DWORD PTR _SkillRightMaxDamage$[ebp]
  0061f	6b c1 14	 imul	 eax, ecx, 20
  00622	99		 cdq
  00623	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00628	f7 f9		 idiv	 ecx
  0062a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0062d	03 82 c8 02 00
	00		 add	 eax, DWORD PTR [edx+712]
  00633	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00636	89 81 c8 02 00
	00		 mov	 DWORD PTR [ecx+712], eax

; 3393 : 				lpObj->m_AttackDamageLeft  += (lpObj->m_AttackDamageMaxLeft+SkillLeftMaxDamage)*20/100;

  0063c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0063f	8b 88 cc 02 00
	00		 mov	 ecx, DWORD PTR [eax+716]
  00645	03 4d d0	 add	 ecx, DWORD PTR _SkillLeftMaxDamage$[ebp]
  00648	6b c1 14	 imul	 eax, ecx, 20
  0064b	99		 cdq
  0064c	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00651	f7 f9		 idiv	 ecx
  00653	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00656	03 82 c4 02 00
	00		 add	 eax, DWORD PTR [edx+708]
  0065c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0065f	89 81 c4 02 00
	00		 mov	 DWORD PTR [ecx+708], eax

; 3394 : 
; 3395 : 				// 세트 옵션 ; 엑설런트 데미지 증가
; 3396 : 				lpObj->m_AttackDamageRight += lpObj->SetOpAddExDamage;

  00665	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00668	0f bf 88 2e 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3886]
  0066f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00672	03 8a c8 02 00
	00		 add	 ecx, DWORD PTR [edx+712]
  00678	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0067b	89 88 c8 02 00
	00		 mov	 DWORD PTR [eax+712], ecx

; 3397 : 				lpObj->m_AttackDamageLeft += lpObj->SetOpAddExDamage;

  00681	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00684	0f bf 88 2e 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3886]
  0068b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0068e	03 8a c4 02 00
	00		 add	 ecx, DWORD PTR [edx+708]
  00694	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00697	89 88 c4 02 00
	00		 mov	 DWORD PTR [eax+708], ecx
$LN3@GetAttackD:

; 3398 : 			}
; 3399 : 		}
; 3400 : 
; 3401 : #if TESTSERVER == 1
; 3402 : 		LogAddC(LOGC_RED, "LEFT : %d, CDamage = %d, Effect = %d", lpObj->m_AttackDamageLeft, cDamage, effect);
; 3403 : #endif
; 3404 : 	}	
; 3405 : 
; 3406 : 	//두손에 무기를 들었을때	
; 3407 : 	if( bTwoHandWeapon )

  0069d	83 7d c0 00	 cmp	 DWORD PTR _bTwoHandWeapon$[ebp], 0
  006a1	74 1d		 je	 SHORT $LN28@GetAttackD

; 3408 : 	{
; 3409 : #ifdef DUEL_SYSTEM_20031028
; 3410 : // 			if (bIsOnDuel)
; 3411 : // 				ad = (lpObj->m_AttackDamageRight+lpObj->m_AttackDamageLeft) * 60 /100 -targetDefense;
; 3412 : // 			else
; 3413 : #endif
; 3414 : 				ad = (lpObj->m_AttackDamageRight+lpObj->m_AttackDamageLeft)-targetDefense;			

  006a3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006a6	8b 88 c8 02 00
	00		 mov	 ecx, DWORD PTR [eax+712]
  006ac	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  006af	03 8a c4 02 00
	00		 add	 ecx, DWORD PTR [edx+708]
  006b5	2b 4d 0c	 sub	 ecx, DWORD PTR _targetDefense$[ebp]
  006b8	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx

; 3415 : 			
; 3416 : #ifdef MODIFY_SEASON4_UPDATE_BUGFIX_02_20080804
; 3417 : 			// 양손에 무기를 들었을 경우 크리티컬 데미지 증가 옵션이 2배로 적용되는 문제를 수정
; 3418 : 			ad -= lpObj->SetOpAddCriticalDamage;
; 3419 : #endif // MODIFY_SEASON4_UPDATE_BUGFIX_02_20080804
; 3420 : 	}

  006bb	e9 f7 00 00 00	 jmp	 $LN29@GetAttackD
$LN28@GetAttackD:

; 3421 : 	//활일때
; 3422 : 	else if( (Left->m_Type >= ITEM_BOW && Left->m_Type < ITEM_BOW+7)
; 3423 : #ifdef MODIFY_APPLYING_BOW_01_20050825
; 3424 : 			|| Left->m_Type == ITEM_BOW + 20
; 3425 : 			|| Left->m_Type == ITEM_BOW + 21
; 3426 : #endif
; 3427 : #ifdef MODIFY_ALBATROS_BOW_BUGFIX_20070105
; 3428 : 			|| Left->m_Type == ITEM_BOW + 22

  006c0	8b 45 c4	 mov	 eax, DWORD PTR _Left$[ebp]
  006c3	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  006c7	81 f9 80 00 00
	00		 cmp	 ecx, 128		; 00000080H
  006cd	7c 0f		 jl	 SHORT $LN33@GetAttackD
  006cf	8b 45 c4	 mov	 eax, DWORD PTR _Left$[ebp]
  006d2	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  006d6	81 f9 87 00 00
	00		 cmp	 ecx, 135		; 00000087H
  006dc	7c 0f		 jl	 SHORT $LN32@GetAttackD
$LN33@GetAttackD:
  006de	8b 45 c4	 mov	 eax, DWORD PTR _Left$[ebp]
  006e1	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  006e5	81 f9 96 00 00
	00		 cmp	 ecx, 150		; 00000096H
  006eb	75 14		 jne	 SHORT $LN30@GetAttackD
$LN32@GetAttackD:

; 3429 : #endif			
; 3430 : #ifdef MODIFY_DARKSTINGER_BUGFIX_20081119
; 3431 : 			|| Left->m_Type == ITEM_BOW + 23
; 3432 : #endif // MODIFY_DARKSTINGER_BUGFIX_20081119
; 3433 : #ifdef ADD_AERINBOW_20090309
; 3434 : 			|| Left->m_Type == ITEM_BOW + 24	// 에어린 보우
; 3435 : #endif // ADD_AERINBOW_20090309
; 3436 : 		)
; 3437 : 	{
; 3438 : #ifdef DUEL_SYSTEM_20031028
; 3439 : // 		if (bIsOnDuel)
; 3440 : // 			ad = (lpObj->m_AttackDamageLeft) * 60 /100 - targetDefense;
; 3441 : // 		else
; 3442 : #endif
; 3443 : 			ad = (lpObj->m_AttackDamageLeft)-targetDefense;

  006ed	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006f0	8b 88 c4 02 00
	00		 mov	 ecx, DWORD PTR [eax+708]
  006f6	2b 4d 0c	 sub	 ecx, DWORD PTR _targetDefense$[ebp]
  006f9	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx

; 3444 : 	}

  006fc	e9 b6 00 00 00	 jmp	 $LN29@GetAttackD
$LN30@GetAttackD:

; 3445 : 	//석궁일때
; 3446 : 	else if(( Right->m_Type >= ITEM_BOW+8 && Right->m_Type < ITEM_BOW+15) ||

  00701	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00704	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00708	81 f9 88 00 00
	00		 cmp	 ecx, 136		; 00000088H
  0070e	7c 0f		 jl	 SHORT $LN37@GetAttackD
  00710	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00713	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00717	81 f9 8f 00 00
	00		 cmp	 ecx, 143		; 0000008fH
  0071d	7c 1e		 jl	 SHORT $LN36@GetAttackD
$LN37@GetAttackD:
  0071f	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00722	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00726	81 f9 90 00 00
	00		 cmp	 ecx, 144		; 00000090H
  0072c	7c 20		 jl	 SHORT $LN34@GetAttackD
  0072e	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00731	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00735	81 f9 a0 00 00
	00		 cmp	 ecx, 160		; 000000a0H
  0073b	7d 11		 jge	 SHORT $LN34@GetAttackD
$LN36@GetAttackD:

; 3447 : 	      ( Right->m_Type >= ITEM_BOW+16 && Right->m_Type < ITEM_BOW+MAX_ITEM_INDEX))
; 3448 : 	{
; 3449 : #ifdef DUEL_SYSTEM_20031028
; 3450 : // 		if (bIsOnDuel)
; 3451 : // 			ad = (lpObj->m_AttackDamageRight) * 60 /100 - targetDefense;
; 3452 : // 		else
; 3453 : #endif
; 3454 : 			ad = (lpObj->m_AttackDamageRight)-targetDefense;

  0073d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00740	8b 88 c8 02 00
	00		 mov	 ecx, DWORD PTR [eax+712]
  00746	2b 4d 0c	 sub	 ecx, DWORD PTR _targetDefense$[ebp]
  00749	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx

; 3455 : 	}

  0074c	eb 69		 jmp	 SHORT $LN29@GetAttackD
$LN34@GetAttackD:

; 3456 : 	//일반무기
; 3457 : 	else if( Right->m_Type >= 0 && Right->m_Type < ITEM_BOW )

  0074e	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  00751	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00755	85 c9		 test	 ecx, ecx
  00757	7c 20		 jl	 SHORT $LN38@GetAttackD
  00759	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  0075c	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00760	81 f9 80 00 00
	00		 cmp	 ecx, 128		; 00000080H
  00766	7d 11		 jge	 SHORT $LN38@GetAttackD

; 3458 : 	{
; 3459 : #ifdef DUEL_SYSTEM_20031028
; 3460 : // 		if (bIsOnDuel)
; 3461 : // 			ad = (lpObj->m_AttackDamageRight) * 60 /100 - targetDefense;
; 3462 : // 		else
; 3463 : #endif
; 3464 : 			ad = (lpObj->m_AttackDamageRight)-targetDefense;

  00768	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0076b	8b 88 c8 02 00
	00		 mov	 ecx, DWORD PTR [eax+712]
  00771	2b 4d 0c	 sub	 ecx, DWORD PTR _targetDefense$[ebp]
  00774	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx

; 3465 : 	}

  00777	eb 3e		 jmp	 SHORT $LN29@GetAttackD
$LN38@GetAttackD:

; 3466 : 	//지팡이
; 3467 : 	else if( Right->m_Type >= ITEM_STAFF && Right->m_Type < ITEM_SHIELD )

  00779	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  0077c	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00780	81 f9 a0 00 00
	00		 cmp	 ecx, 160		; 000000a0H
  00786	7c 20		 jl	 SHORT $LN40@GetAttackD
  00788	8b 45 c8	 mov	 eax, DWORD PTR _Right$[ebp]
  0078b	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  0078f	81 f9 c0 00 00
	00		 cmp	 ecx, 192		; 000000c0H
  00795	7d 11		 jge	 SHORT $LN40@GetAttackD

; 3468 : 	{
; 3469 : #ifdef DUEL_SYSTEM_20031028
; 3470 : // 		if (bIsOnDuel)
; 3471 : // 			ad = (lpObj->m_AttackDamageRight) * 60 /100 - targetDefense;
; 3472 : // 		else
; 3473 : #endif
; 3474 : 			ad = (lpObj->m_AttackDamageRight)-targetDefense;

  00797	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0079a	8b 88 c8 02 00
	00		 mov	 ecx, DWORD PTR [eax+712]
  007a0	2b 4d 0c	 sub	 ecx, DWORD PTR _targetDefense$[ebp]
  007a3	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx

; 3475 : 		}

  007a6	eb 0f		 jmp	 SHORT $LN29@GetAttackD
$LN40@GetAttackD:

; 3476 : 	else
; 3477 : 	{
; 3478 : #ifdef DUEL_SYSTEM_20031028
; 3479 : // 		if (bIsOnDuel)
; 3480 : // 			ad = (lpObj->m_AttackDamageLeft) * 60 /100 - targetDefense;
; 3481 : // 		else
; 3482 : #endif
; 3483 : 			ad = (lpObj->m_AttackDamageLeft)-targetDefense;	

  007a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007ab	8b 88 c4 02 00
	00		 mov	 ecx, DWORD PTR [eax+708]
  007b1	2b 4d 0c	 sub	 ecx, DWORD PTR _targetDefense$[ebp]
  007b4	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx
$LN29@GetAttackD:

; 3484 : 	}
; 3485 : 	
; 3486 : 	// 세트옵션 두손검 장비시 데미지 증가
; 3487 : 	if( lpObj->SetOpTwoHandSwordImproveDamage )

  007b7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007ba	0f b6 88 48 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3912]
  007c1	85 c9		 test	 ecx, ecx
  007c3	74 1e		 je	 SHORT $LN42@GetAttackD

; 3488 : 	{
; 3489 : 		ad += ad*lpObj->SetOpTwoHandSwordImproveDamage/100;

  007c5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007c8	0f b6 88 48 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3912]
  007cf	8b c1		 mov	 eax, ecx
  007d1	0f af 45 e0	 imul	 eax, DWORD PTR _ad$[ebp]
  007d5	99		 cdq
  007d6	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  007db	f7 f9		 idiv	 ecx
  007dd	03 45 e0	 add	 eax, DWORD PTR _ad$[ebp]
  007e0	89 45 e0	 mov	 DWORD PTR _ad$[ebp], eax
$LN42@GetAttackD:

; 3490 : 	}
; 3491 : 
; 3492 : #ifndef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004					// !! NOT
; 3493 : 	ad += lpObj->m_SkillAttack;

  007e3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007e6	8b 4d e0	 mov	 ecx, DWORD PTR _ad$[ebp]
  007e9	03 88 24 1a 00
	00		 add	 ecx, DWORD PTR [eax+6692]
  007ef	89 4d e0	 mov	 DWORD PTR _ad$[ebp], ecx

; 3494 : #endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 3495 : 
; 3496 : #ifdef MODIFY_BUFFSYSTEM_BUGFIX_03_20071211
; 3497 : 	int iIncreaseDamage = 0;
; 3498 : 	iIncreaseDamage = gObjGetTotalValueOfEffect( lpObj, EFFECTTYPE_IMPROVE_DAMAGE );
; 3499 : 	iIncreaseDamage += gObjGetTotalValueOfEffect( lpObj, EFFECTTYPE_MELEEDAMAGE );
; 3500 : 
; 3501 : 	ad += iIncreaseDamage;
; 3502 : #endif // MODIFY_BUFFSYSTEM_BUGFIX_03_20071211
; 3503 : 
; 3504 : 	if( lpObj->m_SkillAttack2 )

  007f2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007f5	83 b8 80 02 00
	00 00		 cmp	 DWORD PTR [eax+640], 0
  007fc	74 09		 je	 SHORT $LN43@GetAttackD

; 3505 : 	{
; 3506 : 		ad += 15;

  007fe	8b 45 e0	 mov	 eax, DWORD PTR _ad$[ebp]
  00801	83 c0 0f	 add	 eax, 15			; 0000000fH
  00804	89 45 e0	 mov	 DWORD PTR _ad$[ebp], eax
$LN43@GetAttackD:

; 3507 : 	}
; 3508 : 
; 3509 : #ifdef ADD_NEW_MONSTER_SYSTEM_01_20050714
; 3510 : 	// 공격력 증가&감소
; 3511 : 	if( lpObj->m_MonsterSkillElementInfo.m_iSkillElementAttackTime > 0 )
; 3512 : 	{
; 3513 : #if TESTSERVER == 1
; 3514 : 		MsgOutput(lpObj->m_Index, "%d 공증&감상태", lpObj->m_MonsterSkillElementInfo.m_iSkillElementAttack);
; 3515 : #endif
; 3516 : 		
; 3517 : 		ad += lpObj->m_MonsterSkillElementInfo.m_iSkillElementAttack;
; 3518 : 
; 3519 : 		if( ad < 0 ) ad = 0;
; 3520 : 	}
; 3521 : #endif
; 3522 : 
; 3523 : #ifdef UPDATE_SUMMONER_NEW_SKILL_20080111	// 위크니스(공격력 하락)
; 3524 : 		int iValue = 0;
; 3525 : 		gObjGetValueOfBuffIndex( lpObj, BUFFTYPE_CURSED_ATTACK_DOWN, &iValue );
; 3526 : 		ad	-= ad * iValue / 100;
; 3527 : #endif	// UPDATE_SUMMONER_NEW_SKILL_20080111
; 3528 : 		
; 3529 : 	return ad;

  00807	8b 45 e0	 mov	 eax, DWORD PTR _ad$[ebp]
$LN45@GetAttackD:

; 3530 : }

  0080a	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0080d	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00814	59		 pop	 ecx
  00815	5f		 pop	 edi
  00816	5e		 pop	 esi
  00817	5b		 pop	 ebx
  00818	8b e5		 mov	 esp, ebp
  0081a	5d		 pop	 ebp
  0081b	c2 14 00	 ret	 20			; 00000014H
?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z ENDP ; CObjAttack::GetAttackDamage
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?Attack@CObjAttack@@QAEHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z
_TEXT	SEGMENT
tv1118 = -204						; size = 4
tv1109 = -204						; size = 4
tv949 = -204						; size = 4
tv869 = -204						; size = 4
tv860 = -204						; size = 4
tv801 = -204						; size = 4
tv792 = -204						; size = 4
tv1119 = -200						; size = 4
tv1110 = -200						; size = 4
tv950 = -200						; size = 4
tv870 = -200						; size = 4
tv861 = -200						; size = 4
tv802 = -200						; size = 4
tv793 = -200						; size = 4
tv688 = -200						; size = 4
_iComboDamage$1 = -132					; size = 4
_atd_reflect$2 = -128					; size = 4
_selfdefense$ = -124					; size = 4
_decattackdamage$3 = -120				; size = 4
_replacemana$4 = -116					; size = 4
_decdamage$5 = -112					; size = 4
_Darkhorse$6 = -108					; size = 4
_dinorantdecdamage$7 = -104				; size = 4
_Dinorant$8 = -100					; size = 4
_damage$9 = -96						; size = 4
_damage$10 = -92					; size = 4
_Wing$11 = -88						; size = 4
_Wing$12 = -84						; size = 4
_damage$13 = -80					; size = 4
_tlevel$14 = -76					; size = 4
_beforeDamage$15 = -72					; size = 4
_targetdefense$16 = -68					; size = 4
_bDamageReflect$ = -64					; size = 4
_bAllMiss$ = -60					; size = 4
_bIsOnDuel$ = -56					; size = 4
_Energy$ = -52						; size = 4
_Vitality$ = -48					; size = 4
_Dexterity$ = -44					; size = 4
_Strength$ = -40					; size = 4
_bCheckAttackIsMagicType$17 = -36			; size = 4
_bCheckAttackIsMagicType$18 = -32			; size = 4
_skill$ = -28						; size = 4
_ManaChange$ = -24					; size = 4
_MsgDamage$ = -17					; size = 1
_lpCallTargetObj$ = -16					; size = 4
_lpCallObj$ = -12					; size = 4
_skillSuccess$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
_lpMagic$ = 16						; size = 4
_magicsend$ = 20					; size = 4
_MSBFlag$ = 24						; size = 1
_AttackDamage$ = 28					; size = 4
_bCombo$ = 32						; size = 4
?Attack@CObjAttack@@QAEHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z PROC ; CObjAttack::Attack, COMDAT
; _this$ = ecx

; 99   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec cc 00 00
	00		 sub	 esp, 204		; 000000ccH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 100  : 	
; 101  : 
; 102  : 	//---------------------------------------------------------------------------------
; 103  : 	//
; 104  : 	//  [] Attack 함수 시작 ...
; 105  : 	//
; 106  : 	//
; 107  : 	//---------------------------------------------------------------------------------
; 108  : 
; 109  : 	int				skillSuccess=0;

  0000f	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _skillSuccess$[ebp], 0

; 110  : 
; 111  : 	LPOBJECTSTRUCT	lpCallObj;
; 112  : 	LPOBJECTSTRUCT	lpCallTargetObj;
; 113  : 	BYTE			MsgDamage = 0;

  00016	c6 45 ef 00	 mov	 BYTE PTR _MsgDamage$[ebp], 0

; 114  : 
; 115  : 	int				ManaChange = FALSE;

  0001a	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _ManaChange$[ebp], 0

; 116  : 
; 117  : #ifdef ADD_SHIELD_POINT_01_20060403
; 118  : 	// CODEREVIEW_SHIELD : iShieldDamage -> Temp 의미 추가
; 119  : 	int				iTempShieldDamage = 0;
; 120  : 	int				iTotalShieldDamage = 0;
; 121  : #endif
; 122  : 
; 123  : 	if( (lpTargetObj->Authority&AUTHORITY_ADMIN) == AUTHORITY_ADMIN ) 

  00021	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00024	8b 88 a4 01 00
	00		 mov	 ecx, DWORD PTR [eax+420]
  0002a	83 e1 02	 and	 ecx, 2
  0002d	74 07		 je	 SHORT $LN4@Attack

; 124  : 	{	// 운영자 캐릭은 공격을 받지 않는다
; 125  : 		return FALSE;

  0002f	33 c0		 xor	 eax, eax
  00031	e9 9a 18 00 00	 jmp	 $LN1@Attack
$LN4@Attack:

; 126  : 	}
; 127  : 
; 128  : #ifdef GMCOMMAND_EX_1ST_BUGFIX
; 129  : 	if( (lpObj->Authority&AUTHORITY_ADMIN) == AUTHORITY_ADMIN ) 
; 130  : 	{	// 운영자 캐릭은 공격을 못한다.
; 131  : 		return FALSE;
; 132  : 	}
; 133  : 	
; 134  : 	if( ((lpObj->Authority&AUTHORITY_EVENT_GM) == AUTHORITY_EVENT_GM)
; 135  : 		|| ((lpTargetObj->Authority&AUTHORITY_EVENT_GM) == AUTHORITY_EVENT_GM)) 
; 136  : 	{
; 137  : 		// AUTHORITY_EVENT_GM 계정이고 투명인 상태에선 공격 받거나 받지 않는다.
; 138  : 		if (gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_INVISABLE ) == TRUE)
; 139  : 			return FALSE;
; 140  : 	}
; 141  : #endif // GMCOMMAND_EX_1ST_BUGFIX
; 142  : 	
; 143  : #ifdef ADD_NEWPVP_PKFIELD
; 144  : 	if (lpObj->Type == OBJTYPE_CHARACTER && g_NewPVP.IsDuel(*lpObj) && g_NewPVP.IsSafeState(*lpObj))
; 145  : 	{
; 146  : 		return FALSE;
; 147  : 	}
; 148  : 
; 149  : 	if (lpTargetObj->Type == OBJTYPE_CHARACTER && g_NewPVP.IsDuel(*lpTargetObj) && g_NewPVP.IsSafeState(*lpTargetObj))
; 150  : 	{
; 151  : 		return FALSE;
; 152  : 	}
; 153  : #endif // ADD_NEWPVP_PKFIELD
; 154  : 
; 155  : 	if( lpObj->MapNumber != lpTargetObj->MapNumber )

  00036	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00039	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  00040	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  00043	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  0004a	3b c8		 cmp	 ecx, eax
  0004c	74 07		 je	 SHORT $LN5@Attack

; 156  : 	{	// 같은 맵이 아니면, 
; 157  : 		return FALSE;

  0004e	33 c0		 xor	 eax, eax
  00050	e9 7b 18 00 00	 jmp	 $LN1@Attack
$LN5@Attack:

; 158  : 	}
; 159  : 
; 160  : #ifdef CRYWOLF_MAIN_SCHEDULER_20050505
; 161  : 	// 크라이울프 준비, 종료 시간에는 몬스터에게 피해를 입힐 수 없다.
; 162  : 	if( g_Crywolf.GetCrywolfState() == CRYWOLF_STATE_READY 
; 163  : 		|| g_Crywolf.GetCrywolfState() == CRYWOLF_STATE_END )
; 164  : 	{
; 165  : 		if( CHECK_CRYWOLF_FIRSTZONE(lpTargetObj->MapNumber) )
; 166  : 		{
; 167  : 			if( lpTargetObj->Type == OBJTYPE_MONSTER )
; 168  : 				return FALSE;
; 169  : 		}	
; 170  : 	}
; 171  : #endif
; 172  : 	
; 173  : #ifdef CHARACTER_AUTO_RECUPERATION_SYSTEM_20050614
; 174  : 	if(g_iUseCharacterAutoRecuperationSystem && lpObj->Level <= g_iCharacterRecuperationMaxLevel) 
; 175  : 	{
; 176  : 		if(lpObj->Type == OBJTYPE_CHARACTER) 
; 177  : 		{
; 178  : 			if(lpObj->Level <= g_iCharacterRecuperationMaxLevel)
; 179  : 				lpObj->m_iAutoRecuperationTime = GetTickCount();
; 180  : 		}
; 181  : 		if(lpTargetObj->Type == OBJTYPE_CHARACTER) 
; 182  : 		{
; 183  : 			if(lpTargetObj->Level <= g_iCharacterRecuperationMaxLevel)
; 184  : 				lpTargetObj->m_iAutoRecuperationTime = GetTickCount();
; 185  : 		}
; 186  : 	}
; 187  : #endif
; 188  : 
; 189  : #ifdef ADD_SHIELD_POINT_01_20060403
; 190  : 	if( lpObj->Type == OBJTYPE_CHARACTER )
; 191  : 	{
; 192  : 		// CODEREVIEW_SHIELD : 변수명 이상? - dw Shield Auto Refill Timer
; 193  : 		lpObj->dwShieldAutoRefillTimer = GetTickCount();
; 194  : 	}
; 195  : 	if( lpTargetObj->Type == OBJTYPE_CHARACTER )
; 196  : 	{
; 197  : 		lpTargetObj->dwShieldAutoRefillTimer = GetTickCount();
; 198  : 	}
; 199  : #endif
; 200  : 
; 201  : 	int skill=0;

  00055	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _skill$[ebp], 0

; 202  : 	if( lpMagic != NULL )

  0005c	83 7d 10 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  00060	74 0a		 je	 SHORT $LN6@Attack

; 203  : 	{
; 204  : 		skill = lpMagic->m_Skill;

  00062	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00065	0f b6 48 05	 movzx	 ecx, BYTE PTR [eax+5]
  00069	89 4d e4	 mov	 DWORD PTR _skill$[ebp], ecx
$LN6@Attack:

; 205  : 	}
; 206  : 
; 207  : #ifdef ADD_NEWPVP_PKFIELD
; 208  : /*
; 209  : 	if (lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER)
; 210  : 	{
; 211  : 		BOOL bWideAreaSkill = FALSE;
; 212  : 		// 같은 길드원은 광역스킬이 적용안됨
; 213  : 		switch (skill)
; 214  : 		{
; 215  : 		case AT_SKILL_DEFENSEDOWN:
; 216  : 			bWideAreaSkill = TRUE;
; 217  : 			break;
; 218  : 		}
; 219  : 		if (bWideAreaSkill == TRUE && skill == AT_SKILL_DEFENSEDOWN)
; 220  : 		{
; 221  : 			if ((lpObj->PartyNumber>=0 && lpTargetObj->PartyNumber>=0)
; 222  : 				&& lpObj->PartyNumber == lpTargetObj->PartyNumber)
; 223  : 			{
; 224  : 				return FALSE;
; 225  : 			}
; 226  : 			if ((lpObj->lpGuild && lpTargetObj->lpGuild) 
; 227  : 				&& lpObj->lpGuild->Number == lpTargetObj->lpGuild->Number)
; 228  : 			{
; 229  : 				return FALSE;
; 230  : 			}
; 231  : 
; 232  : 		}
; 233  : 	}
; 234  : */
; 235  : #endif // ADD_NEWPVP_PKFIELD
; 236  : 
; 237  : #ifdef NEW_SKILL_FORSKYLAND
; 238  : 	// (천공)어둠의불사조 일 경우 
; 239  : 	if( lpObj->Class == 77 )

  0006c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0006f	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00076	83 f9 4d	 cmp	 ecx, 77			; 0000004dH
  00079	75 19		 jne	 SHORT $LN8@Attack

; 240  : 	{
; 241  : 		if( lpObj->m_SkyBossMonSheild && skill == 17 )

  0007b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007e	83 b8 c8 0e 00
	00 00		 cmp	 DWORD PTR [eax+3784], 0
  00085	74 0d		 je	 SHORT $LN8@Attack
  00087	83 7d e4 11	 cmp	 DWORD PTR _skill$[ebp], 17 ; 00000011H
  0008b	75 07		 jne	 SHORT $LN8@Attack

; 242  : 			skill = 3;

  0008d	c7 45 e4 03 00
	00 00		 mov	 DWORD PTR _skill$[ebp], 3
$LN8@Attack:

; 243  : 	}
; 244  : #endif
; 245  : 
; 246  : 	skillSuccess = 1;

  00094	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _skillSuccess$[ebp], 1

; 247  : 
; 248  : 	if( lpObj->GuildNumber > 0 )

  0009b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0009e	83 b8 90 02 00
	00 00		 cmp	 DWORD PTR [eax+656], 0
  000a5	0f 8e 98 00 00
	00		 jle	 $LN14@Attack

; 249  : 	{
; 250  : 		if( lpObj->lpGuild != NULL )

  000ab	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000ae	83 b8 94 02 00
	00 00		 cmp	 DWORD PTR [eax+660], 0
  000b5	0f 84 88 00 00
	00		 je	 $LN14@Attack

; 251  : 		{
; 252  : 			if( lpObj->lpGuild->WarState && lpObj->lpGuild->WarType == BT_SOCCER )

  000bb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000be	8b 88 94 02 00
	00		 mov	 ecx, DWORD PTR [eax+660]
  000c4	0f b6 91 91 05
	00 00		 movzx	 edx, BYTE PTR [ecx+1425]
  000cb	85 d2		 test	 edx, edx
  000cd	74 2d		 je	 SHORT $LN12@Attack
  000cf	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d2	8b 88 94 02 00
	00		 mov	 ecx, DWORD PTR [eax+660]
  000d8	0f b6 91 92 05
	00 00		 movzx	 edx, BYTE PTR [ecx+1426]
  000df	83 fa 01	 cmp	 edx, 1
  000e2	75 18		 jne	 SHORT $LN12@Attack

; 253  : 			{
; 254  : 				if( GetBattleSoccerGoalMove(0) == 0 )

  000e4	6a 00		 push	 0
  000e6	e8 00 00 00 00	 call	 ?GetBattleSoccerGoalMove@@YAHH@Z ; GetBattleSoccerGoalMove
  000eb	83 c4 04	 add	 esp, 4
  000ee	85 c0		 test	 eax, eax
  000f0	75 0a		 jne	 SHORT $LN12@Attack

; 255  : 				{
; 256  : 					return TRUE;

  000f2	b8 01 00 00 00	 mov	 eax, 1
  000f7	e9 d4 17 00 00	 jmp	 $LN1@Attack
$LN12@Attack:

; 257  : 				}				
; 258  : 			}
; 259  : 			
; 260  : //#ifdef ADD_NEW_UNION_01_20041006
; 261  : 			if( lpObj->lpGuild->WarState && lpObj->lpGuild->WarType == BT_NONE && g_GlobalConfig.m_bMonsterKill_War == false )

  000fc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000ff	8b 88 94 02 00
	00		 mov	 ecx, DWORD PTR [eax+660]
  00105	0f b6 91 91 05
	00 00		 movzx	 edx, BYTE PTR [ecx+1425]
  0010c	85 d2		 test	 edx, edx
  0010e	74 33		 je	 SHORT $LN14@Attack
  00110	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00113	8b 88 94 02 00
	00		 mov	 ecx, DWORD PTR [eax+660]
  00119	0f b6 91 92 05
	00 00		 movzx	 edx, BYTE PTR [ecx+1426]
  00120	85 d2		 test	 edx, edx
  00122	75 1f		 jne	 SHORT $LN14@Attack
  00124	83 3d 30 00 00
	00 00		 cmp	 DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+48, 0
  0012b	75 16		 jne	 SHORT $LN14@Attack

; 262  : 			{
; 263  : 				// 일반 길전 일 경우. 몬스터 한테 데미지 안들어간다.
; 264  : 				if( lpTargetObj->Type == OBJTYPE_MONSTER )

  0012d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00130	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00134	83 f9 02	 cmp	 ecx, 2
  00137	75 0a		 jne	 SHORT $LN14@Attack

; 265  : 					return TRUE;

  00139	b8 01 00 00 00	 mov	 eax, 1
  0013e	e9 8d 17 00 00	 jmp	 $LN1@Attack
$LN14@Attack:

; 266  : 			}
; 267  : //#endif
; 268  : 
; 269  : 		}
; 270  : 	}
; 271  : 
; 272  : 	if(g_GlobalConfig.m_bMonsterKill_Duel == false && lpTargetObj->Type == OBJTYPE_MONSTER && gObjDuelCheck(lpObj))

  00143	83 3d 34 00 00
	00 00		 cmp	 DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+52, 0
  0014a	75 26		 jne	 SHORT $LN15@Attack
  0014c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0014f	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00153	83 f9 02	 cmp	 ecx, 2
  00156	75 1a		 jne	 SHORT $LN15@Attack
  00158	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0015b	50		 push	 eax
  0015c	e8 00 00 00 00	 call	 ?gObjDuelCheck@@YAHPAVOBJECTSTRUCT@@@Z ; gObjDuelCheck
  00161	83 c4 04	 add	 esp, 4
  00164	85 c0		 test	 eax, eax
  00166	74 0a		 je	 SHORT $LN15@Attack

; 273  : 	{
; 274  : 		return TRUE;

  00168	b8 01 00 00 00	 mov	 eax, 1
  0016d	e9 5e 17 00 00	 jmp	 $LN1@Attack
$LN15@Attack:

; 275  : 	}
; 276  : 
; 277  : 	if( lpTargetObj->Type == OBJTYPE_MONSTER )

  00172	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00175	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00179	83 f9 02	 cmp	 ecx, 2
  0017c	0f 85 29 01 00
	00		 jne	 $LN25@Attack

; 278  : 	{
; 279  : #ifdef ADD_NEW_MAP_KALIMA_20040518
; 280  : 		if (lpTargetObj->m_iMonsterBattleDelay > 0) 

  00182	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00185	0f be 88 25 02
	00 00		 movsx	 ecx, BYTE PTR [eax+549]
  0018c	85 c9		 test	 ecx, ecx
  0018e	7e 0a		 jle	 SHORT $LN17@Attack

; 281  : 		{
; 282  : 			// 머뭇거리는 동안은 맞지 않는다.
; 283  : 			return TRUE;

  00190	b8 01 00 00 00	 mov	 eax, 1
  00195	e9 36 17 00 00	 jmp	 $LN1@Attack
$LN17@Attack:

; 284  : 		}
; 285  : #endif
; 286  : 
; 287  : 		// 축구공 일 경우엔 튕기게 한다.
; 288  : 		if( lpTargetObj->Class == 200 )	

  0019a	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0019d	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  001a4	81 f9 c8 00 00
	00		 cmp	 ecx, 200		; 000000c8H
  001aa	75 5c		 jne	 SHORT $LN18@Attack

; 289  : 		{
; 290  : #ifdef FOR_ONAIR
; 291  : 			return TRUE;
; 292  : #else
; 293  : 			if( skill )

  001ac	83 7d e4 00	 cmp	 DWORD PTR _skill$[ebp], 0
  001b0	74 16		 je	 SHORT $LN19@Attack

; 294  : 			{
; 295  : 				gObjMonsterStateProc(lpTargetObj, 7, lpObj->m_Index);

  001b2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001b5	8b 08		 mov	 ecx, DWORD PTR [eax]
  001b7	51		 push	 ecx
  001b8	6a 07		 push	 7
  001ba	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  001bd	52		 push	 edx
  001be	e8 00 00 00 00	 call	 ?gObjMonsterStateProc@@YAXPAVOBJECTSTRUCT@@HH@Z ; gObjMonsterStateProc
  001c3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 296  : 			}

  001c6	eb 14		 jmp	 SHORT $LN20@Attack
$LN19@Attack:

; 297  : 			else gObjMonsterStateProc(lpTargetObj, 6, lpObj->m_Index);

  001c8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001cb	8b 08		 mov	 ecx, DWORD PTR [eax]
  001cd	51		 push	 ecx
  001ce	6a 06		 push	 6
  001d0	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  001d3	52		 push	 edx
  001d4	e8 00 00 00 00	 call	 ?gObjMonsterStateProc@@YAXPAVOBJECTSTRUCT@@HH@Z ; gObjMonsterStateProc
  001d9	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN20@Attack:

; 298  : 			if( magicsend )

  001dc	83 7d 14 00	 cmp	 DWORD PTR _magicsend$[ebp], 0
  001e0	74 1c		 je	 SHORT $LN21@Attack

; 299  : 			{
; 300  : 				GCMagicAttackNumberSend(lpObj, skill, lpTargetObj->m_Index, skillSuccess);

  001e2	0f b6 45 f8	 movzx	 eax, BYTE PTR _skillSuccess$[ebp]
  001e6	50		 push	 eax
  001e7	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  001ea	8b 11		 mov	 edx, DWORD PTR [ecx]
  001ec	52		 push	 edx
  001ed	0f b6 45 e4	 movzx	 eax, BYTE PTR _skill$[ebp]
  001f1	50		 push	 eax
  001f2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001f5	51		 push	 ecx
  001f6	e8 00 00 00 00	 call	 ?GCMagicAttackNumberSend@@YAXPAVOBJECTSTRUCT@@EHE@Z ; GCMagicAttackNumberSend
  001fb	83 c4 10	 add	 esp, 16			; 00000010H
$LN21@Attack:

; 301  : 			}
; 302  : 			return TRUE;

  001fe	b8 01 00 00 00	 mov	 eax, 1
  00203	e9 c8 16 00 00	 jmp	 $LN1@Attack
$LN18@Attack:

; 303  : #endif
; 304  : 		}
; 305  : 
; 306  : /*#ifdef GMCOMMAND_EX
; 307  : 		DWORD dwAuthority = AUTHORITY_EVENT_GM | AUTHORITY_SUPER_ADMIN;
; 308  : 		if( CheckAuthority(dwAuthority, lpObj) == TRUE 
; 309  : 			&& gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_INVISABLE ) == TRUE )
; 310  : 		{
; 311  : 			return FALSE;
; 312  : 		}
; 313  : #endif // GMCOMMAND_EX*/
; 314  : 		
; 315  : #ifdef ADD_NEW_MAP_KALIMA_20040518						
; 316  : 		// 마법이나 물리공격 무적인지 체크한다.
; 317  : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 318  : 		if( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_MONSTER_MAGIC_IMMUNE ) == true )
; 319  : 		{
; 320  : 			INT bCheckAttackIsMagicType = gObjCheckAttackTypeMagic (lpObj->Class, skill);
; 321  : 			if( bCheckAttackIsMagicType == CMagicDamage::SKILL_TYPE_MAGIC )
; 322  : 			{
; 323  : 				GCMagicAttackNumberSend(lpObj, skill, lpTargetObj->m_Index, FALSE);
; 324  : 				return TRUE;
; 325  : 			}
; 326  : 		}
; 327  : 
; 328  : 		if( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_MONSTER_MELEE_IMMUNE ) == true )
; 329  : 		{
; 330  : 			INT bCheckAttackIsMagicType = gObjCheckAttackTypeMagic (lpObj->Class, skill);
; 331  : 			if (bCheckAttackIsMagicType == CMagicDamage::SKILL_TYPE_PHYSICS) 
; 332  : 			{		
; 333  : 				// 물리공격은 통하지 않는다.
; 334  : 				GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 335  : 				return TRUE;
; 336  : 			}
; 337  : 		}
; 338  : 	#else
; 339  : 		if( lpTargetObj->m_ImmuneToMagicCount > 0 )	

  00208	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0020b	0f be 88 23 02
	00 00		 movsx	 ecx, BYTE PTR [eax+547]
  00212	85 c9		 test	 ecx, ecx
  00214	7e 43		 jle	 SHORT $LN23@Attack

; 340  : 		{	
; 341  : 			// 마법공격 무적 시간 이다.
; 342  : 			INT bCheckAttackIsMagicType = gObjCheckAttackTypeMagic (lpObj->Class, skill);

  00216	8b 45 e4	 mov	 eax, DWORD PTR _skill$[ebp]
  00219	50		 push	 eax
  0021a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0021d	0f b7 91 9c 00
	00 00		 movzx	 edx, WORD PTR [ecx+156]
  00224	52		 push	 edx
  00225	e8 00 00 00 00	 call	 ?gObjCheckAttackTypeMagic@@YAHHH@Z ; gObjCheckAttackTypeMagic
  0022a	83 c4 08	 add	 esp, 8
  0022d	89 45 e0	 mov	 DWORD PTR _bCheckAttackIsMagicType$18[ebp], eax

; 343  : 
; 344  : 			if (bCheckAttackIsMagicType == CMagicDamage::SKILL_TYPE_MAGIC) 

  00230	83 7d e0 01	 cmp	 DWORD PTR _bCheckAttackIsMagicType$18[ebp], 1
  00234	75 23		 jne	 SHORT $LN23@Attack

; 345  : 			{		
; 346  : 				// 마법공격은 통하지 않는다.
; 347  : 				GCMagicAttackNumberSend(lpObj, skill, lpTargetObj->m_Index, FALSE);

  00236	6a 00		 push	 0
  00238	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0023b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0023d	51		 push	 ecx
  0023e	0f b6 55 e4	 movzx	 edx, BYTE PTR _skill$[ebp]
  00242	52		 push	 edx
  00243	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00246	50		 push	 eax
  00247	e8 00 00 00 00	 call	 ?GCMagicAttackNumberSend@@YAXPAVOBJECTSTRUCT@@EHE@Z ; GCMagicAttackNumberSend
  0024c	83 c4 10	 add	 esp, 16			; 00000010H

; 348  : 				return TRUE;

  0024f	b8 01 00 00 00	 mov	 eax, 1
  00254	e9 77 16 00 00	 jmp	 $LN1@Attack
$LN23@Attack:

; 349  : 			}
; 350  : 		}
; 351  : 		
; 352  : 		if( lpTargetObj->m_ImmuneToHarmCount > 0 ) 

  00259	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0025c	0f be 88 24 02
	00 00		 movsx	 ecx, BYTE PTR [eax+548]
  00263	85 c9		 test	 ecx, ecx
  00265	7e 44		 jle	 SHORT $LN25@Attack

; 353  : 		{	
; 354  : 			// 물리공격 무적 시간 이다.
; 355  : 			INT bCheckAttackIsMagicType = gObjCheckAttackTypeMagic (lpObj->Class, skill);

  00267	8b 45 e4	 mov	 eax, DWORD PTR _skill$[ebp]
  0026a	50		 push	 eax
  0026b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0026e	0f b7 91 9c 00
	00 00		 movzx	 edx, WORD PTR [ecx+156]
  00275	52		 push	 edx
  00276	e8 00 00 00 00	 call	 ?gObjCheckAttackTypeMagic@@YAHHH@Z ; gObjCheckAttackTypeMagic
  0027b	83 c4 08	 add	 esp, 8
  0027e	89 45 dc	 mov	 DWORD PTR _bCheckAttackIsMagicType$17[ebp], eax

; 356  : 
; 357  : 			if (bCheckAttackIsMagicType == CMagicDamage::SKILL_TYPE_PHYSICS) 

  00281	83 7d dc 00	 cmp	 DWORD PTR _bCheckAttackIsMagicType$17[ebp], 0
  00285	75 24		 jne	 SHORT $LN25@Attack

; 358  : 			{		
; 359  : 				// 물리공격은 통하지 않는다.
; 360  : #ifdef ADD_SHIELD_POINT_01_20060403
; 361  : 				GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 362  : #else
; 363  : 				GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0);

  00287	6a 00		 push	 0
  00289	6a 00		 push	 0
  0028b	6a 00		 push	 0
  0028d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00290	8b 08		 mov	 ecx, DWORD PTR [eax]
  00292	51		 push	 ecx
  00293	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00296	8b 02		 mov	 eax, DWORD PTR [edx]
  00298	50		 push	 eax
  00299	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHH@Z ; GCDamageSend
  0029e	83 c4 14	 add	 esp, 20			; 00000014H

; 364  : #endif
; 365  : 				return TRUE;

  002a1	b8 01 00 00 00	 mov	 eax, 1
  002a6	e9 25 16 00 00	 jmp	 $LN1@Attack
$LN25@Attack:

; 366  : 			}
; 367  : 		}
; 368  : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 369  : #endif
; 370  : 		
; 371  : #ifdef ADD_NEW_MONSTER_SYSTEM_01_20050714
; 372  : 		// 마법 Immune 처리를 한다.
; 373  : 		if( lpTargetObj->m_MonsterSkillElementInfo.m_iSkillElementImmuneTime > 0 )
; 374  : 		{
; 375  : 			if(lpTargetObj->m_MonsterSkillElementInfo.m_iSkillElementImmuneNumber == skill)
; 376  : 			{
; 377  : #if TESTSERVER == 1
; 378  : 				MsgOutput(lpTargetObj->m_Index, "%d 마법Immune상태", skill);
; 379  : #endif
; 380  : 				return TRUE;
; 381  : 			}
; 382  : 		}
; 383  : #endif
; 384  : 		
; 385  : #ifdef ADD_RAKLION_20080408
; 386  : 		// 물리공격, 마법 Immune 처리를 한다.
; 387  : 		if( lpTargetObj->m_MonsterSkillElementInfo.m_iSkillElementImmuneAllTime > 0 )
; 388  : 		{
; 389  : 			
; 390  : #if TESTSERVER == 1
; 391  : 			MsgOutput(lpTargetObj->m_Index, "물리공격, 마법Immune상태");
; 392  : #endif
; 393  : 			//////////////////////////////////////////////////////////////////////////
; 394  : 			// All Miss 처리
; 395  : 			int MsgDamage = 0x20;
; 396  : 			
; 397  : #ifdef ADD_SHIELD_POINT_01_20060403
; 398  : 			GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, MsgDamage, 0);
; 399  : #else
; 400  : 			GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, MsgDamage);
; 401  : #endif //ADD_SHIELD_POINT_01_20060403
; 402  : 			//////////////////////////////////////////////////////////////////////////
; 403  : 			
; 404  : 			return TRUE;
; 405  : 		}
; 406  : #endif // ADD_RAKLION_20080408
; 407  : 
; 408  : 	}
; 409  : 		
; 410  : 	if( lpObj->Type == OBJTYPE_CHARACTER )

  002ab	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002ae	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  002b2	83 f9 01	 cmp	 ecx, 1
  002b5	75 2e		 jne	 SHORT $LN26@Attack

; 411  : 	{
; 412  : 		if( gObjIsConnected(lpObj) == FALSE ) return FALSE;

  002b7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002ba	50		 push	 eax
  002bb	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHPAVOBJECTSTRUCT@@@Z ; gObjIsConnected
  002c0	83 c4 04	 add	 esp, 4
  002c3	85 c0		 test	 eax, eax
  002c5	75 07		 jne	 SHORT $LN27@Attack
  002c7	33 c0		 xor	 eax, eax
  002c9	e9 02 16 00 00	 jmp	 $LN1@Attack
$LN27@Attack:

; 413  : 
; 414  : #ifdef MODIFY_CHAIN_LIGHTNING_BUGFIX_20081022
; 415  : 		// 기존 코드에서 왜 이걸 넣었는지는 모르지만(기획의도였겠지...;;) 변신 상태에서도 동일하게 진행하게 한다.
; 416  : 		// 해외팀 허진희씨가 기획팀에 확인한 결과 변신 자체에는 외형적인 모습만 변하고 스킬등 다른 부분에는 전혀 연관이 없다고 하여. 수정함.
; 417  : 		// 버그 레포트에는 체인라이트닝에 문제가 있다고 하지만.. 그외 combo 적용 스킬에 영향을 줄것으로 보여 아예 변신반지 처리는 하지 않는다.
; 418  : 		// by natinda 2008/10/22
; 419  : #else
; 420  : 		if( lpObj->m_Change == 8 ) 
; 421  : 		{
; 422  : 			skill = 1;
; 423  : 			lpMagic = &DefMagicInf[1];
; 424  : 			magicsend = 1;
; 425  : 		}
; 426  : #endif //MODIFY_CHAIN_LIGHTNING_BUGFIX_20081022
; 427  : 		
; 428  : 
; 429  : #ifdef DARKLORD_WORK
; 430  : 		gDarkSpirit[lpObj->m_Index].SetTarget(lpTargetObj->m_Index);

  002ce	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  002d1	8b 08		 mov	 ecx, DWORD PTR [eax]
  002d3	51		 push	 ecx
  002d4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002d7	6b 0a 28	 imul	 ecx, DWORD PTR [edx], 40
  002da	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?gDarkSpirit@@3PAVCDarkSpirit@@A ; gDarkSpirit
  002e0	e8 00 00 00 00	 call	 ?SetTarget@CDarkSpirit@@QAEXH@Z ; CDarkSpirit::SetTarget
$LN26@Attack:

; 431  : #endif
; 432  : 	}
; 433  : 	
; 434  : 	if( lpTargetObj->Type == OBJTYPE_CHARACTER )

  002e5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  002e8	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  002ec	83 f9 01	 cmp	 ecx, 1
  002ef	75 5f		 jne	 SHORT $LN35@Attack

; 435  : 	{
; 436  : 		if( gObjIsConnected(lpTargetObj) == FALSE ) return FALSE;

  002f1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  002f4	50		 push	 eax
  002f5	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHPAVOBJECTSTRUCT@@@Z ; gObjIsConnected
  002fa	83 c4 04	 add	 esp, 4
  002fd	85 c0		 test	 eax, eax
  002ff	75 09		 jne	 SHORT $LN29@Attack
  00301	33 c0		 xor	 eax, eax
  00303	e9 c8 15 00 00	 jmp	 $LN1@Attack
  00308	eb 46		 jmp	 SHORT $LN35@Attack
$LN29@Attack:

; 437  : 		else if(g_GlobalConfig.m_bDisableTwisting == TRUE && skill == AT_SKILL_WHEEL) return FALSE;

  0030a	83 3d 20 00 00
	00 01		 cmp	 DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+32, 1
  00311	75 0f		 jne	 SHORT $LN31@Attack
  00313	83 7d e4 29	 cmp	 DWORD PTR _skill$[ebp], 41 ; 00000029H
  00317	75 09		 jne	 SHORT $LN31@Attack
  00319	33 c0		 xor	 eax, eax
  0031b	e9 b0 15 00 00	 jmp	 $LN1@Attack
  00320	eb 2e		 jmp	 SHORT $LN35@Attack
$LN31@Attack:

; 438  : 		else if(g_GlobalConfig.m_bDisableBlow == TRUE && skill == AT_SKILL_BLOWOFFURY) return FALSE;

  00322	83 3d 24 00 00
	00 01		 cmp	 DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+36, 1
  00329	75 0f		 jne	 SHORT $LN33@Attack
  0032b	83 7d e4 2a	 cmp	 DWORD PTR _skill$[ebp], 42 ; 0000002aH
  0032f	75 09		 jne	 SHORT $LN33@Attack
  00331	33 c0		 xor	 eax, eax
  00333	e9 98 15 00 00	 jmp	 $LN1@Attack
  00338	eb 16		 jmp	 SHORT $LN35@Attack
$LN33@Attack:

; 439  : #ifdef ADD_SKILL_WITH_COMBO
; 440  : 		else if(g_GlobalConfig.m_bDisableDecay == TRUE && skill == AT_SKILL_EXPPOISON) return FALSE;

  0033a	83 3d 28 00 00
	00 01		 cmp	 DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+40, 1
  00341	75 0d		 jne	 SHORT $LN35@Attack
  00343	83 7d e4 26	 cmp	 DWORD PTR _skill$[ebp], 38 ; 00000026H
  00347	75 07		 jne	 SHORT $LN35@Attack
  00349	33 c0		 xor	 eax, eax
  0034b	e9 80 15 00 00	 jmp	 $LN1@Attack
$LN35@Attack:

; 441  : #endif
; 442  : 	}
; 443  : 	
; 444  : 	if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_MONSTER)

  00350	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00353	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00357	83 f9 01	 cmp	 ecx, 1
  0035a	75 2f		 jne	 SHORT $LN38@Attack
  0035c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0035f	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00363	83 f9 02	 cmp	 ecx, 2
  00366	75 23		 jne	 SHORT $LN38@Attack

; 445  : 	{
; 446  : 		// 공격자가 플레이어고 상대가 몬스터라면 소환수인지 체크한다.
; 447  : 		// 이때 자신이 소환한 몬스터일경우 공격이 안된다.
; 448  : 		if( lpObj->m_RecallMon >= 0 )

  00368	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0036b	83 b8 a4 02 00
	00 00		 cmp	 DWORD PTR [eax+676], 0
  00372	7c 17		 jl	 SHORT $LN38@Attack

; 449  : 		{
; 450  : 			if( lpObj->m_RecallMon == lpTargetObj->m_Index ) return FALSE;

  00374	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00377	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0037a	8b 90 a4 02 00
	00		 mov	 edx, DWORD PTR [eax+676]
  00380	3b 11		 cmp	 edx, DWORD PTR [ecx]
  00382	75 07		 jne	 SHORT $LN38@Attack
  00384	33 c0		 xor	 eax, eax
  00386	e9 45 15 00 00	 jmp	 $LN1@Attack
$LN38@Attack:

; 451  : 		}
; 452  : 	}
; 453  : 	
; 454  : 	// 공격해도 되는지 물어본다.
; 455  : 	if( gObjAttackQ(lpTargetObj) == FALSE ) return FALSE;

  0038b	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0038e	50		 push	 eax
  0038f	e8 00 00 00 00	 call	 ?gObjAttackQ@@YAHPAVOBJECTSTRUCT@@@Z ; gObjAttackQ
  00394	83 c4 04	 add	 esp, 4
  00397	85 c0		 test	 eax, eax
  00399	75 07		 jne	 SHORT $LN39@Attack
  0039b	33 c0		 xor	 eax, eax
  0039d	e9 2e 15 00 00	 jmp	 $LN1@Attack
$LN39@Attack:

; 456  : 	
; 457  : #ifdef CASTLE_MAIN_SCHEDULER_20041111		
; 458  : // 공성관련 사람의 공격당함 여부 -> 공성전 중에 같은 편은 공격받으면 않된다.
; 459  : //	if (g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE) 
; 460  : //	{
; 461  : //		if ((lpObj->m_btCsJoinSide > CS_SIEGESIDE_NONE) &&
; 462  : //			(lpObj->m_btCsJoinSide == lpTargetObj->m_btCsJoinSide)
; 463  : //			) 
; 464  : //		{
; 465  : //			return FALSE;
; 466  : //		}
; 467  : //	}
; 468  : #endif
; 469  : 
; 470  : 	// 나의 소환수가 존재한다면.. 적을 체크한다
; 471  : 	if( lpObj->m_RecallMon >= 0 )

  003a2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003a5	83 b8 a4 02 00
	00 00		 cmp	 DWORD PTR [eax+676], 0
  003ac	7c 12		 jl	 SHORT $LN40@Attack

; 472  : 		gObjCallMonsterSetEnemy(lpObj, lpTargetObj->m_Index);

  003ae	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  003b1	8b 08		 mov	 ecx, DWORD PTR [eax]
  003b3	51		 push	 ecx
  003b4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003b7	52		 push	 edx
  003b8	e8 00 00 00 00	 call	 ?gObjCallMonsterSetEnemy@@YAHPAVOBJECTSTRUCT@@H@Z ; gObjCallMonsterSetEnemy
  003bd	83 c4 08	 add	 esp, 8
$LN40@Attack:

; 473  : 
; 474  : 	lpObj->m_TotalAttackCount++;

  003c0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003c3	8b 88 f4 01 00
	00		 mov	 ecx, DWORD PTR [eax+500]
  003c9	83 c1 01	 add	 ecx, 1
  003cc	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003cf	89 8a f4 01 00
	00		 mov	 DWORD PTR [edx+500], ecx

; 475  : 
; 476  : #ifdef MODIFY_ARROW_DECREASE_ELF_20040503
; 477  : 	if( !AttackDamage )

  003d5	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  003d9	75 17		 jne	 SHORT $LN42@Attack

; 478  : 	{
; 479  : #endif
; 480  : 		// 요정 화살 감소
; 481  : 		
; 482  : 	#ifdef ADD_ITEM_FENRIR_01_20051110
; 483  : 		// 펜릴의 플라즈마스톰의 경우에는 화살을 감소시키지 않는다.
; 484  : 		if( skill != AT_SKILL_FENRIR_ATTACK )
; 485  : 		{
; 486  : 	#endif
; 487  : #ifdef ADD_SKILL_MUSE_ELF_INFINITYARROW_20060406
; 488  : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 489  : 			if( gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_INFINITY_ARROW ) == false )
; 490  : 	#else
; 491  : 			if( lpObj->m_iMuseElfInfinityArrowSkillTime == 0 )
; 492  : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 493  : 			{
; 494  : #endif
; 495  : 			if( !DecreaseArrow(lpObj) )

  003db	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003de	50		 push	 eax
  003df	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  003e2	e8 00 00 00 00	 call	 ?DecreaseArrow@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@@Z ; CObjBaseAttack::DecreaseArrow
  003e7	85 c0		 test	 eax, eax
  003e9	75 07		 jne	 SHORT $LN42@Attack

; 496  : 			return FALSE;

  003eb	33 c0		 xor	 eax, eax
  003ed	e9 de 14 00 00	 jmp	 $LN1@Attack
$LN42@Attack:

; 497  : #ifdef ADD_SKILL_MUSE_ELF_INFINITYARROW_20060406
; 498  : 			}
; 499  : #endif
; 500  : 
; 501  : 
; 502  : 	#ifdef ADD_ITEM_FENRIR_01_20051110
; 503  : 		}
; 504  : 	#endif
; 505  : 
; 506  : #ifdef MODIFY_ARROW_DECREASE_ELF_20040503
; 507  : 	}
; 508  : #endif
; 509  : 
; 510  : 	// 공격 지역을 체크 한다
; 511  : 	if( !CheckAttackArea(lpObj, lpTargetObj) )

  003f2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  003f5	50		 push	 eax
  003f6	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003f9	51		 push	 ecx
  003fa	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  003fd	e8 00 00 00 00	 call	 ?CheckAttackArea@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0@Z ; CObjBaseAttack::CheckAttackArea
  00402	85 c0		 test	 eax, eax
  00404	75 07		 jne	 SHORT $LN43@Attack

; 512  : 		return FALSE;

  00406	33 c0		 xor	 eax, eax
  00408	e9 c3 14 00 00	 jmp	 $LN1@Attack
$LN43@Attack:

; 513  : 	
; 514  : 	// 소환몬스터일 경우 주인설정
; 515  : 	lpCallObj = lpObj;

  0040d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00410	89 45 f4	 mov	 DWORD PTR _lpCallObj$[ebp], eax

; 516  : 	if( lpObj->Type == OBJTYPE_MONSTER )

  00413	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00416	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0041a	83 f9 02	 cmp	 ecx, 2
  0041d	75 22		 jne	 SHORT $LN45@Attack

; 517  : 	{
; 518  : 		if( lpObj->m_RecallMon >= 0 ) 

  0041f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00422	83 b8 a4 02 00
	00 00		 cmp	 DWORD PTR [eax+676], 0
  00429	7c 16		 jl	 SHORT $LN45@Attack

; 519  : 		{
; 520  : 			lpCallObj = &gObj[lpObj->m_RecallMon];

  0042b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0042e	69 88 a4 02 00
	00 a0 1b 00 00	 imul	 ecx, DWORD PTR [eax+676], 7072
  00438	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0043e	89 4d f4	 mov	 DWORD PTR _lpCallObj$[ebp], ecx
$LN45@Attack:

; 521  : 		}
; 522  : 	}
; 523  : 	lpCallTargetObj = lpTargetObj;

  00441	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00444	89 45 f0	 mov	 DWORD PTR _lpCallTargetObj$[ebp], eax

; 524  : 	if( lpTargetObj->Type == OBJTYPE_MONSTER )

  00447	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0044a	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0044e	83 f9 02	 cmp	 ecx, 2
  00451	75 22		 jne	 SHORT $LN47@Attack

; 525  : 	{
; 526  : 		if( lpTargetObj->m_RecallMon >= 0 ) 

  00453	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00456	83 b8 a4 02 00
	00 00		 cmp	 DWORD PTR [eax+676], 0
  0045d	7c 16		 jl	 SHORT $LN47@Attack

; 527  : 		{
; 528  : 			lpCallTargetObj = &gObj[lpTargetObj->m_RecallMon];

  0045f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00462	69 88 a4 02 00
	00 a0 1b 00 00	 imul	 ecx, DWORD PTR [eax+676], 7072
  0046c	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00472	89 4d f0	 mov	 DWORD PTR _lpCallTargetObj$[ebp], ecx
$LN47@Attack:

; 529  : 		}
; 530  : 	}
; 531  : 
; 532  : 	// 피케이 체크
; 533  : 	if( !PkCheck(lpCallObj, lpTargetObj) )

  00475	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00478	50		 push	 eax
  00479	8b 4d f4	 mov	 ecx, DWORD PTR _lpCallObj$[ebp]
  0047c	51		 push	 ecx
  0047d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00480	e8 00 00 00 00	 call	 ?PkCheck@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0@Z ; CObjBaseAttack::PkCheck
  00485	85 c0		 test	 eax, eax
  00487	75 07		 jne	 SHORT $LN48@Attack

; 534  : 		return FALSE;

  00489	33 c0		 xor	 eax, eax
  0048b	e9 40 14 00 00	 jmp	 $LN1@Attack
$LN48@Attack:

; 535  : 
; 536  : 	int	Strength	= lpObj->Strength+lpObj->AddStrength;

  00490	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00493	0f b7 88 b4 00
	00 00		 movzx	 ecx, WORD PTR [eax+180]
  0049a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0049d	0f b7 82 e0 00
	00 00		 movzx	 eax, WORD PTR [edx+224]
  004a4	03 c8		 add	 ecx, eax
  004a6	89 4d d8	 mov	 DWORD PTR _Strength$[ebp], ecx

; 537  : 	int	Dexterity	= lpObj->Dexterity+lpObj->AddDexterity;

  004a9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ac	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  004b3	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004b6	0f b7 82 e2 00
	00 00		 movzx	 eax, WORD PTR [edx+226]
  004bd	03 c8		 add	 ecx, eax
  004bf	89 4d d4	 mov	 DWORD PTR _Dexterity$[ebp], ecx

; 538  : 	int	Vitality	= lpObj->Vitality+lpObj->AddVitality;

  004c2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004c5	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  004cc	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004cf	0f b7 82 e4 00
	00 00		 movzx	 eax, WORD PTR [edx+228]
  004d6	03 c8		 add	 ecx, eax
  004d8	89 4d d0	 mov	 DWORD PTR _Vitality$[ebp], ecx

; 539  : 	int	Energy		= lpObj->Energy+lpObj->AddEnergy;

  004db	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004de	0f b7 88 ba 00
	00 00		 movzx	 ecx, WORD PTR [eax+186]
  004e5	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004e8	0f b7 82 e6 00
	00 00		 movzx	 eax, WORD PTR [edx+230]
  004ef	03 c8		 add	 ecx, eax
  004f1	89 4d cc	 mov	 DWORD PTR _Energy$[ebp], ecx

; 540  : 
; 541  : #ifdef DUEL_SYSTEM_20031028
; 542  : 	BOOL bIsOnDuel = gObjDuelCheck(lpObj, lpTargetObj);

  004f4	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  004f7	50		 push	 eax
  004f8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  004fb	51		 push	 ecx
  004fc	e8 00 00 00 00	 call	 ?gObjDuelCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjDuelCheck
  00501	83 c4 08	 add	 esp, 8
  00504	89 45 c8	 mov	 DWORD PTR _bIsOnDuel$[ebp], eax

; 543  : 
; 544  : #ifdef DUEL_SYSTEM_FIX_20031224		// 싸우는 양쪽이 서로 결투 중이라면 결투카운트를 갱신한다.
; 545  : 	if (bIsOnDuel) {

  00507	83 7d c8 00	 cmp	 DWORD PTR _bIsOnDuel$[ebp], 0
  0050b	74 1e		 je	 SHORT $LN49@Attack

; 546  : 		lpObj->m_iDuelTickCount = GetTickCount();

  0050d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00513	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00516	89 81 f4 0c 00
	00		 mov	 DWORD PTR [ecx+3316], eax

; 547  : 		lpTargetObj->m_iDuelTickCount = GetTickCount();

  0051c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00522	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00525	89 81 f4 0c 00
	00		 mov	 DWORD PTR [ecx+3316], eax
$LN49@Attack:

; 548  : 	}
; 549  : #endif
; 550  : #endif
; 551  : 
; 552  : 	// 크리스탈 검을 들고 있었다면.. 1/20 로 얼리기..
; 553  : 	if( lpObj->pInventory[EQUIPMENT_WEAPON_RIGHT].m_Type == MAKE_ITEMNUM(2,5) && 

  0052b	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00530	6b c8 00	 imul	 ecx, eax, 0
  00533	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00536	8b 82 5c 0c 00
	00		 mov	 eax, DWORD PTR [edx+3164]
  0053c	0f bf 74 08 06	 movsx	 esi, WORD PTR [eax+ecx+6]
  00541	6a 05		 push	 5
  00543	6a 02		 push	 2
  00545	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0054a	83 c4 08	 add	 esp, 8
  0054d	3b f0		 cmp	 esi, eax
  0054f	75 4f		 jne	 SHORT $LN50@Attack
  00551	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00556	6b c8 00	 imul	 ecx, eax, 0
  00559	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0055c	8b 82 5c 0c 00
	00		 mov	 eax, DWORD PTR [edx+3164]
  00562	0f b6 8c 08 94
	00 00 00	 movzx	 ecx, BYTE PTR [eax+ecx+148]
  0056a	85 c9		 test	 ecx, ecx
  0056c	74 32		 je	 SHORT $LN50@Attack

; 554  : 		lpObj->pInventory[EQUIPMENT_WEAPON_RIGHT].m_IsValidItem )
; 555  : 	{
; 556  : 		if( rand()%20 == 0 )

  0056e	e8 00 00 00 00	 call	 _rand
  00573	99		 cdq
  00574	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00579	f7 f9		 idiv	 ecx
  0057b	85 d2		 test	 edx, edx
  0057d	75 1f		 jne	 SHORT $LN52@Attack

; 557  : 		{
; 558  : 			skill = AT_SKILL_SLOW;

  0057f	c7 45 e4 07 00
	00 00		 mov	 DWORD PTR _skill$[ebp], 7

; 559  : 			lpMagic = &DefMagicInf[7];

  00586	b8 10 00 00 00	 mov	 eax, 16			; 00000010H
  0058b	6b c8 07	 imul	 ecx, eax, 7
  0058e	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?DefMagicInf@@3PAVCMagicInf@@A ; DefMagicInf
  00594	89 4d 10	 mov	 DWORD PTR _lpMagic$[ebp], ecx

; 560  : 			magicsend = 1;

  00597	c7 45 14 01 00
	00 00		 mov	 DWORD PTR _magicsend$[ebp], 1
$LN52@Attack:

; 561  : 		}
; 562  : 	}

  0059e	eb 73		 jmp	 SHORT $LN54@Attack
$LN50@Attack:

; 563  : 	else if( lpObj->pInventory[EQUIPMENT_WEAPON_LEFT].m_Type == MAKE_ITEMNUM(2,5) && 

  005a0	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  005a5	c1 e0 00	 shl	 eax, 0
  005a8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  005ab	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  005b1	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  005b6	6a 05		 push	 5
  005b8	6a 02		 push	 2
  005ba	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  005bf	83 c4 08	 add	 esp, 8
  005c2	3b f0		 cmp	 esi, eax
  005c4	75 4d		 jne	 SHORT $LN54@Attack
  005c6	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  005cb	c1 e0 00	 shl	 eax, 0
  005ce	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  005d1	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  005d7	0f b6 84 02 94
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+148]
  005df	85 c0		 test	 eax, eax
  005e1	74 30		 je	 SHORT $LN54@Attack

; 564  : 			 lpObj->pInventory[EQUIPMENT_WEAPON_LEFT].m_IsValidItem )
; 565  : 	{
; 566  : 		if( rand()%20 == 0 )

  005e3	e8 00 00 00 00	 call	 _rand
  005e8	99		 cdq
  005e9	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  005ee	f7 f9		 idiv	 ecx
  005f0	85 d2		 test	 edx, edx
  005f2	75 1f		 jne	 SHORT $LN54@Attack

; 567  : 		{
; 568  : 			skill = AT_SKILL_SLOW;

  005f4	c7 45 e4 07 00
	00 00		 mov	 DWORD PTR _skill$[ebp], 7

; 569  : 			lpMagic = &DefMagicInf[7];

  005fb	b8 10 00 00 00	 mov	 eax, 16			; 00000010H
  00600	6b c8 07	 imul	 ecx, eax, 7
  00603	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?DefMagicInf@@3PAVCMagicInf@@A ; DefMagicInf
  00609	89 4d 10	 mov	 DWORD PTR _lpMagic$[ebp], ecx

; 570  : 			magicsend = 1;

  0060c	c7 45 14 01 00
	00 00		 mov	 DWORD PTR _magicsend$[ebp], 1
$LN54@Attack:

; 571  : 		}
; 572  : 	}
; 573  : 
; 574  : 	MSBFlag = 0;

  00613	c6 45 18 00	 mov	 BYTE PTR _MSBFlag$[ebp], 0

; 575  : 	MsgDamage = 0;

  00617	c6 45 ef 00	 mov	 BYTE PTR _MsgDamage$[ebp], 0

; 576  : 
; 577  : 	// 저항력 체크
; 578  : 	skillSuccess = ResistanceCheck(lpObj, lpTargetObj, skill);

  0061b	8b 45 e4	 mov	 eax, DWORD PTR _skill$[ebp]
  0061e	50		 push	 eax
  0061f	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00622	51		 push	 ecx
  00623	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00626	52		 push	 edx
  00627	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0062a	e8 00 00 00 00	 call	 ?ResistanceCheck@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0H@Z ; CObjBaseAttack::ResistanceCheck
  0062f	89 45 f8	 mov	 DWORD PTR _skillSuccess$[ebp], eax

; 579  : 
; 580  : #ifdef MODIFY_ELF_ICEARROWSKILL_BUGFIX_20060914
; 581  : 	int skillIceArrowSuccess = skillSuccess;	// skillSuccess 값을 기억해둔다. 
; 582  : 	if ( skill == AT_SKILL_ELFHARDEN )
; 583  : 		skillSuccess = 0;						// MissCheck에서 이 값을 사용하기 때문에 0으로 설정해둠.
; 584  : #endif
; 585  : 	
; 586  : #ifdef NEW_FORSKYLAND3
; 587  : 	int bAllMiss = FALSE;

  00632	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _bAllMiss$[ebp], 0

; 588  : #endif
; 589  : 	
; 590  : #ifdef ADD_NEW_SKILL_FOR_CASTLE_02_20050531
; 591  : 	// 공격자가 투명 상태에 있다면 투명상태를 해제한다.
; 592  : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 593  : 	if( gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_INVISABLE ) == true )
; 594  : 	#else
; 595  : 	if( lpObj->m_iSkillInvisibleTime > 0 )
; 596  : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 597  : 	{
; 598  : 	#ifdef MODIFY_BUFFSYSTEM_BUGFIX_05_20071220
; 599  : 		if( ( lpObj->Authority & AUTHORITY_EVENT_GM ) != AUTHORITY_EVENT_GM )
; 600  : 		{
; 601  : 			gObjUseSkill.RemoveCloakingEffect(lpObj->m_Index);
; 602  : 		}
; 603  : 	#else
; 604  : 		gObjUseSkill.RemoveCloakingEffect(lpObj->m_Index);
; 605  : 	#endif // MODIFY_BUFFSYSTEM_BUGFIX_05_20071220
; 606  : 	}
; 607  : #endif
; 608  : 
; 609  : 	BOOL bDamageReflect = FALSE;

  00639	c7 45 c0 00 00
	00 00		 mov	 DWORD PTR _bDamageReflect$[ebp], 0

; 610  : 
; 611  : 
; 612  : 	//---------------------------------------------------------------------------------
; 613  : 	//
; 614  : 	//  [] 공격자의 데미지 값을 얻는다.
; 615  : 	//
; 616  : 	//	1. AttackDamage 가 0 일 경우 일반 공격
; 617  : 	// 	2. AttackDamage 가 0 이 아닐 경우 반사 공격
; 618  : 	//
; 619  : 	//
; 620  : 	//---------------------------------------------------------------------------------
; 621  : 	if( AttackDamage == 0 )

  00640	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  00644	0f 85 1e 0a 00
	00		 jne	 $LN55@Attack

; 622  : 	{
; 623  : 		// 미스 체크
; 624  : #ifdef ADD_SHIELD_POINT_01_20060403
; 625  : 		if( g_ShieldSystemOn == TRUE )
; 626  : 		{
; 627  : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 628  : 			{
; 629  : 				if( !MissCheckPvP( lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss ) )
; 630  : 				{
; 631  : 					return FALSE;
; 632  : 				}
; 633  : 			}
; 634  : 			else
; 635  : 			{
; 636  : 				if( !MissCheck(lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss) )
; 637  : 					return FALSE;
; 638  : 			}
; 639  : 		}
; 640  : 		else
; 641  : 		{
; 642  : 			if( !MissCheck(lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss) )
; 643  : 				return FALSE;
; 644  : 		}
; 645  : #elif defined(NEW_FORSKYLAND3)
; 646  : 		if( !MissCheck(lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss) )

  0064a	8d 45 c4	 lea	 eax, DWORD PTR _bAllMiss$[ebp]
  0064d	50		 push	 eax
  0064e	8b 4d 14	 mov	 ecx, DWORD PTR _magicsend$[ebp]
  00651	51		 push	 ecx
  00652	8b 55 f8	 mov	 edx, DWORD PTR _skillSuccess$[ebp]
  00655	52		 push	 edx
  00656	8b 45 e4	 mov	 eax, DWORD PTR _skill$[ebp]
  00659	50		 push	 eax
  0065a	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0065d	51		 push	 ecx
  0065e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00661	52		 push	 edx
  00662	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00665	8b 10		 mov	 edx, DWORD PTR [eax]
  00667	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0066a	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  0066d	ff d0		 call	 eax
  0066f	85 c0		 test	 eax, eax
  00671	75 07		 jne	 SHORT $LN57@Attack

; 647  : 			return FALSE;

  00673	33 c0		 xor	 eax, eax
  00675	e9 56 12 00 00	 jmp	 $LN1@Attack
$LN57@Attack:

; 648  : #endif
; 649  : 
; 650  : #ifdef MODIFY_ELF_ICEARROWSKILL_BUGFIX_20060914
; 651  : 		// 아이스애로우 스킬은 Miss 체크 후에 적용을 한다.
; 652  : 		if ( skill == AT_SKILL_ELFHARDEN && skillIceArrowSuccess == 1)
; 653  : 		{
; 654  : #ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 655  : 			gObjAddBuffEffect( lpTargetObj, BUFFTYPE_STONE, 0, 0, 0, 0, 7 );
; 656  : 			lpTargetObj->lpAttackObj = lpObj;
; 657  : 			lpTargetObj->PathCount = 0;
; 658  : 			lpTargetObj->PathStartEnd = 0;
; 659  : 			skillSuccess = 1;
; 660  : #else
; 661  : 				lpTargetObj->m_SkillHarden = 7;
; 662  : 				lpTargetObj->m_SkillHardenTime = 7;
; 663  : 
; 664  : 				lpTargetObj->lpAttackObj = lpObj;
; 665  : 				lpTargetObj->m_ViewSkillState |= STATE_HARDEN; //	석화
; 666  : #endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 667  : 				lpTargetObj->PathCount = 0;
; 668  : 
; 669  : 	#ifdef MODIFY_MONSTER_ACT_BY_ICEARROW_20050914
; 670  : 				lpTargetObj->PathStartEnd = 0;
; 671  : 	#endif
; 672  : 				skillSuccess = 1;	// 값 복구
; 673  : 				gObjSetPosition(lpTargetObj->m_Index, lpTargetObj->X, lpTargetObj->Y);
; 674  : 		}
; 675  : #endif // MODIFY_ELF_ICEARROWSKILL_BUGFIX_20060914
; 676  : 
; 677  : 		// 대상의 방어력을 얻는다
; 678  : 		int targetdefense = GetTargetDefense(lpObj, lpTargetObj, MsgDamage);

  0067a	8d 45 ef	 lea	 eax, DWORD PTR _MsgDamage$[ebp]
  0067d	50		 push	 eax
  0067e	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00681	51		 push	 ecx
  00682	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00685	52		 push	 edx
  00686	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00689	e8 00 00 00 00	 call	 ?GetTargetDefense@CObjBaseAttack@@QAEHPAVOBJECTSTRUCT@@0AAE@Z ; CObjBaseAttack::GetTargetDefense
  0068e	89 45 bc	 mov	 DWORD PTR _targetdefense$16[ebp], eax

; 679  : 
; 680  : #ifdef SEASON4_PATCH_GROOVING
; 681  : 		//------>
; 682  : 		// 시즌 4.0 추가 스킬  grooving 2008/04/24
; 683  : 		// grooving 버프 방어력
; 684  : 		if( true == gObjCheckUsedBuffEffect(lpTargetObj, BUFFTYPE_BERSERKER) )
; 685  : 		{
; 686  : 			float fDefense = (lpTargetObj->Dexterity + lpTargetObj->AddDexterity) / 3;
; 687  : 			float fValue = gObjGetTotalValueOfEffect( lpTargetObj, EFFECTTYPE_BERSERKER_DOWN );
; 688  : 			float fPercent = (40.0f - fValue) / 100.0f;
; 689  : 
; 690  : 			fPercent = max(0.1f, fPercent);
; 691  : 			
; 692  : 			targetdefense -= (fDefense * fPercent);
; 693  : 		}
; 694  : 		//<-----------
; 695  : #endif
; 696  : 	
; 697  : 
; 698  : #ifdef UPDATE_SUMMONER_NEW_SKILL_20080111	// 이너베이션(방어력 하락)
; 699  : 		int iCurseValue = 0;
; 700  : 		gObjGetValueOfBuffIndex( lpTargetObj, BUFFTYPE_CURSED_DEFENSE_DOWN, &iCurseValue );
; 701  : 		targetdefense	-= targetdefense * iCurseValue / 100;
; 702  : #endif	// UPDATE_SUMMONER_NEW_SKILL_20080111		
; 703  : 
; 704  : 
; 705  : 		//---------------------------------------------------------------------------------
; 706  : 		//	
; 707  : 		//	[][] 기본 데미지
; 708  : 		//
; 709  : 		//---------------------------------------------------------------------------------
; 710  : #ifndef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004				// !! NOT
; 711  : 	#ifdef ADD_NPC_SHADOW_PHANTOM_20050616
; 712  : 		if( lpTargetObj->m_iSkillNPCDefense ) 
; 713  : 		{
; 714  : 			targetdefense += lpTargetObj->m_iSkillNPCDefense;			
; 715  : 		}
; 716  : 	#endif
; 717  : #endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 718  : 		if( skill == AT_SKILL_SWORD1  ||	//내려찍기
; 719  : 			skill == AT_SKILL_SWORD2  ||	//찌르기
; 720  : 			skill == AT_SKILL_SWORD3  ||	//올려치기
; 721  : 			skill == AT_SKILL_SWORD4  ||	//돌려치기 
; 722  : 			skill == AT_SKILL_SWORD5  ||	//베기
; 723  : #ifdef ADD_SKILL_20031022
; 724  : 			skill == AT_SKILL_SWORD6  ||	//파워슬래쉬
; 725  : #endif			
; 726  : 			skill == AT_SKILL_WHEEL   ||	//회오리
; 727  : 
; 728  : 			// 기사 추가 스킬
; 729  : 			skill == AT_SKILL_KNIGHTSPEAR ||	// 유니창
; 730  : 			skill == AT_SKILL_BLOWOFFURY  ||	// 분노의 일격
; 731  : 			skill == AT_SKILL_KNIGHTDINORANT || // 디노란트 공격
; 732  : 			skill == AT_SKILL_STRIKE	  ||	// 블로우

  00691	83 7d e4 13	 cmp	 DWORD PTR _skill$[ebp], 19 ; 00000013H
  00695	74 42		 je	 SHORT $LN60@Attack
  00697	83 7d e4 14	 cmp	 DWORD PTR _skill$[ebp], 20 ; 00000014H
  0069b	74 3c		 je	 SHORT $LN60@Attack
  0069d	83 7d e4 15	 cmp	 DWORD PTR _skill$[ebp], 21 ; 00000015H
  006a1	74 36		 je	 SHORT $LN60@Attack
  006a3	83 7d e4 16	 cmp	 DWORD PTR _skill$[ebp], 22 ; 00000016H
  006a7	74 30		 je	 SHORT $LN60@Attack
  006a9	83 7d e4 17	 cmp	 DWORD PTR _skill$[ebp], 23 ; 00000017H
  006ad	74 2a		 je	 SHORT $LN60@Attack
  006af	83 7d e4 38	 cmp	 DWORD PTR _skill$[ebp], 56 ; 00000038H
  006b3	74 24		 je	 SHORT $LN60@Attack
  006b5	83 7d e4 29	 cmp	 DWORD PTR _skill$[ebp], 41 ; 00000029H
  006b9	74 1e		 je	 SHORT $LN60@Attack
  006bb	83 7d e4 2f	 cmp	 DWORD PTR _skill$[ebp], 47 ; 0000002fH
  006bf	74 18		 je	 SHORT $LN60@Attack
  006c1	83 7d e4 2a	 cmp	 DWORD PTR _skill$[ebp], 42 ; 0000002aH
  006c5	74 12		 je	 SHORT $LN60@Attack
  006c7	83 7d e4 31	 cmp	 DWORD PTR _skill$[ebp], 49 ; 00000031H
  006cb	74 0c		 je	 SHORT $LN60@Attack
  006cd	83 7d e4 2b	 cmp	 DWORD PTR _skill$[ebp], 43 ; 0000002bH
  006d1	74 06		 je	 SHORT $LN60@Attack
  006d3	83 7d e4 37	 cmp	 DWORD PTR _skill$[ebp], 55 ; 00000037H
  006d7	75 3c		 jne	 SHORT $LN58@Attack
$LN60@Attack:

; 733  : 			
; 734  : 			// 마검사 추가 스킬
; 735  : 			skill == AT_SKILL_DEFENSEDOWN  // 블러드 어택
; 736  : #ifdef ADD_NEW_SKILL_FOR_CASTLE_01_20041116
; 737  : 			|| skill ==AT_SKILL_RUSH			// 반월베기(기사)
; 738  : 			|| skill ==AT_SKILL_ONE_FLASH		// 나선베기 (마검)
; 739  : 			|| skill ==AT_SKILL_SPACE_SPLIT		// 파이어브래스트 (다크)
; 740  : #endif
; 741  : #ifdef ADD_MASTER_LEVEL_SKILL_SYSTEM_ACTIVE_20080107	// 회오리베기 강화 - 기본 데미지값 구하기(여기는 마검사 스킬만 추가 해 주면 된다;)
; 742  : 			|| ( g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_WHEEL_KNIGHT )	// 회오리베기 강화(기사)
; 743  : 			|| ( g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_WHEEL_MAGUMSA )	// 회오리베기 강화(마검사)
; 744  : #endif	
; 745  : #ifdef UPDATE_MASTER_LEVEL_4RANK_20080428	// 마스터레벨 4랭크 스킬 기본 데미지: 블로우 강화, 분노의 일격 강화
; 746  : 			||g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_STRIKE			// 블로우 강화(기사)
; 747  : 			|| g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_BLOWOFFURY	// 분노의 일격 강화(기사)
; 748  : 			|| g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_DEFENSEDOWN	// 블러드 어택 강화(마검)
; 749  : 			|| g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_SWORD6		// 파워 슬래쉬 강화(마검)
; 750  : #endif	// UPDATE_MASTER_LEVEL_4RANK_20080428			
; 751  : #ifdef ADD_SEASON4_NEW_SKILL_20080522
; 752  : 			|| skill == AT_SKILL_MULTISHOT		// 멀티샷(요정)
; 753  : 			|| skill == AT_SKILL_DESTRUCTION	// 파괴의 일격
; 754  : 			|| skill == AT_SKILL_FLAMESTRIKE	// 플레임 스트라이크
; 755  : 			|| skill == AT_SKILL_CHAOTICDESAIR	// 카오틱 디세이어(다크로드)
; 756  : #endif	// ADD_SEASON4_NEW_SKILL_20080522			
; 757  : 			)
; 758  : 		{
; 759  : #ifdef DUEL_SYSTEM_20031028
; 760  : 			#ifdef ADD_SKILL_WITH_COMBO
; 761  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage, bIsOnDuel, lpMagic);

  006d9	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  006dc	50		 push	 eax
  006dd	8b 4d c8	 mov	 ecx, DWORD PTR _bIsOnDuel$[ebp]
  006e0	51		 push	 ecx
  006e1	8d 55 ef	 lea	 edx, DWORD PTR _MsgDamage$[ebp]
  006e4	52		 push	 edx
  006e5	8b 45 bc	 mov	 eax, DWORD PTR _targetdefense$16[ebp]
  006e8	50		 push	 eax
  006e9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  006ec	51		 push	 ecx
  006ed	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  006f0	e8 00 00 00 00	 call	 ?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z ; CObjAttack::GetAttackDamage
  006f5	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 762  : 			#else
; 763  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage, bIsOnDuel);
; 764  : 			#endif
; 765  : #else
; 766  : 			#if defined( ADD_SKILL_WITH_COMBO ) || GAME_VERSION == G_V_97D
; 767  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage, lpMagic);
; 768  : 			#else
; 769  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage);
; 770  : 			#endif
; 771  : #endif
; 772  : 				
; 773  : #ifdef ADD_NPC_SHADOW_PHANTOM_20050616
; 774  : 	#ifndef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004					// !! NOT
; 775  : 			AttackDamage += lpObj->m_iSkillNPCAttack;
; 776  : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 777  : #endif
; 778  : 
; 779  : 			// 데미지가 있으면 내구도를 깍는다
; 780  : 			if( AttackDamage > 0 )

  006f8	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  006fc	7e 12		 jle	 SHORT $LN61@Attack

; 781  : 			{
; 782  : 				gObjWeaponDurDown(lpObj, lpTargetObj, 0);

  006fe	6a 00		 push	 0
  00700	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00703	50		 push	 eax
  00704	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00707	51		 push	 ecx
  00708	e8 00 00 00 00	 call	 ?gObjWeaponDurDown@@YAXPAVOBJECTSTRUCT@@0H@Z ; gObjWeaponDurDown
  0070d	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN61@Attack:

; 783  : 			}
; 784  : 		}

  00710	e9 93 00 00 00	 jmp	 $LN66@Attack
$LN58@Attack:

; 785  : #ifdef ADD_ITEM_FENRIR_01_20051110
; 786  : 		else if( skill ==AT_SKILL_FENRIR_ATTACK )
; 787  : 		{
; 788  : 			int iFenrirAttackDmg = 0;
; 789  : 
; 790  : 			// 각 직업별로 플라즈마스톰 데미지를 구한다.
; 791  : 			if( lpObj->Class == CLASS_KNIGHT || lpObj->Class == CLASS_MAGUMSA )
; 792  : 			{
; 793  : 				iFenrirAttackDmg = lpObj->Strength/3 + lpObj->Dexterity/5 + lpObj->Vitality/5 + lpObj->Energy/7; 
; 794  : 			}
; 795  : 			else if( lpObj->Class == CLASS_WIZARD )
; 796  : 			{
; 797  : 				iFenrirAttackDmg = lpObj->Strength/5 + lpObj->Dexterity/5 + lpObj->Vitality/7 + lpObj->Energy/3; 
; 798  : 			}
; 799  : 			else if( lpObj->Class == CLASS_ELF )
; 800  : 			{
; 801  : 				iFenrirAttackDmg = lpObj->Strength/5 + lpObj->Dexterity/3 + lpObj->Vitality/7 + lpObj->Energy/5; 
; 802  : 			}
; 803  : 			else
; 804  : 			{
; 805  : 				iFenrirAttackDmg = lpObj->Strength/5 + lpObj->Dexterity/5 + lpObj->Vitality/7 + lpObj->Energy/3 + lpObj->Leadership/3; 
; 806  : 			}
; 807  : 
; 808  : 			if( iFenrirAttackDmg < 0 )
; 809  : 			{
; 810  : 				iFenrirAttackDmg = 0;
; 811  : 			}
; 812  : 			
; 813  : 			// 크리티컬, 엑설런트 데미지 여부를 결정한다.
; 814  : 			if( lpObj->m_CriticalDamage > 0 ) 
; 815  : 			{
; 816  : 				if( (rand()%100) < lpObj->m_CriticalDamage )
; 817  : 				{
; 818  : 					MsgDamage = DT_CRITICAL;		// 크리티컬 데미지
; 819  : 				}
; 820  : 			}
; 821  : 			if( lpObj->m_ExcelentDamage > 0 )
; 822  : 			{
; 823  : 				// 세트 옵션 ; 엑설런트 데미지 확률 증가적용
; 824  : 				if( (rand()%100) < lpObj->m_ExcelentDamage )
; 825  : 				{
; 826  : 					MsgDamage = DT_EXCELLENT;		// 엑설런트 데미지
; 827  : 				}
; 828  : 			}
; 829  : 
; 830  : 			// 크리티컬, 엑설런트 데미지 결정
; 831  : 			if( MsgDamage == DT_CRITICAL )
; 832  : 			{
; 833  : 				AttackDamage = iFenrirAttackDmg + lpMagic->m_DamageMax;
; 834  : 				AttackDamage += lpObj->SetOpAddCriticalDamage;
; 835  : #ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 836  : 				int iValue = 0;
; 837  : 				gObjGetValueOfBuffIndex( lpObj, BUFFTYPE_CRITICAL_DMG_INC, &iValue );
; 838  : 				AttackDamage += iValue;
; 839  : #else
; 840  : 				AttackDamage += lpObj->SkillAddCriticalDamage;
; 841  : #endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 842  : 
; 843  : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 844  : 				// 조화의 보석 강화 아이템 옵션 : 크리티컬 데미지 증가
; 845  : 				AttackDamage += lpObj->m_JewelOfHarmonyEffect.HJOpAddCriticalDamage;
; 846  : #endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530				
; 847  : 				AttackDamage -= targetdefense;
; 848  : 			}
; 849  : 			else if( MsgDamage == DT_EXCELLENT )
; 850  : 			{
; 851  : 				AttackDamage = iFenrirAttackDmg + lpMagic->m_DamageMax;
; 852  : 				AttackDamage += AttackDamage * 20 / 100;
; 853  : 				AttackDamage += lpObj->SetOpAddExDamage;
; 854  : 				AttackDamage -= targetdefense;
; 855  : 			}
; 856  : 			else
; 857  : 			{
; 858  : 				AttackDamage = iFenrirAttackDmg + lpMagic->m_DamageMin + rand()%(lpMagic->m_DamageMax-lpMagic->m_DamageMin+1);
; 859  : 				AttackDamage -= targetdefense;
; 860  : 			}
; 861  : 
; 862  : #if TESTSERVER == 1
; 863  : 			if( gObjFenrir(lpObj) )
; 864  : 			{
; 865  : 				MsgOutput(lpObj->m_Index, "[플라즈마스톰기본DMG] %d", AttackDamage);
; 866  : 
; 867  : 			}
; 868  : #endif
; 869  : 			
; 870  : 		}
; 871  : #endif
; 872  : 		else if( ( lpObj->Class == CLASS_WIZARD || lpObj->Class == CLASS_MAGUMSA ) && skill )

  00715	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00718	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  0071f	85 c9		 test	 ecx, ecx
  00721	74 0f		 je	 SHORT $LN64@Attack
  00723	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00726	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  0072d	83 f9 03	 cmp	 ecx, 3
  00730	75 3f		 jne	 SHORT $LN62@Attack
$LN64@Attack:
  00732	83 7d e4 00	 cmp	 DWORD PTR _skill$[ebp], 0
  00736	74 39		 je	 SHORT $LN62@Attack

; 873  : 		{
; 874  : #ifdef DUEL_SYSTEM_20031028
; 875  : 			AttackDamage = GetAttackDamageWizard(lpObj, targetdefense, lpMagic, MsgDamage, bIsOnDuel);

  00738	8b 45 c8	 mov	 eax, DWORD PTR _bIsOnDuel$[ebp]
  0073b	50		 push	 eax
  0073c	8d 4d ef	 lea	 ecx, DWORD PTR _MsgDamage$[ebp]
  0073f	51		 push	 ecx
  00740	8b 55 10	 mov	 edx, DWORD PTR _lpMagic$[ebp]
  00743	52		 push	 edx
  00744	8b 45 bc	 mov	 eax, DWORD PTR _targetdefense$16[ebp]
  00747	50		 push	 eax
  00748	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0074b	51		 push	 ecx
  0074c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0074f	e8 00 00 00 00	 call	 ?GetAttackDamageWizard@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HPAVCMagicInf@@AAEH@Z ; CObjAttack::GetAttackDamageWizard
  00754	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 876  : #else
; 877  : 			AttackDamage = GetAttackDamageWizard(lpObj, targetdefense, lpMagic, MsgDamage);
; 878  : #endif
; 879  : 
; 880  : #ifdef ADD_NPC_SHADOW_PHANTOM_20050616
; 881  : 	#ifndef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004					// !! NOT
; 882  : 			AttackDamage += lpObj->m_iSkillNPCAttack;
; 883  : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 884  : #endif
; 885  : 
; 886  : 			// 데미지가 있으면 내구도를 깍는다
; 887  : 			if( AttackDamage > 0 )

  00757	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  0075b	7e 12		 jle	 SHORT $LN65@Attack

; 888  : 			{
; 889  : 				gObjWeaponDurDown(lpObj, lpTargetObj, 1);

  0075d	6a 01		 push	 1
  0075f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00762	50		 push	 eax
  00763	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00766	51		 push	 ecx
  00767	e8 00 00 00 00	 call	 ?gObjWeaponDurDown@@YAXPAVOBJECTSTRUCT@@0H@Z ; gObjWeaponDurDown
  0076c	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN65@Attack:

; 890  : 			}
; 891  : 		}

  0076f	eb 37		 jmp	 SHORT $LN66@Attack
$LN62@Attack:

; 892  : #ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 소환술사 스킬 데미지
; 893  : 		else if ( lpObj->Class == CLASS_SUMMONER  && skill)
; 894  : 		{
; 895  : 			AttackDamage = GetAttackDamageSummoner(lpObj, targetdefense, lpMagic, MsgDamage, bIsOnDuel);
; 896  : 
; 897  : #if TESTSERVER == 1
; 898  : 			//TRACE_LOG("\n1.Calc AttackDamageSummoner %d \n",AttackDamage);
; 899  : #endif
; 900  : 			
; 901  : 			// 데미지가 있으면 내구도를 깍는다
; 902  : 			if( AttackDamage > 0 )
; 903  : 			{
; 904  : 				gObjWeaponDurDown(lpObj, lpTargetObj, 1);
; 905  : 			}
; 906  : 		}
; 907  : #endif	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 908  : 		else
; 909  : 		{
; 910  : #ifdef DUEL_SYSTEM_20031028
; 911  : 			#ifdef ADD_SKILL_WITH_COMBO
; 912  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage, bIsOnDuel, lpMagic);

  00771	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00774	50		 push	 eax
  00775	8b 4d c8	 mov	 ecx, DWORD PTR _bIsOnDuel$[ebp]
  00778	51		 push	 ecx
  00779	8d 55 ef	 lea	 edx, DWORD PTR _MsgDamage$[ebp]
  0077c	52		 push	 edx
  0077d	8b 45 bc	 mov	 eax, DWORD PTR _targetdefense$16[ebp]
  00780	50		 push	 eax
  00781	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00784	51		 push	 ecx
  00785	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00788	e8 00 00 00 00	 call	 ?GetAttackDamage@CObjAttack@@QAEHPAVOBJECTSTRUCT@@HAAEHPAVCMagicInf@@@Z ; CObjAttack::GetAttackDamage
  0078d	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 913  : 			#else
; 914  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage, bIsOnDuel);
; 915  : 			#endif
; 916  : #else
; 917  : 			#if defined( ADD_SKILL_WITH_COMBO ) || GAME_VERSION == G_V_97D
; 918  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage, lpMagic);
; 919  : 			#else
; 920  : 				AttackDamage = GetAttackDamage(lpObj, targetdefense, MsgDamage);
; 921  : 			#endif
; 922  : #endif
; 923  : 
; 924  : #ifdef ADD_NPC_SHADOW_PHANTOM_20050616
; 925  : 	#ifndef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004					// !! NOT
; 926  : 			AttackDamage += lpObj->m_iSkillNPCAttack;
; 927  : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 928  : #endif
; 929  : 
; 930  : 			// 데미지가 있으면 내구도를 깍는다
; 931  : 			if( AttackDamage > 0 )

  00790	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  00794	7e 12		 jle	 SHORT $LN66@Attack

; 932  : 			{
; 933  : 				gObjWeaponDurDown(lpObj, lpTargetObj, 0);

  00796	6a 00		 push	 0
  00798	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0079b	50		 push	 eax
  0079c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0079f	51		 push	 ecx
  007a0	e8 00 00 00 00	 call	 ?gObjWeaponDurDown@@YAXPAVOBJECTSTRUCT@@0H@Z ; gObjWeaponDurDown
  007a5	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN66@Attack:

; 934  : 			}
; 935  : 		}
; 936  : 
; 937  : #ifdef ADD_CASHITEM_4RD_SCROLL_20080723
; 938  : 		//전투, 강화의 스크롤 (크리티컬, 엑설런트 데미지)처리
; 939  : 		//모든 Class 가 적용되도록 서브 함수가 아닌 아래에 처리 추가
; 940  : 		//////////////////////////////////////////////////////////////////////////
; 941  : 		{
; 942  : 			int nBuffIndex = -1;
; 943  : 			switch (MsgDamage) {
; 944  : 			case DT_CRITICAL:	nBuffIndex = BUFFTYPE_PCS_SCROLL_CRITICAL;		break;
; 945  : 			case DT_EXCELLENT:	nBuffIndex = BUFFTYPE_PCS_SCROLL_EXCELLENT;		break;
; 946  : 			default:			nBuffIndex = -1;
; 947  : 			}
; 948  : 			
; 949  : 			int nValue = 0;
; 950  : 			int _AttackDamage = AttackDamage;
; 951  : 			if (nBuffIndex > -1) {
; 952  : 				gObjGetValueOfBuffIndex( lpObj, nBuffIndex, &nValue );
; 953  : 				if (nValue > 0) {
; 954  : 					AttackDamage += (AttackDamage * nValue/100);
; 955  : 				}
; 956  : 			}
; 957  : 			
; 958  : 			/*if (g_bAbilityDebug == TRUE && (MsgDamage == DT_CRITICAL || MsgDamage == DT_EXCELLENT)) {
; 959  : 				char szMsg[256];
; 960  : 				sprintf(szMsg, "%s AttackDamage: %d %d", (MsgDamage == DT_CRITICAL)?"CRITICAL":"EXCELLENT", _AttackDamage, AttackDamage);
; 961  : 				GCServerMsgStringSend(szMsg, lpObj->m_Index, 1);
; 962  : 			}*/
; 963  : 		}
; 964  : 		//////////////////////////////////////////////////////////////////////////
; 965  : #endif // ADD_CASHITEM_4RD_SCROLL_20080723
; 966  : 
; 967  : 
; 968  : 		//---------------------------------------------------------------------------------
; 969  : 		//	
; 970  : 		//	[][] ALL Miss 처리
; 971  : 		//
; 972  : 		//---------------------------------------------------------------------------------
; 973  : #ifdef NEW_FORSKYLAND3
; 974  : 		if( bAllMiss )

  007a8	83 7d c4 00	 cmp	 DWORD PTR _bAllMiss$[ebp], 0
  007ac	74 0f		 je	 SHORT $LN67@Attack

; 975  : 		{
; 976  : 
; 977  : #ifdef MODIFY_SUCCESSBLOCKING_ALLMISS_20040408
; 978  : 			AttackDamage =  AttackDamage*30/100;

  007ae	6b 45 1c 1e	 imul	 eax, DWORD PTR _AttackDamage$[ebp], 30
  007b2	99		 cdq
  007b3	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  007b8	f7 f9		 idiv	 ecx
  007ba	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN67@Attack:

; 979  : #else
; 980  : 			AttackDamage =  AttackDamage*20/100;
; 981  : #endif
; 982  : 
; 983  : 		}
; 984  : #endif
; 985  : 	
; 986  : 		//---------------------------------------------------------------------------------
; 987  : 		//	
; 988  : 		//	[][] 데미지 감소 옵션
; 989  : 		//
; 990  : 		//---------------------------------------------------------------------------------
; 991  : 
; 992  : 		// 데미지를 감소 시킨다.
; 993  : 		if( lpTargetObj->DamageMinus )

  007bd	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  007c0	0f b6 88 14 01
	00 00		 movzx	 ecx, BYTE PTR [eax+276]
  007c7	85 c9		 test	 ecx, ecx
  007c9	74 26		 je	 SHORT $LN68@Attack

; 994  : 		{
; 995  : 			int beforeDamage=AttackDamage;

  007cb	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  007ce	89 45 b8	 mov	 DWORD PTR _beforeDamage$15[ebp], eax

; 996  : 			AttackDamage -=  AttackDamage*lpTargetObj->DamageMinus/100;

  007d1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  007d4	0f b6 88 14 01
	00 00		 movzx	 ecx, BYTE PTR [eax+276]
  007db	8b c1		 mov	 eax, ecx
  007dd	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  007e1	99		 cdq
  007e2	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  007e7	f7 f9		 idiv	 ecx
  007e9	8b 55 1c	 mov	 edx, DWORD PTR _AttackDamage$[ebp]
  007ec	2b d0		 sub	 edx, eax
  007ee	89 55 1c	 mov	 DWORD PTR _AttackDamage$[ebp], edx
$LN68@Attack:

; 997  : 			//if( AttackDamage < 0 ) AttackDamage = 0;
; 998  : 			//LogAdd("데미지 감소 : %d -> %d (%d)",beforeDamage, AttackDamage,lpTargetObj->DamageMinus);
; 999  : 		}
; 1000 : 
; 1001 : 		//---------------------------------------------------------------------------------
; 1002 : 		//	
; 1003 : 		//	[][] 레벨에 따른 최소 데미지 적용
; 1004 : 		//
; 1005 : 		//---------------------------------------------------------------------------------
; 1006 : 
; 1007 : #ifdef MASTER_LEVEL_UP_SYSTEM_20070912		// 종합레벨 적용 - 레벨에 따른 최소 데미지 적용
; 1008 : 		// 때린녀석의레벨/10 보다 작을 경우 AttackDamage 수정 
; 1009 : 		int tlevel = ( lpObj->Level + lpObj->m_nMasterLevel ) / 10;
; 1010 : 		if( AttackDamage < tlevel )
; 1011 : 		{
; 1012 : 			if( tlevel < 1 ) tlevel = 1;
; 1013 : 			AttackDamage = tlevel;
; 1014 : 		}
; 1015 : #else
; 1016 : 		// 때린녀석의레벨/10 보다 작을 경우 AttackDamage 수정 
; 1017 : 		int tlevel = lpObj->Level/10;

  007f1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007f4	0f bf 80 a0 00
	00 00		 movsx	 eax, WORD PTR [eax+160]
  007fb	99		 cdq
  007fc	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  00801	f7 f9		 idiv	 ecx
  00803	89 45 b4	 mov	 DWORD PTR _tlevel$14[ebp], eax

; 1018 : 		if( AttackDamage < tlevel )

  00806	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00809	3b 45 b4	 cmp	 eax, DWORD PTR _tlevel$14[ebp]
  0080c	7d 13		 jge	 SHORT $LN69@Attack

; 1019 : 		{
; 1020 : 			if( tlevel < 1 ) tlevel = 1;

  0080e	83 7d b4 01	 cmp	 DWORD PTR _tlevel$14[ebp], 1
  00812	7d 07		 jge	 SHORT $LN70@Attack
  00814	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR _tlevel$14[ebp], 1
$LN70@Attack:

; 1021 : 			AttackDamage = tlevel;

  0081b	8b 45 b4	 mov	 eax, DWORD PTR _tlevel$14[ebp]
  0081e	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN69@Attack:

; 1022 : 		}
; 1023 : #endif
; 1024 : 
; 1025 : 		//---------------------------------------------------------------------------------
; 1026 : 		//	
; 1027 : 		//	[][] 방어 스킬 사용
; 1028 : 		//
; 1029 : 		//---------------------------------------------------------------------------------
; 1030 : 
; 1031 : 		// 방어스킬 사용시
; 1032 : 		if( lpTargetObj->m_SkillNumber == AT_SKILL_BLOCKING )

  00821	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00824	0f bf 88 34 02
	00 00		 movsx	 ecx, WORD PTR [eax+564]
  0082b	83 f9 12	 cmp	 ecx, 18			; 00000012H
  0082e	75 0e		 jne	 SHORT $LN72@Attack

; 1033 : 			if( AttackDamage > 1 ) AttackDamage >>= 1;

  00830	83 7d 1c 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  00834	7e 08		 jle	 SHORT $LN72@Attack
  00836	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00839	d1 f8		 sar	 eax, 1
  0083b	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN72@Attack:

; 1034 : 
; 1035 : 		//---------------------------------------------------------------------------------
; 1036 : 		//	
; 1037 : 		//	[][] 사탄, 수호천사
; 1038 : 		//
; 1039 : 		//---------------------------------------------------------------------------------
; 1040 : 
; 1041 : 		// 상대의 정령을 검사해서 에너지를 감소 시킨다.
; 1042 : 		gObjSpriteDamage(lpTargetObj, AttackDamage);					

  0083e	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00841	50		 push	 eax
  00842	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00845	51		 push	 ecx
  00846	e8 00 00 00 00	 call	 ?gObjSpriteDamage@@YAXPAVOBJECTSTRUCT@@H@Z ; gObjSpriteDamage
  0084b	83 c4 08	 add	 esp, 8

; 1043 : 
; 1044 : 		// 사탄정령을 가지고 있다면 공격력 증가..
; 1045 : 		if( gObjSatanSprite(lpObj) == TRUE )

  0084e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00851	50		 push	 eax
  00852	e8 00 00 00 00	 call	 ?gObjSatanSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjSatanSprite
  00857	83 c4 04	 add	 esp, 4
  0085a	83 f8 01	 cmp	 eax, 1
  0085d	75 70		 jne	 SHORT $LN73@Attack

; 1046 : 		{		
; 1047 : 			lpObj->Life -= 3;

  0085f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00862	f3 0f 10 80 bc
	00 00 00	 movss	 xmm0, DWORD PTR [eax+188]
  0086a	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@40400000
  00872	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00875	f3 0f 11 81 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm0

; 1048 : 			if( lpObj->Life < 0 ) 

  0087d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00880	0f 57 c0	 xorps	 xmm0, xmm0
  00883	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  0088a	76 10		 jbe	 SHORT $LN74@Attack

; 1049 : 			{
; 1050 : 				lpObj->Life = 0;

  0088c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0088f	0f 57 c0	 xorps	 xmm0, xmm0
  00892	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0

; 1051 : 			}

  0089a	eb 0f		 jmp	 SHORT $LN75@Attack
$LN74@Attack:

; 1052 : 			else
; 1053 : 			{
; 1054 : 				AttackDamage = AttackDamage*13/10;

  0089c	6b 45 1c 0d	 imul	 eax, DWORD PTR _AttackDamage$[ebp], 13
  008a0	99		 cdq
  008a1	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  008a6	f7 f9		 idiv	 ecx
  008a8	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN75@Attack:

; 1055 : 			}
; 1056 : #ifdef ADD_SHIELD_POINT_01_20060403
; 1057 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0, (WORD)lpObj->iShield);
; 1058 : #else
; 1059 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0);

  008ab	6a 00		 push	 0
  008ad	68 ff 00 00 00	 push	 255			; 000000ffH
  008b2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008b5	f3 0f 2c 88 bc
	00 00 00	 cvttss2si ecx, DWORD PTR [eax+188]
  008bd	0f b7 d1	 movzx	 edx, cx
  008c0	52		 push	 edx
  008c1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008c4	8b 08		 mov	 ecx, DWORD PTR [eax]
  008c6	51		 push	 ecx
  008c7	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHGEE@Z ; GCReFillSend
  008cc	83 c4 10	 add	 esp, 16			; 00000010H
$LN73@Attack:

; 1060 : #endif
; 1061 : 		}
; 1062 : 
; 1063 : #if TESTSERVER == 1
; 1064 : /*
; 1065 : 		// 테스트 코드
; 1066 : 		{
; 1067 : 			if(lpObj->Type == OBJTYPE_CHARACTER && skill == 0)
; 1068 : 				TRACE_LOG("2. Hand AttackDamage %d \n",AttackDamage);
; 1069 : 
; 1070 : 			if(lpObj->Type == OBJTYPE_CHARACTER && skill != 0)
; 1071 : 				TRACE_LOG("2. Skill AttackDamage %d Skill Index: %d \n",AttackDamage, skill);
; 1072 : 		}
; 1073 : */
; 1074 : #endif // TESTSERVER
; 1075 : 
; 1076 : 		// 상대가 천사정령을 가지고 있다면.. 
; 1077 : 		if( gObjAngelSprite(lpTargetObj) == TRUE )

  008cf	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  008d2	50		 push	 eax
  008d3	e8 00 00 00 00	 call	 ?gObjAngelSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjAngelSprite
  008d8	83 c4 04	 add	 esp, 4
  008db	83 f8 01	 cmp	 eax, 1
  008de	75 25		 jne	 SHORT $LN77@Attack

; 1078 : 		{
; 1079 : 			if( AttackDamage > 1 ) 

  008e0	83 7d 1c 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  008e4	7e 1f		 jle	 SHORT $LN77@Attack

; 1080 : 			{
; 1081 : #ifdef NEW_FORSKYLAND3	// 수호천사 데미지 흡수 30%에서 20%로 조정
; 1082 : 				float damage = (float)(AttackDamage*8)/10;

  008e6	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  008e9	c1 e0 03	 shl	 eax, 3
  008ec	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  008f0	f3 0f 5e 05 00
	00 00 00	 divss	 xmm0, DWORD PTR __real@41200000
  008f8	f3 0f 11 45 b0	 movss	 DWORD PTR _damage$13[ebp], xmm0

; 1083 : #else
; 1084 : 				float damage = (float)(AttackDamage*7)/10;
; 1085 : #endif
; 1086 : 				AttackDamage = (int)damage;// 10분의 7은 사용자가..  

  008fd	f3 0f 2c 45 b0	 cvttss2si eax, DWORD PTR _damage$13[ebp]
  00902	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN77@Attack:

; 1087 : 			}
; 1088 : 		}
; 1089 : 
; 1090 : 		//---------------------------------------------------------------------------------
; 1091 : 		//	
; 1092 : 		//	[][] 데몬, 수호정령
; 1093 : 		//
; 1094 : 		//---------------------------------------------------------------------------------
; 1095 : 		
; 1096 : #ifdef	ADD_SAFEGUARD_ITEM_20080702
; 1097 : 
; 1098 : 		// grooving 데몬 공격 40% 증가
; 1099 : 		if( gObjDaemonSprite(lpObj) == TRUE )
; 1100 : 		{
; 1101 : 			if (AttackDamage > 1) 
; 1102 : 			{
; 1103 : 				AttackDamage = AttackDamage*14/10;
; 1104 : 			}
; 1105 : 		}
; 1106 : 		
; 1107 : 		if( gObjSafeGuardSprite(lpTargetObj) == TRUE )
; 1108 : 		{		
; 1109 : 			if( AttackDamage > 1 ) 
; 1110 : 			{
; 1111 : 				float damage = (float)(AttackDamage*7)/10;
; 1112 : 				
; 1113 : 				AttackDamage = (int)damage;// 10분의 7은 사용자가..  
; 1114 : 			}
; 1115 : 		}
; 1116 : 		
; 1117 : #endif // ADD_SAFEGUARD_ITEM_20080702
; 1118 : 		
; 1119 : #ifdef ADD_PREMIUMITEM_PANDA
; 1120 : 		if( (lpObj->pInventory[EQUIPMENT_RING_RIGHT].IsItem() 
; 1121 : 			&& lpObj->pInventory[EQUIPMENT_RING_RIGHT].m_Type == MAKE_ITEMNUM(13, 76)
; 1122 : 			&& lpObj->pInventory[EQUIPMENT_RING_RIGHT].m_Durability > 0) ||
; 1123 : 			(lpObj->pInventory[EQUIPMENT_RING_LEFT].IsItem() 
; 1124 : 			&& lpObj->pInventory[EQUIPMENT_RING_LEFT].m_Type == MAKE_ITEMNUM(13, 76)
; 1125 : 			&& lpObj->pInventory[EQUIPMENT_RING_LEFT].m_Durability > 0)
; 1126 : 		  )
; 1127 : 		{
; 1128 : 			if (AttackDamage > 1) 
; 1129 : 			{
; 1130 : 				// 공격력 30 증가
; 1131 : 				AttackDamage += 30;
; 1132 : 			}
; 1133 : 		}
; 1134 : #endif // ADD_PREMIUMITEM_PANDA
; 1135 : 
; 1136 : 
; 1137 : 		//---------------------------------------------------------------------------------
; 1138 : 		//	
; 1139 : 		//	[][] 날개
; 1140 : 		//
; 1141 : 		//---------------------------------------------------------------------------------
; 1142 : 
; 1143 : 		if( gObjWingSprite(lpObj) == TRUE )

  00905	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00908	50		 push	 eax
  00909	e8 00 00 00 00	 call	 ?gObjWingSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjWingSprite
  0090e	83 c4 04	 add	 esp, 4
  00911	83 f8 01	 cmp	 eax, 1
  00914	0f 85 3d 01 00
	00		 jne	 $LN78@Attack

; 1144 : 		{
; 1145 : 			CItem	*Wing = &lpObj->pInventory[EQUIPMENT_WING];

  0091a	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0091f	6b c8 07	 imul	 ecx, eax, 7
  00922	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00925	03 8a 5c 0c 00
	00		 add	 ecx, DWORD PTR [edx+3164]
  0092b	89 4d ac	 mov	 DWORD PTR _Wing$12[ebp], ecx

; 1146 : 			// 날개 법사 적용됨(20030721)
; 1147 : #ifdef NEW_FORSKYLAND3
; 1148 : 			if( lpObj->Class == CLASS_WIZARD || lpObj->Class == CLASS_ELF)

  0092e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00931	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00938	85 c9		 test	 ecx, ecx
  0093a	74 0f		 je	 SHORT $LN81@Attack
  0093c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0093f	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00946	83 f9 02	 cmp	 ecx, 2
  00949	75 20		 jne	 SHORT $LN79@Attack
$LN81@Attack:

; 1149 : #else
; 1150 : 			if( lpObj->Class == CLASS_WIZARD )				
; 1151 : #endif
; 1152 : 				lpObj->Life -= 1;

  0094b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0094e	f3 0f 10 80 bc
	00 00 00	 movss	 xmm0, DWORD PTR [eax+188]
  00956	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@3f800000
  0095e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00961	f3 0f 11 81 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm0
  00969	eb 1e		 jmp	 SHORT $LN80@Attack
$LN79@Attack:

; 1153 : #ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 소환술사가 날개를 차고 있으면 공격성공시 hp 1씩 감소
; 1154 : 			else if( lpObj->Class == CLASS_SUMMONER )
; 1155 : 			{
; 1156 : 				lpObj->Life -= 1;
; 1157 : 			}
; 1158 : #endif	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 1159 : 			else
; 1160 : 				lpObj->Life -= 3;

  0096b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0096e	f3 0f 10 80 bc
	00 00 00	 movss	 xmm0, DWORD PTR [eax+188]
  00976	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@40400000
  0097e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00981	f3 0f 11 81 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm0
$LN80@Attack:

; 1161 : 			
; 1162 : 			if( lpObj->Life < 0 ) 

  00989	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0098c	0f 57 c0	 xorps	 xmm0, xmm0
  0098f	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  00996	76 13		 jbe	 SHORT $LN82@Attack

; 1163 : 			{
; 1164 : 				lpObj->Life = 0;

  00998	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0099b	0f 57 c0	 xorps	 xmm0, xmm0
  0099e	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0

; 1165 : 			}

  009a6	e9 88 00 00 00	 jmp	 $LN87@Attack
$LN82@Attack:

; 1166 : 			else
; 1167 : 			{
; 1168 : #ifdef ADD_THIRD_WING_20070525	// 3차날개 데미지 증가
; 1169 : 				if( Wing->m_Type >= MAKE_ITEMNUM( 12, 36 ) && Wing->m_Type <= MAKE_ITEMNUM( 12, 40 ) )
; 1170 : 				{
; 1171 : 					// 데미지 증가 : 39+Level*2
; 1172 : 					AttackDamage = AttackDamage * ( 139 + ( Wing->m_Level * 2 )) / 100;
; 1173 : 				}
; 1174 : 				else				
; 1175 : #endif	// ADD_THIRD_WING_20070525	
; 1176 : #ifdef NEW_FORSKYLAND3				
; 1177 : #ifdef DARKLORD_WORK
; 1178 : 				if( Wing->m_Type == MAKE_ITEMNUM(13,30) )

  009ab	8b 45 ac	 mov	 eax, DWORD PTR _Wing$12[ebp]
  009ae	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  009b2	6a 1e		 push	 30			; 0000001eH
  009b4	6a 0d		 push	 13			; 0000000dH
  009b6	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  009bb	83 c4 08	 add	 esp, 8
  009be	3b f0		 cmp	 esi, eax
  009c0	75 1e		 jne	 SHORT $LN84@Attack

; 1179 : 				{	// 20+Level*2
; 1180 : 					AttackDamage = AttackDamage*(120+(Wing->m_Level*2))/100;

  009c2	8b 45 ac	 mov	 eax, DWORD PTR _Wing$12[ebp]
  009c5	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  009c9	8d 54 09 78	 lea	 edx, DWORD PTR [ecx+ecx+120]
  009cd	8b c2		 mov	 eax, edx
  009cf	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  009d3	99		 cdq
  009d4	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  009d9	f7 f9		 idiv	 ecx
  009db	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1181 : 				}

  009de	eb 53		 jmp	 SHORT $LN87@Attack
$LN84@Attack:

; 1182 : 				else
; 1183 : #endif
; 1184 : #ifdef ADD_SUMMONER_SECOND_THIRD_WING_20071130	// 절망의 날개 차원의 날개 데미지 증가
; 1185 : 				if(Wing->m_Type == MAKE_ITEMNUM(12,41))		// 재앙의 날개
; 1186 : 				{
; 1187 : 					// 데미지 증가 : 12+Level
; 1188 : 					AttackDamage = AttackDamage*(112+(Wing->m_Level*2))/100;	// 12% + level
; 1189 : 				}
; 1190 : 				else if(Wing->m_Type == MAKE_ITEMNUM(12,42))	// 절망의 날개
; 1191 : 				{
; 1192 : 					// 데미지 증가 : 32+Level*1
; 1193 : 					AttackDamage = AttackDamage * ( 132 + ( Wing->m_Level * 1)) / 100;
; 1194 : 				}
; 1195 : 				else if(Wing->m_Type == MAKE_ITEMNUM(12,43))	// 차원의 날개
; 1196 : 				{
; 1197 : 					// 데미지 증가 : 39+Level*2
; 1198 : 					AttackDamage = AttackDamage * ( 139 + ( Wing->m_Level * 2 )) / 100;
; 1199 : 				}
; 1200 : 				else
; 1201 : #endif	// ADD_SUMMONER_SECOND_THIRD_WING_20071130					
; 1202 : 				if( Wing->m_Type > MAKE_ITEMNUM(12,2) )

  009e0	8b 45 ac	 mov	 eax, DWORD PTR _Wing$12[ebp]
  009e3	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  009e7	6a 02		 push	 2
  009e9	6a 0c		 push	 12			; 0000000cH
  009eb	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  009f0	83 c4 08	 add	 esp, 8
  009f3	3b f0		 cmp	 esi, eax
  009f5	7e 20		 jle	 SHORT $LN86@Attack

; 1203 : 				{	// 추가 날개 (데미지 증가)	
; 1204 : 					AttackDamage = AttackDamage*(132+(Wing->m_Level))/100;

  009f7	8b 45 ac	 mov	 eax, DWORD PTR _Wing$12[ebp]
  009fa	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  009fe	81 c1 84 00 00
	00		 add	 ecx, 132		; 00000084H
  00a04	8b c1		 mov	 eax, ecx
  00a06	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  00a0a	99		 cdq
  00a0b	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00a10	f7 f9		 idiv	 ecx
  00a12	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1205 : //					AttackDamage = AttackDamage*(132+(Wing->m_Level*2))/100;
; 1206 : 				}

  00a15	eb 1c		 jmp	 SHORT $LN87@Attack
$LN86@Attack:

; 1207 : 				else
; 1208 : #endif					
; 1209 : 					AttackDamage = AttackDamage*(112+(Wing->m_Level*2))/100;	// 12% + level

  00a17	8b 45 ac	 mov	 eax, DWORD PTR _Wing$12[ebp]
  00a1a	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00a1e	8d 54 09 70	 lea	 edx, DWORD PTR [ecx+ecx+112]
  00a22	8b c2		 mov	 eax, edx
  00a24	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  00a28	99		 cdq
  00a29	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00a2e	f7 f9		 idiv	 ecx
  00a30	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN87@Attack:

; 1210 : 			}
; 1211 : #ifdef ADD_SHIELD_POINT_01_20060403
; 1212 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0, (WORD)lpObj->iShield);
; 1213 : #else
; 1214 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0);

  00a33	6a 00		 push	 0
  00a35	68 ff 00 00 00	 push	 255			; 000000ffH
  00a3a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00a3d	f3 0f 2c 88 bc
	00 00 00	 cvttss2si ecx, DWORD PTR [eax+188]
  00a45	0f b7 d1	 movzx	 edx, cx
  00a48	52		 push	 edx
  00a49	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00a4c	8b 08		 mov	 ecx, DWORD PTR [eax]
  00a4e	51		 push	 ecx
  00a4f	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHGEE@Z ; GCReFillSend
  00a54	83 c4 10	 add	 esp, 16			; 00000010H
$LN78@Attack:

; 1215 : #endif
; 1216 : 			
; 1217 : 		}
; 1218 : 
; 1219 : 		if( gObjWingSprite(lpTargetObj) == TRUE )

  00a57	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00a5a	50		 push	 eax
  00a5b	e8 00 00 00 00	 call	 ?gObjWingSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjWingSprite
  00a60	83 c4 04	 add	 esp, 4
  00a63	83 f8 01	 cmp	 eax, 1
  00a66	0f 85 a4 00 00
	00		 jne	 $LN92@Attack

; 1220 : 		{
; 1221 : 			CItem	*Wing = &lpTargetObj->pInventory[EQUIPMENT_WING];

  00a6c	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00a71	6b c8 07	 imul	 ecx, eax, 7
  00a74	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  00a77	03 8a 5c 0c 00
	00		 add	 ecx, DWORD PTR [edx+3164]
  00a7d	89 4d a8	 mov	 DWORD PTR _Wing$11[ebp], ecx

; 1222 : 
; 1223 : #ifdef DARKLORD_WORK
; 1224 : 			if( Wing->m_Type != MAKE_ITEMNUM(13,30) )

  00a80	8b 45 a8	 mov	 eax, DWORD PTR _Wing$11[ebp]
  00a83	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00a87	6a 1e		 push	 30			; 0000001eH
  00a89	6a 0d		 push	 13			; 0000000dH
  00a8b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00a90	83 c4 08	 add	 esp, 8
  00a93	3b f0		 cmp	 esi, eax
  00a95	74 79		 je	 SHORT $LN92@Attack

; 1225 : #endif
; 1226 : 			{
; 1227 : 				if( AttackDamage > 1 ) 

  00a97	83 7d 1c 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  00a9b	7e 73		 jle	 SHORT $LN92@Attack

; 1228 : 				{
; 1229 : #ifdef ADD_THIRD_WING_20070525	// 3차날개 데미지 흡수, 랜덤옵션 - 100%마나/생명 회복
; 1230 : 					// 일단 데미지 흡수
; 1231 : #ifdef ADD_SUMMONER_SECOND_THIRD_WING_20071130	// 차원의 날개 데미지 흡수
; 1232 : 					if( ( Wing->m_Type >= MAKE_ITEMNUM( 12, 36 ) && Wing->m_Type <= MAKE_ITEMNUM( 12, 40 ) )
; 1233 : 						|| Wing->m_Type == MAKE_ITEMNUM( 12, 43 ) )	// 차원의 날개
; 1234 : #else
; 1235 : 					if( Wing->m_Type >= MAKE_ITEMNUM( 12, 36 ) && Wing->m_Type <= MAKE_ITEMNUM( 12, 40 ) )
; 1236 : #endif
; 1237 : 					{
; 1238 : 						if( Wing->m_Type == MAKE_ITEMNUM( 12, 40 ) )	// 제왕의망토
; 1239 : 						{
; 1240 : 							// 24% + ( level * 2 )
; 1241 : 							float damage = ( float )( AttackDamage * ( 76 - ( Wing->m_Level * 2 )) ) / 100;
; 1242 : 							AttackDamage = ( int )damage;
; 1243 : 						}
; 1244 : 						else
; 1245 : 						{
; 1246 : 							// 3차 날개는 	39% + ( level * 2 )
; 1247 : 							float damage = ( float )( AttackDamage * ( 61 - ( Wing->m_Level * 2 )) ) / 100;
; 1248 : 							AttackDamage = ( int )damage;	
; 1249 : 						}			
; 1250 : 
; 1251 : 						// 랜덤 옵션
; 1252 : 						if( rand() % 100 < 5 )
; 1253 : 						{
; 1254 : 							BYTE bt3rdWingOpt = lpTargetObj->pInventory[EQUIPMENT_WING].m_NewOption;								
; 1255 : 							if( ( bt3rdWingOpt & PLUS_THIRD_WING_RECOVER_100PER_LIFE ) == PLUS_THIRD_WING_RECOVER_100PER_LIFE ) 
; 1256 : 							{
; 1257 : 								// 5%확률로 100% 생명 증가
; 1258 : 								gObjAddMsgSendDelay( lpTargetObj, MSG_FULL_LIFE, lpObj->m_Index, 100, 0 );			
; 1259 : 							}
; 1260 : 							else if( ( bt3rdWingOpt & PLUS_THIRD_WING_RECOVER_100PER_MASIC ) == PLUS_THIRD_WING_RECOVER_100PER_MASIC )
; 1261 : 							{
; 1262 : 								// 5%확률로 100% 마나 증가
; 1263 : 								gObjAddMsgSendDelay( lpTargetObj, MSG_FULL_MANA, lpObj->m_Index, 100, 0 );
; 1264 : 							}						
; 1265 : 						}				
; 1266 : 					}
; 1267 : 					else
; 1268 : #endif
; 1269 : #ifdef NEW_FORSKYLAND3
; 1270 : 					if( Wing->m_Type > MAKE_ITEMNUM(12,2) )

  00a9d	8b 45 a8	 mov	 eax, DWORD PTR _Wing$11[ebp]
  00aa0	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00aa4	6a 02		 push	 2
  00aa6	6a 0c		 push	 12			; 0000000cH
  00aa8	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00aad	83 c4 08	 add	 esp, 8
  00ab0	3b f0		 cmp	 esi, eax
  00ab2	7e 2f		 jle	 SHORT $LN91@Attack

; 1271 : 					{	// 날개 데미지 흡수 추가 날개는 25% + level
; 1272 : 						float damage = (float)(AttackDamage*(75-(Wing->m_Level*2)))/100;

  00ab4	8b 45 a8	 mov	 eax, DWORD PTR _Wing$11[ebp]
  00ab7	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00abb	d1 e1		 shl	 ecx, 1
  00abd	ba 4b 00 00 00	 mov	 edx, 75			; 0000004bH
  00ac2	2b d1		 sub	 edx, ecx
  00ac4	0f af 55 1c	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  00ac8	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00acc	f3 0f 5e 05 00
	00 00 00	 divss	 xmm0, DWORD PTR __real@42c80000
  00ad4	f3 0f 11 45 a4	 movss	 DWORD PTR _damage$10[ebp], xmm0

; 1273 : 						AttackDamage = (int)damage;

  00ad9	f3 0f 2c 45 a4	 cvttss2si eax, DWORD PTR _damage$10[ebp]
  00ade	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1274 : 					}

  00ae1	eb 2d		 jmp	 SHORT $LN92@Attack
$LN91@Attack:

; 1275 : 					else
; 1276 : #endif			
; 1277 : 					{	// 날개 데미지 흡수 날개 12% + level*2
; 1278 : 						float damage = (float)(AttackDamage*(88-(Wing->m_Level*2)))/100;

  00ae3	8b 45 a8	 mov	 eax, DWORD PTR _Wing$11[ebp]
  00ae6	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00aea	d1 e1		 shl	 ecx, 1
  00aec	ba 58 00 00 00	 mov	 edx, 88			; 00000058H
  00af1	2b d1		 sub	 edx, ecx
  00af3	0f af 55 1c	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  00af7	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00afb	f3 0f 5e 05 00
	00 00 00	 divss	 xmm0, DWORD PTR __real@42c80000
  00b03	f3 0f 11 45 a0	 movss	 DWORD PTR _damage$9[ebp], xmm0

; 1279 : 						AttackDamage = (int)damage;	

  00b08	f3 0f 2c 45 a0	 cvttss2si eax, DWORD PTR _damage$9[ebp]
  00b0d	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN92@Attack:

; 1280 : 					}
; 1281 : 					//LogAdd("[%s][%s] 날개 착용 효과2 %d", lpObj->AccountID, lpObj->Name, AttackDamage);
; 1282 : 				}		
; 1283 : 			}
; 1284 : 		}
; 1285 : 
; 1286 : 		//---------------------------------------------------------------------------------
; 1287 : 		//	
; 1288 : 		//	[][] 디노란트
; 1289 : 		//
; 1290 : 		//---------------------------------------------------------------------------------
; 1291 : 
; 1292 : #ifdef NEW_FORSKYLAND3
; 1293 : 		if( gObjDenorantSprite(lpObj) )

  00b10	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00b13	50		 push	 eax
  00b14	e8 00 00 00 00	 call	 ?gObjDenorantSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjDenorantSprite
  00b19	83 c4 04	 add	 esp, 4
  00b1c	85 c0		 test	 eax, eax
  00b1e	74 70		 je	 SHORT $LN93@Attack

; 1294 : 		{	// 디노란트 데미지 증가 15%
; 1295 : 			
; 1296 : 			// 디노란트에 타고 공격하고 있으면 공격자의 라이프를 1씩 깎는다.
; 1297 : 			lpObj->Life -= 1;

  00b20	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00b23	f3 0f 10 80 bc
	00 00 00	 movss	 xmm0, DWORD PTR [eax+188]
  00b2b	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@3f800000
  00b33	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00b36	f3 0f 11 81 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm0

; 1298 : 			
; 1299 : 			if( lpObj->Life < 0 ) 

  00b3e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00b41	0f 57 c0	 xorps	 xmm0, xmm0
  00b44	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  00b4b	76 10		 jbe	 SHORT $LN94@Attack

; 1300 : 			{
; 1301 : 				lpObj->Life = 0;

  00b4d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00b50	0f 57 c0	 xorps	 xmm0, xmm0
  00b53	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0

; 1302 : 			}

  00b5b	eb 0f		 jmp	 SHORT $LN95@Attack
$LN94@Attack:

; 1303 : 			else
; 1304 : 			{
; 1305 : 				AttackDamage = AttackDamage*115/100;

  00b5d	6b 45 1c 73	 imul	 eax, DWORD PTR _AttackDamage$[ebp], 115
  00b61	99		 cdq
  00b62	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00b67	f7 f9		 idiv	 ecx
  00b69	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN95@Attack:

; 1306 : 			}
; 1307 : #ifdef ADD_SHIELD_POINT_01_20060403
; 1308 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0, (WORD)lpObj->iShield);
; 1309 : #else
; 1310 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0);

  00b6c	6a 00		 push	 0
  00b6e	68 ff 00 00 00	 push	 255			; 000000ffH
  00b73	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00b76	f3 0f 2c 88 bc
	00 00 00	 cvttss2si ecx, DWORD PTR [eax+188]
  00b7e	0f b7 d1	 movzx	 edx, cx
  00b81	52		 push	 edx
  00b82	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00b85	8b 08		 mov	 ecx, DWORD PTR [eax]
  00b87	51		 push	 ecx
  00b88	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHGEE@Z ; GCReFillSend
  00b8d	83 c4 10	 add	 esp, 16			; 00000010H
$LN93@Attack:

; 1311 : #endif
; 1312 : 		}
; 1313 : 
; 1314 : 		if( gObjDenorantSprite(lpTargetObj) )

  00b90	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00b93	50		 push	 eax
  00b94	e8 00 00 00 00	 call	 ?gObjDenorantSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjDenorantSprite
  00b99	83 c4 04	 add	 esp, 4
  00b9c	85 c0		 test	 eax, eax
  00b9e	0f 84 99 00 00
	00		 je	 $LN96@Attack

; 1315 : 		{	// 디노란트 데미지 흡수 10%
; 1316 : 			CItem	*Dinorant = &lpTargetObj->pInventory[EQUIPMENT_HELPER];

  00ba4	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00ba9	c1 e0 03	 shl	 eax, 3
  00bac	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00baf	03 81 5c 0c 00
	00		 add	 eax, DWORD PTR [ecx+3164]
  00bb5	89 45 9c	 mov	 DWORD PTR _Dinorant$8[ebp], eax

; 1317 : 
; 1318 : 			// 5%추가 데미지 흡수 옵션 적용
; 1319 : 			int	dinorantdecdamage = 90-Dinorant->IsDinorantReduceAttackDamaege();			

  00bb8	8b 4d 9c	 mov	 ecx, DWORD PTR _Dinorant$8[ebp]
  00bbb	e8 00 00 00 00	 call	 ?IsDinorantReduceAttackDamaege@CItem@@QAEHXZ ; CItem::IsDinorantReduceAttackDamaege
  00bc0	b9 5a 00 00 00	 mov	 ecx, 90			; 0000005aH
  00bc5	2b c8		 sub	 ecx, eax
  00bc7	89 4d 98	 mov	 DWORD PTR _dinorantdecdamage$7[ebp], ecx

; 1320 : 			lpObj->Life -= 1;

  00bca	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00bcd	f3 0f 10 80 bc
	00 00 00	 movss	 xmm0, DWORD PTR [eax+188]
  00bd5	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@3f800000
  00bdd	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00be0	f3 0f 11 81 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm0

; 1321 : 			
; 1322 : 			if( lpObj->Life < 0 ) 

  00be8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00beb	0f 57 c0	 xorps	 xmm0, xmm0
  00bee	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  00bf5	76 10		 jbe	 SHORT $LN97@Attack

; 1323 : 			{
; 1324 : 				lpObj->Life = 0;

  00bf7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00bfa	0f 57 c0	 xorps	 xmm0, xmm0
  00bfd	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0

; 1325 : 			}

  00c05	eb 12		 jmp	 SHORT $LN98@Attack
$LN97@Attack:

; 1326 : 			else
; 1327 : 			{
; 1328 : 				AttackDamage = AttackDamage*dinorantdecdamage/100;

  00c07	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00c0a	0f af 45 98	 imul	 eax, DWORD PTR _dinorantdecdamage$7[ebp]
  00c0e	99		 cdq
  00c0f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00c14	f7 f9		 idiv	 ecx
  00c16	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN98@Attack:

; 1329 : 			}
; 1330 : #ifdef ADD_SHIELD_POINT_01_20060403
; 1331 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0, (WORD)lpObj->iShield);
; 1332 : #else
; 1333 : 			GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0);

  00c19	6a 00		 push	 0
  00c1b	68 ff 00 00 00	 push	 255			; 000000ffH
  00c20	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00c23	f3 0f 2c 88 bc
	00 00 00	 cvttss2si ecx, DWORD PTR [eax+188]
  00c2b	0f b7 d1	 movzx	 edx, cx
  00c2e	52		 push	 edx
  00c2f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00c32	8b 08		 mov	 ecx, DWORD PTR [eax]
  00c34	51		 push	 ecx
  00c35	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHGEE@Z ; GCReFillSend
  00c3a	83 c4 10	 add	 esp, 16			; 00000010H
$LN96@Attack:

; 1334 : #endif
; 1335 : 		}
; 1336 : #endif
; 1337 : 
; 1338 : 		//---------------------------------------------------------------------------------
; 1339 : 		//	
; 1340 : 		//	[][] 다크 호스 
; 1341 : 		//
; 1342 : 		//---------------------------------------------------------------------------------
; 1343 : 
; 1344 : #ifdef DARKLORD_WORK
; 1345 : 		if( gObjDarkHorse(lpTargetObj) )

  00c3d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00c40	50		 push	 eax
  00c41	e8 00 00 00 00	 call	 ?gObjDarkHorse@@YAHPAVOBJECTSTRUCT@@@Z ; gObjDarkHorse
  00c46	83 c4 04	 add	 esp, 4
  00c49	85 c0		 test	 eax, eax
  00c4b	0f 84 a2 00 00
	00		 je	 $LN99@Attack

; 1346 : 		{	
; 1347 : 			// 다크호스 데미지 흡수 (10+(통솔/100))
; 1348 : 			CItem	*Darkhorse = &lpTargetObj->pInventory[EQUIPMENT_HELPER];	

  00c51	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00c56	c1 e0 03	 shl	 eax, 3
  00c59	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00c5c	03 81 5c 0c 00
	00		 add	 eax, DWORD PTR [ecx+3164]
  00c62	89 45 94	 mov	 DWORD PTR _Darkhorse$6[ebp], eax

; 1349 : 
; 1350 : 			int	decdamage = 100-((30+Darkhorse->m_PetItem_Level)/2);			

  00c65	8b 45 94	 mov	 eax, DWORD PTR _Darkhorse$6[ebp]
  00c68	8b 80 a0 00 00
	00		 mov	 eax, DWORD PTR [eax+160]
  00c6e	83 c0 1e	 add	 eax, 30			; 0000001eH
  00c71	99		 cdq
  00c72	2b c2		 sub	 eax, edx
  00c74	d1 f8		 sar	 eax, 1
  00c76	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00c7b	2b c8		 sub	 ecx, eax
  00c7d	89 4d 90	 mov	 DWORD PTR _decdamage$5[ebp], ecx

; 1351 : 
; 1352 : 			lpTargetObj->Life -= 1;

  00c80	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00c83	f3 0f 10 80 bc
	00 00 00	 movss	 xmm0, DWORD PTR [eax+188]
  00c8b	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@3f800000
  00c93	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00c96	f3 0f 11 81 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm0

; 1353 : 			
; 1354 : 			if( lpTargetObj->Life < 0 ) 

  00c9e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00ca1	0f 57 c0	 xorps	 xmm0, xmm0
  00ca4	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  00cab	76 10		 jbe	 SHORT $LN100@Attack

; 1355 : 			{
; 1356 : 				lpTargetObj->Life = 0;

  00cad	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00cb0	0f 57 c0	 xorps	 xmm0, xmm0
  00cb3	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0

; 1357 : 			}

  00cbb	eb 12		 jmp	 SHORT $LN101@Attack
$LN100@Attack:

; 1358 : 			else
; 1359 : 			{
; 1360 : 				AttackDamage = AttackDamage*decdamage/100;

  00cbd	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00cc0	0f af 45 90	 imul	 eax, DWORD PTR _decdamage$5[ebp]
  00cc4	99		 cdq
  00cc5	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00cca	f7 f9		 idiv	 ecx
  00ccc	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN101@Attack:

; 1361 : 			}
; 1362 : 			
; 1363 : #ifdef ADD_SHIELD_POINT_01_20060403
; 1364 : 			GCReFillSend(lpTargetObj->m_Index, (WORD)lpTargetObj->Life, 0xFF, 0, (WORD)lpTargetObj->iShield);
; 1365 : #else
; 1366 : 			GCReFillSend(lpTargetObj->m_Index, (WORD)lpTargetObj->Life, 0xFF, 0);

  00ccf	6a 00		 push	 0
  00cd1	68 ff 00 00 00	 push	 255			; 000000ffH
  00cd6	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00cd9	f3 0f 2c 88 bc
	00 00 00	 cvttss2si ecx, DWORD PTR [eax+188]
  00ce1	0f b7 d1	 movzx	 edx, cx
  00ce4	52		 push	 edx
  00ce5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00ce8	8b 08		 mov	 ecx, DWORD PTR [eax]
  00cea	51		 push	 ecx
  00ceb	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHGEE@Z ; GCReFillSend
  00cf0	83 c4 10	 add	 esp, 16			; 00000010H
$LN99@Attack:

; 1367 : #endif
; 1368 : 		}
; 1369 : #endif
; 1370 : 
; 1371 : 		if( lpTargetObj->Live ) 

  00cf3	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00cf6	0f b6 48 66	 movzx	 ecx, BYTE PTR [eax+102]
  00cfa	85 c9		 test	 ecx, ecx
  00cfc	0f 84 64 03 00
	00		 je	 $LN122@Attack

; 1372 : 		{
; 1373 : 
; 1374 : 			//---------------------------------------------------------------------------------
; 1375 : 			//	
; 1376 : 			//	[][][] 스킬 데미지 값 구하기
; 1377 : 			//
; 1378 : 			//---------------------------------------------------------------------------------
; 1379 : 
; 1380 : #if defined( ADD_SKILL_WITH_COMBO ) || GAME_VERSION == G_V_97D
; 1381 : 
; 1382 : 			switch(skill)

  00d02	8b 45 e4	 mov	 eax, DWORD PTR _skill$[ebp]
  00d05	89 85 38 ff ff
	ff		 mov	 DWORD PTR tv688[ebp], eax
  00d0b	8b 8d 38 ff ff
	ff		 mov	 ecx, DWORD PTR tv688[ebp]
  00d11	83 e9 13	 sub	 ecx, 19			; 00000013H
  00d14	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv688[ebp], ecx
  00d1a	83 bd 38 ff ff
	ff 2e		 cmp	 DWORD PTR tv688[ebp], 46 ; 0000002eH
  00d21	0f 87 3b 01 00
	00		 ja	 $LN2@Attack
  00d27	8b 95 38 ff ff
	ff		 mov	 edx, DWORD PTR tv688[ebp]
  00d2d	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR $LN204@Attack[edx]
  00d34	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN205@Attack[eax*4]
$LN103@Attack:

; 1383 : 			{
; 1384 : 				case AT_SKILL_SWORD1:			//	내려찍기
; 1385 : 				case AT_SKILL_SWORD2:			//	찌르기
; 1386 : 				case AT_SKILL_SWORD3:			//	올려치기
; 1387 : 				case AT_SKILL_SWORD4:			//	돌려치기
; 1388 : 				case AT_SKILL_SWORD5:			//	베기
; 1389 : 				case AT_SKILL_WHEEL:			//	회오리베기		
; 1390 : 				case AT_SKILL_BLOWOFFURY:		//	분노의 일격
; 1391 : 				case AT_SKILL_STRIKE:			//	블로우(기사)
; 1392 : 				case AT_SKILL_KNIGHTDINORANT:	//	디노란트 공격
; 1393 : 				case AT_SKILL_DEFENSEDOWN:		//	블러드 어택(마검)
; 1394 : 	#ifdef ADD_NEW_SKILL_FOR_CASTLE_01_20041116
; 1395 : 				case AT_SKILL_RUSH:				//	반월베기(기사)
; 1396 : 				case AT_SKILL_ONE_FLASH:		//	나선베기 (마검)
; 1397 : 	#endif
; 1398 : 				{
; 1399 : 					// 스킬 데미지(에너지/10)
; 1400 : 	#ifdef DARKLORD_WORK					
; 1401 : 					if( lpObj->Class == CLASS_DARKLORD || lpObj->Class == CLASS_MAGUMSA )

  00d3b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d3e	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00d45	83 f9 04	 cmp	 ecx, 4
  00d48	74 0f		 je	 SHORT $LN106@Attack
  00d4a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d4d	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00d54	83 f9 03	 cmp	 ecx, 3
  00d57	75 0a		 jne	 SHORT $LN104@Attack
$LN106@Attack:

; 1402 : 	#else
; 1403 : 					if( lpObj->Class == CLASS_MAGUMSA )
; 1404 : 	#endif	// DARKLORD_WORK					
; 1405 : 						AttackDamage = AttackDamage*2;

  00d59	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00d5c	d1 e0		 shl	 eax, 1
  00d5e	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  00d61	eb 1f		 jmp	 SHORT $LN105@Attack
$LN104@Attack:

; 1406 : 					else 
; 1407 : 						AttackDamage = AttackDamage*(200+Energy/10)/100;

  00d63	8b 45 cc	 mov	 eax, DWORD PTR _Energy$[ebp]
  00d66	99		 cdq
  00d67	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  00d6c	f7 f9		 idiv	 ecx
  00d6e	05 c8 00 00 00	 add	 eax, 200		; 000000c8H
  00d73	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  00d77	99		 cdq
  00d78	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00d7d	f7 f9		 idiv	 ecx
  00d7f	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN105@Attack:

; 1408 : 
; 1409 : 				}
; 1410 : 				break;

  00d82	e9 db 00 00 00	 jmp	 $LN2@Attack
$LN107@Attack:

; 1411 : 				
; 1412 : 				case AT_SKILL_KNIGHTSPEAR:	// 유니창
; 1413 : 					{	
; 1414 : 						if( lpObj->pInventory[EQUIPMENT_HELPER].m_Type == MAKE_ITEMNUM(13,3) || 

  00d87	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00d8c	c1 e0 03	 shl	 eax, 3
  00d8f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00d92	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  00d98	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00d9d	6a 03		 push	 3
  00d9f	6a 0d		 push	 13			; 0000000dH
  00da1	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00da6	83 c4 08	 add	 esp, 8
  00da9	3b f0		 cmp	 esi, eax
  00dab	74 26		 je	 SHORT $LN109@Attack
  00dad	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00db2	c1 e0 03	 shl	 eax, 3
  00db5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00db8	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  00dbe	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00dc3	6a 02		 push	 2
  00dc5	6a 0d		 push	 13			; 0000000dH
  00dc7	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00dcc	83 c4 08	 add	 esp, 8
  00dcf	3b f0		 cmp	 esi, eax
  00dd1	75 47		 jne	 SHORT $LN111@Attack
$LN109@Attack:

; 1415 : 							lpObj->pInventory[EQUIPMENT_HELPER].m_Type == MAKE_ITEMNUM(13,2) 
; 1416 : 	#ifdef ADD_ITEM_FENRIR_01_20051110
; 1417 : 							// 펜릴 착용시에도 창찌르기 기술 가능
; 1418 : 							|| lpObj->pInventory[EQUIPMENT_HELPER].m_Type == MAKE_ITEMNUM(13,37)
; 1419 : 	#endif
; 1420 : 						 )
; 1421 : 
; 1422 : 						{	// 유니리아 디노란트
; 1423 : 	#ifdef DARKLORD_WORK					
; 1424 : 							if( lpObj->Class == CLASS_DARKLORD || lpObj->Class == CLASS_MAGUMSA )

  00dd3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00dd6	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00ddd	83 f9 04	 cmp	 ecx, 4
  00de0	74 0f		 je	 SHORT $LN112@Attack
  00de2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00de5	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00dec	83 f9 03	 cmp	 ecx, 3
  00def	75 0a		 jne	 SHORT $LN110@Attack
$LN112@Attack:

; 1425 : 	#else
; 1426 : 							if( lpObj->Class == CLASS_MAGUMSA )
; 1427 : 	#endif	//DARKLORD_WORK
; 1428 : 								AttackDamage = AttackDamage*2;

  00df1	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00df4	d1 e0		 shl	 eax, 1
  00df6	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  00df9	eb 1f		 jmp	 SHORT $LN111@Attack
$LN110@Attack:

; 1429 : 							else 
; 1430 : 								AttackDamage = AttackDamage*(200+Energy/10)/100;

  00dfb	8b 45 cc	 mov	 eax, DWORD PTR _Energy$[ebp]
  00dfe	99		 cdq
  00dff	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  00e04	f7 f9		 idiv	 ecx
  00e06	05 c8 00 00 00	 add	 eax, 200		; 000000c8H
  00e0b	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  00e0f	99		 cdq
  00e10	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00e15	f7 f9		 idiv	 ecx
  00e17	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN111@Attack:

; 1431 : 						}						
; 1432 : 					}
; 1433 : 				break;

  00e1a	eb 46		 jmp	 SHORT $LN2@Attack
$LN113@Attack:

; 1434 : 
; 1435 : 				case AT_SKILL_SWORD6:			// 마검스킬
; 1436 : 				{	
; 1437 : 					//AttackDamage = AttackDamage*190/100;
; 1438 : 					AttackDamage = AttackDamage*2;

  00e1c	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00e1f	d1 e0		 shl	 eax, 1
  00e21	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1439 : 					break;

  00e24	eb 3c		 jmp	 SHORT $LN2@Attack
$LN114@Attack:

; 1440 : 				}
; 1441 : 
; 1442 : 	#ifdef ADD_NEW_SKILL_FOR_CASTLE_01_20041116
; 1443 : 				case AT_SKILL_DEEPIMPACT:		//딥임팩트(뮤즈엘프)
; 1444 : 	#endif
; 1445 : 				case AT_SKILL_PENETRATION:		//관통(요정)
; 1446 : 				case AT_SKILL_ELFHARDEN:		// 석화(요정)
; 1447 : 					{	
; 1448 : 						AttackDamage = AttackDamage*2;

  00e26	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00e29	d1 e0		 shl	 eax, 1
  00e2b	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1449 : 					}
; 1450 : 				break;	

  00e2e	eb 32		 jmp	 SHORT $LN2@Attack
$LN115@Attack:

; 1451 : 				
; 1452 : 	#ifdef DARKLORD_WORK
; 1453 : 		#ifdef ADD_NEW_SKILL_FOR_CASTLE_01_20041116
; 1454 : 				case AT_SKILL_SPACE_SPLIT:		// 파이어브래스트 (다크)
; 1455 : 		#endif
; 1456 : 				case AT_SKILL_SPEAR:			// 마검스킬
; 1457 : 				case AT_SKILL_FIREBURST:				
; 1458 : 				case AT_SKILL_DARKHORSE_ATTACK:
; 1459 : 				case AT_SKILL_ELECTRICSPARK:
; 1460 : 		#ifdef ADD_SKILL_DARKLOAD_FIRESCREAM_20060601
; 1461 : 				case AT_SKILL_FIRESCREAM:		// 파이어스크림 (다크)
; 1462 : 		#endif
; 1463 : 					AttackDamage = AttackDamage*(200+(lpObj->Energy+lpObj->AddEnergy)/20)/100;

  00e30	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00e33	0f b7 80 ba 00
	00 00		 movzx	 eax, WORD PTR [eax+186]
  00e3a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00e3d	0f b7 91 e6 00
	00 00		 movzx	 edx, WORD PTR [ecx+230]
  00e44	03 c2		 add	 eax, edx
  00e46	99		 cdq
  00e47	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00e4c	f7 f9		 idiv	 ecx
  00e4e	05 c8 00 00 00	 add	 eax, 200		; 000000c8H
  00e53	0f af 45 1c	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  00e57	99		 cdq
  00e58	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00e5d	f7 f9		 idiv	 ecx
  00e5f	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN2@Attack:

; 1464 : 					break;
; 1465 : 	#endif // DARKLORD_WORK
; 1466 : 
; 1467 : 	#ifdef ADD_ITEM_FENRIR_01_20051110
; 1468 : 				case AT_SKILL_FENRIR_ATTACK:	// 펜릴 스킬 - 플라즈마 스톰
; 1469 : 					{
; 1470 : 						// 펜릴 최소 착용 가능 레벨 보다 얼마나 레벨이 큰지 구한다.
; 1471 : 						int iDamageInc = lpObj->Level - MIN_FENRIR_EQUIP_LEVEL ;
; 1472 : 
; 1473 : 		#ifdef MASTER_LEVEL_UP_SYSTEM_20070912		// 종합레벨 적용 - 플라즈마스톰 사용시 특정 레벨마다 데미지 증가분 상승.
; 1474 : 						iDamageInc += lpObj->m_nMasterLevel;
; 1475 : 		#endif
; 1476 : 
; 1477 : 						if( iDamageInc < 0 )
; 1478 : 						{
; 1479 : 							iDamageInc = 0;
; 1480 : 						}
; 1481 : 
; 1482 : 						// 특정 레벨 마다 데미지 증가 분이 상승한다.
; 1483 : 						iDamageInc = iDamageInc / MAX_FENRIR_DAMAGE_INC_LEVEL;
; 1484 : 
; 1485 : 						AttackDamage = AttackDamage * (200+iDamageInc) / 100;
; 1486 : 
; 1487 : 					}
; 1488 : 					break;
; 1489 : 	#endif // ADD_ITEM_FENRIR_01_20051110
; 1490 : 
; 1491 : 	#ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 스킬 데미지
; 1492 : 				case AT_SKILL_LIGHTNINGORB:
; 1493 : 					{
; 1494 : 						// 주변 스플레쉬데미지
; 1495 : 						gObjUseSkill.SplashDamage(lpObj, lpTargetObj, AT_SKILL_LIGHTNINGORB, AttackDamage);
; 1496 : 					}
; 1497 : 					break;
; 1498 : 					
; 1499 : 				case AT_SKILL_DRAINLIFE:
; 1500 : 					{
; 1501 : 						
; 1502 : 						//int nAddHP = AttackDamage * 20 / 100;
; 1503 : 						int nAddHP = 0;
; 1504 : 						if(lpTargetObj->Type == OBJTYPE_MONSTER)
; 1505 : 						{
; 1506 : 							// 에너지/15 + 몬스터레벨 / 2.5를 체력으로 흡수
; 1507 : 							nAddHP = (lpObj->Energy / 15) + (lpTargetObj->Level / 2.5);
; 1508 : 						}
; 1509 : 						else if( lpTargetObj->Type == OBJTYPE_CHARACTER )
; 1510 : 						{
; 1511 : 							// (최종데미지 * 10%) + (에너지 / 23 )
; 1512 : 							nAddHP = (AttackDamage * 10 / 100) + (lpObj->Energy / 23);
; 1513 : 						}
; 1514 : 
; 1515 : 						int tmpLife = lpObj->Life + nAddHP;
; 1516 : 						if(tmpLife > lpObj->MaxLife+lpObj->AddLife)
; 1517 : 						{
; 1518 : 							lpObj->Life = lpObj->MaxLife+lpObj->AddLife;
; 1519 : 						}
; 1520 : 						else
; 1521 : 						{
; 1522 : 							lpObj->Life = tmpLife;
; 1523 : 						}
; 1524 : 
; 1525 : 						GCReFillSend(lpObj->m_Index, (WORD)lpObj->Life, 0xFF, 0, (WORD)lpObj->iShield);
; 1526 : 					}
; 1527 : 					break;
; 1528 : 				case AT_SKILL_CHAINLIGHTNING:
; 1529 : 					{
; 1530 : 						switch(bCombo)
; 1531 : 						{
; 1532 : 						case 1:	// 100 %
; 1533 : 							break;
; 1534 : 						case 2:	// 80 %
; 1535 : 							AttackDamage = AttackDamage * 70 / 100;
; 1536 : 							break;
; 1537 : 						case 3:	// 50 %
; 1538 : 							AttackDamage = AttackDamage * 50 / 100;
; 1539 : 							break;
; 1540 : 						default:
; 1541 : 							// error
; 1542 : 							return FALSE;
; 1543 : 							break;
; 1544 : 						}
; 1545 : 
; 1546 : 						bCombo = 0;
; 1547 : 					}
; 1548 : 					break;
; 1549 : 				case AT_SKILL_EXPLOSION_2:
; 1550 : 					{
; 1551 : 						int DotDamage = AttackDamage * 60 / 100;
; 1552 : 						// 데미지가 들어갔으면 일정시간 데미지 감소
; 1553 : 						gObjAddBuffEffect(lpTargetObj, BUFFTYPE_FIREDOT, EFFECTTYPE_GIVE_DMG_TICK, DotDamage , 0, 0, 5);
; 1554 : 					}
; 1555 : 					break;
; 1556 : 				case AT_SKILL_REQUIEM:
; 1557 : 					{
; 1558 : 						int DotDamage = AttackDamage * 60 / 100;
; 1559 : 						// 데미지가 들어갔으면 일정시간 데미지 감소
; 1560 : 						gObjAddBuffEffect(lpTargetObj, BUFFTYPE_BLOODDOT, EFFECTTYPE_GIVE_DMG_TICK, DotDamage, 0, 0, 5);
; 1561 : 					}
; 1562 : 					break;
; 1563 : 				case AT_SKILL_SLEEP:
; 1564 : 					{
; 1565 : 						// 여기서 다시 성공률 계산
; 1566 : 						int skillSuccessRate = 0;
; 1567 : #ifdef MODIFY_SLEEP_SKILL_SUCCESSRATE_BUGFIX_20080125	// 성공률 수정
; 1568 : 						if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1569 : 						{
; 1570 : 							skillSuccessRate = 20 + ( lpObj->Energy / 30 ) + ( lpObj->m_Curse / 6 );
; 1571 : 						}
; 1572 : 						else if(lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1573 : 						{
; 1574 : 							skillSuccessRate = 15 + (lpObj->Energy / 37) + (lpObj->m_Curse / 6);
; 1575 : 						}
; 1576 : #else	// MODIFY_SLEEP_SKILL_SUCCESSRATE_BUGFIX_20080125
; 1577 : 						if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1578 : 						{
; 1579 : 							skillSuccessRate = 15 + (( lpObj->Energy / 9 * lpObj->m_Curse) / 8 ) / 100;
; 1580 : 						}
; 1581 : 						else if(lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1582 : 						{
; 1583 : 							skillSuccessRate = 10 + (lpObj->m_Curse / 3) / 100;
; 1584 : 						}
; 1585 : #endif	// MODIFY_SLEEP_SKILL_SUCCESSRATE_BUGFIX_20080125
; 1586 : 
; 1587 : 						if( skillSuccessRate < rand()%100)
; 1588 : 						{
; 1589 : 							GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 1590 : 							return FALSE;
; 1591 : 						}
; 1592 : 						
; 1593 : 						int nEffectTime = 0;
; 1594 : #ifdef MODIFY_SLEEP_SKILL_SUCCESSRATE_BUGFIX_20080125	// 시간 수정
; 1595 : 						if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1596 : 						{
; 1597 : 							nEffectTime	= 5 + (lpObj->Energy / 100) - (lpTargetObj->Level / 20);
; 1598 : 						}
; 1599 : 						else if (lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1600 : 						{
; 1601 : 							nEffectTime = 4 + (lpObj->Energy / 250) + ((lpObj->Level - lpTargetObj->Level) / 100);
; 1602 : 						}
; 1603 : #else	// MODIFY_SLEEP_SKILL_SUCCESSRATE_BUGFIX_20080125
; 1604 : 						if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1605 : 						{
; 1606 : 							nEffectTime	= 10 + (lpObj->Energy / 150) - (lpTargetObj->Level / 10);
; 1607 : 						}
; 1608 : 						else if (lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1609 : 						{
; 1610 : 							nEffectTime = (10 / 2) + (lpObj->Energy / 250) + ((lpObj->Level - lpTargetObj->Level) / 100);
; 1611 : 						}
; 1612 : #endif	// MODIFY_SLEEP_SKILL_SUCCESSRATE_BUGFIX_20080125
; 1613 : 
; 1614 : 						if(nEffectTime < 1)
; 1615 : 						{
; 1616 : 							GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 1617 : 							return FALSE;
; 1618 : 						}
; 1619 : 						
; 1620 : 						// 낮은 수준의 버퍼는 적용안함
; 1621 : 						if( gObjCheckPowerfulEffect( lpTargetObj, BUFFTYPE_SLEEP, nEffectTime, 0 ) == true )
; 1622 : 						{
; 1623 : 							GCMagicAttackNumberSend( lpObj, AT_SKILL_SLEEP, lpTargetObj->m_Index, 0 );	// 스킬사용 실패
; 1624 : 							return FALSE;
; 1625 : 						}
; 1626 : 						// 버프적용
; 1627 : 						gObjAddBuffEffect(lpTargetObj, BUFFTYPE_SLEEP, EFFECTTYPE_SLEEP, nEffectTime, 0, 0, nEffectTime);
; 1628 : 
; 1629 : 						return TRUE;
; 1630 : 					}
; 1631 : 					break;
; 1632 : 
; 1633 : 	#endif	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 1634 : 
; 1635 : 	#ifdef UPDATE_SUMMONER_NEW_SKILL_20080111
; 1636 : 				case AT_SKILL_WEAKNESS:
; 1637 : 					{
; 1638 : 						int nSkillSuccessRate = 0;
; 1639 : 						// 성공률 계산
; 1640 : 						if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1641 : 						{
; 1642 : 							nSkillSuccessRate = 32 + (lpObj->Energy / 50) + (lpObj->m_Curse / 6);
; 1643 : 						}
; 1644 : 						else if(lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1645 : 						{
; 1646 : 							nSkillSuccessRate = 17 + (lpObj->Energy / 50) + (lpObj->m_Curse / 6);
; 1647 : 						}
; 1648 : 
; 1649 : 						if( nSkillSuccessRate >= rand()%100)
; 1650 : 						{
; 1651 : 							int nEffectValue	= 0;
; 1652 : 							int nEffectTime		= 0;
; 1653 : 						
; 1654 : 							if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1655 : 							{
; 1656 : 								int tmpEnergy = 0;
; 1657 : 								if(lpObj->Energy > 4000)
; 1658 : 								{
; 1659 : 									tmpEnergy = 4000;
; 1660 : 								}
; 1661 : 								nEffectValue	= 4 + (lpObj->Energy / 58) ;
; 1662 : 								nEffectTime		= (4 + (lpObj->Energy / 100) - (lpTargetObj->Level / 20) );
; 1663 : 							}
; 1664 : 							else if(lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1665 : 							{
; 1666 : 								int tmpEnergy = 0;
; 1667 : 								if(lpObj->Energy > 4000)
; 1668 : 								{
; 1669 : 									tmpEnergy = 4000;
; 1670 : 								}
; 1671 : 								nEffectValue	= 3 + (lpObj->Energy / 93);
; 1672 : #ifdef MODIFY_SUMMONER_WEAKENESS_ENERVATION_PVPEFFECTTIME_BUGFIX_20080404
; 1673 : 								nEffectTime		= (5 + (lpObj->Energy / 300) + ((lpObj->Level -  lpTargetObj->Level) / 150) );
; 1674 : #else	// MODIFY_SUMMONER_WEAKENESS_ENERVATION_PVPEFFECTTIME_BUGFIX_20080404
; 1675 : 								nEffectTime		= (5 + (lpObj->Energy / 300) - ((lpObj->Level -  lpTargetObj->Level) / 150) );
; 1676 : #endif	// MODIFY_SUMMONER_WEAKENESS_ENERVATION_PVPEFFECTTIME_BUGFIX_20080404
; 1677 : 							}
; 1678 : 							
; 1679 : 							if(nEffectTime < 1)
; 1680 : 							{
; 1681 : 								GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 1682 : 								return FALSE;
; 1683 : 							}
; 1684 : 
; 1685 : 							if( gObjCheckPowerfulEffect( lpTargetObj, BUFFTYPE_CURSED_ATTACK_DOWN, nEffectValue, 0 ) == true )
; 1686 : 							{
; 1687 : 								GCMagicAttackNumberSend( lpObj, AT_SKILL_WEAKNESS, lpTargetObj->m_Index, 0 );	// 스킬사용 실패
; 1688 : 								return FALSE;
; 1689 : 							}
; 1690 : 							
; 1691 : 							gObjAddBuffEffect( lpTargetObj, BUFFTYPE_CURSED_ATTACK_DOWN, EFFECTTYPE_CURSED_ATTACKDOWN, nEffectValue, 0, 0, nEffectTime );
; 1692 : 							return TRUE;
; 1693 : 						}
; 1694 : 						else
; 1695 : 						{
; 1696 : 							GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 1697 : 							return FALSE;
; 1698 : 						}
; 1699 : 					}
; 1700 : 					break;
; 1701 : 				case AT_SKILL_ENERVATION:
; 1702 : 					{
; 1703 : 						int nSkillSuccessRate = 0;
; 1704 : 						// 성공률 계산
; 1705 : 						if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1706 : 						{
; 1707 : 							nSkillSuccessRate = 32 + (lpObj->Energy / 50) + (lpObj->m_Curse / 6);
; 1708 : 						}
; 1709 : 						else if(lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1710 : 						{
; 1711 : 							nSkillSuccessRate = 17 + (lpObj->Energy / 50) + (lpObj->m_Curse / 6);
; 1712 : 						}
; 1713 : 
; 1714 : 						if( nSkillSuccessRate >= rand()%100)
; 1715 : 						{
; 1716 : 							int nEffectValue	= 0;
; 1717 : 							int nEffectTime		= 0;
; 1718 : 						
; 1719 : 							if( lpTargetObj->Type == OBJTYPE_MONSTER)
; 1720 : 							{
; 1721 : 								int tmpEnergy = 0;
; 1722 : 								if(lpObj->Energy > 4000)
; 1723 : 								{
; 1724 : 									tmpEnergy = 4000;
; 1725 : 								}
; 1726 : 								nEffectValue	= 20 + (lpObj->Energy / 90) ;
; 1727 : 								nEffectTime		= (4 + (lpObj->Energy / 100) - (lpTargetObj->Level / 20) );
; 1728 : 								
; 1729 : 							}
; 1730 : 							else if(lpTargetObj->Type == OBJTYPE_CHARACTER)
; 1731 : 							{
; 1732 : 								int tmpEnergy = 0;
; 1733 : 								if(lpObj->Energy > 4000)
; 1734 : 								{
; 1735 : 									tmpEnergy = 4000;
; 1736 : 								}
; 1737 : 								nEffectValue	= 12 + (lpObj->Energy / 110);
; 1738 : #ifdef MODIFY_SUMMONER_WEAKENESS_ENERVATION_PVPEFFECTTIME_BUGFIX_20080404
; 1739 : 								nEffectTime		= (5 + (lpObj->Energy / 300) + ((lpObj->Level -  lpTargetObj->Level) / 150) );
; 1740 : #else	// MODIFY_SUMMONER_WEAKENESS_ENERVATION_PVPEFFECTTIME_BUGFIX_20080404
; 1741 : 								nEffectTime		= (5 + (lpObj->Energy / 300) - ((lpObj->Level -  lpTargetObj->Level) / 150) );
; 1742 : #endif	// MODIFY_SUMMONER_WEAKENESS_ENERVATION_PVPEFFECTTIME_BUGFIX_20080404
; 1743 : 							}
; 1744 : 							
; 1745 : 							if(nEffectTime < 1)
; 1746 : 							{
; 1747 : 								GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 1748 : 								return FALSE;
; 1749 : 							}
; 1750 : 
; 1751 : 							if( gObjCheckPowerfulEffect( lpTargetObj, BUFFTYPE_CURSED_DEFENSE_DOWN, nEffectValue, 0 ) == true )
; 1752 : 							{
; 1753 : 								GCMagicAttackNumberSend( lpObj, AT_SKILL_ENERVATION, lpTargetObj->m_Index, 0 );	// 스킬사용 실패
; 1754 : 								return FALSE;
; 1755 : 							}
; 1756 : 							
; 1757 : 							gObjAddBuffEffect( lpTargetObj, BUFFTYPE_CURSED_DEFENSE_DOWN, EFFECTTYPE_CURSED_DEFENSEDOWN, nEffectValue, 0, 0, nEffectTime );
; 1758 : 							return TRUE;
; 1759 : 						}
; 1760 : 						else
; 1761 : 						{
; 1762 : 							GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, 0, 0);
; 1763 : 							return FALSE;
; 1764 : 						}
; 1765 : 					}
; 1766 : 					break;
; 1767 : 	#endif	// UPDATE_SUMMONER_NEW_SKILL_20080111
; 1768 : 
; 1769 : 	#ifdef UPDATE_ADD_SUMMONER_SKILL_POLLUTION_20080425
; 1770 : 				case AT_SKILL_PULLUTION:
; 1771 : 					{
; 1772 : 						if( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_FREEZE ) == false )
; 1773 : 						{
; 1774 : 							//if( retResistance( lpTargetObj, RESISTANCE_COLD ) == FALSE )
; 1775 : 							{
; 1776 : 								lpTargetObj->lpAttackObj = lpObj;
; 1777 : 								lpTargetObj->DelayActionTime = 1000;
; 1778 : 								lpTargetObj->DelayLevel = 1;
; 1779 : 								gObjAddBuffEffect( lpTargetObj, BUFFTYPE_FREEZE, EFFECTTYPE_REDUCE_MOVE_SPEED, 0, 0, 0, 2 );
; 1780 : 							}
; 1781 : 						}
; 1782 : 					}
; 1783 : 					break;
; 1784 : 	#endif	// UPDATE_ADD_SUMMONER_SKILL_POLLUTION_20080425
; 1785 : 					
; 1786 : #ifdef SEASON4_PATCH_GROOVING
; 1787 : 					// --->
; 1788 : 					// 시즌 4.0 추가 스킬  grooving 2008/04/24
; 1789 : 					// 단순히 클라이어트 이펙트 표현을 위해서.
; 1790 : 				case	AT_SKILL_LIGHTING_SHOCK: // 라이트닝 쇼크 
; 1791 : 					{
; 1792 : 						gObjAddBuffEffect( lpTargetObj, BUFFTYPE_LIGHTNINGSHOCK, 0, 0, 0, 0, 1 );
; 1793 : 					}
; 1794 : 					break;
; 1795 : 					// <---
; 1796 : #endif
; 1797 : 
; 1798 : 	#ifdef ADD_SEASON4_NEW_SKILL_20080522	// 신규 스킬 추가
; 1799 : 				case  AT_SKILL_DESTRUCTION:		// 파괴의 일격
; 1800 : 					{
; 1801 : 						lpTargetObj->lpAttackObj = lpObj;
; 1802 : 						lpTargetObj->DelayActionTime = 1000;
; 1803 : 						lpTargetObj->DelayLevel = 1;
; 1804 : 						gObjAddBuffEffect( lpTargetObj, BUFFTYPE_COLD, EFFECTTYPE_REDUCE_MOVE_SPEED, 0, 0, 0, 10 );
; 1805 : 						AttackDamage = AttackDamage*(200+Energy/10)/100;
; 1806 : 					}
; 1807 : 					break;
; 1808 : 				case AT_SKILL_MULTISHOT:		// 멀티샷
; 1809 : 					break;
; 1810 : 				case AT_SKILL_FLAMESTRIKE:		// 프레임 스트라이크
; 1811 : 					{
; 1812 : 						AttackDamage = AttackDamage * 2;
; 1813 : 						gObjAddBuffEffect( lpTargetObj, BUFFTYPE_FLAMESTRKE, EFFECTTYPE_NONE, 0, 0, 0, 1 );
; 1814 : 					}
; 1815 : 					break;
; 1816 : 				case AT_SKILL_GIGANTICSTORM:	// 기간틱 스톰
; 1817 : 					{
; 1818 : 						gObjAddBuffEffect( lpTargetObj, BUFFTYPE_GIGANTICSTORM, EFFECTTYPE_NONE, 0, 0, 0, 1 );
; 1819 : 					}
; 1820 : 					break;
; 1821 : 				case AT_SKILL_CHAOTICDESAIR:	// 카오스 디자이어
; 1822 : 					{
; 1823 : 						AttackDamage = AttackDamage*(200+Energy/25)/100;
; 1824 : 					}
; 1825 : 					break;
; 1826 : 	#endif	// ADD_SEASON4_NEW_SKILL_20080522
; 1827 : 					
; 1828 : #ifdef ADD_RAKLION_20080408
; 1829 : 				case AT_SKILL_SELUPAN_POISON_ATTACK:
; 1830 : 					AttackDamage = AttackDamage * 2;
; 1831 : 					break;
; 1832 : 				case AT_SKILL_SELUPAN_ICE_STORM:
; 1833 : 					AttackDamage = (float)(AttackDamage * 2.2);
; 1834 : 					break;
; 1835 : 				case AT_SKILL_SELUPAN_ICE_STRIKE:
; 1836 : 					AttackDamage = (float)(AttackDamage * 2.3);
; 1837 : 					break;
; 1838 : 				case AT_SKILL_SELUPAN_FIRST_SKILL:
; 1839 : 					AttackDamage = (float)(AttackDamage * 2.5);
; 1840 : 					break;
; 1841 : #endif // ADD_RAKLION_20080408
; 1842 : 			}
; 1843 : 			
; 1844 : #ifdef ADD_MASTER_LEVEL_SKILL_SYSTEM_ACTIVE_20080107	// 마스터레벨 액티브 스킬 데미지 값 구하기
; 1845 : 			//---------------------------------------------------------------------------------
; 1846 : 			//	
; 1847 : 			//	[][][] 마스터레벨 액티브 스킬 데미지 값 구하기
; 1848 : 			//
; 1849 : 			//---------------------------------------------------------------------------------	
; 1850 : 			if( g_MasterSkillSystem.CheckMasterLevelSkill( skill ) )
; 1851 : 			{
; 1852 : 				INT iSkillValue = MagicDamageC.SkillGet( lpMagic->m_Skill );
; 1853 : 				INT iMLSBase	= g_MasterSkillSystem.GetBaseMasterLevelSkill( skill );
; 1854 : 				switch( iMLSBase ) 
; 1855 : 				{
; 1856 : 				case AT_SKILL_ML_STRENGTHEN_WHEEL_KNIGHT:			// 회오리베기 강화(기사)
; 1857 : 					AttackDamage = AttackDamage * ( 200 + Energy / 10 ) / 100;					
; 1858 : 					break;
; 1859 : 
; 1860 : 				case AT_SKILL_ML_STRENGTHEN_WHEEL_MAGUMSA:			// 회오리베기 강화(마검사)
; 1861 : 					AttackDamage = AttackDamage * 2;					
; 1862 : 					break;
; 1863 : 					
; 1864 : 				case AT_SKILL_ML_STRENGTHEN_DARKHORSE_ATTACK:		// 어스쉐이크 강화
; 1865 : 					AttackDamage = AttackDamage * ( 200 + ( lpObj->Energy + lpObj->AddEnergy ) / 20 ) / 100;					
; 1866 : 					break;
; 1867 : 
; 1868 : 				case AT_SKILL_ML_STRENGTHEN_FIREBURST:				// 파이어버스트 강화
; 1869 : 					AttackDamage = AttackDamage * ( 200 + ( lpObj->Energy + lpObj->AddEnergy ) / 20 ) / 100;					
; 1870 : 					break;
; 1871 : 
; 1872 : #ifdef UPDATE_MASTER_LEVEL_4RANK_20080428	// 마스터 레벨 4랭크
; 1873 : 				case AT_SKILL_ML_STRENGTHEN_EVIL:					// 악령 강화
; 1874 : 					break;
; 1875 : 				case AT_SKILL_ML_STRENGTHEN_EXPICE:					// 서든 아이스 강화
; 1876 : 					AttackDamage += iSkillValue;
; 1877 : 					break;
; 1878 : 				case AT_SKILL_ML_STRENGTHEN_STRIKE:					// 블로우 강화(기사)
; 1879 : 					AttackDamage = AttackDamage*(200+Energy/10)/100;
; 1880 : 					break;
; 1881 : 				case AT_SKILL_ML_STRENGTHEN_BLOWOFFURY:				// 분노의 일격 강화(기사)
; 1882 : 					AttackDamage = AttackDamage*(200+Energy/10)/100;
; 1883 : 					break;
; 1884 : 				case AT_SKILL_ML_STRENGTHEN_DEFENSEDOWN:			// 블러드 어택 강화(마검)
; 1885 : 					AttackDamage = AttackDamage * 2;
; 1886 : 					break;
; 1887 : 				case AT_SKILL_ML_STRENGTHEN_SWORD6:					// 파워 슬래쉬 강화(마검)
; 1888 : 					AttackDamage = AttackDamage * 2;
; 1889 : 					break;
; 1890 : 				case AT_SKILL_ML_STRENGTHEN_FIRESCREAM:				// 파이어 스크림 강화(다크)
; 1891 : 					AttackDamage = AttackDamage*(200+(lpObj->Energy+lpObj->AddEnergy)/20)/100;
; 1892 : 					break;
; 1893 : #endif	// UPDATE_MASTER_LEVEL_4RANK_20080428
; 1894 : 
; 1895 : #ifdef UPDATE_MASTER_SKILL_4RANK_ADDITION_20080808	// 
; 1896 : 				case AT_SKILL_ML_STRENGTHEN_MAGUMSA_EVIL:			// 악령 강화(마검사)
; 1897 : 					break;
; 1898 : #endif	// UPDATE_MASTER_SKILL_4RANK_ADDITION_20080808
; 1899 : 				}
; 1900 : 			}
; 1901 : #endif	// ADD_MASTER_LEVEL_SKILL_SYSTEM_ACTIVE_20080107
; 1902 : 
; 1903 : #else
; 1904 : 			
; 1905 : 	/*
; 1906 : 	//
; 1907 : 	//	
; 1908 : 	//	20051110 ADD_SKILL_WITH_COMBO 의 ELSE 부분 삭제 및 Attack 함수 간략화 (apple)
; 1909 : 	// 
; 1910 : 	//  [] Depth 1
; 1911 : 	//	[][] Depth 2
; 1912 : 	//	[][][] Depth 3
; 1913 : 	//
; 1914 : 	*/
; 1915 : 
; 1916 : #endif // ADD_SKILL_WITH_COMBO
; 1917 : 
; 1918 : 			
; 1919 : 			//---------------------------------------------------------------------------------
; 1920 : 			//	
; 1921 : 			//	[][][] 스킬이 아닌 공격 일때 데미지를 구한다.
; 1922 : 			//
; 1923 : 			//---------------------------------------------------------------------------------
; 1924 : 
; 1925 : 			if( !skill )

  00e62	83 7d e4 00	 cmp	 DWORD PTR _skill$[ebp], 0
  00e66	75 38		 jne	 SHORT $LN117@Attack

; 1926 : 			{
; 1927 : 				if( lpObj->pInventory[EQUIPMENT_HELPER].m_Type == MAKE_ITEMNUM(13,3) )

  00e68	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00e6d	c1 e0 03	 shl	 eax, 3
  00e70	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00e73	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  00e79	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00e7e	6a 03		 push	 3
  00e80	6a 0d		 push	 13			; 0000000dH
  00e82	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00e87	83 c4 08	 add	 esp, 8
  00e8a	3b f0		 cmp	 esi, eax
  00e8c	75 12		 jne	 SHORT $LN117@Attack

; 1928 : 				{	// 디노란트 일반 공격도 데미지 추가
; 1929 : 					AttackDamage = AttackDamage*130/100;

  00e8e	69 45 1c 82 00
	00 00		 imul	 eax, DWORD PTR _AttackDamage$[ebp], 130
  00e95	99		 cdq
  00e96	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00e9b	f7 f9		 idiv	 ecx
  00e9d	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN117@Attack:

; 1930 : 				}
; 1931 : 				
; 1932 : 			}
; 1933 : 
; 1934 : 			//---------------------------------------------------------------------------------
; 1935 : 			//	
; 1936 : 			//	[][][] 법사 소울 바리어 데미지 흡수 적용
; 1937 : 			//
; 1938 : 			//---------------------------------------------------------------------------------
; 1939 : 
; 1940 : #ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 1941 : #ifdef ADD_MASTER_LEVEL_SKILL_SYSTEM_ACTIVE_20080107	// 소울바리어 : 데미지를 마나로 흡수(Attack)
; 1942 : 			// 법사 소울바리어(데미지를 마나로 흡수 시킨다)
; 1943 : 			if( ( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_MELEE_DEFENSE_INC ) == true ) && AttackDamage > 0 )
; 1944 : 			{	
; 1945 : 				// 데미지를 마나로
; 1946 : 				int iWizardSkillDefense = 0;
; 1947 : 				int iManaRate			= 0;
; 1948 : 				gObjGetValueOfBuffIndex( lpTargetObj, BUFFTYPE_MELEE_DEFENSE_INC, &iWizardSkillDefense, &iManaRate );
; 1949 : 				// 마나 감소			
; 1950 : 				int iReplacementMana = 0;
; 1951 : 				if( iManaRate > 0 )
; 1952 : 					iReplacementMana = (WORD)lpTargetObj->Mana * iManaRate / 1000;	
; 1953 : 				else
; 1954 : 					iReplacementMana = (WORD)lpTargetObj->Mana * 2 / 100;	
; 1955 : 
; 1956 : 				if( lpTargetObj->Mana > iReplacementMana )
; 1957 : 				{	
; 1958 : 					// 사용가능한 마나가 있어야 된다
; 1959 : 					lpTargetObj->Mana -= iReplacementMana;				
; 1960 : 
; 1961 : 					int decattackdamage = 0;
; 1962 : 					if( iWizardSkillDefense > 0 )
; 1963 : 						decattackdamage = AttackDamage * iWizardSkillDefense / 100;	
; 1964 : 
; 1965 : 					// 데미지 감소
; 1966 : 					AttackDamage -= decattackdamage;
; 1967 : 					ManaChange = TRUE;
; 1968 : 				}
; 1969 : 			}
; 1970 : 
; 1971 : #else
; 1972 : 			if( ( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_MELEE_DEFENSE_INC ) == true ) && AttackDamage > 0 )
; 1973 : 			{	// 법사 소울바리어(데미지를 마나로 흡수 시킨다)
; 1974 : 				int replacemana = (WORD)lpTargetObj->Mana*2/100;		// 마나 2%감소
; 1975 : 				if( lpTargetObj->Mana > replacemana )
; 1976 : 				{	// 사용가능한 마나가 있어야 된다
; 1977 : 					lpTargetObj->Mana -= replacemana;				// 데미지를 마나로
; 1978 : 					int iWizardSkillDefense = 0;
; 1979 : 					gObjGetValueOfBuffIndex( lpTargetObj, BUFFTYPE_MELEE_DEFENSE_INC, &iWizardSkillDefense );
; 1980 : 					int decattackdamage = AttackDamage * iWizardSkillDefense / 100;
; 1981 : 					AttackDamage -= decattackdamage;
; 1982 : 					ManaChange = TRUE;
; 1983 : 				}
; 1984 : 			}
; 1985 : #endif	// ADD_MASTER_LEVEL_SKILL_SYSTEM_ACTIVE_20080107
; 1986 : #else
; 1987 : #ifdef NEW_FORSKYLAND2
; 1988 : 			if( lpTargetObj->m_WizardSkillDefense && AttackDamage > 0 )

  00ea0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00ea3	83 b8 0c 1a 00
	00 00		 cmp	 DWORD PTR [eax+6668], 0
  00eaa	74 7f		 je	 SHORT $LN119@Attack
  00eac	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  00eb0	7e 79		 jle	 SHORT $LN119@Attack

; 1989 : 			{	// 법사 소울바리어(데미지를 마나로 흡수 시킨다)
; 1990 : 				int replacemana = (WORD)lpTargetObj->Mana*2/100;		// 마나 2%감소

  00eb2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00eb5	f3 0f 2c 88 d0
	00 00 00	 cvttss2si ecx, DWORD PTR [eax+208]
  00ebd	0f b7 c1	 movzx	 eax, cx
  00ec0	d1 e0		 shl	 eax, 1
  00ec2	99		 cdq
  00ec3	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00ec8	f7 f9		 idiv	 ecx
  00eca	89 45 8c	 mov	 DWORD PTR _replacemana$4[ebp], eax

; 1991 : 				if( lpTargetObj->Mana > replacemana )

  00ecd	f3 0f 2a 45 8c	 cvtsi2ss xmm0, DWORD PTR _replacemana$4[ebp]
  00ed2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00ed5	f3 0f 10 88 d0
	00 00 00	 movss	 xmm1, DWORD PTR [eax+208]
  00edd	0f 2f c8	 comiss	 xmm1, xmm0
  00ee0	76 49		 jbe	 SHORT $LN119@Attack

; 1992 : 				{	// 사용가능한 마나가 있어야 된다
; 1993 : 					lpTargetObj->Mana -= replacemana;				// 데미지를 마나로

  00ee2	f3 0f 2a 45 8c	 cvtsi2ss xmm0, DWORD PTR _replacemana$4[ebp]
  00ee7	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00eea	f3 0f 10 88 d0
	00 00 00	 movss	 xmm1, DWORD PTR [eax+208]
  00ef2	f3 0f 5c c8	 subss	 xmm1, xmm0
  00ef6	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00ef9	f3 0f 11 89 d0
	00 00 00	 movss	 DWORD PTR [ecx+208], xmm1

; 1994 : 						int decattackdamage = AttackDamage*lpTargetObj->m_WizardSkillDefense/100;	// 데미지 감소

  00f01	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00f04	8b 4d 1c	 mov	 ecx, DWORD PTR _AttackDamage$[ebp]
  00f07	0f af 88 0c 1a
	00 00		 imul	 ecx, DWORD PTR [eax+6668]
  00f0e	8b c1		 mov	 eax, ecx
  00f10	99		 cdq
  00f11	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00f16	f7 f9		 idiv	 ecx
  00f18	89 45 88	 mov	 DWORD PTR _decattackdamage$3[ebp], eax

; 1995 : 
; 1996 : 					AttackDamage -= decattackdamage;

  00f1b	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  00f1e	2b 45 88	 sub	 eax, DWORD PTR _decattackdamage$3[ebp]
  00f21	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1997 : 					ManaChange = TRUE;

  00f24	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _ManaChange$[ebp], 1
$LN119@Attack:

; 1998 : 				}
; 1999 : 			}
; 2000 : #endif
; 2001 : #endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2002 : 			
; 2003 : 			//---------------------------------------------------------------------------------
; 2004 : 			//	
; 2005 : 			//	[][][] 세트 옵션 데미지 증가 적용
; 2006 : 			//
; 2007 : 			//---------------------------------------------------------------------------------
; 2008 : 			
; 2009 : 			AttackDamage += lpObj->SetOpAddDamage;			// 세트옵션 데미지증가

  00f2b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f2e	0f bf 88 38 0f
	00 00		 movsx	 ecx, WORD PTR [eax+3896]
  00f35	03 4d 1c	 add	 ecx, DWORD PTR _AttackDamage$[ebp]
  00f38	89 4d 1c	 mov	 DWORD PTR _AttackDamage$[ebp], ecx

; 2010 : 
; 2011 : #ifdef ADD_380ITEM_NEWOPTION_20060711
; 2012 : 			// 380 아이템 추가 옵션 : 대인 데미지 증가 +%d
; 2013 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2014 : 			{
; 2015 : 				AttackDamage +=lpObj->m_ItemOptionExFor380.OpAddDamage;
; 2016 : 			}
; 2017 : #endif // ADD_380ITEM_NEWOPTION_20060711
; 2018 : 			
; 2019 : 			//NEW BALANCE DEVGAMESX
; 2020 : 			gBalanceSystem.Main(lpObj, lpTargetObj, AttackDamage);

  00f3b	8d 45 1c	 lea	 eax, DWORD PTR _AttackDamage$[ebp]
  00f3e	50		 push	 eax
  00f3f	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  00f42	51		 push	 ecx
  00f43	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00f46	52		 push	 edx
  00f47	b9 00 00 00 00	 mov	 ecx, OFFSET ?gBalanceSystem@@3VcBalanceSystem@@A ; gBalanceSystem
  00f4c	e8 00 00 00 00	 call	 ?Main@cBalanceSystem@@QAEXPAVOBJECTSTRUCT@@0AAH@Z ; cBalanceSystem::Main

; 2021 : 
; 2022 : 			//---------------------------------------------------------------------------------
; 2023 : 			//	
; 2024 : 			//	[][][] 카오스 캐슬 데미지 적용
; 2025 : 			//
; 2026 : 			//---------------------------------------------------------------------------------
; 2027 : 
; 2028 : #ifdef CHAOSCASTLE_SYSTEM_20040408		// 카오스 캐슬 안에서 사용자 끼리 공격 시 데미지 절반
; 2029 : #ifndef WORLD_TOURNAMENT_EVENT_SETTING			
; 2030 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )

  00f51	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f54	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00f58	83 f9 01	 cmp	 ecx, 1
  00f5b	0f 85 c9 00 00
	00		 jne	 $LN121@Attack
  00f61	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00f64	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  00f68	83 f9 01	 cmp	 ecx, 1
  00f6b	0f 85 b9 00 00
	00		 jne	 $LN121@Attack

; 2031 : 			{
; 2032 : 				if (CHECK_CHAOSCASTLE(lpObj->MapNumber) && CHECK_CHAOSCASTLE(lpTargetObj->MapNumber)) {

  00f71	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f74	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  00f7b	83 f9 12	 cmp	 ecx, 18			; 00000012H
  00f7e	7d 0c		 jge	 SHORT $LN178@Attack
  00f80	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv793[ebp], 0
  00f8a	eb 31		 jmp	 SHORT $LN179@Attack
$LN178@Attack:
  00f8c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00f8f	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  00f96	83 f8 17	 cmp	 eax, 23			; 00000017H
  00f99	7e 0c		 jle	 SHORT $LN176@Attack
  00f9b	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv792[ebp], 0
  00fa5	eb 0a		 jmp	 SHORT $LN177@Attack
$LN176@Attack:
  00fa7	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv792[ebp], 1
$LN177@Attack:
  00fb1	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv792[ebp]
  00fb7	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv793[ebp], ecx
$LN179@Attack:
  00fbd	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv793[ebp], 0
  00fc4	74 64		 je	 SHORT $LN121@Attack
  00fc6	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00fc9	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  00fd0	83 f9 12	 cmp	 ecx, 18			; 00000012H
  00fd3	7d 0c		 jge	 SHORT $LN182@Attack
  00fd5	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv802[ebp], 0
  00fdf	eb 31		 jmp	 SHORT $LN183@Attack
$LN182@Attack:
  00fe1	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  00fe4	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  00feb	83 f8 17	 cmp	 eax, 23			; 00000017H
  00fee	7e 0c		 jle	 SHORT $LN180@Attack
  00ff0	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv801[ebp], 0
  00ffa	eb 0a		 jmp	 SHORT $LN181@Attack
$LN180@Attack:
  00ffc	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv801[ebp], 1
$LN181@Attack:
  01006	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv801[ebp]
  0100c	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv802[ebp], ecx
$LN183@Attack:
  01012	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv802[ebp], 0
  01019	74 0f		 je	 SHORT $LN121@Attack

; 2033 : 					AttackDamage = AttackDamage * 50 / 100;

  0101b	6b 45 1c 32	 imul	 eax, DWORD PTR _AttackDamage$[ebp], 50
  0101f	99		 cdq
  01020	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01025	f7 f9		 idiv	 ecx
  01027	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN121@Attack:

; 2034 : 				}
; 2035 : 			}
; 2036 : #endif
; 2037 : #endif
; 2038 : 			
; 2039 : 			//---------------------------------------------------------------------------------
; 2040 : 			//	
; 2041 : 			//	[][][] 공성전 데미지 적용
; 2042 : 			//
; 2043 : 			//---------------------------------------------------------------------------------
; 2044 : 
; 2045 : #ifdef CASTLE_MAIN_SCHEDULER_20041111	// 공성전 중에 공성맵 안에서는 사용자 끼리 공격 시 데미지 같은편 80% 감소, 다른편 60% 감소
; 2046 : 			if (g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE) {
; 2047 : 				if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2048 : 				{
; 2049 : 					if (lpObj->MapNumber == MAP_INDEX_CASTLESIEGE && lpTargetObj->MapNumber == MAP_INDEX_CASTLESIEGE) {
; 2050 : 						if (lpObj->m_btCsJoinSide == lpTargetObj->m_btCsJoinSide) {
; 2051 : 							AttackDamage = AttackDamage * 20 / 100;
; 2052 : 						}
; 2053 : 						else {
; 2054 : 							AttackDamage = AttackDamage * 40 / 100;
; 2055 : 						}
; 2056 : 					}
; 2057 : 				}
; 2058 : 			}
; 2059 : #endif
; 2060 : 
; 2061 : #ifdef ADD_NEW_ITEM_FOR_CASTLE_01_20041116 // 축복의 물약 사용 효과!
; 2062 : 			if( lpObj->Type == OBJTYPE_CHARACTER 
; 2063 : 				&& lpTargetObj->Type == OBJTYPE_MONSTER )
; 2064 : 			{
; 2065 : 				// 수호 석상 때릴 때
; 2066 : 				if( lpTargetObj->Class == 283 )
; 2067 : 				{
; 2068 : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2069 : 					if( gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_BLESS_POTION ) == true )
; 2070 : 					{
; 2071 : 						AttackDamage += ( AttackDamage * ( 20 / 100 ) );
; 2072 : 					}
; 2073 : 					else if( gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_SOUL_POTION ) == true )
; 2074 : 					{
; 2075 : 						AttackDamage = AttackDamage;
; 2076 : 					}
; 2077 : 	#else
; 2078 : 					if( lpObj->m_iPotionBlessTime > 0 )
; 2079 : 					{
; 2080 : 						// 추가 내구력 저하 없음.
; 2081 : 						AttackDamage = AttackDamage + AttackDamage * 20 / 100;
; 2082 : 					}
; 2083 : 					else if( lpObj->m_iPotionSoulTime > 0 )
; 2084 : 					{
; 2085 : 						AttackDamage = AttackDamage;
; 2086 : 					}
; 2087 : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2088 : 					else
; 2089 : 					{
; 2090 : 						if( lpObj->m_iAccumulatedDamage > 100 )
; 2091 : 						{
; 2092 : 							gObjWeaponDurDownInCastle( lpObj, lpTargetObj, 1 );	
; 2093 : 							lpObj->m_iAccumulatedDamage = 0;
; 2094 : 						}
; 2095 : 						else
; 2096 : 						{
; 2097 : 							lpObj->m_iAccumulatedDamage += AttackDamage;
; 2098 : 						}
; 2099 : 
; 2100 : 						// 데미지 20%만 적용 -> 5% 변경(20050303)
; 2101 : 						AttackDamage = AttackDamage * 5 / 100;
; 2102 : 
; 2103 : 					}
; 2104 : 
; 2105 : 				}
; 2106 : 
; 2107 : 				// 성문 때릴 때
; 2108 : 				if( lpTargetObj->Class == 277 )
; 2109 : 				{
; 2110 : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2111 : 					if( gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_BLESS_POTION ) == true )
; 2112 : 					{
; 2113 : 						AttackDamage += ( AttackDamage * ( 20 / 100 ) );
; 2114 : 					}
; 2115 : 					else if( gObjCheckUsedBuffEffect( lpObj, BUFFTYPE_SOUL_POTION ) == true )
; 2116 : 					{
; 2117 : 						AttackDamage = AttackDamage;
; 2118 : 					}
; 2119 : 	#else
; 2120 : 					if( lpObj->m_iPotionBlessTime > 0 )
; 2121 : 					{
; 2122 : 						// 추가 내구력 저하 없음.
; 2123 : 						AttackDamage = AttackDamage + AttackDamage * 20 / 100;
; 2124 : 					}
; 2125 : 					else if( lpObj->m_iPotionSoulTime > 0 )
; 2126 : 					{
; 2127 : 						AttackDamage = AttackDamage;
; 2128 : 					}
; 2129 : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2130 : 					else
; 2131 : 					{
; 2132 : 						if( lpObj->m_iAccumulatedDamage > 100 )
; 2133 : 						{
; 2134 : 							gObjWeaponDurDownInCastle( lpObj, lpTargetObj, 1 );	
; 2135 : 							lpObj->m_iAccumulatedDamage = 0;
; 2136 : 						}
; 2137 : 						else
; 2138 : 						{
; 2139 : 							lpObj->m_iAccumulatedDamage += AttackDamage;
; 2140 : 						}
; 2141 : 
; 2142 : 						// 데미지 20%만 적용 -> 5% 변경(20050303)
; 2143 : 						AttackDamage = AttackDamage * 5 / 100;
; 2144 : 
; 2145 : 					}
; 2146 : 				}
; 2147 : 
; 2148 : 			}
; 2149 : #endif
; 2150 : 			
; 2151 : 
; 2152 : 			//---------------------------------------------------------------------------------
; 2153 : 			//	
; 2154 : 			//	[][][] 펜릴 최종 데미지 증가, 흡수 적용
; 2155 : 			//
; 2156 : 			//---------------------------------------------------------------------------------
; 2157 : 
; 2158 : #ifdef ADD_ITEM_FENRIR_01_20051110
; 2159 : 			// Main Attack 함수
; 2160 : 			
; 2161 : 			// 펜릴의 최종 데미지 증가 적용
; 2162 : 			if( gObjFenrir(lpObj) )
; 2163 : 			{
; 2164 : 				int iIncPercent = lpObj->pInventory[EQUIPMENT_HELPER].IsFenrirIncLastAttackDamage();
; 2165 : 
; 2166 : 				if( iIncPercent > 0 )
; 2167 : 				{
; 2168 : 					AttackDamage += AttackDamage * iIncPercent / 100;
; 2169 : 				}
; 2170 : 			}
; 2171 : 			
; 2172 : 			// 펜릴의 최종 데미지 감소 적용
; 2173 : 			if( gObjFenrir(lpTargetObj) )
; 2174 : 			{
; 2175 : 				int iDecPercent = lpTargetObj->pInventory[EQUIPMENT_HELPER].IsFenrirDecLastAttackDamage();
; 2176 : 
; 2177 : 				if( iDecPercent > 0 )
; 2178 : 				{
; 2179 : 					AttackDamage -= AttackDamage * iDecPercent / 100;
; 2180 : 				}
; 2181 : 			}
; 2182 : 			
; 2183 : 			if( AttackDamage < 0 )
; 2184 : 				AttackDamage = 0;
; 2185 : 
; 2186 : 			// 펜릴 플라즈마스톰에 의한 내구력 감소 적용 - 공성 시 같은 팀은 적용 되지 않는다.
; 2187 : 			if( 
; 2188 : 				skill == AT_SKILL_FENRIR_ATTACK 
; 2189 : 				&& lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER
; 2190 : 				&& AttackDamage > 0  
; 2191 : #ifdef CASTLE_MAIN_SCHEDULER_20041111
; 2192 : 	#ifdef MODIFY_CASTLEMAP_FENRIR_DURATION_20060522
; 2193 : 				// 공성/수성 측일때만 해당함. 아무 측도 아닌 경우, 내구도 감소를 할 수 있음.
; 2194 : 				&& ( lpObj->m_btCsJoinSide == 0 || (lpObj->m_btCsJoinSide != lpTargetObj->m_btCsJoinSide) )
; 2195 : 	#else
; 2196 : 				&& lpObj->m_btCsJoinSide != lpTargetObj->m_btCsJoinSide
; 2197 : 	#endif // MODIFY_CASTLEMAP_FENRIR_DURATION_20060522
; 2198 : #endif
; 2199 : 			  ) 
; 2200 : 			{
; 2201 : 				int iEquipmentPos = rand()%(EQUIPMENT_WING-EQUIPMENT_HELM) + EQUIPMENT_HELM;
; 2202 : 
; 2203 : 				CItem	*lpEquipment = &lpTargetObj->pInventory[iEquipmentPos];
; 2204 : 				
; 2205 : 				if( lpEquipment != NULL && lpEquipment->IsItem() )
; 2206 : 				{
; 2207 : 					
; 2208 : #ifdef MASTER_LEVEL_SKILL_SYSTEM_20071122	// 패시브 1차 - 내구감소1 : 플라즈마스톰에 공격받은 경우 내구 감소
; 2209 : 					int iDurDecValue = 50;
; 2210 : 					if( lpTargetObj->m_MPSkillOpt.iMpsDownDur1 > 0 )
; 2211 : 					{
; 2212 : 						iDurDecValue += ( lpTargetObj->m_MPSkillOpt.btMpsDownDur1Level  * 7 );
; 2213 : 					}
; 2214 : 					
; 2215 : 					if( iDurDecValue < 0 )
; 2216 : 						iDurDecValue = 1;
; 2217 : 
; 2218 : 					int	iDurEquipment	= lpEquipment->m_Durability * iDurDecValue / 100;
; 2219 : #else
; 2220 : 					int	iDurEquipment	= lpEquipment->m_Durability * 50 / 100;
; 2221 : #endif
; 2222 : 							
; 2223 : #if TESTSERVER == 1
; 2224 : 					MsgOutput( lpObj->m_Index, "[펜릴스킬] (%s) 의 %s 내구력 (%d->%d)", 
; 2225 : 						lpEquipment->GetName(), lpEquipment->m_Durability, iDurEquipment);
; 2226 : 					
; 2227 : 					MsgOutput( lpTargetObj->m_Index, "[펜릴스킬] %s 내구력 (%d->%d)", 
; 2228 : 						lpEquipment->GetName(), lpEquipment->m_Durability, iDurEquipment);
; 2229 : #endif
; 2230 : #ifdef MODIFY_NOT_EFFECT_FENRIRSKILL_IF_CHARM_PROTECTITEM_20090924
; 2231 : 					// 아이템 보호 부적 사용시 아이템 내구도 감소 안함
; 2232 : 					for( int iBuffIndex = 0 ; iBuffIndex < lpTargetObj->m_BuffEffectCount ; iBuffIndex++ )
; 2233 : 					{						
; 2234 : 						if( lpTargetObj->m_BuffEffectList[iBuffIndex].BuffIndex == BUFFTYPE_CHARM_PROTECTITEM )
; 2235 : 						{
; 2236 : 							iDurEquipment = lpEquipment->m_Durability;
; 2237 : 							break;
; 2238 : 						}
; 2239 : 					}
; 2240 : #endif // MODIFY_NOT_EFFECT_FENRIRSKILL_IF_CHARM_PROTECTITEM_20090924				
; 2241 : 					
; 2242 : 					lpEquipment->m_Durability = iDurEquipment;
; 2243 : 					
; 2244 : 					if( lpEquipment->m_Durability < 0 )
; 2245 : 						lpEquipment->m_Durability = 0;
; 2246 : 					
; 2247 : 					
; 2248 : 					GCItemDurSend(lpTargetObj->m_Index, iEquipmentPos, lpEquipment->m_Durability, 0);
; 2249 : 				}
; 2250 : 				
; 2251 : 			}
; 2252 : #endif
; 2253 : 			
; 2254 : 
; 2255 : 
; 2256 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2257 : 			//---------------------------------------------------------------------------------
; 2258 : 			//	
; 2259 : 			//	[][][] 공격 받는 Target의 SD와 HP를 감소
; 2260 : 			//
; 2261 : 			//---------------------------------------------------------------------------------
; 2262 : 
; 2263 : 			// CODEREVIEW_SHIELD : 묶기!!
; 2264 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2265 : 			{
; 2266 : 				// CODEREVIEW_SHIELD : 연산자 사용 형식 변경
; 2267 : 				// CODEREVIEW_SHIELD : 쉴드 데미지 차이 구하는 방법 변경
; 2268 : 				iTempShieldDamage		= GetShieldDamage( lpObj, lpTargetObj, AttackDamage );
; 2269 : 				lpTargetObj->iShield	= lpTargetObj->iShield - iTempShieldDamage;
; 2270 : 				lpTargetObj->Life		= lpTargetObj->Life - (AttackDamage - iTempShieldDamage);
; 2271 : 				iTotalShieldDamage		= iTotalShieldDamage + iTempShieldDamage;
; 2272 : 
; 2273 : 
; 2274 : 
; 2275 : 				if( lpTargetObj->Life < 0 )
; 2276 : 				{
; 2277 : 					lpTargetObj->Life = 0;
; 2278 : 				}
; 2279 : 			}
; 2280 : 			else
; 2281 : 			{
; 2282 : 				lpTargetObj->Life = lpTargetObj->Life - AttackDamage;
; 2283 : 
; 2284 : 				if( lpTargetObj->Life < 0 )
; 2285 : 					lpTargetObj->Life = 0;
; 2286 : 			}
; 2287 : #else
; 2288 : 			//---------------------------------------------------------------------------------
; 2289 : 			//	
; 2290 : 			//	[][][] 공격 받는 Target 에게 AttackDamage 적용 
; 2291 : 			//
; 2292 : 			//---------------------------------------------------------------------------------
; 2293 : 
; 2294 : 			lpTargetObj->Life -= AttackDamage;

  0102a	f3 0f 2a 45 1c	 cvtsi2ss xmm0, DWORD PTR _AttackDamage$[ebp]
  0102f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01032	f3 0f 10 88 bc
	00 00 00	 movss	 xmm1, DWORD PTR [eax+188]
  0103a	f3 0f 5c c8	 subss	 xmm1, xmm0
  0103e	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01041	f3 0f 11 89 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm1

; 2295 : 
; 2296 : 			if( lpTargetObj->Life < 0 )

  01049	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0104c	0f 57 c0	 xorps	 xmm0, xmm0
  0104f	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  01056	76 0e		 jbe	 SHORT $LN122@Attack

; 2297 : 				lpTargetObj->Life = 0;

  01058	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0105b	0f 57 c0	 xorps	 xmm0, xmm0
  0105e	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0
$LN122@Attack:

; 2298 : #endif // ADD_SHIELD_POINT_01_20060403		
; 2299 : 
; 2300 : 		} // if( lpTargetObj->Live )
; 2301 : 
; 2302 : 
; 2303 : 	} // if( AttackDamage == 0 )

  01066	eb 5d		 jmp	 SHORT $LN123@Attack
$LN55@Attack:

; 2304 : 	else 
; 2305 : 	{
; 2306 : #ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 라이트닝 오브의 스플레쉬데미지에 대한 MissCheck
; 2307 : 		if( skill == AT_SKILL_LIGHTNINGORB )
; 2308 : 		{
; 2309 : 			if( g_ShieldSystemOn == TRUE )
; 2310 : 			{
; 2311 : 				if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2312 : 				{
; 2313 : 					if( !MissCheckPvP( lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss ) )
; 2314 : 					{
; 2315 : 						return FALSE;
; 2316 : 					}
; 2317 : 				}
; 2318 : 				else
; 2319 : 				{
; 2320 : 					if( !MissCheck(lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss) )
; 2321 : 						return FALSE;
; 2322 : 				}
; 2323 : 			}
; 2324 : 			else
; 2325 : 			{
; 2326 : 				if( !MissCheck(lpObj, lpTargetObj, skill, skillSuccess, magicsend, bAllMiss) )
; 2327 : 					return FALSE;
; 2328 : 			}			
; 2329 : 		}
; 2330 : #endif	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 2331 : 
; 2332 : #ifndef MODIFY_CC_PVP_COMBO_DAMAGE_LOWER_50_20040917		// 기존 카오스캐슬 PVP 데미지 감소
; 2333 : #ifdef CHAOSCASTLE_SYSTEM_20040408		// 카오스 캐슬 안에서 사용자 끼리 공격 시 데미지 절반
; 2334 : 	#ifndef WORLD_TOURNAMENT_EVENT_SETTING
; 2335 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2336 : 		if( g_ShieldSystemOn == FALSE )
; 2337 : #endif // ADD_SHIELD_POINT_01_20060403
; 2338 : 		{
; 2339 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2340 : 			{
; 2341 : 				if (CHECK_CHAOSCASTLE(lpObj->MapNumber) && CHECK_CHAOSCASTLE(lpTargetObj->MapNumber)) {
; 2342 : 					AttackDamage = AttackDamage * 50 / 100;
; 2343 : 				}
; 2344 : 			}
; 2345 : 		}
; 2346 : 	#endif
; 2347 : #endif
; 2348 : #endif		
; 2349 : 
; 2350 : #ifdef CASTLE_MAIN_SCHEDULER_20041111	// 공성전 중에 공성맵 안에서는 사용자 끼리 공격 시 데미지 같은편 80% 감소, 다른편 60% 감소
; 2351 : 		if (g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE) {
; 2352 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2353 : 			{
; 2354 : 				if (lpObj->MapNumber == MAP_INDEX_CASTLESIEGE && lpTargetObj->MapNumber == MAP_INDEX_CASTLESIEGE) {
; 2355 : 					if (lpObj->m_btCsJoinSide == lpTargetObj->m_btCsJoinSide) {
; 2356 : 						AttackDamage = AttackDamage * 20 / 100;
; 2357 : 					}
; 2358 : 					else 
; 2359 : 					{
; 2360 : 		#ifdef ADD_SHIELD_POINT_01_20060403
; 2361 : 						if( g_ShieldSystemOn == FALSE )
; 2362 : 		#endif // ADD_SHIELD_POINT_01_20060403
; 2363 : 						{
; 2364 : 							AttackDamage = AttackDamage * 40 / 100;
; 2365 : 						}
; 2366 : 					}
; 2367 : 				}
; 2368 : 			}
; 2369 : 		}
; 2370 : #endif
; 2371 : 
; 2372 : #ifdef ADD_SKILL_DARKLOAD_FIRESCREAM_20060601	// 파이어스크림 폭발은 데미지반사 설정을 하지 않는다.
; 2373 : #ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 라이트닝오브 스플레쉬 데미지도 데미지반사 제외
; 2374 : 		if( skill != AT_SKILL_EXPLOSION 
; 2375 : 			&& skill != AT_SKILL_LIGHTNINGORB)
; 2376 : #else
; 2377 : 		if( skill != AT_SKILL_EXPLOSION )
; 2378 : #endif	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 2379 : 		{
; 2380 : #endif
; 2381 : 
; 2382 : 		//NEW ADD BALANCE SYSTEM
; 2383 : 		gBalanceSystem.Main(lpObj, lpTargetObj, AttackDamage);

  01068	8d 45 1c	 lea	 eax, DWORD PTR _AttackDamage$[ebp]
  0106b	50		 push	 eax
  0106c	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0106f	51		 push	 ecx
  01070	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01073	52		 push	 edx
  01074	b9 00 00 00 00	 mov	 ecx, OFFSET ?gBalanceSystem@@3VcBalanceSystem@@A ; gBalanceSystem
  01079	e8 00 00 00 00	 call	 ?Main@cBalanceSystem@@QAEXPAVOBJECTSTRUCT@@0AAH@Z ; cBalanceSystem::Main

; 2384 : 
; 2385 : 		bDamageReflect = TRUE;

  0107e	c7 45 c0 01 00
	00 00		 mov	 DWORD PTR _bDamageReflect$[ebp], 1

; 2386 : 
; 2387 : #ifdef ADD_SKILL_WITH_COMBO
; 2388 : 		MsgDamage = DT_MIRROR;		// 반사 공격

  01085	c6 45 ef 04	 mov	 BYTE PTR _MsgDamage$[ebp], 4

; 2389 : #else
; 2390 : 		MsgDamage = 0x20;
; 2391 : #endif
; 2392 : 
; 2393 : #ifdef ADD_SKILL_DARKLOAD_FIRESCREAM_20060601	
; 2394 : 		}
; 2395 : #endif
; 2396 : 		
; 2397 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2398 : 		if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2399 : 		{
; 2400 : 			// CODEREVIEW_SHIELD : 쉴드 데미지 차이 구하는 방법 변경
; 2401 : 			iTempShieldDamage		= GetShieldDamage( lpObj, lpTargetObj, AttackDamage );
; 2402 : 			lpTargetObj->iShield	= lpTargetObj->iShield - iTempShieldDamage;
; 2403 : 			lpTargetObj->Life		= lpTargetObj->Life - (AttackDamage-iTempShieldDamage);
; 2404 : 			iTotalShieldDamage		= iTotalShieldDamage + iTempShieldDamage;
; 2405 : 
; 2406 : 			if( lpTargetObj->Life < 0 )
; 2407 : 			{
; 2408 : 				lpTargetObj->Life = 0;
; 2409 : 			}
; 2410 : 		}
; 2411 : 		else
; 2412 : 		{
; 2413 : 			lpTargetObj->Life -= AttackDamage;
; 2414 : 			if( lpTargetObj->Life < 0 )
; 2415 : 				lpTargetObj->Life = 0;
; 2416 : 		}
; 2417 : #else
; 2418 : 		lpTargetObj->Life -= AttackDamage;

  01089	f3 0f 2a 45 1c	 cvtsi2ss xmm0, DWORD PTR _AttackDamage$[ebp]
  0108e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01091	f3 0f 10 88 bc
	00 00 00	 movss	 xmm1, DWORD PTR [eax+188]
  01099	f3 0f 5c c8	 subss	 xmm1, xmm0
  0109d	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  010a0	f3 0f 11 89 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm1

; 2419 : 		if( lpTargetObj->Life < 0 )

  010a8	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  010ab	0f 57 c0	 xorps	 xmm0, xmm0
  010ae	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  010b5	76 0e		 jbe	 SHORT $LN123@Attack

; 2420 : 			lpTargetObj->Life = 0;

  010b7	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  010ba	0f 57 c0	 xorps	 xmm0, xmm0
  010bd	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0
$LN123@Attack:

; 2421 : #endif			
; 2422 : 	}
; 2423 : 	//---------------------------------------------------------------------------------
; 2424 : 	//
; 2425 : 	//	if( AttackDamage == 0 )
; 2426 : 	//	{
; 2427 : 	//
; 2428 : 	// 	}
; 2429 : 	//	else
; 2430 : 	//	{
; 2431 : 	//
; 2432 : 	//	}
; 2433 : 	//
; 2434 : 	//
; 2435 : 	//
; 2436 : 	//
; 2437 : 	//---------------------------------------------------------------------------------
; 2438 : 
; 2439 : 
; 2440 : 	
; 2441 : 
; 2442 : 
; 2443 : 	//---------------------------------------------------------------------------------
; 2444 : 	//
; 2445 : 	//  [] Target 이 몬스터인 경우 공격 메세지 Q에 공격 당한 메세지 추가
; 2446 : 	//
; 2447 : 	//
; 2448 : 	//---------------------------------------------------------------------------------
; 2449 : 	
; 2450 : 	// 당하는게 몬스터일때..
; 2451 : 	if( lpTargetObj->Type == OBJTYPE_MONSTER )

  010c5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  010c8	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  010cc	83 f9 02	 cmp	 ecx, 2
  010cf	75 28		 jne	 SHORT $LN124@Attack

; 2452 : 	{
; 2453 : 		// 공격당했다..
; 2454 : 		gObjAddMsgSendDelay(lpTargetObj, 0, lpObj->m_Index, 100);

  010d1	6a 00		 push	 0
  010d3	6a 64		 push	 100			; 00000064H
  010d5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  010d8	8b 08		 mov	 ecx, DWORD PTR [eax]
  010da	51		 push	 ecx
  010db	6a 00		 push	 0
  010dd	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  010e0	52		 push	 edx
  010e1	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  010e6	83 c4 14	 add	 esp, 20			; 00000014H

; 2455 : 		
; 2456 : #ifdef FOR_BLOODCASTLE
; 2457 : 		lpTargetObj->LastAttackerID = lpObj->m_Index;	// 마지막 공격한 사람의 인덱스를 저장

  010e9	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  010ec	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  010ef	66 8b 11	 mov	 dx, WORD PTR [ecx]
  010f2	66 89 90 b2 02
	00 00		 mov	 WORD PTR [eax+690], dx
$LN124@Attack:

; 2458 : #endif
; 2459 : 		
; 2460 : #ifdef ADD_NEW_MONSTER_SYSTEM_02_20050725
; 2461 : 		// 여기서 Agro를 증가 시켜준다.
; 2462 : 		if( lpTargetObj->m_iCurrentAI )
; 2463 : 		{
; 2464 : 			lpTargetObj->m_Agro.IncAgro(lpObj->m_Index, AttackDamage/50);
; 2465 : 		}
; 2466 : #endif
; 2467 : 		
; 2468 : 	}
; 2469 : 	
; 2470 : 	//---------------------------------------------------------------------------------
; 2471 : 	//
; 2472 : 	//  [] 정당 방위 설정, 내구도, 아이스애로우(석화) 효과 처리
; 2473 : 	//
; 2474 : 	//
; 2475 : 	//---------------------------------------------------------------------------------
; 2476 : 	
; 2477 : 	BOOL selfdefense = FALSE;

  010f9	c7 45 84 00 00
	00 00		 mov	 DWORD PTR _selfdefense$[ebp], 0

; 2478 : 
; 2479 : 	lpCallObj = lpTargetObj;

  01100	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01103	89 45 f4	 mov	 DWORD PTR _lpCallObj$[ebp], eax

; 2480 : 
; 2481 : 	if( lpTargetObj->Type == OBJTYPE_MONSTER )

  01106	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01109	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0110d	83 f9 02	 cmp	 ecx, 2
  01110	75 22		 jne	 SHORT $LN126@Attack

; 2482 : 	{
; 2483 : 		if( lpTargetObj->m_RecallMon >= 0 ) 

  01112	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01115	83 b8 a4 02 00
	00 00		 cmp	 DWORD PTR [eax+676], 0
  0111c	7c 16		 jl	 SHORT $LN126@Attack

; 2484 : 		{
; 2485 : 			lpCallObj = &gObj[lpTargetObj->m_RecallMon];

  0111e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01121	69 88 a4 02 00
	00 a0 1b 00 00	 imul	 ecx, DWORD PTR [eax+676], 7072
  0112b	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  01131	89 4d f4	 mov	 DWORD PTR _lpCallObj$[ebp], ecx
$LN126@Attack:

; 2486 : 		}
; 2487 : 	}
; 2488 : 
; 2489 : 	if( AttackDamage >= 1 )

  01134	83 7d 1c 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  01138	0f 8c af 01 00
	00		 jl	 $LN139@Attack

; 2490 : 	{	
; 2491 : 		// 플레이어들끼리..
; 2492 : 		// 공격을 하여 성공하면 정당방위를 설정한다.
; 2493 : 		if( lpObj->Type	== OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )

  0113e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01141	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  01145	83 f9 01	 cmp	 ecx, 1
  01148	0f 85 ec 00 00
	00		 jne	 $LN128@Attack
  0114e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01151	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  01155	83 f9 01	 cmp	 ecx, 1
  01158	0f 85 dc 00 00
	00		 jne	 $LN128@Attack

; 2494 : 		{			
; 2495 : #ifdef DUEL_SYSTEM_20031028
; 2496 : 			if (gObjDuelCheck(lpObj, lpTargetObj)) {	// 서로 결투 중이라면 정당방위 성립않됨

  0115e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01161	50		 push	 eax
  01162	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01165	51		 push	 ecx
  01166	e8 00 00 00 00	 call	 ?gObjDuelCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjDuelCheck
  0116b	83 c4 08	 add	 esp, 8
  0116e	85 c0		 test	 eax, eax
  01170	74 0c		 je	 SHORT $LN130@Attack

; 2497 : 				selfdefense = FALSE;

  01172	c7 45 84 00 00
	00 00		 mov	 DWORD PTR _selfdefense$[ebp], 0

; 2498 : 			}

  01179	e9 ba 00 00 00	 jmp	 $LN133@Attack
$LN130@Attack:

; 2499 : 
; 2500 : #ifdef ADD_NEWPVP_PKFIELD
; 2501 : 			else if (g_NewPVP.IsVulcanusMap(lpObj->MapNumber) && g_NewPVP.IsVulcanusMap(lpTargetObj->MapNumber)) {
; 2502 : 				selfdefense = FALSE;
; 2503 : 			}
; 2504 : #endif // ADD_NEWPVP_PKFIELD
; 2505 : 
; 2506 : #ifdef CHAOSCASTLE_SYSTEM_20040408						// 카오스 캐슬 안에서는 정당방위가 성립되지 않는다.
; 2507 : 			else if (CHECK_CHAOSCASTLE(lpObj->MapNumber) || CHECK_CHAOSCASTLE(lpTargetObj->MapNumber)) {

  0117e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01181	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  01188	83 f9 12	 cmp	 ecx, 18			; 00000012H
  0118b	7d 0c		 jge	 SHORT $LN186@Attack
  0118d	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv861[ebp], 0
  01197	eb 31		 jmp	 SHORT $LN187@Attack
$LN186@Attack:
  01199	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0119c	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  011a3	83 f8 17	 cmp	 eax, 23			; 00000017H
  011a6	7e 0c		 jle	 SHORT $LN184@Attack
  011a8	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv860[ebp], 0
  011b2	eb 0a		 jmp	 SHORT $LN185@Attack
$LN184@Attack:
  011b4	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv860[ebp], 1
$LN185@Attack:
  011be	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv860[ebp]
  011c4	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv861[ebp], ecx
$LN187@Attack:
  011ca	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv861[ebp], 0
  011d1	75 55		 jne	 SHORT $LN134@Attack
  011d3	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  011d6	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  011dd	83 f9 12	 cmp	 ecx, 18			; 00000012H
  011e0	7d 0c		 jge	 SHORT $LN190@Attack
  011e2	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv870[ebp], 0
  011ec	eb 31		 jmp	 SHORT $LN191@Attack
$LN190@Attack:
  011ee	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  011f1	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  011f8	83 f8 17	 cmp	 eax, 23			; 00000017H
  011fb	7e 0c		 jle	 SHORT $LN188@Attack
  011fd	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv869[ebp], 0
  01207	eb 0a		 jmp	 SHORT $LN189@Attack
$LN188@Attack:
  01209	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv869[ebp], 1
$LN189@Attack:
  01213	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv869[ebp]
  01219	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv870[ebp], ecx
$LN191@Attack:
  0121f	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv870[ebp], 0
  01226	74 09		 je	 SHORT $LN132@Attack
$LN134@Attack:

; 2508 : 				selfdefense = FALSE;

  01228	c7 45 84 00 00
	00 00		 mov	 DWORD PTR _selfdefense$[ebp], 0

; 2509 : 			}

  0122f	eb 07		 jmp	 SHORT $LN133@Attack
$LN132@Attack:

; 2510 : #endif
; 2511 : 
; 2512 : #ifdef ADD_EVENT_MAP_ILLUSION_TEMPLE_20070328	// 환영 사원 안에서는 정당방위가 성립되지 않는다.
; 2513 : 			else if( CHECK_ILLUSION_TEMPLE(lpObj->MapNumber) || CHECK_ILLUSION_TEMPLE(lpTargetObj->MapNumber) )
; 2514 : 			{
; 2515 : 				selfdefense = FALSE;
; 2516 : 			}
; 2517 : #endif
; 2518 : 
; 2519 : 			else {
; 2520 : 				selfdefense = TRUE;

  01231	c7 45 84 01 00
	00 00		 mov	 DWORD PTR _selfdefense$[ebp], 1
$LN133@Attack:

; 2521 : 			}
; 2522 : #else
; 2523 : 			selfdefense = TRUE;
; 2524 : #endif
; 2525 : 			
; 2526 : #ifdef ADD_NEW_UNION_01_20041006
; 2527 : 			// 적대 길드 이면 정당 방위 설정이 되지 않는다.
; 2528 : 			// 아무때나 난입 가능. (결투 상태 일때도..)
; 2529 : 			if( gObjGetRelationShip( lpObj, lpTargetObj ) == G_RELATIONSHIP_RIVAL )
; 2530 : 			{
; 2531 : 				selfdefense = FALSE;
; 2532 : 			}
; 2533 : #endif
; 2534 : 
; 2535 : #ifdef CASTLE_MAIN_SCHEDULER_20041111					// 공성전 시 공성전 참여길드는 정당방위 성립않됨
; 2536 : 			if (g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE) 
; 2537 : 			{
; 2538 : 				if (lpObj->m_btCsJoinSide > CS_SIEGESIDE_NONE) 
; 2539 : 				{
; 2540 : 					selfdefense	= FALSE;
; 2541 : 				}
; 2542 : 			}
; 2543 : #endif
; 2544 : 		}

  01238	eb 2b		 jmp	 SHORT $LN136@Attack
$LN128@Attack:

; 2545 : 		else if( lpTargetObj->Type == OBJTYPE_MONSTER && lpObj->Type == OBJTYPE_CHARACTER)

  0123a	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0123d	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  01241	83 f9 02	 cmp	 ecx, 2
  01244	75 1f		 jne	 SHORT $LN136@Attack
  01246	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01249	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0124d	83 f9 01	 cmp	 ecx, 1
  01250	75 13		 jne	 SHORT $LN136@Attack

; 2546 : 		{
; 2547 : 			if( lpTargetObj->m_RecallMon >= 0 ) 

  01252	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01255	83 b8 a4 02 00
	00 00		 cmp	 DWORD PTR [eax+676], 0
  0125c	7c 07		 jl	 SHORT $LN136@Attack

; 2548 : 				selfdefense = TRUE;

  0125e	c7 45 84 01 00
	00 00		 mov	 DWORD PTR _selfdefense$[ebp], 1
$LN136@Attack:

; 2549 : 		}
; 2550 : 		if( lpTargetObj->Type == OBJTYPE_CHARACTER )

  01265	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01268	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0126c	83 f9 01	 cmp	 ecx, 1
  0126f	75 10		 jne	 SHORT $LN137@Attack

; 2551 : 		{	// 공격이 성공하면 내구도를 감소 시킨다			
; 2552 : 			gObjArmorRandomDurDown(lpTargetObj, lpObj);

  01271	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01274	50		 push	 eax
  01275	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01278	51		 push	 ecx
  01279	e8 00 00 00 00	 call	 ?gObjArmorRandomDurDown@@YAXPAVOBJECTSTRUCT@@0@Z ; gObjArmorRandomDurDown
  0127e	83 c4 08	 add	 esp, 8
$LN137@Attack:

; 2553 : 		}
; 2554 : 
; 2555 : #ifdef NEW_FORSKYLAND2						
; 2556 : 	#ifdef MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2557 : 		if( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_STONE ) == true )
; 2558 : 		{
; 2559 : 		#ifdef MODIFY_BUFFSYSTEM_BUGFIX_07_20080109
; 2560 : 			gObjChangeBuffValidTime( lpTargetObj, BUFFTYPE_STONE, -1 );
; 2561 : 			if( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_STONE ) == false )
; 2562 : 			{
; 2563 : 				GCMagicCancelSend(lpTargetObj, AT_SKILL_ELFHARDEN);
; 2564 : 			}
; 2565 : 		#else
; 2566 : 			gObjChangeBuffValidTime( lpTargetObj, BUFFTYPE_STONE, -1 );
; 2567 : 			GCMagicCancelSend(lpTargetObj, AT_SKILL_ELFHARDEN);
; 2568 : 		#endif // MODIFY_BUFFSYSTEM_BUGFIX_07_20080109
; 2569 : 		}
; 2570 : 
; 2571 : #ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 슬립에 걸려있으면 풀어준다
; 2572 : 		if( gObjCheckUsedBuffEffect( lpTargetObj, BUFFTYPE_SLEEP ) == true )
; 2573 : 		{
; 2574 : 			gObjRemoveBuffEffect(lpTargetObj, BUFFTYPE_SLEEP);
; 2575 : 		}
; 2576 : #endif
; 2577 : 
; 2578 : 	#else
; 2579 : 		if( lpTargetObj->m_SkillHarden != 0 )

  01281	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01284	83 b8 fc 19 00
	00 00		 cmp	 DWORD PTR [eax+6652], 0
  0128b	74 60		 je	 SHORT $LN139@Attack

; 2580 : 		{	// 공격을 당했을때 석화에 걸려 있으면, 공격을 풀어 준다
; 2581 : 
; 2582 : 			lpTargetObj->m_SkillHarden--;

  0128d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01290	8b 88 fc 19 00
	00		 mov	 ecx, DWORD PTR [eax+6652]
  01296	83 e9 01	 sub	 ecx, 1
  01299	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  0129c	89 8a fc 19 00
	00		 mov	 DWORD PTR [edx+6652], ecx

; 2583 : 
; 2584 : 			if( lpTargetObj->m_SkillHarden <= 0 )

  012a2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012a5	83 b8 fc 19 00
	00 00		 cmp	 DWORD PTR [eax+6652], 0
  012ac	7f 3f		 jg	 SHORT $LN139@Attack

; 2585 : 			{
; 2586 : 				lpTargetObj->m_SkillHardenTime = 0;

  012ae	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012b1	c7 80 00 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6656], 0

; 2587 : 				lpTargetObj->m_SkillHarden = 0;			 

  012bb	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012be	c7 80 fc 19 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6652], 0

; 2588 : 				lpTargetObj->m_ViewSkillState &= ~STATE_HARDEN;

  012c8	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012cb	0f b7 88 c0 01
	00 00		 movzx	 ecx, WORD PTR [eax+448]
  012d2	83 e1 df	 and	 ecx, -33		; ffffffdfH
  012d5	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  012d8	66 89 8a c0 01
	00 00		 mov	 WORD PTR [edx+448], cx

; 2589 : 				GCMagicCancelSend(lpTargetObj, AT_SKILL_ELFHARDEN);

  012df	6a 33		 push	 51			; 00000033H
  012e1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012e4	50		 push	 eax
  012e5	e8 00 00 00 00	 call	 ?GCMagicCancelSend@@YAXPAVOBJECTSTRUCT@@E@Z ; GCMagicCancelSend
  012ea	83 c4 08	 add	 esp, 8
$LN139@Attack:

; 2590 : 			}			
; 2591 : 		}
; 2592 : 	#endif // MODIFY_OLD_BUFF_EFFECT_SYSTEM_20071004
; 2593 : #endif
; 2594 : 	}
; 2595 : 	
; 2596 : 
; 2597 : #ifdef CHINA_GM_EVENT
; 2598 : 	if( lpTargetObj->Authority&AUTHORITY_EVENT_GM )
; 2599 : 	{
; 2600 : 		selfdefense = FALSE;
; 2601 : 	}
; 2602 : #endif
; 2603 : 
; 2604 : #ifdef MODIFY_CHN_GMEVENT_TO_TAIWAN_GM_EVENT_20070906
; 2605 : 	if( lpTargetObj->Authority&AUTHORITY_EVENT_GM )
; 2606 : 	{
; 2607 : 		selfdefense = FALSE;
; 2608 : 	}
; 2609 : #endif // MODIFY_CHN_GMEVENT_TO_TAIWAN_GM_EVENT_20070906
; 2610 : 
; 2611 : #ifdef MODIFY_0708_BUFFIX_20070820	// 같은 파티원끼리는 정당방위 설정 안함
; 2612 : #ifdef MODIFY_SELFDEFENSE_20070904
; 2613 : 	if( lpObj->PartyNumber >= 0 
; 2614 : 		&& lpCallObj->PartyNumber >= 0
; 2615 : 		&& lpObj->PartyNumber == lpCallObj->PartyNumber )

  012ed	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  012f0	83 b8 88 02 00
	00 00		 cmp	 DWORD PTR [eax+648], 0
  012f7	7c 27		 jl	 SHORT $LN140@Attack
  012f9	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  012fc	83 b8 88 02 00
	00 00		 cmp	 DWORD PTR [eax+648], 0
  01303	7c 1b		 jl	 SHORT $LN140@Attack
  01305	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01308	8b 4d f4	 mov	 ecx, DWORD PTR _lpCallObj$[ebp]
  0130b	8b 90 88 02 00
	00		 mov	 edx, DWORD PTR [eax+648]
  01311	3b 91 88 02 00
	00		 cmp	 edx, DWORD PTR [ecx+648]
  01317	75 07		 jne	 SHORT $LN140@Attack

; 2616 : #else
; 2617 : 	if( lpObj->PartyNumber == lpCallObj->PartyNumber)
; 2618 : #endif	// MODIFY_SELFDEFENSE_20070904
; 2619 : 	{
; 2620 : 		selfdefense = FALSE;

  01319	c7 45 84 00 00
	00 00		 mov	 DWORD PTR _selfdefense$[ebp], 0
$LN140@Attack:

; 2621 : 	}
; 2622 : #endif
; 2623 : 	
; 2624 : 	if( selfdefense == TRUE && !bDamageReflect )

  01320	83 7d 84 01	 cmp	 DWORD PTR _selfdefense$[ebp], 1
  01324	75 2c		 jne	 SHORT $LN142@Attack
  01326	83 7d c0 00	 cmp	 DWORD PTR _bDamageReflect$[ebp], 0
  0132a	75 26		 jne	 SHORT $LN142@Attack

; 2625 : 	{
; 2626 : #ifdef _NEW_EXDB_
; 2627 : 		if( gObjTargetGuildWarCheck(lpObj, lpCallObj) == FALSE )

  0132c	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  0132f	50		 push	 eax
  01330	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01333	51		 push	 ecx
  01334	e8 00 00 00 00	 call	 ?gObjTargetGuildWarCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjTargetGuildWarCheck
  01339	83 c4 08	 add	 esp, 8
  0133c	85 c0		 test	 eax, eax
  0133e	75 12		 jne	 SHORT $LN142@Attack

; 2628 : #endif
; 2629 : 		{
; 2630 : #ifdef UPDATE_PK_SYSTEM_20070302	// 파티시 파티원 전체에 정당방위 설정
; 2631 : #ifdef MODIFY_PARTY_SELFDEFENSE_BUG_FIX_20071022	// 정방에 걸린 유저만 SelfDefense에 넣는다
; 2632 : 			if( lpCallObj->PartyNumber >= 0 )
; 2633 : 			{
; 2634 : 				int number = 0;
; 2635 : 				int partynum = lpCallObj->PartyNumber;
; 2636 : 				
; 2637 : 				if( gParty.GetPKPartyPenalty(partynum) < PK_LEVEL_DEFAULT+2)		// PK 패널티 적용시 제외
; 2638 : 				{
; 2639 : 					gObjCheckSelfDefense(lpObj, lpCallObj->m_Index);
; 2640 : 				}
; 2641 : 			}
; 2642 : 			else
; 2643 : 			{
; 2644 : 				gObjCheckSelfDefense(lpObj, lpCallObj->m_Index);
; 2645 : 			}
; 2646 : #else	// MODIFY_PARTY_SELFDEFENSE_BUG_FIX_20071022
; 2647 : 			if( lpCallObj->PartyNumber >= 0 )
; 2648 : 			{
; 2649 : 				int number = 0;
; 2650 : 				int partynum = lpCallObj->PartyNumber;
; 2651 : 				
; 2652 : 				if( gParty.GetPKPartyPenalty(partynum) < PK_LEVEL_DEFAULT+2)		// PK 패널티 적용시 제외
; 2653 : 				{
; 2654 : 					for(int n = 0; n < MAX_PARTYUSER; n++)
; 2655 : 					{
; 2656 : 						number = gParty.m_PartyS[partynum].Number[n];
; 2657 : 						if( number >= 0 )
; 2658 : 						{
; 2659 : 							gObjCheckSelfDefense(lpObj, number);
; 2660 : 						}
; 2661 : 					}
; 2662 : 				}
; 2663 : 			}
; 2664 : 			else
; 2665 : 			{
; 2666 : 				gObjCheckSelfDefense(lpObj, lpCallObj->m_Index);
; 2667 : 			}
; 2668 : #endif	// MODIFY_PARTY_SELFDEFENSE_BUG_FIX_20071022
; 2669 : #else	// UPDATE_PK_SYSTEM_20070302
; 2670 : 			gObjCheckSelfDefense(lpObj, lpCallObj->m_Index);

  01340	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  01343	8b 08		 mov	 ecx, DWORD PTR [eax]
  01345	51		 push	 ecx
  01346	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01349	52		 push	 edx
  0134a	e8 00 00 00 00	 call	 ?gObjCheckSelfDefense@@YAXPAVOBJECTSTRUCT@@H@Z ; gObjCheckSelfDefense
  0134f	83 c4 08	 add	 esp, 8
$LN142@Attack:

; 2671 : #endif	// UPDATE_PK_SYSTEM_20070302
; 2672 : 		}
; 2673 : 	}
; 2674 : 	
; 2675 : 
; 2676 : 	//---------------------------------------------------------------------------------
; 2677 : 	//
; 2678 : 	//  [] 특정 몬스터가 공격 받았을 때 행동 처리
; 2679 : 	//
; 2680 : 	//
; 2681 : 	//---------------------------------------------------------------------------------
; 2682 : 
; 2683 : #ifdef ADD_NEW_MAP_KALIMA_20040518
; 2684 : 	// 쿤둔의 환영의 경우는 1/5 확률로 머뭇거린다.
; 2685 : 	if (
; 2686 : //		lpTargetObj->Class == 161 ||		// 쿤둔의 환영1
; 2687 : //		lpTargetObj->Class == 181 || 		// 쿤둔의 환영2
; 2688 : //		lpTargetObj->Class == 189 || 		// 쿤둔의 환영3
; 2689 : //		lpTargetObj->Class == 197 || 		// 쿤둔의 환영4
; 2690 : //		lpTargetObj->Class == 267 || 		// 쿤둔의 환영5
; 2691 : 		lpTargetObj->Class == 275 			// 쿤둔의 환영6

  01352	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01355	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  0135c	81 f9 13 01 00
	00		 cmp	 ecx, 275		; 00000113H
  01362	75 56		 jne	 SHORT $LN145@Attack

; 2692 : 		)
; 2693 : 	{
; 2694 : 		if (lpTargetObj->m_iMonsterBattleDelay <= 0) 

  01364	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01367	0f be 88 25 02
	00 00		 movsx	 ecx, BYTE PTR [eax+549]
  0136e	85 c9		 test	 ecx, ecx
  01370	7f 48		 jg	 SHORT $LN145@Attack

; 2695 : 		{
; 2696 : 			if (rand()%15 < 1) 

  01372	e8 00 00 00 00	 call	 _rand
  01377	99		 cdq
  01378	b9 0f 00 00 00	 mov	 ecx, 15			; 0000000fH
  0137d	f7 f9		 idiv	 ecx
  0137f	83 fa 01	 cmp	 edx, 1
  01382	7d 36		 jge	 SHORT $LN145@Attack

; 2697 : 			{
; 2698 : 				gObjAddMsgSendDelay(lpTargetObj, 4, lpObj->m_Index, 100);

  01384	6a 00		 push	 0
  01386	6a 64		 push	 100			; 00000064H
  01388	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0138b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0138d	51		 push	 ecx
  0138e	6a 04		 push	 4
  01390	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01393	52		 push	 edx
  01394	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  01399	83 c4 14	 add	 esp, 20			; 00000014H

; 2699 : 				lpTargetObj->m_iMonsterBattleDelay = 10;

  0139c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0139f	c6 80 25 02 00
	00 0a		 mov	 BYTE PTR [eax+549], 10	; 0000000aH

; 2700 : 
; 2701 : 				// 머뭇거린다는 행동을 보낸다.
; 2702 : #ifdef ADD_TRAP_OBJECT_EXTEND_20060731
; 2703 : 				GCActionSend(lpTargetObj, AT_DAMAGE1, lpTargetObj->m_Index, lpObj->m_Index );
; 2704 : #else
; 2705 : 				GCActionSend(lpTargetObj, AT_DAMAGE1, lpTargetObj->m_Index);

  013a6	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013a9	8b 08		 mov	 ecx, DWORD PTR [eax]
  013ab	51		 push	 ecx
  013ac	6a 7e		 push	 126			; 0000007eH
  013ae	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  013b1	52		 push	 edx
  013b2	e8 00 00 00 00	 call	 ?GCActionSend@@YAXPAVOBJECTSTRUCT@@EH@Z ; GCActionSend
  013b7	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN145@Attack:

; 2706 : #endif // ADD_TRAP_OBJECT_EXTEND_20060731
; 2707 : 			}
; 2708 : 		}
; 2709 : 	}
; 2710 : #endif
; 2711 : 
; 2712 : 
; 2713 : #ifdef FOR_BLOODCASTLE
; 2714 : 	if ( (lpTargetObj->Class == 131) || (CHECK_LIMIT(lpTargetObj->Class-BC_SAINT_STATUE_1, 3))) 

  013ba	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013bd	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  013c4	81 f9 83 00 00
	00		 cmp	 ecx, 131		; 00000083H
  013ca	74 5d		 je	 SHORT $LN148@Attack
  013cc	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013cf	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  013d6	81 e9 84 00 00
	00		 sub	 ecx, 132		; 00000084H
  013dc	79 0c		 jns	 SHORT $LN194@Attack
  013de	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv950[ebp], 0
  013e8	eb 36		 jmp	 SHORT $LN195@Attack
$LN194@Attack:
  013ea	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  013ed	0f b7 82 9c 00
	00 00		 movzx	 eax, WORD PTR [edx+156]
  013f4	2d 84 00 00 00	 sub	 eax, 132		; 00000084H
  013f9	83 f8 02	 cmp	 eax, 2
  013fc	7e 0c		 jle	 SHORT $LN192@Attack
  013fe	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv949[ebp], 0
  01408	eb 0a		 jmp	 SHORT $LN193@Attack
$LN192@Attack:
  0140a	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv949[ebp], 1
$LN193@Attack:
  01414	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv949[ebp]
  0141a	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv950[ebp], ecx
$LN195@Attack:
  01420	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv950[ebp], 0
  01427	74 3e		 je	 SHORT $LN146@Attack
$LN148@Attack:

; 2715 : 	{	
; 2716 : 		//성문이나 성자의석상이라면 언제나 머뭇거린다.
; 2717 : 		gObjAddMsgSendDelay(lpTargetObj, 4, lpObj->m_Index, 100);

  01429	6a 00		 push	 0
  0142b	6a 64		 push	 100			; 00000064H
  0142d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01430	8b 08		 mov	 ecx, DWORD PTR [eax]
  01432	51		 push	 ecx
  01433	6a 04		 push	 4
  01435	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01438	52		 push	 edx
  01439	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  0143e	83 c4 14	 add	 esp, 20			; 00000014H

; 2718 : 		gObjSetPosition(lpTargetObj->m_Index, lpTargetObj->X, lpTargetObj->Y);

  01441	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01444	0f bf 88 06 01
	00 00		 movsx	 ecx, WORD PTR [eax+262]
  0144b	51		 push	 ecx
  0144c	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  0144f	0f bf 82 04 01
	00 00		 movsx	 eax, WORD PTR [edx+260]
  01456	50		 push	 eax
  01457	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0145a	8b 11		 mov	 edx, DWORD PTR [ecx]
  0145c	52		 push	 edx
  0145d	e8 00 00 00 00	 call	 ?gObjSetPosition@@YAXHHH@Z ; gObjSetPosition
  01462	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2719 : 	}

  01465	eb 66		 jmp	 SHORT $LN154@Attack
$LN146@Attack:

; 2720 : 	else if( AttackDamage >= 5 )

  01467	83 7d 1c 05	 cmp	 DWORD PTR _AttackDamage$[ebp], 5
  0146b	7c 60		 jl	 SHORT $LN154@Attack

; 2721 : #else
; 2722 : 	if( AttackDamage >= 5 )
; 2723 : #endif
; 2724 : 	{		
; 2725 : 		if( lpTargetObj->Type == OBJTYPE_MONSTER ) // 대상자가 몬스터

  0146d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01470	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  01474	83 f9 02	 cmp	 ecx, 2
  01477	75 2b		 jne	 SHORT $LN150@Attack

; 2726 : 		{
; 2727 : 			if( (rand()%26) == 0 )	

  01479	e8 00 00 00 00	 call	 _rand
  0147e	99		 cdq
  0147f	b9 1a 00 00 00	 mov	 ecx, 26			; 0000001aH
  01484	f7 f9		 idiv	 ecx
  01486	85 d2		 test	 edx, edx
  01488	75 18		 jne	 SHORT $LN152@Attack

; 2728 : 			{
; 2729 : 				gObjAddMsgSendDelay(lpTargetObj, 4, lpObj->m_Index, 100);

  0148a	6a 00		 push	 0
  0148c	6a 64		 push	 100			; 00000064H
  0148e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01491	8b 08		 mov	 ecx, DWORD PTR [eax]
  01493	51		 push	 ecx
  01494	6a 04		 push	 4
  01496	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01499	52		 push	 edx
  0149a	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  0149f	83 c4 14	 add	 esp, 20			; 00000014H
$LN152@Attack:

; 2730 : 			}
; 2731 : 		}

  014a2	eb 29		 jmp	 SHORT $LN154@Attack
$LN150@Attack:

; 2732 : 		else 
; 2733 : 		{
; 2734 : 			if( (rand()%4) == 0 )	

  014a4	e8 00 00 00 00	 call	 _rand
  014a9	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  014ae	79 05		 jns	 SHORT $LN206@Attack
  014b0	48		 dec	 eax
  014b1	83 c8 fc	 or	 eax, -4			; fffffffcH
  014b4	40		 inc	 eax
$LN206@Attack:
  014b5	85 c0		 test	 eax, eax
  014b7	75 14		 jne	 SHORT $LN154@Attack

; 2735 : 			{
; 2736 : 				if( gObjUniriaSprite(lpTargetObj) == FALSE )

  014b9	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  014bc	50		 push	 eax
  014bd	e8 00 00 00 00	 call	 ?gObjUniriaSprite@@YAHPAVOBJECTSTRUCT@@@Z ; gObjUniriaSprite
  014c2	83 c4 04	 add	 esp, 4
  014c5	85 c0		 test	 eax, eax
  014c7	75 04		 jne	 SHORT $LN154@Attack

; 2737 : 				{
; 2738 : 					MSBFlag = 1;

  014c9	c6 45 18 01	 mov	 BYTE PTR _MSBFlag$[ebp], 1
$LN154@Attack:

; 2739 : 				}
; 2740 : 			}
; 2741 : 		}
; 2742 : 	}
; 2743 : 
; 2744 : 	//---------------------------------------------------------------------------------
; 2745 : 	//
; 2746 : 	//  [] Target이 법사이고, 소울바리어 사용함에 따라 마나통 교체 처리
; 2747 : 	//
; 2748 : 	//
; 2749 : 	//---------------------------------------------------------------------------------
; 2750 : 
; 2751 : #ifdef NEW_FORSKYLAND2
; 2752 : 	if( ManaChange )

  014cd	83 7d e8 00	 cmp	 DWORD PTR _ManaChange$[ebp], 0
  014d1	74 2f		 je	 SHORT $LN155@Attack

; 2753 : 	{
; 2754 : 		GCManaSend(lpTargetObj->m_Index, (short)lpTargetObj->Mana, 0xFF, 0, lpTargetObj->BP);				

  014d3	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  014d6	0f b7 88 e8 00
	00 00		 movzx	 ecx, WORD PTR [eax+232]
  014dd	51		 push	 ecx
  014de	6a 00		 push	 0
  014e0	68 ff 00 00 00	 push	 255			; 000000ffH
  014e5	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  014e8	f3 0f 2c 82 d0
	00 00 00	 cvttss2si eax, DWORD PTR [edx+208]
  014f0	0f b7 c8	 movzx	 ecx, ax
  014f3	51		 push	 ecx
  014f4	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  014f7	8b 02		 mov	 eax, DWORD PTR [edx]
  014f9	50		 push	 eax
  014fa	e8 00 00 00 00	 call	 ?GCManaSend@@YAXHFEEG@Z	; GCManaSend
  014ff	83 c4 14	 add	 esp, 20			; 00000014H
$LN155@Attack:

; 2755 : 	}
; 2756 : #endif
; 2757 : 	
; 2758 : 	//---------------------------------------------------------------------------------
; 2759 : 	//
; 2760 : 	//  [] 마법이 사용 됐음을 보낸다. (성공/스킬, 스킬번호)
; 2761 : 	//
; 2762 : 	//
; 2763 : 	//---------------------------------------------------------------------------------
; 2764 : 
; 2765 : 	if( magicsend )

  01502	83 7d 14 00	 cmp	 DWORD PTR _magicsend$[ebp], 0
  01506	74 1c		 je	 SHORT $LN156@Attack

; 2766 : 	{
; 2767 : 		GCMagicAttackNumberSend(lpObj, skill, lpTargetObj->m_Index, skillSuccess);

  01508	0f b6 45 f8	 movzx	 eax, BYTE PTR _skillSuccess$[ebp]
  0150c	50		 push	 eax
  0150d	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01510	8b 11		 mov	 edx, DWORD PTR [ecx]
  01512	52		 push	 edx
  01513	0f b6 45 e4	 movzx	 eax, BYTE PTR _skill$[ebp]
  01517	50		 push	 eax
  01518	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0151b	51		 push	 ecx
  0151c	e8 00 00 00 00	 call	 ?GCMagicAttackNumberSend@@YAXPAVOBJECTSTRUCT@@EHE@Z ; GCMagicAttackNumberSend
  01521	83 c4 10	 add	 esp, 16			; 00000010H
$LN156@Attack:

; 2768 : 	}
; 2769 : 
; 2770 : 	if( lpObj->Type == OBJTYPE_CHARACTER )

  01524	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01527	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0152b	83 f9 01	 cmp	 ecx, 1
  0152e	75 22		 jne	 SHORT $LN158@Attack

; 2771 : 	{
; 2772 : 		if( lpObj->m_Change == 9 )

  01530	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01533	83 b8 a8 02 00
	00 09		 cmp	 DWORD PTR [eax+680], 9
  0153a	75 16		 jne	 SHORT $LN158@Attack

; 2773 : 		{
; 2774 : 			GCMagicAttackNumberSend(lpObj, 3, lpTargetObj->m_Index, 1);	

  0153c	6a 01		 push	 1
  0153e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01541	8b 08		 mov	 ecx, DWORD PTR [eax]
  01543	51		 push	 ecx
  01544	6a 03		 push	 3
  01546	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01549	52		 push	 edx
  0154a	e8 00 00 00 00	 call	 ?GCMagicAttackNumberSend@@YAXPAVOBJECTSTRUCT@@EHE@Z ; GCMagicAttackNumberSend
  0154f	83 c4 10	 add	 esp, 16			; 00000010H
$LN158@Attack:

; 2775 : 		}
; 2776 : 	}
; 2777 : 	
; 2778 : 	if( lpObj->Class == CLASS_ELF )

  01552	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01555	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  0155c	83 f9 02	 cmp	 ecx, 2
  0155f	75 78		 jne	 SHORT $LN160@Attack

; 2779 : 	{	
; 2780 : 		if( lpObj->Level == 1 && (AttackDamage>10))

  01561	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01564	0f bf 88 a0 00
	00 00		 movsx	 ecx, WORD PTR [eax+160]
  0156b	83 f9 01	 cmp	 ecx, 1
  0156e	75 69		 jne	 SHORT $LN160@Attack
  01570	83 7d 1c 0a	 cmp	 DWORD PTR _AttackDamage$[ebp], 10 ; 0000000aH
  01574	7e 63		 jle	 SHORT $LN160@Attack

; 2781 : 		{
; 2782 : 			LogAdd("error-Level1 : [%s][%s] Str:%d %d %d %d %d %d %d", lpObj->AccountID, lpObj->Name, lpObj->Strength,

  01576	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01579	8b 88 b4 02 00
	00		 mov	 ecx, DWORD PTR [eax+692]
  0157f	51		 push	 ecx
  01580	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01583	8b 82 b8 02 00
	00		 mov	 eax, DWORD PTR [edx+696]
  01589	50		 push	 eax
  0158a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0158d	8b 91 cc 02 00
	00		 mov	 edx, DWORD PTR [ecx+716]
  01593	52		 push	 edx
  01594	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01597	8b 88 d0 02 00
	00		 mov	 ecx, DWORD PTR [eax+720]
  0159d	51		 push	 ecx
  0159e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  015a1	8b 82 d4 02 00
	00		 mov	 eax, DWORD PTR [edx+724]
  015a7	50		 push	 eax
  015a8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  015ab	8b 91 d8 02 00
	00		 mov	 edx, DWORD PTR [ecx+728]
  015b1	52		 push	 edx
  015b2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  015b5	0f b7 88 b4 00
	00 00		 movzx	 ecx, WORD PTR [eax+180]
  015bc	51		 push	 ecx
  015bd	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  015c0	83 c2 73	 add	 edx, 115		; 00000073H
  015c3	52		 push	 edx
  015c4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  015c7	83 c0 68	 add	 eax, 104		; 00000068H
  015ca	50		 push	 eax
  015cb	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@MDAHJJLM@error?9Level1?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Str?3?$CFd?5@
  015d0	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  015d6	83 c4 28	 add	 esp, 40			; 00000028H
$LN160@Attack:

; 2783 : 				lpObj->m_AttackDamageMinRight, 
; 2784 : 				lpObj->m_AttackDamageMaxRight,
; 2785 : 				lpObj->m_AttackDamageMinLeft, 
; 2786 : 				lpObj->m_AttackDamageMaxLeft,
; 2787 : 				lpObj->m_AttackDamageMax,
; 2788 : 				lpObj->m_AttackDamageMin				
; 2789 : 				);
; 2790 : 		}
; 2791 : 	}
; 2792 : 
; 2793 : 	lpObj->m_Rest = 0;

  015d9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  015dc	c6 80 bd 01 00
	00 00		 mov	 BYTE PTR [eax+445], 0

; 2794 : 
; 2795 : 
; 2796 : 	//---------------------------------------------------------------------------------
; 2797 : 	//
; 2798 : 	//  [] Attack 함수 마무리 ...
; 2799 : 	//
; 2800 : 	//
; 2801 : 	//---------------------------------------------------------------------------------
; 2802 : 	
; 2803 : 	if( AttackDamage > 0 )

  015e3	83 7d 1c 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  015e7	0f 8e 5f 02 00
	00		 jle	 $LN161@Attack

; 2804 : 	{
; 2805 : #ifdef FOR_ANTI_HACK
; 2806 : 		if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_MONSTER )
; 2807 : 		{
; 2808 : 			gObjSetPosition(lpObj->m_Index, lpObj->X, lpObj->Y);
; 2809 : 			gObjSetPosition(lpTargetObj->m_Index, lpTargetObj->X, lpTargetObj->Y);
; 2810 : 		}		
; 2811 : #endif
; 2812 : 
; 2813 : 		int atd_reflect;
; 2814 : 		atd_reflect = (int)((float)AttackDamage*lpTargetObj->DamageReflect/100);

  015ed	f3 0f 2a 45 1c	 cvtsi2ss xmm0, DWORD PTR _AttackDamage$[ebp]
  015f2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  015f5	0f b6 88 15 01
	00 00		 movzx	 ecx, BYTE PTR [eax+277]
  015fc	f3 0f 2a c9	 cvtsi2ss xmm1, ecx
  01600	f3 0f 59 c1	 mulss	 xmm0, xmm1
  01604	f3 0f 5e 05 00
	00 00 00	 divss	 xmm0, DWORD PTR __real@42c80000
  0160c	f3 0f 2c d0	 cvttss2si edx, xmm0
  01610	89 55 80	 mov	 DWORD PTR _atd_reflect$2[ebp], edx

; 2815 : 
; 2816 : 		if( atd_reflect )

  01613	83 7d 80 00	 cmp	 DWORD PTR _atd_reflect$2[ebp], 0
  01617	74 1a		 je	 SHORT $LN163@Attack

; 2817 : 		{
; 2818 : 			//LogAdd("데미지 반사 %x ", atd_reflect);
; 2819 : 			
; 2820 : 			gObjAddMsgSendDelay(lpTargetObj, MSG_REFLECT, lpObj->m_Index, 10, atd_reflect);

  01619	8b 45 80	 mov	 eax, DWORD PTR _atd_reflect$2[ebp]
  0161c	50		 push	 eax
  0161d	6a 0a		 push	 10			; 0000000aH
  0161f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01622	8b 11		 mov	 edx, DWORD PTR [ecx]
  01624	52		 push	 edx
  01625	6a 0a		 push	 10			; 0000000aH
  01627	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0162a	50		 push	 eax
  0162b	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  01630	83 c4 14	 add	 esp, 20			; 00000014H
$LN163@Attack:

; 2821 : 		}
; 2822 : 
; 2823 : 		if( rand()%100 < lpObj->SetOpReflectionDamage )

  01633	e8 00 00 00 00	 call	 _rand
  01638	99		 cdq
  01639	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0163e	f7 f9		 idiv	 ecx
  01640	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01643	0f b6 88 4a 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3914]
  0164a	3b d1		 cmp	 edx, ecx
  0164c	7d 1a		 jge	 SHORT $LN164@Attack

; 2824 : 		{	// 세트 옵션 100% 데미지 반사 
; 2825 : 			gObjAddMsgSendDelay(lpTargetObj, MSG_REFLECT, lpObj->m_Index, 10, AttackDamage);

  0164e	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01651	50		 push	 eax
  01652	6a 0a		 push	 10			; 0000000aH
  01654	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01657	8b 11		 mov	 edx, DWORD PTR [ecx]
  01659	52		 push	 edx
  0165a	6a 0a		 push	 10			; 0000000aH
  0165c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0165f	50		 push	 eax
  01660	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAVOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  01665	83 c4 14	 add	 esp, 20			; 00000014H
$LN164@Attack:

; 2826 : 		}
; 2827 : 
; 2828 : #ifdef ADD_THIRD_WING_20070525	// 3차날개 랜덤옵션 처리 - 적 공격력 되돌려줌
; 2829 : 		if( rand() % 100 < 5 )
; 2830 : 		{
; 2831 : 			if( gObjWingSprite( lpTargetObj ) == TRUE )
; 2832 : 			{
; 2833 : 				CItem	*Wing = &lpTargetObj->pInventory[EQUIPMENT_WING];
; 2834 : #ifdef ADD_SUMMONER_SECOND_THIRD_WING_20071130
; 2835 : 				if( ( Wing->m_Type >= MAKE_ITEMNUM( 12, 36 ) && Wing->m_Type <= MAKE_ITEMNUM( 12, 40 ) ) 
; 2836 : 					|| Wing->m_Type == MAKE_ITEMNUM( 12, 43 ))
; 2837 : #else
; 2838 : 				if( Wing->m_Type >= MAKE_ITEMNUM( 12, 36 ) && Wing->m_Type <= MAKE_ITEMNUM( 12, 40 ) )
; 2839 : #endif
; 2840 : 				{					
; 2841 : 					BYTE bt3rdWingOpt = lpTargetObj->pInventory[EQUIPMENT_WING].m_NewOption;						
; 2842 : 					if( ( bt3rdWingOpt & PLUS_THIRD_WING_5PER_ATTACK_TURNING ) == PLUS_THIRD_WING_5PER_ATTACK_TURNING ) 
; 2843 : 					{	
; 2844 : 						// 5% 확률로 적 공격력 돌려줌
; 2845 : 						if( lpObj->Type == OBJTYPE_MONSTER )
; 2846 : 						{							
; 2847 : 							gObjAddMsgSendDelay( lpTargetObj, MSG_ATTACK_TURNING, lpObj->m_Index, 10, lpObj->m_AttackDamageMax );
; 2848 : 						}
; 2849 : 						else if( lpObj->Type == OBJTYPE_CHARACTER )
; 2850 : 						{
; 2851 : 							gObjAddMsgSendDelay( lpTargetObj, MSG_ATTACK_TURNING, lpObj->m_Index, 10, AttackDamage );
; 2852 : 						}						
; 2853 : 					}
; 2854 : 				}				
; 2855 : 			}
; 2856 : 		}
; 2857 : #endif	// ADD_THIRD_WING_20070525
; 2858 : 
; 2859 : #ifdef ADD_SKILL_WITH_COMBO
; 2860 : 		if( bCombo )

  01668	83 7d 20 00	 cmp	 DWORD PTR _bCombo$[ebp], 0
  0166c	74 74		 je	 SHORT $LN165@Attack

; 2861 : 		{
; 2862 : 			//AttackDamage += AttackDamage+(lpObj->Strength+lpObj->Dexterity)/20;
; 2863 : 			int		iComboDamage = (Strength+Dexterity+Energy)/g_GlobalConfig.iComboDamage;

  0166e	8b 45 d8	 mov	 eax, DWORD PTR _Strength$[ebp]
  01671	03 45 d4	 add	 eax, DWORD PTR _Dexterity$[ebp]
  01674	03 45 cc	 add	 eax, DWORD PTR _Energy$[ebp]
  01677	99		 cdq
  01678	f7 3d 04 04 00
	00		 idiv	 DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+1028
  0167e	89 85 7c ff ff
	ff		 mov	 DWORD PTR _iComboDamage$1[ebp], eax

; 2864 : 
; 2865 : 			AttackDamage += iComboDamage;

  01684	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01687	03 85 7c ff ff
	ff		 add	 eax, DWORD PTR _iComboDamage$1[ebp]
  0168d	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 2866 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2867 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2868 : 			{
; 2869 : 				// CODEREVIEW_SHIELD : 쉴드 데미지 차이 구하는 방법 변경 (콤보 데미지로 쉴드 데미지 계산)
; 2870 : 				iTempShieldDamage		= GetShieldDamage( lpObj, lpTargetObj, iComboDamage );
; 2871 : 				lpTargetObj->iShield	= lpTargetObj->iShield - iTempShieldDamage;
; 2872 : 				lpTargetObj->Life		= lpTargetObj->Life - (iComboDamage - iTempShieldDamage);
; 2873 : 				iTotalShieldDamage		= iTotalShieldDamage + iTempShieldDamage;
; 2874 : 
; 2875 : 				if( lpTargetObj->Life < 0 )
; 2876 : 				{
; 2877 : 					lpTargetObj->Life = 0;
; 2878 : 				}
; 2879 : 			}
; 2880 : 			else
; 2881 : 			{
; 2882 : 				lpTargetObj->Life -= iComboDamage;
; 2883 : 				if( lpTargetObj->Life < 0 ) 
; 2884 : 				{
; 2885 : 					lpTargetObj->Life = 0;
; 2886 : 				}
; 2887 : 			}
; 2888 : #else
; 2889 : 			lpTargetObj->Life -= iComboDamage;

  01690	f3 0f 2a 85 7c
	ff ff ff	 cvtsi2ss xmm0, DWORD PTR _iComboDamage$1[ebp]
  01698	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0169b	f3 0f 10 88 bc
	00 00 00	 movss	 xmm1, DWORD PTR [eax+188]
  016a3	f3 0f 5c c8	 subss	 xmm1, xmm0
  016a7	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  016aa	f3 0f 11 89 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm1

; 2890 : 			if( lpTargetObj->Life < 0 ) 

  016b2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  016b5	0f 57 c0	 xorps	 xmm0, xmm0
  016b8	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  016bf	76 0e		 jbe	 SHORT $LN166@Attack

; 2891 : 			{
; 2892 : 				lpTargetObj->Life = 0;

  016c1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  016c4	0f 57 c0	 xorps	 xmm0, xmm0
  016c7	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0
$LN166@Attack:

; 2893 : 			}
; 2894 : #endif
; 2895 : 			
; 2896 : 			MsgDamage |= DT_COMBO;

  016cf	0f b6 45 ef	 movzx	 eax, BYTE PTR _MsgDamage$[ebp]
  016d3	0d 80 00 00 00	 or	 eax, 128		; 00000080H
  016d8	88 45 ef	 mov	 BYTE PTR _MsgDamage$[ebp], al

; 2897 : 			skill = AT_SKILL_COMBO;

  016db	c7 45 e4 3b 00
	00 00		 mov	 DWORD PTR _skill$[ebp], 59 ; 0000003bH
$LN165@Attack:

; 2898 : 		}
; 2899 : 
; 2900 : 
; 2901 : 		if( rand()%100 < lpObj->SetOpDoubleDamage )

  016e2	e8 00 00 00 00	 call	 _rand
  016e7	99		 cdq
  016e8	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  016ed	f7 f9		 idiv	 ecx
  016ef	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  016f2	0f b6 88 47 0f
	00 00		 movzx	 ecx, BYTE PTR [eax+3911]
  016f9	3b d1		 cmp	 edx, ecx
  016fb	7d 4f		 jge	 SHORT $LN167@Attack

; 2902 : 		{	// 더블 데미지
; 2903 : 
; 2904 : #ifdef ADD_SKILL_DARKLOAD_FIRESCREAM_20060601	// 더블 데미지인 경우 주위에 몬스터가 데미지를 받는다.
; 2905 : #ifdef UPDATE_MASTER_LEVEL_4RANK_20080428	// 파이어 스크림 강화 추가
; 2906 : 			if( skill == AT_SKILL_FIRESCREAM 	// 파이어 스크림 스킬인 경우
; 2907 : 				||  g_MasterSkillSystem.GetBaseMasterLevelSkill( skill ) == AT_SKILL_ML_STRENGTHEN_FIRESCREAM	// 파이어 스크림 강화
; 2908 : 				)
; 2909 : #else	// UPDATE_MASTER_LEVEL_4RANK_20080428
; 2910 : 			if( skill == AT_SKILL_FIRESCREAM )	// 파이어 스크림 스킬인 경우
; 2911 : #endif	// UPDATE_MASTER_LEVEL_4RANK_20080428
; 2912 : 			{
; 2913 : 				gObjUseSkill.FireScreamExplosionAttack( lpObj, lpTargetObj, AttackDamage );		
; 2914 : 			}
; 2915 : #endif	// #ifdef ADD_SKILL_DARKLOAD_FIRESCREAM_20060601
; 2916 : 
; 2917 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2918 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 2919 : 			{
; 2920 : 				// CODEREVIEW_SHIELD : 쉴드 데미지 차이 구하는 방법 변경
; 2921 : 				iTempShieldDamage		= GetShieldDamage( lpObj, lpTargetObj, AttackDamage );
; 2922 : 				lpTargetObj->iShield	= lpTargetObj->iShield - iTempShieldDamage;
; 2923 : 				lpTargetObj->Life		= lpTargetObj->Life - (AttackDamage - iTempShieldDamage);
; 2924 : 				iTotalShieldDamage		= iTotalShieldDamage + iTempShieldDamage;
; 2925 : 				// SHIELD_DEBUGING_HJLIM_20060420 : 더블 데미지 시에 AttackDamage 2배 안함.
; 2926 : 				AttackDamage			= AttackDamage + AttackDamage;
; 2927 : 
; 2928 : 				if( lpTargetObj->Life < 0 )
; 2929 : 				{
; 2930 : 					lpTargetObj->Life = 0;
; 2931 : 				}
; 2932 : 			}
; 2933 : 			else
; 2934 : 			{
; 2935 : 				lpTargetObj->Life -= AttackDamage;
; 2936 : 				AttackDamage += AttackDamage;
; 2937 : 				if( lpTargetObj->Life < 0 )
; 2938 : 				{
; 2939 : 					lpTargetObj->Life = 0;
; 2940 : 				}
; 2941 : 			}
; 2942 : #else
; 2943 : 			lpTargetObj->Life -= AttackDamage;

  016fd	f3 0f 2a 45 1c	 cvtsi2ss xmm0, DWORD PTR _AttackDamage$[ebp]
  01702	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01705	f3 0f 10 88 bc
	00 00 00	 movss	 xmm1, DWORD PTR [eax+188]
  0170d	f3 0f 5c c8	 subss	 xmm1, xmm0
  01711	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01714	f3 0f 11 89 bc
	00 00 00	 movss	 DWORD PTR [ecx+188], xmm1

; 2944 : 			AttackDamage += AttackDamage;

  0171c	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0171f	03 45 1c	 add	 eax, DWORD PTR _AttackDamage$[ebp]
  01722	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 2945 : 			if( lpTargetObj->Life < 0 )

  01725	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01728	0f 57 c0	 xorps	 xmm0, xmm0
  0172b	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  01732	76 0e		 jbe	 SHORT $LN168@Attack

; 2946 : 			{
; 2947 : 				lpTargetObj->Life = 0;

  01734	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01737	0f 57 c0	 xorps	 xmm0, xmm0
  0173a	f3 0f 11 80 bc
	00 00 00	 movss	 DWORD PTR [eax+188], xmm0
$LN168@Attack:

; 2948 : 			}
; 2949 : #endif
; 2950 : 			MsgDamage |= DT_DOUBLEDAMAGE;

  01742	0f b6 45 ef	 movzx	 eax, BYTE PTR _MsgDamage$[ebp]
  01746	83 c8 40	 or	 eax, 64			; 00000040H
  01749	88 45 ef	 mov	 BYTE PTR _MsgDamage$[ebp], al
$LN167@Attack:

; 2951 : 		}
; 2952 : 
; 2953 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2954 : 		if ( g_ShieldSystemOn == TRUE )
; 2955 : 		{
; 2956 : 			// 클라이언트에게 전송할 공격 데미지 (HP 감소량) 계산
; 2957 : 			AttackDamage	= AttackDamage - iTotalShieldDamage;
; 2958 : 		}
; 2959 : #endif
; 2960 : 		
; 2961 : 		
; 2962 : #ifdef MODIFY_CC_PVP_COMBO_DAMAGE_LOWER_50_20040917		// 기존 카오스캐슬 PVP 데미지 감소
; 2963 : #ifdef CHAOSCASTLE_SYSTEM_20040408		// 카오스 캐슬 안에서 사용자 끼리 공격 시 데미지 절반
; 2964 : 	#ifndef WORLD_TOURNAMENT_EVENT_SETTING
; 2965 : 	#ifdef ADD_SHIELD_POINT_01_20060403
; 2966 : 		if( g_ShieldSystemOn == FALSE )
; 2967 : 	#endif
; 2968 : 		{
; 2969 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )

  0174c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0174f	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  01753	83 f9 01	 cmp	 ecx, 1
  01756	0f 85 c9 00 00
	00		 jne	 $LN170@Attack
  0175c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0175f	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  01763	83 f9 01	 cmp	 ecx, 1
  01766	0f 85 b9 00 00
	00		 jne	 $LN170@Attack

; 2970 : 			{
; 2971 : 				if (CHECK_CHAOSCASTLE(lpObj->MapNumber) && CHECK_CHAOSCASTLE(lpTargetObj->MapNumber)) 

  0176c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0176f	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  01776	83 f9 12	 cmp	 ecx, 18			; 00000012H
  01779	7d 0c		 jge	 SHORT $LN198@Attack
  0177b	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv1110[ebp], 0
  01785	eb 31		 jmp	 SHORT $LN199@Attack
$LN198@Attack:
  01787	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0178a	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  01791	83 f8 17	 cmp	 eax, 23			; 00000017H
  01794	7e 0c		 jle	 SHORT $LN196@Attack
  01796	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv1109[ebp], 0
  017a0	eb 0a		 jmp	 SHORT $LN197@Attack
$LN196@Attack:
  017a2	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv1109[ebp], 1
$LN197@Attack:
  017ac	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv1109[ebp]
  017b2	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv1110[ebp], ecx
$LN199@Attack:
  017b8	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv1110[ebp], 0
  017bf	74 64		 je	 SHORT $LN170@Attack
  017c1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  017c4	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  017cb	83 f9 12	 cmp	 ecx, 18			; 00000012H
  017ce	7d 0c		 jge	 SHORT $LN202@Attack
  017d0	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv1119[ebp], 0
  017da	eb 31		 jmp	 SHORT $LN203@Attack
$LN202@Attack:
  017dc	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  017df	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  017e6	83 f8 17	 cmp	 eax, 23			; 00000017H
  017e9	7e 0c		 jle	 SHORT $LN200@Attack
  017eb	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv1118[ebp], 0
  017f5	eb 0a		 jmp	 SHORT $LN201@Attack
$LN200@Attack:
  017f7	c7 85 34 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv1118[ebp], 1
$LN201@Attack:
  01801	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR tv1118[ebp]
  01807	89 8d 38 ff ff
	ff		 mov	 DWORD PTR tv1119[ebp], ecx
$LN203@Attack:
  0180d	83 bd 38 ff ff
	ff 00		 cmp	 DWORD PTR tv1119[ebp], 0
  01814	74 0f		 je	 SHORT $LN170@Attack

; 2972 : 				{
; 2973 : 					AttackDamage = AttackDamage * 50 / 100;

  01816	6b 45 1c 32	 imul	 eax, DWORD PTR _AttackDamage$[ebp], 50
  0181a	99		 cdq
  0181b	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01820	f7 f9		 idiv	 ecx
  01822	89 45 1c	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN170@Attack:

; 2974 : 				}
; 2975 : 			}
; 2976 : 		}
; 2977 : 	#endif
; 2978 : #endif
; 2979 : #endif		
; 2980 : 
; 2981 : #ifdef ADD_SHIELD_POINT_01_20060403
; 2982 : 		gObjLifeCheck(lpTargetObj, lpObj, AttackDamage, 0, MSBFlag, MsgDamage, skill, iTotalShieldDamage);
; 2983 : 	#ifdef EXTEND_LOG_SYSTEM_02_20060516
; 2984 : 		if( iTotalShieldDamage > 0 )
; 2985 : 		{
; 2986 : 			LogAddTD("[PvP System] Victim:[%s][%s], Attacker:[%s][%s] - SD[%d] HP[%f] -> SD[%d] HP[%f]",
; 2987 : 				lpTargetObj->AccountID, lpTargetObj->Name, lpObj->AccountID, lpObj->Name,
; 2988 : 				lpTargetObj->iShield+iTotalShieldDamage,
; 2989 : 				lpTargetObj->Life+AttackDamage,
; 2990 : 				lpTargetObj->iShield,
; 2991 : 				lpTargetObj->Life);
; 2992 : 		}
; 2993 : 	#endif // EXTEND_LOG_SYSTEM_02_20060516
; 2994 : #else
; 2995 : 		gObjLifeCheck(lpTargetObj, lpObj, AttackDamage, 0, MSBFlag, MsgDamage, skill);

  01825	0f b6 45 e4	 movzx	 eax, BYTE PTR _skill$[ebp]
  01829	50		 push	 eax
  0182a	0f b6 4d ef	 movzx	 ecx, BYTE PTR _MsgDamage$[ebp]
  0182e	51		 push	 ecx
  0182f	0f b6 55 18	 movzx	 edx, BYTE PTR _MSBFlag$[ebp]
  01833	52		 push	 edx
  01834	6a 00		 push	 0
  01836	8b 45 1c	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01839	50		 push	 eax
  0183a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0183d	51		 push	 ecx
  0183e	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01841	52		 push	 edx
  01842	e8 00 00 00 00	 call	 ?gObjLifeCheck@@YAXPAVOBJECTSTRUCT@@0HHHHE@Z ; gObjLifeCheck
  01847	83 c4 1c	 add	 esp, 28			; 0000001cH

; 2996 : #endif
; 2997 : 		
; 2998 : #else
; 2999 : #ifdef MODIFY_CC_PVP_COMBO_DAMAGE_LOWER_50_20040917		// 기존 카오스캐슬 PVP 데미지 감소
; 3000 : #ifdef CHAOSCASTLE_SYSTEM_20040408		// 카오스 캐슬 안에서 사용자 끼리 공격 시 데미지 절반
; 3001 : 	#ifndef WORLD_TOURNAMENT_EVENT_SETTING
; 3002 : 	#ifdef ADD_SHIELD_POINT_01_20060403
; 3003 : 		if( g_ShieldSystemOn == FALSE )
; 3004 : 	#endif // ADD_SHIELD_POINT_01_20060403
; 3005 : 		{
; 3006 : 			if( lpObj->Type == OBJTYPE_CHARACTER && lpTargetObj->Type == OBJTYPE_CHARACTER )
; 3007 : 			{
; 3008 : 				if (CHECK_CHAOSCASTLE(lpObj->MapNumber) && CHECK_CHAOSCASTLE(lpTargetObj->MapNumber)) 
; 3009 : 				{
; 3010 : 					AttackDamage = AttackDamage * 50 / 100;
; 3011 : 				}
; 3012 : 			}
; 3013 : 		}
; 3014 : 	#endif
; 3015 : #endif
; 3016 : #endif		
; 3017 : 		
; 3018 : #ifdef ADD_SHIELD_POINT_01_20060403
; 3019 : 		gObjLifeCheck(lpTargetObj, lpObj, AttackDamage, 0, MSBFlag, MsgDamage, iTotalShieldDamage);
; 3020 : #else
; 3021 : 		gObjLifeCheck(lpTargetObj, lpObj, AttackDamage, 0, MSBFlag, MsgDamage);
; 3022 : #endif
; 3023 : 		
; 3024 : #endif
; 3025 : 	}	

  0184a	eb 1d		 jmp	 SHORT $LN162@Attack
$LN161@Attack:

; 3026 : 	else 
; 3027 : 	{
; 3028 : #ifdef ADD_SHIELD_POINT_01_20060403
; 3029 : 		GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, MsgDamage, 0);
; 3030 : #else
; 3031 : 		GCDamageSend(lpObj->m_Index,lpTargetObj->m_Index , 0, 0, MsgDamage);

  0184c	0f b6 45 ef	 movzx	 eax, BYTE PTR _MsgDamage$[ebp]
  01850	50		 push	 eax
  01851	6a 00		 push	 0
  01853	6a 00		 push	 0
  01855	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01858	8b 11		 mov	 edx, DWORD PTR [ecx]
  0185a	52		 push	 edx
  0185b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0185e	8b 08		 mov	 ecx, DWORD PTR [eax]
  01860	51		 push	 ecx
  01861	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHH@Z ; GCDamageSend
  01866	83 c4 14	 add	 esp, 20			; 00000014H
$LN162@Attack:

; 3032 : #endif
; 3033 : 	}
; 3034 : 
; 3035 : #ifdef NEW_FORSKYLAND3
; 3036 : 	if( lpObj->Life <= 0 && lpObj->Type == OBJTYPE_CHARACTER )

  01869	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0186c	0f 57 c0	 xorps	 xmm0, xmm0
  0186f	0f 2f 80 bc 00
	00 00		 comiss	 xmm0, DWORD PTR [eax+188]
  01876	72 53		 jb	 SHORT $LN172@Attack
  01878	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0187b	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0187f	83 f9 01	 cmp	 ecx, 1
  01882	75 47		 jne	 SHORT $LN172@Attack

; 3037 : 	{	// 데미지 증가 옵션에 따라서 캐릭터 체력이 깍이면 3초후에 다시 생명 체크를 해서 죽인다
; 3038 : 		if( lpObj->m_CheckLifeTime <= 0 )

  01884	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01887	83 b8 d8 0e 00
	00 00		 cmp	 DWORD PTR [eax+3800], 0
  0188e	7f 3b		 jg	 SHORT $LN172@Attack

; 3039 : 		{
; 3040 : #ifdef USER_DIE_MAKE_OPPOSIT_PK_20040329
; 3041 : 			lpObj->lpAttackObj = lpTargetObj;

  01890	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01893	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01896	89 88 30 02 00
	00		 mov	 DWORD PTR [eax+560], ecx

; 3042 : 
; 3043 : 			if (lpTargetObj->Type == OBJTYPE_CHARACTER) 

  0189c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0189f	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  018a3	83 f9 01	 cmp	 ecx, 1
  018a6	75 0c		 jne	 SHORT $LN173@Attack

; 3044 : 			{
; 3045 : 				lpObj->m_bAttackerKilled = true;		// 내가 상대방을 공격하다 죽었으므로 상대방이 직접 나를 죽인자는 아니다.

  018a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  018ab	c6 80 3c 02 00
	00 01		 mov	 BYTE PTR [eax+572], 1

; 3046 : 			}

  018b2	eb 0a		 jmp	 SHORT $LN174@Attack
$LN173@Attack:

; 3047 : 			else 
; 3048 : 			{
; 3049 : 				lpObj->m_bAttackerKilled = false;

  018b4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  018b7	c6 80 3c 02 00
	00 00		 mov	 BYTE PTR [eax+572], 0
$LN174@Attack:

; 3050 : 			}
; 3051 : #else
; 3052 : 			lpObj->lpAttackObj = lpTargetObj;
; 3053 : #endif			
; 3054 : 			lpObj->m_CheckLifeTime = 3;

  018be	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  018c1	c7 80 d8 0e 00
	00 03 00 00 00	 mov	 DWORD PTR [eax+3800], 3
$LN172@Attack:

; 3055 : 		}
; 3056 : 		
; 3057 : 	}
; 3058 : #endif
; 3059 : 
; 3060 : #ifdef ADD_SKILL_DARKLOAD_FIRESCREAM_20060601	// 특정 스킬에 대한 추가 처리
; 3061 : 	if( lpMagic != NULL )
; 3062 : 	{
; 3063 : 		gObjUseSkill.SpecificSkillAdditionTreat( lpObj, lpTargetObj, lpMagic, AttackDamage );
; 3064 : 	}	
; 3065 : #endif
; 3066 : 	
; 3067 : 	
; 3068 : 	return TRUE;

  018cb	b8 01 00 00 00	 mov	 eax, 1
$LN1@Attack:

; 3069 : }

  018d0	5f		 pop	 edi
  018d1	5e		 pop	 esi
  018d2	5b		 pop	 ebx
  018d3	8b e5		 mov	 esp, ebp
  018d5	5d		 pop	 ebp
  018d6	c2 1c 00	 ret	 28			; 0000001cH
  018d9	0f 1f 00	 npad	 3
$LN205@Attack:
  018dc	00 00 00 00	 DD	 $LN103@Attack
  018e0	00 00 00 00	 DD	 $LN107@Attack
  018e4	00 00 00 00	 DD	 $LN114@Attack
  018e8	00 00 00 00	 DD	 $LN113@Attack
  018ec	00 00 00 00	 DD	 $LN115@Attack
  018f0	00 00 00 00	 DD	 $LN2@Attack
$LN204@Attack:
  018f4	00		 DB	 0
  018f5	00		 DB	 0
  018f6	00		 DB	 0
  018f7	00		 DB	 0
  018f8	00		 DB	 0
  018f9	05		 DB	 5
  018fa	05		 DB	 5
  018fb	05		 DB	 5
  018fc	05		 DB	 5
  018fd	05		 DB	 5
  018fe	05		 DB	 5
  018ff	05		 DB	 5
  01900	05		 DB	 5
  01901	05		 DB	 5
  01902	05		 DB	 5
  01903	05		 DB	 5
  01904	05		 DB	 5
  01905	05		 DB	 5
  01906	05		 DB	 5
  01907	05		 DB	 5
  01908	05		 DB	 5
  01909	05		 DB	 5
  0190a	00		 DB	 0
  0190b	00		 DB	 0
  0190c	00		 DB	 0
  0190d	05		 DB	 5
  0190e	05		 DB	 5
  0190f	05		 DB	 5
  01910	01		 DB	 1
  01911	05		 DB	 5
  01912	00		 DB	 0
  01913	05		 DB	 5
  01914	02		 DB	 2
  01915	02		 DB	 2
  01916	05		 DB	 5
  01917	05		 DB	 5
  01918	00		 DB	 0
  01919	03		 DB	 3
  0191a	05		 DB	 5
  0191b	05		 DB	 5
  0191c	05		 DB	 5
  0191d	04		 DB	 4
  0191e	04		 DB	 4
  0191f	04		 DB	 4
  01920	05		 DB	 5
  01921	05		 DB	 5
  01922	04		 DB	 4
?Attack@CObjAttack@@QAEHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z ENDP ; CObjAttack::Attack
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ??1CObjAttack@@UAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CObjAttack@@UAE@XZ PROC				; CObjAttack::~CObjAttack, COMDAT
; _this$ = ecx

; 86   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CObjAttack@@6B@

; 87   : 
; 88   : }

  00015	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00018	e8 00 00 00 00	 call	 ??1CObjBaseAttack@@UAE@XZ ; CObjBaseAttack::~CObjBaseAttack
  0001d	5f		 pop	 edi
  0001e	5e		 pop	 esi
  0001f	5b		 pop	 ebx
  00020	8b e5		 mov	 esp, ebp
  00022	5d		 pop	 ebp
  00023	c3		 ret	 0
??1CObjAttack@@UAE@XZ ENDP				; CObjAttack::~CObjAttack
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ??0CObjAttack@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CObjAttack@@QAE@XZ PROC				; CObjAttack::CObjAttack, COMDAT
; _this$ = ecx

; 81   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??0CObjBaseAttack@@QAE@XZ ; CObjBaseAttack::CObjBaseAttack
  00014	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00017	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CObjAttack@@6B@

; 82   : 
; 83   : }

  0001d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??0CObjAttack@@QAE@XZ ENDP				; CObjAttack::CObjAttack
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?__empty_global_delete@@YAXPAXI@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
___formal$ = 12						; size = 4
?__empty_global_delete@@YAXPAXI@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAXI@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ObjAttack.cpp
;	COMDAT ?__empty_global_delete@@YAXPAX@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
?__empty_global_delete@@YAXPAX@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAX@Z ENDP			; __empty_global_delete
_TEXT	ENDS
END
