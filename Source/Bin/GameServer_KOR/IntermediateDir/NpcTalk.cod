; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29111.0 

	TITLE	C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?__empty_global_delete@@YAXPAX@Z		; __empty_global_delete
PUBLIC	?__empty_global_delete@@YAXPAXI@Z		; __empty_global_delete
PUBLIC	?NpcTalk@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcTalk
PUBLIC	?GetState@CDevilSquare@@QAE?AW4eDevilSquareState@@XZ ; CDevilSquare::GetState
PUBLIC	?TalkRefAdd@CQeustNpcTeleport@@QAEXXZ		; CQeustNpcTeleport::TalkRefAdd
PUBLIC	?NpcGuildMasterTalk@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcGuildMasterTalk
PUBLIC	?NpcFasi@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcFasi
PUBLIC	?NpcBattleAnnouncer@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcBattleAnnouncer
PUBLIC	?NpcRolensiaGuard@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcRolensiaGuard
PUBLIC	?NpcChaosGoblelin@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcChaosGoblelin
PUBLIC	?NpcRusipher@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcRusipher
PUBLIC	?NpcPosionGirl@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcPosionGirl
PUBLIC	?NpcDeviasWizard@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcDeviasWizard
PUBLIC	?NpcDeviasGuard@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcDeviasGuard
PUBLIC	?NpcDeviasWareHousemen@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcDeviasWareHousemen
PUBLIC	?NpcNoriaRara@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcNoriaRara
PUBLIC	?NpcDeviasMadam@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcDeviasMadam
PUBLIC	?NpcEventChipNPC@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcEventChipNPC
PUBLIC	?NpcAngelKing@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcAngelKing
PUBLIC	?NpcAngelMessanger@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcAngelMessanger
PUBLIC	?NpcRolensiaMadam@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcRolensiaMadam
PUBLIC	?NpcRoadMerchant@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcRoadMerchant
PUBLIC	?NpcDeviasWeapon@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcDeviasWeapon
PUBLIC	?NpcRorensiaSmith@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcRorensiaSmith
PUBLIC	?NpcNoriJangIn@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcNoriJangIn
PUBLIC	?NpcWarehouse@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcWarehouse
PUBLIC	?NpcQuestCheck@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcQuestCheck
PUBLIC	?NpcServerDivision@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcServerDivision
PUBLIC	?NpcDarkSpiritTrainer@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcDarkSpiritTrainer
PUBLIC	?NpcPkClearCheck@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcPkClearCheck
PUBLIC	?NpcResetCheck@@YAHPAVOBJECTSTRUCT@@0@Z		; NpcResetCheck
PUBLIC	?NpcBuffHelperCheck@@YAHPAVOBJECTSTRUCT@@0@Z	; NpcBuffHelperCheck
PUBLIC	??_C@_0BL@FMJKLKBP@QeustNpc?5RefCount?5Inc?5?$DN?5?$CFd@ ; `string'
PUBLIC	??_C@_0CN@BIAKPPND@?$LM?$KN?$LJ?v?$LK?P?G?R?5?$LB?b?$LA?$KD?$LP?$KB?$LE?B?5?$LB?f?$LF?e?$LI?$KG?5?$LL?$PN?$LM?$LK?G?R@ ; `string'
PUBLIC	??_C@_0DA@BCJAGFAG@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Ta@ ; `string'
PUBLIC	??_C@_0FG@CNLFICGI@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@ ; `string'
PUBLIC	??_C@_0FH@ONKNIFFP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@ ; `string'
PUBLIC	??_C@_0EM@MPNDNNH@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@ ; `string'
PUBLIC	??_C@_0EF@JFCICCDP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@ ; `string'
PUBLIC	??_C@_0FO@BJDLMIAN@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@ ; `string'
PUBLIC	??_C@_0EC@IJDIINJB@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@ ; `string'
PUBLIC	??_C@_0DD@KJEEOOOJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5is?5Already?5Opening?5PSh@ ; `string'
PUBLIC	??_C@_0BI@EKFBANFN@?$FL?$CFs?$FN?$FL?$CFs?$FN?5Open?5Chaos?5Box@ ; `string'
EXTRN	_memcpy:PROC
EXTRN	_strcpy:PROC
EXTRN	__imp__EnterCriticalSection@4:PROC
EXTRN	__imp__LeaveCriticalSection@4:PROC
EXTRN	__imp__wsprintfA:PROC
EXTRN	_rand:PROC
EXTRN	__imp_?Get@CMsg@@QAEPADH@Z:PROC
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?gObjInventoryTrans@@YAHH@Z:PROC		; gObjInventoryTrans
EXTRN	?gObjGuildMasterCapacityTest@@YAHPAVOBJECTSTRUCT@@@Z:PROC ; gObjGuildMasterCapacityTest
EXTRN	?gObjGetPkTime@@YAHPAVOBJECTSTRUCT@@AAH1@Z:PROC	; gObjGetPkTime
EXTRN	?gObjItemTextSave@@YAXPAVOBJECTSTRUCT@@@Z:PROC	; gObjItemTextSave
EXTRN	?gObjWarehouseTextSave@@YAXPAVOBJECTSTRUCT@@@Z:PROC ; gObjWarehouseTextSave
EXTRN	?gUserFindDevilSquareInvitation@@YAHH@Z:PROC	; gUserFindDevilSquareInvitation
EXTRN	?gUserFindDevilSquareKeyEyes@@YAHH@Z:PROC	; gUserFindDevilSquareKeyEyes
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z:PROC ; ChatTargetSend
EXTRN	?GCGuildMasterQuestionSend@@YAXH@Z:PROC		; GCGuildMasterQuestionSend
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
EXTRN	?GCServerCmd@@YAXHEEE@Z:PROC			; GCServerCmd
EXTRN	?CheckUserCondition@CPkClearSystem@@QAEXPAVOBJECTSTRUCT@@@Z:PROC ; CPkClearSystem::CheckUserCondition
EXTRN	?GetNPCPkClearData@CPkClearSystem@@QAEHH@Z:PROC	; CPkClearSystem::GetNPCPkClearData
EXTRN	?CheckUserCondition@CResetSystem@@QAEXPAVOBJECTSTRUCT@@@Z:PROC ; CResetSystem::CheckUserCondition
EXTRN	?GetNPCResetData@CResetSystem@@QAEHH@Z:PROC	; CResetSystem::GetNPCResetData
EXTRN	?CheckUserCondition@CBuffHelper@@QAEXPAVOBJECTSTRUCT@@H@Z:PROC ; CBuffHelper::CheckUserCondition
EXTRN	?GetNPCData@CBuffHelper@@QAEHH@Z:PROC		; CBuffHelper::GetNPCData
EXTRN	?MakeItemNumber@@YAHHH@Z:PROC			; MakeItemNumber
EXTRN	?SearchUserDeleteQuestItem@CBloodCastle@@QAEXH@Z:PROC ; CBloodCastle::SearchUserDeleteQuestItem
EXTRN	?SetUserState@CBloodCastle@@QAEXHH@Z:PROC	; CBloodCastle::SetUserState
EXTRN	?CheckUserBridgeMember@CBloodCastle@@QAE_NHH@Z:PROC ; CBloodCastle::CheckUserBridgeMember
EXTRN	?GetCurrentState@CBloodCastle@@QAEHH@Z:PROC	; CBloodCastle::GetCurrentState
EXTRN	?CheckEnterItem@CBloodCastle@@QAEHH@Z:PROC	; CBloodCastle::CheckEnterItem
EXTRN	?CheckQuestItem@CBloodCastle@@QAEHH@Z:PROC	; CBloodCastle::CheckQuestItem
EXTRN	?CheckCanEnter@CBloodCastle@@QAE_NH@Z:PROC	; CBloodCastle::CheckCanEnter
EXTRN	?CheckPlayStart@CBloodCastle@@QAE_NH@Z:PROC	; CBloodCastle::CheckPlayStart
EXTRN	?CheckUserWinnerParty@CBloodCastle@@QAE_NHH@Z:PROC ; CBloodCastle::CheckUserWinnerParty
EXTRN	?CheckPartyExist@CBloodCastle@@QAE_NH@Z:PROC	; CBloodCastle::CheckPartyExist
EXTRN	?SetBridgeWinner@CBloodCastle@@QAE_NHH@Z:PROC	; CBloodCastle::SetBridgeWinner
EXTRN	?DataSendEventChip@@YAXPADH@Z:PROC		; DataSendEventChip
EXTRN	?NpcTalk@CQuestInfo@@QAEHPAVOBJECTSTRUCT@@0@Z:PROC ; CQuestInfo::NpcTalk
EXTRN	@__security_check_cookie@4:PROC
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObj@@3PAVOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?g_PkClearSystem@@3VCPkClearSystem@@A:BYTE	; g_PkClearSystem
EXTRN	?g_ResetSystem@@3VCResetSystem@@A:BYTE		; g_ResetSystem
EXTRN	?g_BuffHelper@@3VCBuffHelper@@A:BYTE		; g_BuffHelper
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	?bCanChaosBox@@3HA:DWORD			; bCanChaosBox
EXTRN	?gGuildCreate@@3HA:DWORD			; gGuildCreate
EXTRN	?gLanguage@@3HA:DWORD				; gLanguage
EXTRN	?gPkLimitFree@@3HA:DWORD			; gPkLimitFree
EXTRN	?gDevilSquareEvent@@3HA:DWORD			; gDevilSquareEvent
EXTRN	?gDQChaosSuccessRateLevel1@@3HA:DWORD		; gDQChaosSuccessRateLevel1
EXTRN	?gDQChaosSuccessRateLevel2@@3HA:DWORD		; gDQChaosSuccessRateLevel2
EXTRN	?gDQChaosSuccessRateLevel3@@3HA:DWORD		; gDQChaosSuccessRateLevel3
EXTRN	?gDQChaosSuccessRateLevel4@@3HA:DWORD		; gDQChaosSuccessRateLevel4
EXTRN	?gEnableEventNPCTalk@@3HA:DWORD			; gEnableEventNPCTalk
EXTRN	?gEnableServerDivision@@3HA:DWORD		; gEnableServerDivision
EXTRN	?g_DevilSquare@@3VCDevilSquare@@A:BYTE		; g_DevilSquare
EXTRN	?gQeustNpcTeleport@@3VCQeustNpcTeleport@@A:BYTE	; gQeustNpcTeleport
EXTRN	?g_BloodCastle@@3VCBloodCastle@@A:BYTE		; g_BloodCastle
EXTRN	?pEventObj@@3PAVOBJECTSTRUCT@@A:DWORD		; pEventObj
EXTRN	?g_QuestInfo@@3VCQuestInfo@@A:BYTE		; g_QuestInfo
EXTRN	___security_cookie:DWORD
_BSS	SEGMENT
?g_iChaosCastle_MonsterItems@@3PAY111HA DD 018H DUP (?)	; g_iChaosCastle_MonsterItems
_BSS	ENDS
CRT$XCU	SEGMENT
?g_iChaosCastle_MonsterItems$initializer$@@3P6AXXZA DD FLAT:??__Eg_iChaosCastle_MonsterItems@@YAXXZ ; g_iChaosCastle_MonsterItems$initializer$
CRT$XCU	ENDS
;	COMDAT ??_C@_0BI@EKFBANFN@?$FL?$CFs?$FN?$FL?$CFs?$FN?5Open?5Chaos?5Box@
CONST	SEGMENT
??_C@_0BI@EKFBANFN@?$FL?$CFs?$FN?$FL?$CFs?$FN?5Open?5Chaos?5Box@ DB '[%s]'
	DB	'[%s] Open Chaos Box', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@KJEEOOOJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5is?5Already?5Opening?5PSh@
CONST	SEGMENT
??_C@_0DD@KJEEOOOJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5is?5Already?5Opening?5PSh@ DB '['
	DB	'%s][%s] is Already Opening PShop, ChaosBox Failed', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EC@IJDIINJB@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
CONST	SEGMENT
??_C@_0EC@IJDIINJB@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@ DB '['
	DB	'Blood Castle] (%d) (Account:%s, Name:%s) Winner Already Exist'
	DB	' !!', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0FO@BJDLMIAN@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
CONST	SEGMENT
??_C@_0FO@BJDLMIAN@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@ DB '['
	DB	'Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle'
	DB	' Quest - More Party to register', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0EF@JFCICCDP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
CONST	SEGMENT
??_C@_0EF@JFCICCDP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@ DB '['
	DB	'Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle'
	DB	' Quest', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EM@MPNDNNH@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@
CONST	SEGMENT
??_C@_0EM@MPNDNNH@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@ DB '['
	DB	'Blood Castle] (%d) Blood Castle Quest Succeed Result -> Win Q'
	DB	'uest [%s][%s]', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FH@ONKNIFFP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@
CONST	SEGMENT
??_C@_0FH@ONKNIFFP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@ DB '['
	DB	'Blood Castle] (%d) Blood Castle Quest Succeed Result -> Destr'
	DB	'oy Saint Status [%s][%s]', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0FG@CNLFICGI@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@
CONST	SEGMENT
??_C@_0FG@CNLFICGI@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@ DB '['
	DB	'Blood Castle] (%d) Blood Castle Quest Succeed Result -> Destr'
	DB	'oy Castle Door [%s][%s]', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@BCJAGFAG@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Ta@
CONST	SEGMENT
??_C@_0DA@BCJAGFAG@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Ta@ DB '['
	DB	'Blood Castle] (%d) [%s][%s] Talk to Angel King', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CN@BIAKPPND@?$LM?$KN?$LJ?v?$LK?P?G?R?5?$LB?b?$LA?$KD?$LP?$KB?$LE?B?5?$LB?f?$LF?e?$LI?$KG?5?$LL?$PN?$LM?$LK?G?R@
CONST	SEGMENT
??_C@_0CN@BIAKPPND@?$LM?$KN?$LJ?v?$LK?P?G?R?5?$LB?b?$LA?$KD?$LP?$KB?$LE?B?5?$LB?f?$LF?e?$LI?$KG?5?$LL?$PN?$LM?$LK?G?R@ DB 0bcH
	DB	0adH, 0b9H, 0f6H, 0baH, 0d0H, 0c7H, 0d2H, ' ', 0b1H, 0e2H, 0b0H
	DB	0a3H, 0bfH, 0a1H, 0b4H, 0c2H, ' ', 0b1H, 0e6H, 0b5H, 0e5H, 0b8H
	DB	0a6H, ' ', 0bbH, 0fdH, 0bcH, 0baH, 0c7H, 0d2H, 0bcH, 0f6H, 0b0H
	DB	0a1H, ' ', 0beH, 0f8H, 0bdH, 0c0H, 0b4H, 0cfH, 0b4H, 0d9H, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@FMJKLKBP@QeustNpc?5RefCount?5Inc?5?$DN?5?$CFd@
CONST	SEGMENT
??_C@_0BL@FMJKLKBP@QeustNpc?5RefCount?5Inc?5?$DN?5?$CFd@ DB 'QeustNpc Ref'
	DB	'Count Inc = %d', 00H			; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcBuffHelperCheck@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcBuffHelperCheck@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcBuffHelperCheck, COMDAT

; 2915 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2916 : 	if ( g_BuffHelper.GetNPCData(lpNpc->m_Index) != FALSE )

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0000c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0000e	51		 push	 ecx
  0000f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BuffHelper@@3VCBuffHelper@@A ; g_BuffHelper
  00014	e8 00 00 00 00	 call	 ?GetNPCData@CBuffHelper@@QAEHH@Z ; CBuffHelper::GetNPCData
  00019	85 c0		 test	 eax, eax
  0001b	74 1b		 je	 SHORT $LN2@NpcBuffHel

; 2917 : 	{
; 2918 : 		g_BuffHelper.CheckUserCondition(lpObj, lpNpc->m_Index);

  0001d	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  00020	8b 08		 mov	 ecx, DWORD PTR [eax]
  00022	51		 push	 ecx
  00023	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00026	52		 push	 edx
  00027	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BuffHelper@@3VCBuffHelper@@A ; g_BuffHelper
  0002c	e8 00 00 00 00	 call	 ?CheckUserCondition@CBuffHelper@@QAEXPAVOBJECTSTRUCT@@H@Z ; CBuffHelper::CheckUserCondition

; 2919 : 		return TRUE;

  00031	b8 01 00 00 00	 mov	 eax, 1
  00036	eb 02		 jmp	 SHORT $LN1@NpcBuffHel
$LN2@NpcBuffHel:

; 2920 : 	}
; 2921 : 
; 2922 : 	return FALSE;

  00038	33 c0		 xor	 eax, eax
$LN1@NpcBuffHel:

; 2923 : }

  0003a	5f		 pop	 edi
  0003b	5e		 pop	 esi
  0003c	5b		 pop	 ebx
  0003d	8b e5		 mov	 esp, ebp
  0003f	5d		 pop	 ebp
  00040	c3		 ret	 0
?NpcBuffHelperCheck@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcBuffHelperCheck
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcResetCheck@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcResetCheck@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcResetCheck, COMDAT

; 2904 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2905 : 	if ( g_ResetSystem.GetNPCResetData(lpNpc->m_Index) != FALSE )

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0000c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0000e	51		 push	 ecx
  0000f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ResetSystem@@3VCResetSystem@@A ; g_ResetSystem
  00014	e8 00 00 00 00	 call	 ?GetNPCResetData@CResetSystem@@QAEHH@Z ; CResetSystem::GetNPCResetData
  00019	85 c0		 test	 eax, eax
  0001b	74 15		 je	 SHORT $LN2@NpcResetCh

; 2906 : 	{
; 2907 : 		g_ResetSystem.CheckUserCondition(lpObj);

  0001d	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00020	50		 push	 eax
  00021	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ResetSystem@@3VCResetSystem@@A ; g_ResetSystem
  00026	e8 00 00 00 00	 call	 ?CheckUserCondition@CResetSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CResetSystem::CheckUserCondition

; 2908 : 		return TRUE;

  0002b	b8 01 00 00 00	 mov	 eax, 1
  00030	eb 02		 jmp	 SHORT $LN1@NpcResetCh
$LN2@NpcResetCh:

; 2909 : 	}
; 2910 : 
; 2911 : 	return FALSE;

  00032	33 c0		 xor	 eax, eax
$LN1@NpcResetCh:

; 2912 : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	5b		 pop	 ebx
  00037	8b e5		 mov	 esp, ebp
  00039	5d		 pop	 ebp
  0003a	c3		 ret	 0
?NpcResetCheck@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcResetCheck
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcPkClearCheck@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcPkClearCheck@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcPkClearCheck, COMDAT

; 2893 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2894 : 	if ( g_PkClearSystem.GetNPCPkClearData(lpNpc->m_Index) != FALSE )

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0000c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0000e	51		 push	 ecx
  0000f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_PkClearSystem@@3VCPkClearSystem@@A ; g_PkClearSystem
  00014	e8 00 00 00 00	 call	 ?GetNPCPkClearData@CPkClearSystem@@QAEHH@Z ; CPkClearSystem::GetNPCPkClearData
  00019	85 c0		 test	 eax, eax
  0001b	74 15		 je	 SHORT $LN2@NpcPkClear

; 2895 : 	{
; 2896 : 		g_PkClearSystem.CheckUserCondition(lpObj);

  0001d	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00020	50		 push	 eax
  00021	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_PkClearSystem@@3VCPkClearSystem@@A ; g_PkClearSystem
  00026	e8 00 00 00 00	 call	 ?CheckUserCondition@CPkClearSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CPkClearSystem::CheckUserCondition

; 2897 : 		return TRUE;

  0002b	b8 01 00 00 00	 mov	 eax, 1
  00030	eb 02		 jmp	 SHORT $LN1@NpcPkClear
$LN2@NpcPkClear:

; 2898 : 	}
; 2899 : 
; 2900 : 	return FALSE;

  00032	33 c0		 xor	 eax, eax
$LN1@NpcPkClear:

; 2901 : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	5b		 pop	 ebx
  00037	8b e5		 mov	 esp, ebp
  00039	5d		 pop	 ebp
  0003a	c3		 ret	 0
?NpcPkClearCheck@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcPkClearCheck
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcDarkSpiritTrainer@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_pResult$1 = -8						; size = 8
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcDarkSpiritTrainer@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcDarkSpiritTrainer, COMDAT

; 1782 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1783 : 	if( bCanChaosBox == TRUE )

  00009	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?bCanChaosBox@@3HA, 1 ; bCanChaosBox
  00010	0f 85 2e 01 00
	00		 jne	 $LN2@NpcDarkSpi

; 1784 : 	{
; 1785 : 		PMSG_TALKRESULT		pResult;
; 1786 : 
; 1787 : 		pResult.h.c				= PMHCE_BYTE;

  00016	c6 45 f8 c3	 mov	 BYTE PTR _pResult$1[ebp], 195 ; 000000c3H

; 1788 : 		pResult.h.headcode		= 0x30;

  0001a	c6 45 fa 30	 mov	 BYTE PTR _pResult$1[ebp+2], 48 ; 00000030H

; 1789 : 		pResult.h.size			= sizeof( pResult );

  0001e	c6 45 f9 08	 mov	 BYTE PTR _pResult$1[ebp+1], 8

; 1790 : #ifdef PERSONAL_SHOP_20040113		// 자신이나 상대방이 개인상점을 개설중이면 카오스 조합을 할 수 없다.
; 1791 : 		if (lpObj->m_bPShopOpen == true) {

  00022	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00025	0f b6 88 f8 0c
	00 00		 movzx	 ecx, BYTE PTR [eax+3320]
  0002c	83 f9 01	 cmp	 ecx, 1
  0002f	75 47		 jne	 SHORT $LN3@NpcDarkSpi

; 1792 : 			LogAdd("[%s][%s] is Already Opening PShop, ChaosBox Failed", lpObj->AccountID, lpObj->Name);

  00031	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00034	83 c0 73	 add	 eax, 115		; 00000073H
  00037	50		 push	 eax
  00038	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0003b	83 c1 68	 add	 ecx, 104		; 00000068H
  0003e	51		 push	 ecx
  0003f	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@KJEEOOOJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5is?5Already?5Opening?5PSh@
  00044	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0004a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1793 : 			GCServerMsgStringSend(lMsg.Get(1218), lpObj->m_Index, 1);		// "개인상점 개설 중에서는 카오스 조합을 사용하실 수 없습니다."

  0004d	6a 01		 push	 1
  0004f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00052	8b 08		 mov	 ecx, DWORD PTR [eax]
  00054	51		 push	 ecx
  00055	68 c2 04 00 00	 push	 1218			; 000004c2H
  0005a	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0005f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  00065	50		 push	 eax
  00066	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  0006b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1794 : 			return TRUE;

  0006e	b8 01 00 00 00	 mov	 eax, 1
  00073	e9 d1 00 00 00	 jmp	 $LN1@NpcDarkSpi
$LN3@NpcDarkSpi:

; 1795 : 		}
; 1796 : #endif
; 1797 : 		lpObj->m_IfState.type   = I_DARK_TRAINER;

  00078	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007b	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00081	80 e1 0f	 and	 cl, 15			; 0000000fH
  00084	80 c9 d0	 or	 cl, 208			; 000000d0H
  00087	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0008a	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1798 : 		lpObj->m_IfState.state	= 0;

  00090	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00093	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00099	80 e1 f3	 and	 cl, 243			; 000000f3H
  0009c	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0009f	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1799 : 		lpObj->m_IfState.use    = 1;

  000a5	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a8	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000ae	80 e1 fc	 and	 cl, 252			; 000000fcH
  000b1	80 c9 01	 or	 cl, 1
  000b4	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000b7	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1800 : 		pResult.result     = 0x07;

  000bd	c6 45 fb 07	 mov	 BYTE PTR _pResult$1[ebp+3], 7

; 1801 : 		
; 1802 : #ifdef CHAOS_MIX_TRANSACTION_BUXFIX_20040610
; 1803 : 		lpObj->bIsChaosMixCompleted = false;			// 카오스 조합 전에 '아직 조합이 완료되지 않았다' 로 초기값을 세팅

  000c1	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000c4	c6 80 81 10 00
	00 00		 mov	 BYTE PTR [eax+4225], 0

; 1804 : #endif
; 1805 : 
; 1806 : 		// 악마의 광장 조합 확률 추가
; 1807 : 		pResult.level1	= gDQChaosSuccessRateLevel1;

  000cb	a0 00 00 00 00	 mov	 al, BYTE PTR ?gDQChaosSuccessRateLevel1@@3HA
  000d0	88 45 fc	 mov	 BYTE PTR _pResult$1[ebp+4], al

; 1808 : 		pResult.level2	= gDQChaosSuccessRateLevel2;

  000d3	a0 00 00 00 00	 mov	 al, BYTE PTR ?gDQChaosSuccessRateLevel2@@3HA
  000d8	88 45 fd	 mov	 BYTE PTR _pResult$1[ebp+5], al

; 1809 : 		pResult.level3	= gDQChaosSuccessRateLevel3;

  000db	a0 00 00 00 00	 mov	 al, BYTE PTR ?gDQChaosSuccessRateLevel3@@3HA
  000e0	88 45 fe	 mov	 BYTE PTR _pResult$1[ebp+6], al

; 1810 : 		pResult.level4	= gDQChaosSuccessRateLevel4;

  000e3	a0 00 00 00 00	 mov	 al, BYTE PTR ?gDQChaosSuccessRateLevel4@@3HA
  000e8	88 45 ff	 mov	 BYTE PTR _pResult$1[ebp+7], al

; 1811 : #ifdef DEVILSQUARE_EXTEND_20050221		// !!! . 임시 -> 카오스 조합 추가
; 1812 : 		pResult.level5	= gDQChaosSuccessRateLevel5;
; 1813 : 		pResult.level6	= gDQChaosSuccessRateLevel6;
; 1814 : #endif
; 1815 : #ifdef ADD_DEVILSQURE_FOR_MASTER_LEVEL_20071010		// PMSG_TALKRESULT 광장7 정보 전송
; 1816 : 		pResult.level7	= gDQChaosSuccessRateLevel7;
; 1817 : #endif
; 1818 : 
; 1819 : 		DataSend(lpObj->m_Index, (LPBYTE)&pResult, pResult.h.size);

  000eb	0f b6 45 f9	 movzx	 eax, BYTE PTR _pResult$1[ebp+1]
  000ef	50		 push	 eax
  000f0	8d 4d f8	 lea	 ecx, DWORD PTR _pResult$1[ebp]
  000f3	51		 push	 ecx
  000f4	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000f7	8b 02		 mov	 eax, DWORD PTR [edx]
  000f9	50		 push	 eax
  000fa	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000ff	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1820 : 		
; 1821 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219				// 현재 적용된 세율 (카오스조합) 을 보내준다. (조련사는 별도로 보냄)
; 1822 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130
; 1823 : 		GCAnsCsMapSvrTaxInfo (lpObj->m_Index, 1, g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index));
; 1824 : #endif
; 1825 : #endif
; 1826 : 
; 1827 : 		gObjInventoryTrans(lpObj->m_Index);

  00102	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00105	8b 08		 mov	 ecx, DWORD PTR [eax]
  00107	51		 push	 ecx
  00108	e8 00 00 00 00	 call	 ?gObjInventoryTrans@@YAHH@Z ; gObjInventoryTrans
  0010d	83 c4 04	 add	 esp, 4

; 1828 : 		LogAddTD("[%s][%s] Open Chaos Box", lpObj->AccountID, lpObj->Name);

  00110	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00113	83 c0 73	 add	 eax, 115		; 00000073H
  00116	50		 push	 eax
  00117	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0011a	83 c1 68	 add	 ecx, 104		; 00000068H
  0011d	51		 push	 ecx
  0011e	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@EKFBANFN@?$FL?$CFs?$FN?$FL?$CFs?$FN?5Open?5Chaos?5Box@
  00123	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00129	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1829 : 		gObjItemTextSave(lpObj);

  0012c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0012f	50		 push	 eax
  00130	e8 00 00 00 00	 call	 ?gObjItemTextSave@@YAXPAVOBJECTSTRUCT@@@Z ; gObjItemTextSave
  00135	83 c4 04	 add	 esp, 4

; 1830 : 		gObjWarehouseTextSave(lpObj);

  00138	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0013b	50		 push	 eax
  0013c	e8 00 00 00 00	 call	 ?gObjWarehouseTextSave@@YAXPAVOBJECTSTRUCT@@@Z ; gObjWarehouseTextSave
  00141	83 c4 04	 add	 esp, 4
$LN2@NpcDarkSpi:

; 1831 : 	}
; 1832 : 	return TRUE;

  00144	b8 01 00 00 00	 mov	 eax, 1
$LN1@NpcDarkSpi:

; 1833 : }

  00149	5f		 pop	 edi
  0014a	5e		 pop	 esi
  0014b	5b		 pop	 ebx
  0014c	8b e5		 mov	 esp, ebp
  0014e	5d		 pop	 ebp
  0014f	c3		 ret	 0
?NpcDarkSpiritTrainer@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcDarkSpiritTrainer
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcServerDivision@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcServerDivision@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcServerDivision, COMDAT

; 1392 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1393 : 	if( !gEnableServerDivision )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gEnableServerDivision@@3HA, 0 ; gEnableServerDivision
  00010	75 07		 jne	 SHORT $LN2@NpcServerD

; 1394 : 		return TRUE;

  00012	b8 01 00 00 00	 mov	 eax, 1
  00017	eb 6e		 jmp	 SHORT $LN1@NpcServerD
$LN2@NpcServerD:

; 1395 : 
; 1396 : 	if( lpObj->lpGuild )

  00019	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001c	83 b8 94 02 00
	00 00		 cmp	 DWORD PTR [eax+660], 0
  00023	74 1b		 je	 SHORT $LN3@NpcServerD

; 1397 : 	{	// 길드에 가입되어 있는 상태에서는 이동할수 없다
; 1398 : 		GCServerCmd(lpObj->m_Index, 6, 0, 0);	

  00025	6a 00		 push	 0
  00027	6a 00		 push	 0
  00029	6a 06		 push	 6
  0002b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0002e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00030	51		 push	 ecx
  00031	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00036	83 c4 10	 add	 esp, 16			; 00000010H

; 1399 : 		return TRUE;

  00039	b8 01 00 00 00	 mov	 eax, 1
  0003e	eb 47		 jmp	 SHORT $LN1@NpcServerD
$LN3@NpcServerD:

; 1400 : 	}	
; 1401 : 
; 1402 : 	lpObj->m_IfState.type   = I_SERVERDIVISION;	

  00040	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00043	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00049	80 e1 0f	 and	 cl, 15			; 0000000fH
  0004c	80 c9 b0	 or	 cl, 176			; 000000b0H
  0004f	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00052	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1403 : 	lpObj->m_IfState.state = 0;

  00058	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0005b	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00061	80 e1 f3	 and	 cl, 243			; 000000f3H
  00064	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00067	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1404 : 	lpObj->m_IfState.use = 1;

  0006d	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00070	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00076	80 e1 fc	 and	 cl, 252			; 000000fcH
  00079	80 c9 01	 or	 cl, 1
  0007c	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0007f	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1405 : 	
; 1406 : 	return FALSE;

  00085	33 c0		 xor	 eax, eax
$LN1@NpcServerD:

; 1407 : }

  00087	5f		 pop	 edi
  00088	5e		 pop	 esi
  00089	5b		 pop	 ebx
  0008a	8b e5		 mov	 esp, ebp
  0008c	5d		 pop	 ebp
  0008d	c3		 ret	 0
?NpcServerDivision@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcServerDivision
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcQuestCheck@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcQuestCheck@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcQuestCheck, COMDAT

; 1382 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1383 : 	if( g_QuestInfo.NpcTalk(lpNpc, lpObj) )

  00009	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000c	50		 push	 eax
  0000d	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00010	51		 push	 ecx
  00011	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_QuestInfo@@3VCQuestInfo@@A ; g_QuestInfo
  00016	e8 00 00 00 00	 call	 ?NpcTalk@CQuestInfo@@QAEHPAVOBJECTSTRUCT@@0@Z ; CQuestInfo::NpcTalk
  0001b	85 c0		 test	 eax, eax
  0001d	74 07		 je	 SHORT $LN2@NpcQuestCh

; 1384 : 		return TRUE;

  0001f	b8 01 00 00 00	 mov	 eax, 1
  00024	eb 02		 jmp	 SHORT $LN1@NpcQuestCh
$LN2@NpcQuestCh:

; 1385 : 
; 1386 : 	return FALSE;

  00026	33 c0		 xor	 eax, eax
$LN1@NpcQuestCh:

; 1387 : }

  00028	5f		 pop	 edi
  00029	5e		 pop	 esi
  0002a	5b		 pop	 ebx
  0002b	8b e5		 mov	 esp, ebp
  0002d	5d		 pop	 ebp
  0002e	c3		 ret	 0
?NpcQuestCheck@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcQuestCheck
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcWarehouse@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcWarehouse@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcWarehouse, COMDAT

; 1139 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1140 : #ifdef JAPAN_NPC_NEWTALK
; 1141 : 	if( lpNpc->MapNumber == 0 )
; 1142 : 	{	// 로랜시아 창고지기
; 1143 : 		GCServerCmd(lpObj->m_Index, 5, 2, 0);
; 1144 : 	}
; 1145 : 	else if( lpNpc->MapNumber == 3 )
; 1146 : 	{	// 데비아스 창고지기
; 1147 : 		GCServerCmd(lpObj->m_Index, 5, 4, 0);
; 1148 : 	}
; 1149 : #endif
; 1150 : 	/*
; 1151 : 	char szTemp[256];
; 1152 : 	int  rZen;
; 1153 : 
; 1154 : 	rZen = lpObj->Level*lpObj->Level*0.1;
; 1155 : 	if( rZen < 1 ) rZen = 1;
; 1156 : 
; 1157 : 	if( (lpObj->Money-rZen) < 1 ) 
; 1158 : 	{
; 1159 : 		wsprintf(szTemp, "창고를 사용하기 위해선 %d젠이 필요하네..", rZen);
; 1160 : 		ChatTargetSend(lpNpc, szTemp, lpObj->m_Index);
; 1161 : 		return TRUE;
; 1162 : 	}
; 1163 : 	*/
; 1164 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1165 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcWarehouse@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcWarehouse
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcNoriJangIn@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcNoriJangIn@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcNoriJangIn, COMDAT

; 1369 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1370 : #ifdef BLOOCASTLE_NPC_TALK_20031215
; 1371 : 	if (g_bBloodCastle) {
; 1372 : 		GCServerCmd(lpObj->m_Index, 1, 31, 0);
; 1373 : 	}
; 1374 : #endif	
; 1375 : 	//GCServerCmd(lpObj->m_Index, 5, 3, 0);
; 1376 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1377 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcNoriJangIn@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcNoriJangIn
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcRorensiaSmith@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcRorensiaSmith@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcRorensiaSmith, COMDAT

; 1336 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1337 : #ifdef BLOOCASTLE_NPC_TALK_20031215
; 1338 : 	if (g_bBloodCastle) {
; 1339 : 		GCServerCmd(lpObj->m_Index, 1, 27, 0);
; 1340 : 		return FALSE;
; 1341 : 	}
; 1342 : #endif
; 1343 : 
; 1344 : #ifdef JAPAN_NPC_NEWTALK	// 2004-01-15 0.97 일본 추가
; 1345 : 	// 로랜시아는 처음인가? ...
; 1346 : 	GCServerCmd(lpObj->m_Index, 5, 7, 0);	
; 1347 : #endif
; 1348 : 
; 1349 : //	GCServerCmd(lpObj->m_Index, 5, 0, 0);		// 일본 0.97 패치로 인해 주석처리 (2004.01.15)	
; 1350 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1351 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcRorensiaSmith@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcRorensiaSmith
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcDeviasWeapon@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcDeviasWeapon@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcDeviasWeapon, COMDAT

; 1770 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1771 : #ifdef BLOOCASTLE_NPC_TALK_20031215
; 1772 : 	if( g_bBloodCastle )
; 1773 : 		GCServerCmd(lpObj->m_Index, 1, 34, 0);	
; 1774 : #endif	
; 1775 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1776 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcDeviasWeapon@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcDeviasWeapon
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcRoadMerchant@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcRoadMerchant@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcRoadMerchant, COMDAT

; 1413 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1414 : #ifdef BLOOCASTLE_NPC_TALK_20031215
; 1415 : 	if (g_bBloodCastle) {
; 1416 : 		GCServerCmd(lpObj->m_Index, 1, 28, 0);
; 1417 : 	}
; 1418 : #endif
; 1419 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1420 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcRoadMerchant@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcRoadMerchant
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcRolensiaMadam@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcRolensiaMadam@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcRolensiaMadam, COMDAT

; 1760 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1761 : #ifdef BLOOCASTLE_NPC_TALK_20031215
; 1762 : 	if( g_bBloodCastle )
; 1763 : 		GCServerCmd(lpObj->m_Index, 1, 35, 0);
; 1764 : #endif	
; 1765 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1766 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcRolensiaMadam@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcRolensiaMadam
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcAngelMessanger@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_pResult$1 = -16					; size = 8
_iITEM_LEVEL$ = -8					; size = 4
_iIndex$ = -4						; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcAngelMessanger@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcAngelMessanger, COMDAT

; 1656 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1657 : #ifdef BLOOD_DEVILSQUARE_TRADE_BUG_FIX
; 1658 : 	if( lpObj->m_IfState.use > 0 )

  00009	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000c	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00012	80 e1 03	 and	 cl, 3
  00015	0f b6 d1	 movzx	 edx, cl
  00018	85 d2		 test	 edx, edx
  0001a	7e 0a		 jle	 SHORT $LN2@NpcAngelMe

; 1659 : 	{	// 창을 사용하고 있을때는.. 사용할수 없다
; 1660 : 		return TRUE;

  0001c	b8 01 00 00 00	 mov	 eax, 1
  00021	e9 15 01 00 00	 jmp	 $LN1@NpcAngelMe
$LN2@NpcAngelMe:

; 1661 : 	}
; 1662 : #endif
; 1663 : 	
; 1664 : #ifdef ADD_PK_USER_ENTER_LIMIT_EVENT_MAP_20060411
; 1665 : 	// 카오 유저는 입장할 수 없다.
; 1666 : 	int iIndex = lpObj->m_Index;

  00026	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00029	8b 08		 mov	 ecx, DWORD PTR [eax]
  0002b	89 4d fc	 mov	 DWORD PTR _iIndex$[ebp], ecx

; 1667 : 	if( gObj[iIndex].m_PK_Level >= PK_LEVEL_DEFAULT + 1 )

  0002e	69 45 fc a0 1b
	00 00		 imul	 eax, DWORD PTR _iIndex$[ebp], 7072
  00035	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0003b	0f be 94 01 fd
	00 00 00	 movsx	 edx, BYTE PTR [ecx+eax+253]
  00043	83 fa 04	 cmp	 edx, 4
  00046	7c 1c		 jl	 SHORT $LN3@NpcAngelMe

; 1668 : 	{		
; 1669 : #ifdef MODIFY_BLOODCASTLE_PK_USER_ENTER_MESSAGE_20070321	// 카오유저 입장시 메지시 주성
; 1670 : 		GCServerCmd( iIndex, MSGBOX_ENTERLIMIT_PKUSER_BLOODCASTLE, 0, 0 );	// 카오 유저는 입장할 수 없다는 메세지를 보낸다.

  00048	6a 00		 push	 0
  0004a	6a 00		 push	 0
  0004c	6a 38		 push	 56			; 00000038H
  0004e	8b 45 fc	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00051	50		 push	 eax
  00052	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00057	83 c4 10	 add	 esp, 16			; 00000010H

; 1671 : #else
; 1672 : 		GCServerCmd( iIndex, MSGBOX_ENTERLIMIT_PKUSER_CHAOSCASTLE, 0, 0 );	// 카오 유저는 입장할 수 없다는 메세지를 보낸다.
; 1673 : #endif
; 1674 : 		return TRUE;

  0005a	b8 01 00 00 00	 mov	 eax, 1
  0005f	e9 d7 00 00 00	 jmp	 $LN1@NpcAngelMe
$LN3@NpcAngelMe:

; 1675 : 	}
; 1676 : #endif
; 1677 : 	
; 1678 : 
; 1679 : 	INT iITEM_LEVEL = 0;

  00064	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _iITEM_LEVEL$[ebp], 0

; 1680 : 
; 1681 : 	if ( iITEM_LEVEL = g_BloodCastle.CheckEnterItem(lpObj->m_Index) )

  0006b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0006e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00070	51		 push	 ecx
  00071	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  00076	e8 00 00 00 00	 call	 ?CheckEnterItem@CBloodCastle@@QAEHH@Z ; CBloodCastle::CheckEnterItem
  0007b	89 45 f8	 mov	 DWORD PTR _iITEM_LEVEL$[ebp], eax
  0007e	83 7d f8 00	 cmp	 DWORD PTR _iITEM_LEVEL$[ebp], 0
  00082	0f 84 9d 00 00
	00		 je	 $LN4@NpcAngelMe

; 1682 : 	{
; 1683 : #ifdef ADD_PCS_EVENT_MAP_FREE_TICKET_20070110
; 1684 : 
; 1685 : #ifdef MODIFY_BLOODCASTLE_ENTER_ITEMCHECK_20070627
; 1686 : 		// 투명 망토가 있는 경우 레벨을 채크하여 입장이 가능한 상태인지 확인한다.
; 1687 : 		if( iITEM_LEVEL != 10 && g_BloodCastle.CheckEnterLevel( lpObj->m_Index, iITEM_LEVEL-1 ) != 0 )
; 1688 : 		{
; 1689 : 			// 레벨이 맞지 않는 경우 투명망토가 있는지 확인한다.
; 1690 : 			if( g_BloodCastle.CheckEnterFreeTicket( lpObj->m_Index ) == true )
; 1691 : 			{
; 1692 : 				iITEM_LEVEL = 10;
; 1693 : 			}
; 1694 : 		}
; 1695 : 	#endif // MODIFY_BLOODCASTLE_ENTER_ITEMCHECK_20070627
; 1696 : 
; 1697 : 		if( iITEM_LEVEL == 10 )			// 자유 입장권 아이템 사용
; 1698 : 		{
; 1699 : 			for( int i = 0 ; i < MAX_BLOODCASTLE_BRIDGE_COUNT + 1 ; i++ )
; 1700 : 			{
; 1701 : 				if( g_BloodCastle.CheckEnterLevel( lpObj->m_Index, i ) == 0 )
; 1702 : 				{
; 1703 : #ifdef MODIFY_BLOODCASTLE_ENTER_ITEMCHECK_20070627
; 1704 : 					iITEM_LEVEL = i;
; 1705 : #else
; 1706 : 					if( g_BloodCastle.GetCurrentState( i - 1 ) == BLOODCASTLE_STATE_CLOSED && g_BloodCastle.CheckCanEnter( i - 1 ) )
; 1707 : 					{
; 1708 : 						PMSG_TALKRESULT		pResult;
; 1709 : 						pResult.h.c				= PMHCE_BYTE;
; 1710 : 						pResult.h.headcode		= 0x30;
; 1711 : 						pResult.h.size			= sizeof( pResult );
; 1712 : 						pResult.result			= 0x06;
; 1713 : 						DataSend(lpObj->m_Index, (LPBYTE)&pResult, pResult.h.size);
; 1714 : 
; 1715 : #ifdef BLOOD_DEVILSQUARE_TRADE_BUG_FIX
; 1716 : 						lpObj->m_IfState.use    = 1;
; 1717 : 						lpObj->m_IfState.type   = I_ETCWINDOW;
; 1718 : #endif
; 1719 : 					}
; 1720 : 					else
; 1721 : 					{
; 1722 : 						GCServerCmd(lpObj->m_Index, 1, 20, 0);
; 1723 : 						break;
; 1724 : 					}
; 1725 : #endif // MODIFY_BLOODCASTLE_ENTER_ITEMCHECK_20070627
; 1726 : 				}
; 1727 : 			}
; 1728 : 		}
; 1729 : #endif // ADD_PCS_EVENT_MAP_FREE_TICKET_20070110
; 1730 : 
; 1731 : 		if ((g_BloodCastle.GetCurrentState(iITEM_LEVEL-1) == BLOODCASTLE_STATE_CLOSED) && g_BloodCastle.CheckCanEnter(iITEM_LEVEL-1)) {	// 조건을 다 충족

  00088	8b 45 f8	 mov	 eax, DWORD PTR _iITEM_LEVEL$[ebp]
  0008b	83 e8 01	 sub	 eax, 1
  0008e	50		 push	 eax
  0008f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  00094	e8 00 00 00 00	 call	 ?GetCurrentState@CBloodCastle@@QAEHH@Z ; CBloodCastle::GetCurrentState
  00099	83 f8 01	 cmp	 eax, 1
  0009c	75 71		 jne	 SHORT $LN6@NpcAngelMe
  0009e	8b 45 f8	 mov	 eax, DWORD PTR _iITEM_LEVEL$[ebp]
  000a1	83 e8 01	 sub	 eax, 1
  000a4	50		 push	 eax
  000a5	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  000aa	e8 00 00 00 00	 call	 ?CheckCanEnter@CBloodCastle@@QAE_NH@Z ; CBloodCastle::CheckCanEnter
  000af	0f b6 c8	 movzx	 ecx, al
  000b2	85 c9		 test	 ecx, ecx
  000b4	74 59		 je	 SHORT $LN6@NpcAngelMe

; 1732 : 			PMSG_TALKRESULT		pResult;
; 1733 : 			pResult.h.c				= PMHCE_BYTE;

  000b6	c6 45 f0 c3	 mov	 BYTE PTR _pResult$1[ebp], 195 ; 000000c3H

; 1734 : 			pResult.h.headcode		= 0x30;

  000ba	c6 45 f2 30	 mov	 BYTE PTR _pResult$1[ebp+2], 48 ; 00000030H

; 1735 : 			pResult.h.size			= sizeof( pResult );

  000be	c6 45 f1 08	 mov	 BYTE PTR _pResult$1[ebp+1], 8

; 1736 : 			pResult.result			= 0x06;

  000c2	c6 45 f3 06	 mov	 BYTE PTR _pResult$1[ebp+3], 6

; 1737 : 			DataSend(lpObj->m_Index, (LPBYTE)&pResult, pResult.h.size);

  000c6	0f b6 45 f1	 movzx	 eax, BYTE PTR _pResult$1[ebp+1]
  000ca	50		 push	 eax
  000cb	8d 4d f0	 lea	 ecx, DWORD PTR _pResult$1[ebp]
  000ce	51		 push	 ecx
  000cf	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000d2	8b 02		 mov	 eax, DWORD PTR [edx]
  000d4	50		 push	 eax
  000d5	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000da	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1738 : 
; 1739 : #ifdef BLOOD_DEVILSQUARE_TRADE_BUG_FIX
; 1740 : 			lpObj->m_IfState.use    = 1;

  000dd	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e0	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000e6	80 e1 fc	 and	 cl, 252			; 000000fcH
  000e9	80 c9 01	 or	 cl, 1
  000ec	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000ef	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1741 : 			lpObj->m_IfState.type   = I_ETCWINDOW;

  000f5	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000f8	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000fe	80 e1 0f	 and	 cl, 15			; 0000000fH
  00101	80 c9 c0	 or	 cl, 192			; 000000c0H
  00104	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00107	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1742 : #endif
; 1743 : 		}

  0010d	eb 14		 jmp	 SHORT $LN7@NpcAngelMe
$LN6@NpcAngelMe:

; 1744 : 		else {		// 아이템은 있는데 시간이 않되었다.
; 1745 : 			GCServerCmd(lpObj->m_Index, 1, 20, 0);	

  0010f	6a 00		 push	 0
  00111	6a 14		 push	 20			; 00000014H
  00113	6a 01		 push	 1
  00115	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00118	8b 08		 mov	 ecx, DWORD PTR [eax]
  0011a	51		 push	 ecx
  0011b	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00120	83 c4 10	 add	 esp, 16			; 00000010H
$LN7@NpcAngelMe:

; 1746 : 		}
; 1747 : 	}

  00123	eb 14		 jmp	 SHORT $LN5@NpcAngelMe
$LN4@NpcAngelMe:

; 1748 : 	else {			// 아이템은 없다.
; 1749 : 		GCServerCmd(lpObj->m_Index, 1, 21, 0);	

  00125	6a 00		 push	 0
  00127	6a 15		 push	 21			; 00000015H
  00129	6a 01		 push	 1
  0012b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0012e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00130	51		 push	 ecx
  00131	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00136	83 c4 10	 add	 esp, 16			; 00000010H
$LN5@NpcAngelMe:

; 1750 : 	}
; 1751 : 	
; 1752 : 	return FALSE;

  00139	33 c0		 xor	 eax, eax
$LN1@NpcAngelMe:

; 1753 : }

  0013b	5f		 pop	 edi
  0013c	5e		 pop	 esi
  0013d	5b		 pop	 ebx
  0013e	8b e5		 mov	 esp, ebp
  00140	5d		 pop	 ebp
  00141	c3		 ret	 0
?NpcAngelMessanger@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcAngelMessanger
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcAngelKing@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
tv167 = -76						; size = 4
tv70 = -76						; size = 4
tv168 = -72						; size = 4
tv71 = -72						; size = 4
_iITEM_LEVEL$ = -4					; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcAngelKing@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcAngelKing, COMDAT

; 1424 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1425 : 	INT iITEM_LEVEL = 0;

  00009	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _iITEM_LEVEL$[ebp], 0

; 1426 : 
; 1427 : 	if (!CHECK_LIMIT(lpObj->m_cBloodCastleIndex, MAX_BLOODCASTLE_BRIDGE_COUNT)) {

  00010	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00013	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  0001a	85 c9		 test	 ecx, ecx
  0001c	7d 09		 jge	 SHORT $LN21@NpcAngelKi
  0001e	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv71[ebp], 0
  00025	eb 25		 jmp	 SHORT $LN22@NpcAngelKi
$LN21@NpcAngelKi:
  00027	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0002a	0f be 82 d2 0c
	00 00		 movsx	 eax, BYTE PTR [edx+3282]
  00031	83 f8 06	 cmp	 eax, 6
  00034	7e 09		 jle	 SHORT $LN19@NpcAngelKi
  00036	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv70[ebp], 0
  0003d	eb 07		 jmp	 SHORT $LN20@NpcAngelKi
$LN19@NpcAngelKi:
  0003f	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv70[ebp], 1
$LN20@NpcAngelKi:
  00046	8b 4d b4	 mov	 ecx, DWORD PTR tv70[ebp]
  00049	89 4d b8	 mov	 DWORD PTR tv71[ebp], ecx
$LN22@NpcAngelKi:
  0004c	83 7d b8 00	 cmp	 DWORD PTR tv71[ebp], 0
  00050	75 1b		 jne	 SHORT $LN2@NpcAngelKi

; 1428 : 		GCServerCmd(lpObj->m_Index, 1, 24, 0);								// 다리의 인덱스가 틀리다면 더 찾아보라고 말한다.

  00052	6a 00		 push	 0
  00054	6a 18		 push	 24			; 00000018H
  00056	6a 01		 push	 1
  00058	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0005b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005d	51		 push	 ecx
  0005e	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00063	83 c4 10	 add	 esp, 16			; 00000010H

; 1429 : 		return FALSE;

  00066	33 c0		 xor	 eax, eax
  00068	e9 4f 05 00 00	 jmp	 $LN1@NpcAngelKi
$LN2@NpcAngelKi:

; 1430 : 	}
; 1431 : 
; 1432 : 	LogAddTD ("[Blood Castle] (%d) [%s][%s] Talk to Angel King",

  0006d	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00070	83 c0 73	 add	 eax, 115		; 00000073H
  00073	50		 push	 eax
  00074	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00077	83 c1 68	 add	 ecx, 104		; 00000068H
  0007a	51		 push	 ecx
  0007b	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0007e	0f be 82 d2 0c
	00 00		 movsx	 eax, BYTE PTR [edx+3282]
  00085	83 c0 01	 add	 eax, 1
  00088	50		 push	 eax
  00089	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@BCJAGFAG@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Ta@
  0008e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00094	83 c4 10	 add	 esp, 16			; 00000010H

; 1433 : 		lpObj->m_cBloodCastleIndex+1,
; 1434 : 		lpObj->AccountID,
; 1435 : 		lpObj->Name
; 1436 : 		);
; 1437 : 
; 1438 : 	if (g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_bBC_REWARDED) {

  00097	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0009a	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  000a1	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  000a7	0f b6 82 66 01
	00 00		 movzx	 eax, BYTE PTR ?g_BloodCastle@@3VCBloodCastle@@A[edx+358]
  000ae	85 c0		 test	 eax, eax
  000b0	74 1b		 je	 SHORT $LN3@NpcAngelKi

; 1439 : 		// 이 다리에 이미 보상이 이루어졌다면 퀘스트는 완료된 것이다. -> 수고했다고 말해준다.
; 1440 : 		GCServerCmd(lpObj->m_Index, 1, 46, 0);

  000b2	6a 00		 push	 0
  000b4	6a 2e		 push	 46			; 0000002eH
  000b6	6a 01		 push	 1
  000b8	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000bb	8b 08		 mov	 ecx, DWORD PTR [eax]
  000bd	51		 push	 ecx
  000be	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  000c3	83 c4 10	 add	 esp, 16			; 00000010H

; 1441 : 		return FALSE;

  000c6	33 c0		 xor	 eax, eax
  000c8	e9 ef 04 00 00	 jmp	 $LN1@NpcAngelKi
$LN3@NpcAngelKi:

; 1442 : 	}
; 1443 : 
; 1444 : 	if ((g_BloodCastle.GetCurrentState(lpObj->m_cBloodCastleIndex) != BLOODCASTLE_STATE_PLAYING) ||

  000cd	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d0	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  000d7	51		 push	 ecx
  000d8	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  000dd	e8 00 00 00 00	 call	 ?GetCurrentState@CBloodCastle@@QAEHH@Z ; CBloodCastle::GetCurrentState
  000e2	83 f8 02	 cmp	 eax, 2
  000e5	75 1c		 jne	 SHORT $LN5@NpcAngelKi
  000e7	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000ea	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  000f1	51		 push	 ecx
  000f2	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  000f7	e8 00 00 00 00	 call	 ?CheckPlayStart@CBloodCastle@@QAE_NH@Z ; CBloodCastle::CheckPlayStart
  000fc	0f b6 d0	 movzx	 edx, al
  000ff	85 d2		 test	 edx, edx
  00101	75 1b		 jne	 SHORT $LN4@NpcAngelKi
$LN5@NpcAngelKi:

; 1445 : 		(!g_BloodCastle.CheckPlayStart(lpObj->m_cBloodCastleIndex))
; 1446 : 		) 
; 1447 : 	{
; 1448 : 		GCServerCmd(lpObj->m_Index, 1, 24, 0);								// 경기시간이 아니면 더 찾아보라고 말한다.

  00103	6a 00		 push	 0
  00105	6a 18		 push	 24			; 00000018H
  00107	6a 01		 push	 1
  00109	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0010c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0010e	51		 push	 ecx
  0010f	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00114	83 c4 10	 add	 esp, 16			; 00000010H

; 1449 : 		return FALSE;

  00117	33 c0		 xor	 eax, eax
  00119	e9 9e 04 00 00	 jmp	 $LN1@NpcAngelKi
$LN4@NpcAngelKi:

; 1450 : 	}
; 1451 : 
; 1452 : #ifdef BLOODCASTLE_EVENT_5TH_20050531
; 1453 : 	if (lpObj->m_bBloodCastleComplete == true) {							// 이미 완료했다면 수고했다고 말해준다.

  0011e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00121	0f b6 88 d8 0c
	00 00		 movzx	 ecx, BYTE PTR [eax+3288]
  00128	83 f9 01	 cmp	 ecx, 1
  0012b	75 1b		 jne	 SHORT $LN6@NpcAngelKi

; 1454 : 		// 이때 보상은 이루어지지 않았을 수도 있다.
; 1455 : 		GCServerCmd(lpObj->m_Index, 1, 46, 0);			// !!! . 새로운 메시지

  0012d	6a 00		 push	 0
  0012f	6a 2e		 push	 46			; 0000002eH
  00131	6a 01		 push	 1
  00133	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00136	8b 08		 mov	 ecx, DWORD PTR [eax]
  00138	51		 push	 ecx
  00139	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  0013e	83 c4 10	 add	 esp, 16			; 00000010H

; 1456 : //		GCServerCmd(lpObj->m_Index, 1, 49, 0);			// !!! . 새로운 메시지
; 1457 : 		return FALSE;

  00141	33 c0		 xor	 eax, eax
  00143	e9 74 04 00 00	 jmp	 $LN1@NpcAngelKi
$LN6@NpcAngelKi:

; 1458 : 	}
; 1459 : #endif
; 1460 : 	
; 1461 : 	if ( CHECK_LIMIT(iITEM_LEVEL = g_BloodCastle.CheckQuestItem(lpObj->m_Index), 3) ) {

  00148	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0014b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0014d	51		 push	 ecx
  0014e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  00153	e8 00 00 00 00	 call	 ?CheckQuestItem@CBloodCastle@@QAEHH@Z ; CBloodCastle::CheckQuestItem
  00158	85 c0		 test	 eax, eax
  0015a	7d 09		 jge	 SHORT $LN25@NpcAngelKi
  0015c	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv168[ebp], 0
  00163	eb 31		 jmp	 SHORT $LN26@NpcAngelKi
$LN25@NpcAngelKi:
  00165	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00168	8b 02		 mov	 eax, DWORD PTR [edx]
  0016a	50		 push	 eax
  0016b	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  00170	e8 00 00 00 00	 call	 ?CheckQuestItem@CBloodCastle@@QAEHH@Z ; CBloodCastle::CheckQuestItem
  00175	83 f8 02	 cmp	 eax, 2
  00178	7e 09		 jle	 SHORT $LN23@NpcAngelKi
  0017a	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv167[ebp], 0
  00181	eb 07		 jmp	 SHORT $LN24@NpcAngelKi
$LN23@NpcAngelKi:
  00183	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv167[ebp], 1
$LN24@NpcAngelKi:
  0018a	8b 4d b4	 mov	 ecx, DWORD PTR tv167[ebp]
  0018d	89 4d fc	 mov	 DWORD PTR _iITEM_LEVEL$[ebp], ecx
  00190	8b 55 fc	 mov	 edx, DWORD PTR _iITEM_LEVEL$[ebp]
  00193	89 55 b8	 mov	 DWORD PTR tv168[ebp], edx
$LN26@NpcAngelKi:
  00196	8b 45 b8	 mov	 eax, DWORD PTR tv168[ebp]
  00199	89 45 fc	 mov	 DWORD PTR _iITEM_LEVEL$[ebp], eax
  0019c	83 7d fc 00	 cmp	 DWORD PTR _iITEM_LEVEL$[ebp], 0
  001a0	0f 84 36 03 00
	00		 je	 $LN7@NpcAngelKi

; 1462 : 		if (lpNpc->m_cBloodCastleIndex != lpObj->m_cBloodCastleIndex) {		// 같은 블러드캐슬 레벨이 아니라면 더 찾아보라고 말한다.

  001a6	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  001a9	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  001b0	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001b3	0f be 82 d2 0c
	00 00		 movsx	 eax, BYTE PTR [edx+3282]
  001ba	3b c8		 cmp	 ecx, eax
  001bc	74 1b		 je	 SHORT $LN9@NpcAngelKi

; 1463 : 			GCServerCmd(lpObj->m_Index, 1, 24, 0);

  001be	6a 00		 push	 0
  001c0	6a 18		 push	 24			; 00000018H
  001c2	6a 01		 push	 1
  001c4	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001c7	8b 08		 mov	 ecx, DWORD PTR [eax]
  001c9	51		 push	 ecx
  001ca	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  001cf	83 c4 10	 add	 esp, 16			; 00000010H

; 1464 : 			return FALSE;

  001d2	33 c0		 xor	 eax, eax
  001d4	e9 e3 03 00 00	 jmp	 $LN1@NpcAngelKi
$LN9@NpcAngelKi:

; 1465 : 		}
; 1466 : 
; 1467 : 		if (!g_BloodCastle.CheckUserBridgeMember(lpObj->m_cBloodCastleIndex, lpObj->m_Index)) {

  001d9	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001dc	8b 08		 mov	 ecx, DWORD PTR [eax]
  001de	51		 push	 ecx
  001df	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001e2	0f be 82 d2 0c
	00 00		 movsx	 eax, BYTE PTR [edx+3282]
  001e9	50		 push	 eax
  001ea	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  001ef	e8 00 00 00 00	 call	 ?CheckUserBridgeMember@CBloodCastle@@QAE_NHH@Z ; CBloodCastle::CheckUserBridgeMember
  001f4	0f b6 c8	 movzx	 ecx, al
  001f7	85 c9		 test	 ecx, ecx
  001f9	75 1b		 jne	 SHORT $LN10@NpcAngelKi

; 1468 : 			GCServerCmd(lpObj->m_Index, 1, 24, 0);							// 해당 다리의 멤버가 아니면 더 찾아보라고 말한다.

  001fb	6a 00		 push	 0
  001fd	6a 18		 push	 24			; 00000018H
  001ff	6a 01		 push	 1
  00201	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00204	8b 08		 mov	 ecx, DWORD PTR [eax]
  00206	51		 push	 ecx
  00207	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  0020c	83 c4 10	 add	 esp, 16			; 00000010H

; 1469 : 			return FALSE;

  0020f	33 c0		 xor	 eax, eax
  00211	e9 a6 03 00 00	 jmp	 $LN1@NpcAngelKi
$LN10@NpcAngelKi:

; 1470 : 		}
; 1471 : 
; 1472 : 		// 해당 케릭을 우승자로 지정한다.
; 1473 : 		g_BloodCastle.SetUserState(lpObj->m_Index, BC_USER_WINNER);

  00216	6a 02		 push	 2
  00218	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0021b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0021d	51		 push	 ecx
  0021e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  00223	e8 00 00 00 00	 call	 ?SetUserState@CBloodCastle@@QAEXHH@Z ; CBloodCastle::SetUserState

; 1474 : 
; 1475 : #ifndef BLOODCASTLE_EVENT_5TH_20050531
; 1476 : 		// 성공했다고 말해준다.
; 1477 : 		GCServerCmd(lpObj->m_Index, 1, 23, 0);
; 1478 : #endif
; 1479 : 
; 1480 : 		// 퀘스트를 성공한 사용자와 파티번호를 저장한다.
; 1481 : 		g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_iExtraEXP_Win_Quest_Party = lpObj->PartyNumber;

  00228	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0022b	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  00232	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  00238	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0023b	8b 88 88 02 00
	00		 mov	 ecx, DWORD PTR [eax+648]
  00241	89 8a e0 01 00
	00		 mov	 DWORD PTR ?g_BloodCastle@@3VCBloodCastle@@A[edx+480], ecx

; 1482 : 		g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_iExtraEXP_Win_Quest_Index = lpObj->m_Index;

  00247	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0024a	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  00251	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  00257	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0025a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0025c	89 8a e4 01 00
	00		 mov	 DWORD PTR ?g_BloodCastle@@3VCBloodCastle@@A[edx+484], ecx

; 1483 : 		memcpy (g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szWin_Quest_CharName, lpObj->Name, MAX_IDSTRING);

  00262	6a 0a		 push	 10			; 0000000aH
  00264	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00267	83 c0 73	 add	 eax, 115		; 00000073H
  0026a	50		 push	 eax
  0026b	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0026e	0f be 91 d2 0c
	00 00		 movsx	 edx, BYTE PTR [ecx+3282]
  00275	69 c2 04 02 00
	00		 imul	 eax, edx, 516
  0027b	05 e8 01 00 00	 add	 eax, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+488
  00280	50		 push	 eax
  00281	e8 00 00 00 00	 call	 _memcpy
  00286	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1484 : 		memcpy (g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szWin_Quest_AccountID, lpObj->AccountID, MAX_IDSTRING);

  00289	6a 0a		 push	 10			; 0000000aH
  0028b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0028e	83 c0 68	 add	 eax, 104		; 00000068H
  00291	50		 push	 eax
  00292	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00295	0f be 91 d2 0c
	00 00		 movsx	 edx, BYTE PTR [ecx+3282]
  0029c	69 c2 04 02 00
	00		 imul	 eax, edx, 516
  002a2	05 f3 01 00 00	 add	 eax, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+499
  002a7	50		 push	 eax
  002a8	e8 00 00 00 00	 call	 _memcpy
  002ad	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1485 : 		g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szWin_Quest_CharName[MAX_IDSTRING] = '\0';

  002b0	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002b3	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  002ba	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  002c0	b8 01 00 00 00	 mov	 eax, 1
  002c5	6b c8 0a	 imul	 ecx, eax, 10
  002c8	c6 84 0a e8 01
	00 00 00	 mov	 BYTE PTR ?g_BloodCastle@@3VCBloodCastle@@A[edx+ecx+488], 0

; 1486 : 		g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szWin_Quest_AccountID[MAX_IDSTRING] = '\0';

  002d0	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002d3	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  002da	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  002e0	b8 01 00 00 00	 mov	 eax, 1
  002e5	6b c8 0a	 imul	 ecx, eax, 10
  002e8	c6 84 0a f3 01
	00 00 00	 mov	 BYTE PTR ?g_BloodCastle@@3VCBloodCastle@@A[edx+ecx+499], 0

; 1487 : 
; 1488 : 		LogAddTD ("[Blood Castle] (%d) Blood Castle Quest Succeed Result -> Destroy Castle Door [%s][%s]", 

  002f0	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002f3	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  002fa	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  00300	81 c2 b3 01 00
	00		 add	 edx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+435
  00306	52		 push	 edx
  00307	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0030a	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  00311	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  00317	81 c2 a8 01 00
	00		 add	 edx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+424
  0031d	52		 push	 edx
  0031e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00321	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  00328	83 c1 01	 add	 ecx, 1
  0032b	51		 push	 ecx
  0032c	68 00 00 00 00	 push	 OFFSET ??_C@_0FG@CNLFICGI@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@
  00331	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00337	83 c4 10	 add	 esp, 16			; 00000010H

; 1489 : 			lpObj->m_cBloodCastleIndex+1, 
; 1490 : 			g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szKill_Door_AccountID,
; 1491 : 			g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szKill_Door_CharName
; 1492 : 			);
; 1493 : 		LogAddTD ("[Blood Castle] (%d) Blood Castle Quest Succeed Result -> Destroy Saint Status [%s][%s]",

  0033a	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0033d	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  00344	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  0034a	81 c2 c8 01 00
	00		 add	 edx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+456
  00350	52		 push	 edx
  00351	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00354	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  0035b	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  00361	81 c2 a8 01 00
	00		 add	 edx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+424
  00367	52		 push	 edx
  00368	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0036b	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  00372	83 c1 01	 add	 ecx, 1
  00375	51		 push	 ecx
  00376	68 00 00 00 00	 push	 OFFSET ??_C@_0FH@ONKNIFFP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@
  0037b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00381	83 c4 10	 add	 esp, 16			; 00000010H

; 1494 : 			lpObj->m_cBloodCastleIndex+1, 
; 1495 : 			g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szKill_Door_AccountID,
; 1496 : 			g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szKill_Status_CharName
; 1497 : 			);
; 1498 : 		LogAddTD ("[Blood Castle] (%d) Blood Castle Quest Succeed Result -> Win Quest [%s][%s]", 

  00384	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00387	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  0038e	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  00394	81 c2 e8 01 00
	00		 add	 edx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+488
  0039a	52		 push	 edx
  0039b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0039e	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  003a5	69 d1 04 02 00
	00		 imul	 edx, ecx, 516
  003ab	81 c2 f3 01 00
	00		 add	 edx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A+499
  003b1	52		 push	 edx
  003b2	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003b5	0f be 88 d2 0c
	00 00		 movsx	 ecx, BYTE PTR [eax+3282]
  003bc	83 c1 01	 add	 ecx, 1
  003bf	51		 push	 ecx
  003c0	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@MPNDNNH@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5Blood?5Castl@
  003c5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003cb	83 c4 10	 add	 esp, 16			; 00000010H

; 1499 : 			lpObj->m_cBloodCastleIndex+1, 
; 1500 : 			g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szWin_Quest_AccountID,
; 1501 : 			g_BloodCastle.m_BridgeData[lpObj->m_cBloodCastleIndex].m_szWin_Quest_CharName
; 1502 : 			);
; 1503 : 
; 1504 : #ifdef BLOODCASTLE_EVENT_5TH_20050531
; 1505 : 		if (g_BloodCastle.SetBridgeWinner(lpObj->m_cBloodCastleIndex, lpObj->m_Index) == true) {

  003ce	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003d1	8b 08		 mov	 ecx, DWORD PTR [eax]
  003d3	51		 push	 ecx
  003d4	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003d7	0f be 82 d2 0c
	00 00		 movsx	 eax, BYTE PTR [edx+3282]
  003de	50		 push	 eax
  003df	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  003e4	e8 00 00 00 00	 call	 ?SetBridgeWinner@CBloodCastle@@QAE_NHH@Z ; CBloodCastle::SetBridgeWinner
  003e9	0f b6 c8	 movzx	 ecx, al
  003ec	83 f9 01	 cmp	 ecx, 1
  003ef	0f 85 a1 00 00
	00		 jne	 $LN11@NpcAngelKi

; 1506 : 			lpObj->m_bBloodCastleComplete = true;

  003f5	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003f8	c6 80 d8 0c 00
	00 01		 mov	 BYTE PTR [eax+3288], 1

; 1507 : 
; 1508 : 			// 현재 우승자의 다리에 등록할 파티원이 있는지 확인한다.
; 1509 : 			if (g_BloodCastle.CheckPartyExist(lpObj->m_Index) == false) {

  003ff	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00402	8b 08		 mov	 ecx, DWORD PTR [eax]
  00404	51		 push	 ecx
  00405	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  0040a	e8 00 00 00 00	 call	 ?CheckPartyExist@CBloodCastle@@QAE_NH@Z ; CBloodCastle::CheckPartyExist
  0040f	0f b6 d0	 movzx	 edx, al
  00412	85 d2		 test	 edx, edx
  00414	75 40		 jne	 SHORT $LN13@NpcAngelKi

; 1510 : 				// 더 등록할 파티원이 없으면 성공처리
; 1511 : 				
; 1512 : /*
; 1513 : 				// 우승 케릭이 있는 다리에 보상을 한다.
; 1514 : 				g_BloodCastle.GiveReward_Win(lpObj->m_Index, lpObj->m_cBloodCastleIndex);
; 1515 : 
; 1516 : 				// 퀘스트를 종료한다.
; 1517 : 				g_BloodCastle.SetState(lpObj->m_cBloodCastleIndex, BLOODCASTLE_STATE_PLAYEND);
; 1518 : */
; 1519 : 
; 1520 : 				// 성공했다고 말해준다.
; 1521 : 				GCServerCmd(lpObj->m_Index, 1, 23, 0);		// !!! . 새로운 메시지

  00416	6a 00		 push	 0
  00418	6a 17		 push	 23			; 00000017H
  0041a	6a 01		 push	 1
  0041c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0041f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00421	51		 push	 ecx
  00422	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00427	83 c4 10	 add	 esp, 16			; 00000010H

; 1522 : //				GCServerCmd(lpObj->m_Index, 1, 47, 0);		// !!! . 새로운 메시지
; 1523 : 
; 1524 : 				LogAddTD("[Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle Quest",

  0042a	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0042d	83 c0 73	 add	 eax, 115		; 00000073H
  00430	50		 push	 eax
  00431	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00434	83 c1 68	 add	 ecx, 104		; 00000068H
  00437	51		 push	 ecx
  00438	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  0043b	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  00442	83 e8 0a	 sub	 eax, 10			; 0000000aH
  00445	50		 push	 eax
  00446	68 00 00 00 00	 push	 OFFSET ??_C@_0EF@JFCICCDP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
  0044b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00451	83 c4 10	 add	 esp, 16			; 00000010H

; 1525 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 다리 인덱스 변경
; 1526 : 					g_BloodCastle.GetBridgeIndexByMapNum( lpNpc->MapNumber ) + 1,
; 1527 : #else
; 1528 : 					lpNpc->MapNumber - MAP_INDEX_BLOODCASTLE1 +1,
; 1529 : #endif
; 1530 : 					lpObj->AccountID,
; 1531 : 					lpObj->Name
; 1532 : 					);
; 1533 : 			}

  00454	eb 3e		 jmp	 SHORT $LN14@NpcAngelKi
$LN13@NpcAngelKi:

; 1534 : 			else {
; 1535 : 				// 더 등록해야 할 파티원이 있음
; 1536 : 
; 1537 : 				// 성공했는데 기다려야 한다고 말해준다.
; 1538 : 				GCServerCmd(lpObj->m_Index, 1, 23, 0);		// !!! . 새로운 메시지

  00456	6a 00		 push	 0
  00458	6a 17		 push	 23			; 00000017H
  0045a	6a 01		 push	 1
  0045c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0045f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00461	51		 push	 ecx
  00462	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00467	83 c4 10	 add	 esp, 16			; 00000010H

; 1539 : //				GCServerCmd(lpObj->m_Index, 1, 47, 0);		// !!! . 새로운 메시지
; 1540 : 
; 1541 : 				LogAddTD("[Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle Quest - More Party to register",

  0046a	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0046d	83 c0 73	 add	 eax, 115		; 00000073H
  00470	50		 push	 eax
  00471	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00474	83 c1 68	 add	 ecx, 104		; 00000068H
  00477	51		 push	 ecx
  00478	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  0047b	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  00482	83 e8 0a	 sub	 eax, 10			; 0000000aH
  00485	50		 push	 eax
  00486	68 00 00 00 00	 push	 OFFSET ??_C@_0FO@BJDLMIAN@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
  0048b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00491	83 c4 10	 add	 esp, 16			; 00000010H
$LN14@NpcAngelKi:

; 1542 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 다리 인덱스 변경
; 1543 : 					g_BloodCastle.GetBridgeIndexByMapNum( lpNpc->MapNumber ) + 1,
; 1544 : #else
; 1545 : 					lpNpc->MapNumber - MAP_INDEX_BLOODCASTLE1 +1,
; 1546 : #endif
; 1547 : 					lpObj->AccountID,
; 1548 : 					lpObj->Name
; 1549 : 					);
; 1550 : 			}
; 1551 : 
; 1552 : 		}

  00494	eb 31		 jmp	 SHORT $LN12@NpcAngelKi
$LN11@NpcAngelKi:

; 1553 : 		else {
; 1554 : 			// 이미 우승자 있음 ? -> 심각한 에러
; 1555 : 			LogAddTD("[Blood Castle] (%d) (Account:%s, Name:%s) Winner Already Exist !!",

  00496	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00499	83 c0 73	 add	 eax, 115		; 00000073H
  0049c	50		 push	 eax
  0049d	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  004a0	83 c1 68	 add	 ecx, 104		; 00000068H
  004a3	51		 push	 ecx
  004a4	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  004a7	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  004ae	83 e8 0a	 sub	 eax, 10			; 0000000aH
  004b1	50		 push	 eax
  004b2	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@IJDIINJB@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
  004b7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  004bd	83 c4 10	 add	 esp, 16			; 00000010H

; 1556 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 다리 인덱스 변경
; 1557 : 				g_BloodCastle.GetBridgeIndexByMapNum( lpNpc->MapNumber ) + 1,
; 1558 : #else
; 1559 : 				lpNpc->MapNumber - MAP_INDEX_BLOODCASTLE1 +1,
; 1560 : #endif
; 1561 : 				lpObj->AccountID,
; 1562 : 				lpObj->Name
; 1563 : 				);
; 1564 : 			return FALSE;

  004c0	33 c0		 xor	 eax, eax
  004c2	e9 f5 00 00 00	 jmp	 $LN1@NpcAngelKi
$LN12@NpcAngelKi:

; 1565 : 		}
; 1566 : 
; 1567 : 		// 퀘스트 아이템을 찾아서 없애준다.
; 1568 : 		g_BloodCastle.SearchUserDeleteQuestItem(lpObj->m_Index);

  004c7	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ca	8b 08		 mov	 ecx, DWORD PTR [eax]
  004cc	51		 push	 ecx
  004cd	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  004d2	e8 00 00 00 00	 call	 ?SearchUserDeleteQuestItem@CBloodCastle@@QAEXH@Z ; CBloodCastle::SearchUserDeleteQuestItem

; 1569 : #else
; 1570 : 		// 우승 케릭이 있는 다리에 보상을 한다.
; 1571 : 		g_BloodCastle.GiveReward_Win(lpObj->m_Index, lpObj->m_cBloodCastleIndex);
; 1572 : 
; 1573 : 		// 퀘스트를 종료한다.
; 1574 : 		g_BloodCastle.SetState(lpObj->m_cBloodCastleIndex, BLOODCASTLE_STATE_PLAYEND);
; 1575 : 
; 1576 : 		// 퀘스트 아이템을 찾아서 없애준다.
; 1577 : 		g_BloodCastle.SearchUserDeleteQuestItem(lpObj->m_Index);
; 1578 : 
; 1579 : 		LogAddTD("[Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle Quest",
; 1580 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 다리 인덱스 변경
; 1581 : 			g_BloodCastle.GetBridgeIndexByMapNum( lpNpc->MapNumber ) + 1,
; 1582 : #else
; 1583 : 			lpNpc->MapNumber - MAP_INDEX_BLOODCASTLE1 +1,
; 1584 : #endif
; 1585 : 			lpObj->AccountID,
; 1586 : 			lpObj->Name
; 1587 : 			);
; 1588 : #endif
; 1589 : 	}

  004d7	e9 de 00 00 00	 jmp	 $LN8@NpcAngelKi
$LN7@NpcAngelKi:

; 1590 : 	else {
; 1591 : #ifdef BLOODCASTLE_EVENT_5TH_20050531
; 1592 : 		// 만약 절대무기를 가지고 있지 않다면 가지고 있는 사람과 같은 파티원인지 확인한다.
; 1593 : 		if (g_BloodCastle.CheckUserWinnerParty(lpObj->m_cBloodCastleIndex, lpObj->m_Index) == true) {

  004dc	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004df	8b 08		 mov	 ecx, DWORD PTR [eax]
  004e1	51		 push	 ecx
  004e2	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004e5	0f be 82 d2 0c
	00 00		 movsx	 eax, BYTE PTR [edx+3282]
  004ec	50		 push	 eax
  004ed	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  004f2	e8 00 00 00 00	 call	 ?CheckUserWinnerParty@CBloodCastle@@QAE_NHH@Z ; CBloodCastle::CheckUserWinnerParty
  004f7	0f b6 c8	 movzx	 ecx, al
  004fa	83 f9 01	 cmp	 ecx, 1
  004fd	0f 85 a3 00 00
	00		 jne	 $LN15@NpcAngelKi

; 1594 : 			lpObj->m_bBloodCastleComplete = true;

  00503	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00506	c6 80 d8 0c 00
	00 01		 mov	 BYTE PTR [eax+3288], 1

; 1595 : 
; 1596 : 			// 현재 우승자의 다리에 등록할 파티원이 있는지 확인한다.
; 1597 : 			if (g_BloodCastle.CheckPartyExist(lpObj->m_Index) == false) {

  0050d	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00510	8b 08		 mov	 ecx, DWORD PTR [eax]
  00512	51		 push	 ecx
  00513	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  00518	e8 00 00 00 00	 call	 ?CheckPartyExist@CBloodCastle@@QAE_NH@Z ; CBloodCastle::CheckPartyExist
  0051d	0f b6 d0	 movzx	 edx, al
  00520	85 d2		 test	 edx, edx
  00522	75 40		 jne	 SHORT $LN16@NpcAngelKi

; 1598 : 				// 더 등록할 파티원이 없으면 성공처리
; 1599 : 				
; 1600 : /*
; 1601 : 				// 우승 케릭이 있는 다리에 보상을 한다.
; 1602 : 				g_BloodCastle.GiveReward_Win(lpObj->m_Index, lpObj->m_cBloodCastleIndex);
; 1603 : 
; 1604 : 				// 퀘스트를 종료한다.
; 1605 : 				g_BloodCastle.SetState(lpObj->m_cBloodCastleIndex, BLOODCASTLE_STATE_PLAYEND);
; 1606 : */
; 1607 : 
; 1608 : 				// 성공했다고 말해준다.
; 1609 : 				GCServerCmd(lpObj->m_Index, 1, 23, 0);		// !!! . 새로운 메시지

  00524	6a 00		 push	 0
  00526	6a 17		 push	 23			; 00000017H
  00528	6a 01		 push	 1
  0052a	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0052d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0052f	51		 push	 ecx
  00530	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00535	83 c4 10	 add	 esp, 16			; 00000010H

; 1610 : //				GCServerCmd(lpObj->m_Index, 1, 48, 0);		// !!! . 새로운 메시지
; 1611 : 
; 1612 : 				LogAddTD("[Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle Quest",

  00538	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0053b	83 c0 73	 add	 eax, 115		; 00000073H
  0053e	50		 push	 eax
  0053f	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00542	83 c1 68	 add	 ecx, 104		; 00000068H
  00545	51		 push	 ecx
  00546	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00549	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  00550	83 e8 0a	 sub	 eax, 10			; 0000000aH
  00553	50		 push	 eax
  00554	68 00 00 00 00	 push	 OFFSET ??_C@_0EF@JFCICCDP@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
  00559	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0055f	83 c4 10	 add	 esp, 16			; 00000010H

; 1613 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 다리 인덱스 변경
; 1614 : 					g_BloodCastle.GetBridgeIndexByMapNum( lpNpc->MapNumber ) + 1,
; 1615 : #else
; 1616 : 					lpNpc->MapNumber - MAP_INDEX_BLOODCASTLE1 +1,
; 1617 : #endif
; 1618 : 					lpObj->AccountID,
; 1619 : 					lpObj->Name
; 1620 : 					);
; 1621 : 			}

  00562	eb 3e		 jmp	 SHORT $LN17@NpcAngelKi
$LN16@NpcAngelKi:

; 1622 : 			else {
; 1623 : 				// 더 등록해야 할 파티원이 있음
; 1624 : 
; 1625 : 				// 성공했는데 기다려야 한다고 말해준다.
; 1626 : 				GCServerCmd(lpObj->m_Index, 1, 23, 0);		// !!! . 새로운 메시지

  00564	6a 00		 push	 0
  00566	6a 17		 push	 23			; 00000017H
  00568	6a 01		 push	 1
  0056a	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0056d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0056f	51		 push	 ecx
  00570	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00575	83 c4 10	 add	 esp, 16			; 00000010H

; 1627 : //				GCServerCmd(lpObj->m_Index, 1, 48, 0);		// !!! . 새로운 메시지
; 1628 : 
; 1629 : 				LogAddTD("[Blood Castle] (%d) (Account:%s, Name:%s) Succeed Blood Castle Quest - More Party to register",

  00578	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0057b	83 c0 73	 add	 eax, 115		; 00000073H
  0057e	50		 push	 eax
  0057f	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00582	83 c1 68	 add	 ecx, 104		; 00000068H
  00585	51		 push	 ecx
  00586	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00589	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  00590	83 e8 0a	 sub	 eax, 10			; 0000000aH
  00593	50		 push	 eax
  00594	68 00 00 00 00	 push	 OFFSET ??_C@_0FO@BJDLMIAN@?$FLBlood?5Castle?$FN?5?$CI?$CFd?$CJ?5?$CIAccount?3?$CFs@
  00599	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0059f	83 c4 10	 add	 esp, 16			; 00000010H
$LN17@NpcAngelKi:

; 1630 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 다리 인덱스 변경
; 1631 : 					g_BloodCastle.GetBridgeIndexByMapNum( lpNpc->MapNumber ) + 1,
; 1632 : #else
; 1633 : 					lpNpc->MapNumber - MAP_INDEX_BLOODCASTLE1 +1,
; 1634 : #endif
; 1635 : 					lpObj->AccountID,
; 1636 : 					lpObj->Name
; 1637 : 					);
; 1638 : 			}
; 1639 : 
; 1640 : 			// 다른 메시지를 뿌려주어야 할 것
; 1641 : 			
; 1642 : 			// 퀘스트가 종료했는지 확인
; 1643 : 			
; 1644 : 			return FALSE;

  005a2	33 c0		 xor	 eax, eax
  005a4	eb 16		 jmp	 SHORT $LN1@NpcAngelKi
$LN15@NpcAngelKi:

; 1645 : 		}
; 1646 : #endif		
; 1647 : 
; 1648 : 		GCServerCmd(lpObj->m_Index, 1, 24, 0);

  005a6	6a 00		 push	 0
  005a8	6a 18		 push	 24			; 00000018H
  005aa	6a 01		 push	 1
  005ac	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005af	8b 08		 mov	 ecx, DWORD PTR [eax]
  005b1	51		 push	 ecx
  005b2	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  005b7	83 c4 10	 add	 esp, 16			; 00000010H
$LN8@NpcAngelKi:

; 1649 : 	}
; 1650 : 	
; 1651 : 	return FALSE;

  005ba	33 c0		 xor	 eax, eax
$LN1@NpcAngelKi:

; 1652 : }

  005bc	5f		 pop	 edi
  005bd	5e		 pop	 esi
  005be	5b		 pop	 ebx
  005bf	8b e5		 mov	 esp, ebp
  005c1	5d		 pop	 ebp
  005c2	c3		 ret	 0
?NpcAngelKing@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcAngelKing
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcEventChipNPC@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_pMsg$ = -56						; size = 20
_Result$1 = -36						; size = 12
_pMsgTha$2 = -24					; size = 20
__$ArrayPad$ = -4					; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcEventChipNPC@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcEventChipNPC, COMDAT

; 1221 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 78	 sub	 esp, 120		; 00000078H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi

; 1222 : 	// 거래중 이거나 상점 이용 중 일때는 사용할 수 없다.
; 1223 : 	if( lpObj->m_IfState.use > 0 )

  00013	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00016	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  0001c	80 e1 03	 and	 cl, 3
  0001f	0f b6 d1	 movzx	 edx, cl
  00022	85 d2		 test	 edx, edx
  00024	7e 0a		 jle	 SHORT $LN2@NpcEventCh

; 1224 : 	{
; 1225 : 		return TRUE;

  00026	b8 01 00 00 00	 mov	 eax, 1
  0002b	e9 bd 01 00 00	 jmp	 $LN1@NpcEventCh
$LN2@NpcEventCh:

; 1226 : 	}
; 1227 : 	
; 1228 : // comment_alice_050113 : NO JAPAN!!!! See the define.h
; 1229 : #ifdef EVENT_RENA_FOR_CASTLE_SIEGE_20041116
; 1230 : 	PMSG_REQ_VIEW_EC_MN	pForCastleMsg;	// 공성전 왕의직인 대신 레나로 이벤트 진행
; 1231 : 	PHeadSetB((LPBYTE)&pForCastleMsg, 0x01, sizeof(pForCastleMsg));	
; 1232 : 	
; 1233 : 	pForCastleMsg.iINDEX = lpObj->m_Index;
; 1234 : 	strcpy(pForCastleMsg.szUID, lpObj->AccountID);
; 1235 : 	
; 1236 : 	DataSendEventChip((char*)&pForCastleMsg, sizeof(pForCastleMsg));
; 1237 : 
; 1238 : 	lpObj->m_IfState.type = I_EVENTCHIP;	
; 1239 : 	lpObj->m_IfState.state = 0;
; 1240 : 	lpObj->m_IfState.use = 1;
; 1241 : 
; 1242 : 	return TRUE;
; 1243 : 
; 1244 : #endif // EVENT_RENA_FOR_CASTLE_SIEGE_20041116
; 1245 : 
; 1246 : #ifdef EVENT_RENA_20040909 // 레나 이벤트
; 1247 : 	if (lpNpc->MapNumber == MAP_INDEX_RORENCIA) // 로렌시아

  00030	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  00033	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  0003a	85 c9		 test	 ecx, ecx
  0003c	0f 85 90 00 00
	00		 jne	 $LN3@NpcEventCh

; 1248 : 	{
; 1249 : 		PMSG_REQ_VIEW_EC_MN	pMsgTha;
; 1250 : 		PHeadSetB((LPBYTE)&pMsgTha, 0x01, sizeof(pMsgTha));	

  00042	6a 14		 push	 20			; 00000014H
  00044	6a 01		 push	 1
  00046	8d 45 e8	 lea	 eax, DWORD PTR _pMsgTha$2[ebp]
  00049	50		 push	 eax
  0004a	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0004f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1251 : 
; 1252 : 		pMsgTha.iINDEX = lpObj->m_Index;

  00052	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00055	8b 08		 mov	 ecx, DWORD PTR [eax]
  00057	89 4d ec	 mov	 DWORD PTR _pMsgTha$2[ebp+4], ecx

; 1253 : 		strcpy(pMsgTha.szUID, lpObj->AccountID);

  0005a	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0005d	83 c0 68	 add	 eax, 104		; 00000068H
  00060	50		 push	 eax
  00061	8d 4d f0	 lea	 ecx, DWORD PTR _pMsgTha$2[ebp+8]
  00064	51		 push	 ecx
  00065	e8 00 00 00 00	 call	 _strcpy
  0006a	83 c4 08	 add	 esp, 8

; 1254 : 
; 1255 : 		pEventObj =  lpNpc;

  0006d	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  00070	a3 00 00 00 00	 mov	 DWORD PTR ?pEventObj@@3PAVOBJECTSTRUCT@@A, eax ; pEventObj

; 1256 : 		
; 1257 : 		DataSendEventChip((char*)&pMsgTha, sizeof(pMsgTha));

  00075	6a 14		 push	 20			; 00000014H
  00077	8d 45 e8	 lea	 eax, DWORD PTR _pMsgTha$2[ebp]
  0007a	50		 push	 eax
  0007b	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  00080	83 c4 08	 add	 esp, 8

; 1258 : 		
; 1259 : 		lpObj->m_IfState.type = I_EVENTCHIP;	

  00083	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00086	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  0008c	80 e1 0f	 and	 cl, 15			; 0000000fH
  0008f	80 c9 90	 or	 cl, 144			; 00000090H
  00092	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00095	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1260 : 		lpObj->m_IfState.state = 0;

  0009b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0009e	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000a4	80 e1 f3	 and	 cl, 243			; 000000f3H
  000a7	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000aa	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1261 : 		lpObj->m_IfState.use = 1;

  000b0	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b3	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000b9	80 e1 fc	 and	 cl, 252			; 000000fcH
  000bc	80 c9 01	 or	 cl, 1
  000bf	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000c2	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1262 : 
; 1263 : 		return TRUE;

  000c8	b8 01 00 00 00	 mov	 eax, 1
  000cd	e9 1b 01 00 00	 jmp	 $LN1@NpcEventCh
$LN3@NpcEventCh:

; 1264 : 	}
; 1265 : 
; 1266 : #endif // EVENT_RENA_20040909
; 1267 : 	
; 1268 : #ifdef EVENT_STONE_OF_FRIENDSHIP_20040206  // 우정의 돌 이벤트
; 1269 : 	PMSG_REQ_VIEW_FRIENDSHIP_STONES	pMsg;	
; 1270 : 
; 1271 : 	PHeadSetB((LPBYTE)&pMsg, 0x11, sizeof(pMsg));	
; 1272 : 
; 1273 : 	pMsg.iINDEX = lpObj->m_Index;
; 1274 : 	memcpy(pMsg.szUID, lpObj->AccountID, MAX_IDSTRING);
; 1275 : 	memcpy(pMsg.szNAME, lpObj->Name, MAX_IDSTRING);
; 1276 : 	pMsg.wServerCode = gGameServerCode / 20;
; 1277 : 	pMsg.szUID[MAX_IDSTRING] = 0;
; 1278 : 	pMsg.szNAME[MAX_IDSTRING] = 0;
; 1279 : 
; 1280 : 	pEventObj =  lpNpc;
; 1281 : 	
; 1282 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));
; 1283 : 
; 1284 : 	lpObj->m_IfState.type = I_EVENTCHIP;	
; 1285 : 	lpObj->m_IfState.state = 0;
; 1286 : 	lpObj->m_IfState.use = 1;
; 1287 : 
; 1288 : 	return TRUE;
; 1289 : 	
; 1290 : #endif // EVENT_STONE_OF_FRIENDSHIP_20040206
; 1291 : 
; 1292 : #if defined ( EVENT_FRIENDSHIP_20040204 ) || defined ( EVENT_LOTTO )
; 1293 : 	if (lpNpc->MapNumber == MAP_INDEX_DEVIAS) // 데비아스

  000d2	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  000d5	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  000dc	83 f9 02	 cmp	 ecx, 2
  000df	75 7d		 jne	 SHORT $LN4@NpcEventCh

; 1294 : 	{
; 1295 : 		PMSG_EVENTCHIPINFO	Result;
; 1296 : 		PHeadSetB((LPBYTE)&Result, 0x94, sizeof(Result));

  000e1	6a 0c		 push	 12			; 0000000cH
  000e3	68 94 00 00 00	 push	 148			; 00000094H
  000e8	8d 45 dc	 lea	 eax, DWORD PTR _Result$1[ebp]
  000eb	50		 push	 eax
  000ec	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  000f1	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1297 : 
; 1298 : 		Result.Type = 2; // 복권 이벤트 설정

  000f4	c6 45 df 02	 mov	 BYTE PTR _Result$1[ebp+3], 2

; 1299 : 		
; 1300 : 		DataSend(lpObj->m_Index, (LPBYTE)&Result, Result.h.size);

  000f8	0f b6 45 dd	 movzx	 eax, BYTE PTR _Result$1[ebp+1]
  000fc	50		 push	 eax
  000fd	8d 4d dc	 lea	 ecx, DWORD PTR _Result$1[ebp]
  00100	51		 push	 ecx
  00101	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00104	8b 02		 mov	 eax, DWORD PTR [edx]
  00106	50		 push	 eax
  00107	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0010c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1301 : 
; 1302 : 		lpObj->m_IfState.type = I_EVENTCHIP;	

  0010f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00112	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00118	80 e1 0f	 and	 cl, 15			; 0000000fH
  0011b	80 c9 90	 or	 cl, 144			; 00000090H
  0011e	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00121	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1303 : 		lpObj->m_IfState.state = 0;

  00127	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0012a	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00130	80 e1 f3	 and	 cl, 243			; 000000f3H
  00133	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00136	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1304 : 		lpObj->m_IfState.use = 1;

  0013c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0013f	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  00145	80 e1 fc	 and	 cl, 252			; 000000fcH
  00148	80 c9 01	 or	 cl, 1
  0014b	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0014e	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1305 : 
; 1306 : 		return TRUE;

  00154	b8 01 00 00 00	 mov	 eax, 1
  00159	e9 8f 00 00 00	 jmp	 $LN1@NpcEventCh
$LN4@NpcEventCh:

; 1307 : 	}
; 1308 : 
; 1309 : #endif // EVENT_FRIENDSHIP_20040204 || EVENT_LOTTO
; 1310 : 
; 1311 : #ifdef EVENT_STONE // 스톤 이벤트
; 1312 : 	PMSG_REQ_VIEW_EC_MN	pMsg;
; 1313 : 
; 1314 : 	PHeadSetB((LPBYTE)&pMsg, 0x05, sizeof(pMsg));	

  0015e	6a 14		 push	 20			; 00000014H
  00160	6a 05		 push	 5
  00162	8d 45 c8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00165	50		 push	 eax
  00166	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0016b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1315 : 
; 1316 : 	pMsg.iINDEX = lpObj->m_Index;

  0016e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00171	8b 08		 mov	 ecx, DWORD PTR [eax]
  00173	89 4d cc	 mov	 DWORD PTR _pMsg$[ebp+4], ecx

; 1317 : 	strcpy(pMsg.szUID, lpObj->AccountID);

  00176	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00179	83 c0 68	 add	 eax, 104		; 00000068H
  0017c	50		 push	 eax
  0017d	8d 4d d0	 lea	 ecx, DWORD PTR _pMsg$[ebp+8]
  00180	51		 push	 ecx
  00181	e8 00 00 00 00	 call	 _strcpy
  00186	83 c4 08	 add	 esp, 8

; 1318 : 
; 1319 : 	pEventObj = lpNpc;

  00189	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0018c	a3 00 00 00 00	 mov	 DWORD PTR ?pEventObj@@3PAVOBJECTSTRUCT@@A, eax ; pEventObj

; 1320 : 	
; 1321 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  00191	6a 14		 push	 20			; 00000014H
  00193	8d 45 c8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00196	50		 push	 eax
  00197	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  0019c	83 c4 08	 add	 esp, 8

; 1322 : 	
; 1323 : 	lpObj->m_IfState.type = I_EVENTCHIP;	

  0019f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001a2	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  001a8	80 e1 0f	 and	 cl, 15			; 0000000fH
  001ab	80 c9 90	 or	 cl, 144			; 00000090H
  001ae	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001b1	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1324 : 	lpObj->m_IfState.state = 0;

  001b7	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001ba	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  001c0	80 e1 f3	 and	 cl, 243			; 000000f3H
  001c3	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001c6	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1325 : 	lpObj->m_IfState.use = 1;

  001cc	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001cf	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  001d5	80 e1 fc	 and	 cl, 252			; 000000fcH
  001d8	80 c9 01	 or	 cl, 1
  001db	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001de	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1326 : 
; 1327 : 	return TRUE;

  001e4	b8 01 00 00 00	 mov	 eax, 1
  001e9	eb 02		 jmp	 SHORT $LN1@NpcEventCh

; 1328 : 
; 1329 : #endif // EVENT_STONE
; 1330 : 
; 1331 : 	return FALSE;

  001eb	33 c0		 xor	 eax, eax
$LN1@NpcEventCh:

; 1332 : }

  001ed	5f		 pop	 edi
  001ee	5e		 pop	 esi
  001ef	5b		 pop	 ebx
  001f0	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001f3	33 cd		 xor	 ecx, ebp
  001f5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001fa	8b e5		 mov	 esp, ebp
  001fc	5d		 pop	 ebp
  001fd	c3		 ret	 0
?NpcEventChipNPC@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcEventChipNPC
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcDeviasMadam@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcDeviasMadam@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcDeviasMadam, COMDAT

; 1197 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1198 : 	if( gLanguage != 0 )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  00010	74 02		 je	 SHORT $LN2@NpcDeviasM

; 1199 : 	{
; 1200 : #ifndef DISABLE_NPC_MESSAGE_20050506
; 1201 : 		if( gDevilSquareEvent )
; 1202 : 			GCServerCmd(lpObj->m_Index, 1, NPC_DEVIASMADAM_MSGBOX, 0);	
; 1203 : #endif
; 1204 : 	}

  00012	eb 1d		 jmp	 SHORT $LN3@NpcDeviasM
$LN2@NpcDeviasM:

; 1205 : 	else
; 1206 : 	{
; 1207 : 		if( gEnableEventNPCTalk )

  00014	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gEnableEventNPCTalk@@3HA, 0 ; gEnableEventNPCTalk
  0001b	74 14		 je	 SHORT $LN3@NpcDeviasM

; 1208 : 			GCServerCmd(lpObj->m_Index, 4, 1, 0);	

  0001d	6a 00		 push	 0
  0001f	6a 01		 push	 1
  00021	6a 04		 push	 4
  00023	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00026	8b 08		 mov	 ecx, DWORD PTR [eax]
  00028	51		 push	 ecx
  00029	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  0002e	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@NpcDeviasM:

; 1209 : 
; 1210 : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 1211 : 		if (g_bBloodCastle) {
; 1212 : 			GCServerCmd(lpObj->m_Index, 1, 33, 0);
; 1213 : 		}
; 1214 : #endif
; 1215 : 	}
; 1216 : 	return FALSE;	

  00031	33 c0		 xor	 eax, eax

; 1217 : }

  00033	5f		 pop	 edi
  00034	5e		 pop	 esi
  00035	5b		 pop	 ebx
  00036	8b e5		 mov	 esp, ebp
  00038	5d		 pop	 ebp
  00039	c3		 ret	 0
?NpcDeviasMadam@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcDeviasMadam
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcNoriaRara@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcNoriaRara@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcNoriaRara, COMDAT

; 1168 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1169 : 	if( gLanguage != 0 )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  00010	74 02		 je	 SHORT $LN2@NpcNoriaRa

; 1170 : 	{
; 1171 : #ifndef DISABLE_NPC_MESSAGE_20050506
; 1172 : 		if( gDevilSquareEvent )
; 1173 : 			GCServerCmd(lpObj->m_Index, 1, NPC_NORIARARA_MSGBOX, 0);	
; 1174 : #ifdef JAPAN_NPC_NEWTALK
; 1175 : 		else
; 1176 : 		{
; 1177 : 			GCServerCmd(lpObj->m_Index, 5, 3, 0);
; 1178 : 		}
; 1179 : #endif
; 1180 : #endif
; 1181 : 	}

  00012	eb 1d		 jmp	 SHORT $LN3@NpcNoriaRa
$LN2@NpcNoriaRa:

; 1182 : 	else
; 1183 : 	{
; 1184 : 		if( gEnableEventNPCTalk )

  00014	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gEnableEventNPCTalk@@3HA, 0 ; gEnableEventNPCTalk
  0001b	74 14		 je	 SHORT $LN3@NpcNoriaRa

; 1185 : 			GCServerCmd(lpObj->m_Index, 4, 2, 0);	

  0001d	6a 00		 push	 0
  0001f	6a 02		 push	 2
  00021	6a 04		 push	 4
  00023	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00026	8b 08		 mov	 ecx, DWORD PTR [eax]
  00028	51		 push	 ecx
  00029	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  0002e	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@NpcNoriaRa:

; 1186 : 
; 1187 : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 1188 : 		if (g_bBloodCastle) {
; 1189 : 			GCServerCmd(lpObj->m_Index, 1, 30, 0);
; 1190 : 		}
; 1191 : #endif
; 1192 : 	}
; 1193 : 	return FALSE;	

  00031	33 c0		 xor	 eax, eax

; 1194 : }

  00033	5f		 pop	 edi
  00034	5e		 pop	 esi
  00035	5b		 pop	 ebx
  00036	8b e5		 mov	 esp, ebp
  00038	5d		 pop	 ebp
  00039	c3		 ret	 0
?NpcNoriaRara@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcNoriaRara
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcDeviasWareHousemen@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcDeviasWareHousemen@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcDeviasWareHousemen, COMDAT

; 1129 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1130 : #ifndef DISABLE_NPC_MESSAGE_20050506
; 1131 : 	if( gDevilSquareEvent )
; 1132 : 		GCServerCmd(lpObj->m_Index, 1, NPC_DEVIASWAREHOUSEMEN_MSGBOX, 0);	
; 1133 : #endif
; 1134 : 	return FALSE;	

  00009	33 c0		 xor	 eax, eax

; 1135 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcDeviasWareHousemen@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcDeviasWareHousemen
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcDeviasGuard@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcDeviasGuard@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcDeviasGuard, COMDAT

; 1110 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1111 : 	//GCServerCmd(lpObj->m_Index, 1, NPC_DEVIASGUARD_MSGBOX, 0);		
; 1112 : 	if( gLanguage != 0 )		
; 1113 : 	{
; 1114 : #ifndef DISABLE_NPC_MESSAGE_20050506
; 1115 : 		if( gDevilSquareEvent )
; 1116 : 			GCServerCmd(lpObj->m_Index, 1, NPC_DEVIASGUARD_MSGBOX, 0);
; 1117 : #endif
; 1118 : 	}
; 1119 : 		
; 1120 : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 1121 : 	if (g_bBloodCastle) {
; 1122 : 		GCServerCmd(lpObj->m_Index, 1, 25, 0);
; 1123 : 	}
; 1124 : #endif
; 1125 : 	return TRUE;

  00009	b8 01 00 00 00	 mov	 eax, 1

; 1126 : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?NpcDeviasGuard@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcDeviasGuard
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcDeviasWizard@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcDeviasWizard@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcDeviasWizard, COMDAT

; 1092 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1093 : 	if( gLanguage != 0 )		
; 1094 : 	{
; 1095 : #ifndef DISABLE_NPC_MESSAGE_20050506
; 1096 : 		if( gDevilSquareEvent )
; 1097 : 			GCServerCmd(lpObj->m_Index, 1, NPC_DEVIASWIZARD_MSGBOX, 0);	
; 1098 : #endif
; 1099 : 	}
; 1100 : 	
; 1101 : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 1102 : 	if (g_bBloodCastle) {
; 1103 : 		GCServerCmd(lpObj->m_Index, 1, 32, 0);
; 1104 : 	}
; 1105 : #endif
; 1106 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1107 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcDeviasWizard@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcDeviasWizard
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcPosionGirl@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcPosionGirl@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcPosionGirl, COMDAT

; 1051 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1052 : #ifdef CASTLE_POTION_NPC_20041222			// 공성측 물약파는 NPC
; 1053 : 	if (lpNpc->MapNumber == MAP_INDEX_CASTLESIEGE) {
; 1054 : 		if (g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE) {
; 1055 : 			if (lpObj->m_btCsJoinSide == CS_SIEGESIDE_DEFEND) {
; 1056 : 				INT iChatRnd	= rand() % 3;
; 1057 : 				switch (iChatRnd) {
; 1058 : 				case 0 :
; 1059 : 					ChatTargetSend(lpNpc, "적에게 팔 물건은 없어요.", lpObj->m_Index);
; 1060 : 					break;
; 1061 : 				case 1 :
; 1062 : 					ChatTargetSend(lpNpc, "빨리 사라지지 않으면 소리를 지를거에요.", lpObj->m_Index);
; 1063 : 					break;
; 1064 : 				case 2 :
; 1065 : 					ChatTargetSend(lpNpc, "여기 적군이 있어요. 누가 좀 도와주세요 !!", lpObj->m_Index);
; 1066 : 					break;
; 1067 : 				}
; 1068 : 				return TRUE;
; 1069 : 			}
; 1070 : 		}
; 1071 : 	}
; 1072 : #endif
; 1073 : 
; 1074 : 	if( gLanguage != 0 )		
; 1075 : 	{
; 1076 : #ifndef DISABLE_NPC_MESSAGE_20050506
; 1077 : 		if( gDevilSquareEvent )
; 1078 : 			GCServerCmd(lpObj->m_Index, 1, NPC_POSIONGIRL_MSGBOX, 0);	
; 1079 : #endif
; 1080 : 	}
; 1081 : 
; 1082 : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 1083 : 	if (g_bBloodCastle) {
; 1084 : 		GCServerCmd(lpObj->m_Index, 1, 29, 0);
; 1085 : 	}
; 1086 : #endif
; 1087 : 	
; 1088 : 	return FALSE;

  00009	33 c0		 xor	 eax, eax

; 1089 : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcPosionGirl@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcPosionGirl
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcRusipher@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_pResult$1 = -12					; size = 8
_aIndex$ = -4						; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcRusipher@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcRusipher, COMDAT

; 1006 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1007 : 	if( !gDevilSquareEvent )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gDevilSquareEvent@@3HA, 0 ; gDevilSquareEvent
  00010	75 0a		 jne	 SHORT $LN2@NpcRusiphe

; 1008 : 		return TRUE;

  00012	b8 01 00 00 00	 mov	 eax, 1
  00017	e9 ca 00 00 00	 jmp	 $LN1@NpcRusiphe
$LN2@NpcRusiphe:

; 1009 : 
; 1010 : 	int aIndex = lpObj->m_Index;

  0001c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00021	89 4d fc	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 1011 : 
; 1012 : 
; 1013 : #ifdef BLOOD_DEVILSQUARE_TRADE_BUG_FIX
; 1014 : 	if( lpObj->m_IfState.use > 0 )

  00024	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00027	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  0002d	80 e1 03	 and	 cl, 3
  00030	0f b6 d1	 movzx	 edx, cl
  00033	85 d2		 test	 edx, edx
  00035	7e 0a		 jle	 SHORT $LN3@NpcRusiphe

; 1015 : 	{	// 창을 사용하고 있을때는.. 사용할수 없다
; 1016 : 		return TRUE;

  00037	b8 01 00 00 00	 mov	 eax, 1
  0003c	e9 a5 00 00 00	 jmp	 $LN1@NpcRusiphe
$LN3@NpcRusiphe:

; 1017 : 	}
; 1018 : #endif
; 1019 : 
; 1020 : 	if( !gUserFindDevilSquareInvitation(aIndex) )

  00041	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00044	50		 push	 eax
  00045	e8 00 00 00 00	 call	 ?gUserFindDevilSquareInvitation@@YAHH@Z ; gUserFindDevilSquareInvitation
  0004a	83 c4 04	 add	 esp, 4
  0004d	85 c0		 test	 eax, eax
  0004f	75 16		 jne	 SHORT $LN4@NpcRusiphe

; 1021 : 	{	// 초대권이 없다
; 1022 : 		GCServerCmd(lpObj->m_Index, 1, NPC_RUSIPHER_MSGBOX, 0);

  00051	6a 00		 push	 0
  00053	6a 02		 push	 2
  00055	6a 01		 push	 1
  00057	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0005a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005c	51		 push	 ecx
  0005d	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00062	83 c4 10	 add	 esp, 16			; 00000010H

; 1023 : 	}

  00065	eb 7a		 jmp	 SHORT $LN5@NpcRusiphe
$LN4@NpcRusiphe:

; 1024 : 	else
; 1025 : 	{
; 1026 : 		if( g_DevilSquare.GetState() == DevilSquare_OPEN )

  00067	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_DevilSquare@@3VCDevilSquare@@A ; g_DevilSquare
  0006c	e8 00 00 00 00	 call	 ?GetState@CDevilSquare@@QAE?AW4eDevilSquareState@@XZ ; CDevilSquare::GetState
  00071	83 f8 01	 cmp	 eax, 1
  00074	75 57		 jne	 SHORT $LN6@NpcRusiphe

; 1027 : 		{	// 악마의 광장으로 갈수 있는 창을 열라고 한다
; 1028 : 			PMSG_TALKRESULT		pResult;
; 1029 : 
; 1030 : 			pResult.h.c				= PMHCE_BYTE;

  00076	c6 45 f4 c3	 mov	 BYTE PTR _pResult$1[ebp], 195 ; 000000c3H

; 1031 : 			pResult.h.headcode		= 0x30;

  0007a	c6 45 f6 30	 mov	 BYTE PTR _pResult$1[ebp+2], 48 ; 00000030H

; 1032 : 			pResult.h.size			= sizeof( pResult );

  0007e	c6 45 f5 08	 mov	 BYTE PTR _pResult$1[ebp+1], 8

; 1033 : 			pResult.result			= 0x04;

  00082	c6 45 f7 04	 mov	 BYTE PTR _pResult$1[ebp+3], 4

; 1034 : 			DataSend(aIndex, (LPBYTE)&pResult, pResult.h.size);	

  00086	0f b6 45 f5	 movzx	 eax, BYTE PTR _pResult$1[ebp+1]
  0008a	50		 push	 eax
  0008b	8d 4d f4	 lea	 ecx, DWORD PTR _pResult$1[ebp]
  0008e	51		 push	 ecx
  0008f	8b 55 fc	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00092	52		 push	 edx
  00093	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00098	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1035 : 
; 1036 : #ifdef BLOOD_DEVILSQUARE_TRADE_BUG_FIX
; 1037 : 			// 성공했을때. 인터페이스 사용한다는 체크를 해둔다
; 1038 : 			lpObj->m_IfState.use    = 1;

  0009b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0009e	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000a4	80 e1 fc	 and	 cl, 252			; 000000fcH
  000a7	80 c9 01	 or	 cl, 1
  000aa	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000ad	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1039 : 			lpObj->m_IfState.type   = I_ETCWINDOW;

  000b3	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b6	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  000bc	80 e1 0f	 and	 cl, 15			; 0000000fH
  000bf	80 c9 c0	 or	 cl, 192			; 000000c0H
  000c2	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000c5	88 8a 56 0c 00
	00		 mov	 BYTE PTR [edx+3158], cl

; 1040 : #endif
; 1041 : 		}		

  000cb	eb 14		 jmp	 SHORT $LN5@NpcRusiphe
$LN6@NpcRusiphe:

; 1042 : 		else
; 1043 : 		{	// 악마의 광장에 들어 갈수 없는 시간이다
; 1044 : 			GCServerCmd(lpObj->m_Index, 1, NPC_RUSIPHER_MSGBOX+1, 0);

  000cd	6a 00		 push	 0
  000cf	6a 03		 push	 3
  000d1	6a 01		 push	 1
  000d3	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d6	8b 08		 mov	 ecx, DWORD PTR [eax]
  000d8	51		 push	 ecx
  000d9	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  000de	83 c4 10	 add	 esp, 16			; 00000010H
$LN5@NpcRusiphe:

; 1045 : 		}
; 1046 : 	}
; 1047 : 	return TRUE;

  000e1	b8 01 00 00 00	 mov	 eax, 1
$LN1@NpcRusiphe:

; 1048 : }

  000e6	5f		 pop	 edi
  000e7	5e		 pop	 esi
  000e8	5b		 pop	 ebx
  000e9	8b e5		 mov	 esp, ebp
  000eb	5d		 pop	 ebp
  000ec	c3		 ret	 0
?NpcRusipher@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcRusipher
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcChaosGoblelin@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcChaosGoblelin@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcChaosGoblelin, COMDAT

; 908  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 909  : #ifdef JAPAN_NPC_NEWTALK
; 910  : 	if( !gDevilSquareEvent )
; 911  : 	{
; 912  : 		GCServerCmd(lpObj->m_Index, 5, 5, 0);
; 913  : 	}
; 914  : #endif
; 915  : 
; 916  : 	if( gUserFindDevilSquareKeyEyes(lpObj->m_Index) )

  00009	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0000e	51		 push	 ecx
  0000f	e8 00 00 00 00	 call	 ?gUserFindDevilSquareKeyEyes@@YAHH@Z ; gUserFindDevilSquareKeyEyes
  00014	83 c4 04	 add	 esp, 4

; 917  : 	{	// 이벤트 아이템이 있으면
; 918  : 		// MsgBox Index = 3 :"마족의 보물을 가져오셨군요. 당신에게 행운의 여신이 함께 해준다면 놀라운걸 얻게 됩니다."
; 919  : 
; 920  : #ifndef REMOVE_CHAOSMIX_NPC_MESSAGE_20050125
; 921  : 
; 922  : #ifndef GAMESERVER_TO_CASTLESIEGESERVER
; 923  : 		if( gDevilSquareEvent )
; 924  : #endif
; 925  : 			GCServerCmd(lpObj->m_Index, 1, NPC_CHAOSGOBLELIN_MSGBOX+1, 0);
; 926  : 
; 927  : #endif
; 928  : 
; 929  : 	}		
; 930  : 	else
; 931  : 	{
; 932  : 		if( gLanguage != 0 )
; 933  : 		{
; 934  : #ifndef REMOVE_CHAOSMIX_NPC_MESSAGE_20050125
; 935  : 
; 936  : #ifndef GAMESERVER_TO_CASTLESIEGESERVER
; 937  : 			if( gDevilSquareEvent )
; 938  : #endif
; 939  : 				GCServerCmd(lpObj->m_Index, 1, NPC_CHAOSGOBLELIN_MSGBOX, 0);
; 940  : #endif
; 941  : 		}
; 942  : 	}
; 943  : 	
; 944  : 	return FALSE;

  00017	33 c0		 xor	 eax, eax

; 945  : }

  00019	5f		 pop	 edi
  0001a	5e		 pop	 esi
  0001b	5b		 pop	 ebx
  0001c	8b e5		 mov	 esp, ebp
  0001e	5d		 pop	 ebp
  0001f	c3		 ret	 0
?NpcChaosGoblelin@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcChaosGoblelin
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcRolensiaGuard@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcRolensiaGuard@@YAHPAVOBJECTSTRUCT@@0@Z PROC		; NpcRolensiaGuard, COMDAT

; 882  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 883  : 	// Message박스를 보여달라고 요청한다
; 884  : 	// MsgBox Index = 0 : 요즘 마족들이 도아다니고 있다는 소문이 나돌고 있어, 전설에만 존재하는 줄 알았는데.. 그들이 왜 지상에 왜 지상에 나타난걸까?
; 885  : 	// MsgBox Index = 1 : 악마의 광장에 대해 알고 싶다면 루시퍼를 찾아보게.. 
; 886  : 	//GCServerCmd(lpObj->m_Index, 1, (rand()%2)+NPC_ROLENSIAGUARD_MSGBOX, 0);
; 887  : 	if( gLanguage != 0 )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  00010	74 02		 je	 SHORT $LN2@NpcRolensi

; 888  : 	{
; 889  : #ifndef DISABLE_NPC_MESSAGE_20050506
; 890  : 		if( gDevilSquareEvent )
; 891  : 			GCServerCmd(lpObj->m_Index, 1, (rand()%2)+NPC_ROLENSIAGUARD_MSGBOX, 0);	
; 892  : #endif
; 893  : 	}

  00012	eb 1d		 jmp	 SHORT $LN3@NpcRolensi
$LN2@NpcRolensi:

; 894  : 	else
; 895  : 	{
; 896  : 		if( gEnableEventNPCTalk )

  00014	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gEnableEventNPCTalk@@3HA, 0 ; gEnableEventNPCTalk
  0001b	74 14		 je	 SHORT $LN3@NpcRolensi

; 897  : 			GCServerCmd(lpObj->m_Index, 4, 0, 0);	

  0001d	6a 00		 push	 0
  0001f	6a 00		 push	 0
  00021	6a 04		 push	 4
  00023	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00026	8b 08		 mov	 ecx, DWORD PTR [eax]
  00028	51		 push	 ecx
  00029	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  0002e	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@NpcRolensi:

; 898  : 
; 899  : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 900  : 		if (g_bBloodCastle) {
; 901  : 			GCServerCmd(lpObj->m_Index, 1, 25, 0);
; 902  : 		}
; 903  : #endif
; 904  : 	}
; 905  : 	return TRUE;

  00031	b8 01 00 00 00	 mov	 eax, 1

; 906  : }

  00036	5f		 pop	 edi
  00037	5e		 pop	 esi
  00038	5b		 pop	 ebx
  00039	8b e5		 mov	 esp, ebp
  0003b	5d		 pop	 ebp
  0003c	c3		 ret	 0
?NpcRolensiaGuard@@YAHPAVOBJECTSTRUCT@@0@Z ENDP		; NpcRolensiaGuard
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcBattleAnnouncer@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcBattleAnnouncer@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcBattleAnnouncer, COMDAT

; 718  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 719  : #ifdef CASTLE_POTION_NPC_20041222			// 수성측 물약파는 NPC
; 720  : 	if (lpNpc->MapNumber == MAP_INDEX_CASTLESIEGE) {
; 721  : 		if (g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE) {
; 722  : 			if (lpObj->m_btCsJoinSide != CS_SIEGESIDE_DEFEND) {
; 723  : 				INT iChatRnd	= rand() % 3;
; 724  : 				switch (iChatRnd) {
; 725  : 				case 0 :
; 726  : 					ChatTargetSend(lpNpc, "적에게 물건을 팔수는 없지 !!", lpObj->m_Index);
; 727  : 					break;
; 728  : 				case 1 :
; 729  : 					ChatTargetSend(lpNpc, "무사히 여길 빠져나가지는 못할것이다 !!", lpObj->m_Index);
; 730  : 					break;
; 731  : 				case 2 :
; 732  : 					ChatTargetSend(lpNpc, "여기 적군이 있다 !! 경비병 !!", lpObj->m_Index);
; 733  : 					break;
; 734  : 				}
; 735  : 				return TRUE;
; 736  : 			}
; 737  : 		}
; 738  : 	}
; 739  : #endif
; 740  : 
; 741  : 	return 0;

  00009	33 c0		 xor	 eax, eax

; 742  : }

  0000b	5f		 pop	 edi
  0000c	5e		 pop	 esi
  0000d	5b		 pop	 ebx
  0000e	8b e5		 mov	 esp, ebp
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?NpcBattleAnnouncer@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcBattleAnnouncer
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcFasi@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
tv132 = -184						; size = 4
_talk$1 = -116						; size = 4
_szTalk$2 = -112					; size = 100
_min$3 = -12						; size = 4
_hour$4 = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcFasi@@YAHPAVOBJECTSTRUCT@@0@Z PROC			; NpcFasi, COMDAT

; 745  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b8 00 00
	00		 sub	 esp, 184		; 000000b8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi

; 746  : #ifndef DISABLE_NPC_MESSAGE_20050506
; 747  : #ifdef JAPAN_NPC_NEWTALK
; 748  : 	if( !gDevilSquareEvent )
; 749  : 	{
; 750  : 		GCServerCmd(lpObj->m_Index, 5, 1, 0);
; 751  : 	}
; 752  : #endif
; 753  : #endif
; 754  : 	if( gLanguage != 0 )

  00016	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  0001d	74 1d		 je	 SHORT $LN4@NpcFasi

; 755  : 	{
; 756  : 		if( gDevilSquareEvent )

  0001f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gDevilSquareEvent@@3HA, 0 ; gDevilSquareEvent
  00026	74 14		 je	 SHORT $LN4@NpcFasi

; 757  : 			GCServerCmd(lpObj->m_Index, 1, NPC_FASI_MSGBOX, 0);

  00028	6a 00		 push	 0
  0002a	6a 06		 push	 6
  0002c	6a 01		 push	 1
  0002e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00031	8b 08		 mov	 ecx, DWORD PTR [eax]
  00033	51		 push	 ecx
  00034	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00039	83 c4 10	 add	 esp, 16			; 00000010H
$LN4@NpcFasi:

; 758  : 	}
; 759  : 	
; 760  : #ifdef	BLOOCASTLE_NPC_TALK_20031215
; 761  : 	if (g_bBloodCastle) {
; 762  : 		GCServerCmd(lpObj->m_Index, 1, 26, 0);
; 763  : 	}
; 764  : #endif
; 765  : 
; 766  : #ifdef UPDATE_PK_SYSTEM_20070302		// NPC FASI
; 767  : 	BOOL	PKFlag = FALSE;
; 768  : 	if(lpObj->PartyNumber >= 0)	// 파티에 속할경우
; 769  : 	{
; 770  : 		if( gParty.GetPKPartyPenalty(lpObj->PartyNumber) > PK_LEVEL_DEFAULT+1)
; 771  : 		{
; 772  : 			PKFlag = TRUE;
; 773  : 		}
; 774  : 	}
; 775  : 	else
; 776  : 	{
; 777  : 		if(lpObj->m_PK_Level > PK_LEVEL_DEFAULT+1)
; 778  : 		{
; 779  : 			PKFlag = TRUE;
; 780  : 		}
; 781  : 	}
; 782  : 	if( PKFlag == TRUE)
; 783  : #else
; 784  : 	if( lpObj->m_PK_Level > PK_LEVEL_DEFAULT+1 )

  0003c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003f	0f be 88 fd 00
	00 00		 movsx	 ecx, BYTE PTR [eax+253]
  00046	83 f9 04	 cmp	 ecx, 4
  00049	0f 8e 5f 01 00
	00		 jle	 $LN6@NpcFasi

; 785  : #endif	// UPDATE_PK_SYSTEM_20070302
; 786  : 	{
; 787  : 		int hour=0, min=0;

  0004f	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _hour$4[ebp], 0
  00056	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _min$3[ebp], 0

; 788  : 		char szTalk[100];
; 789  : 		if( lpNpc->TargetNumber != lpObj->m_Index )

  0005d	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  00060	0f bf 88 ac 02
	00 00		 movsx	 ecx, WORD PTR [eax+684]
  00067	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0006a	3b 0a		 cmp	 ecx, DWORD PTR [edx]
  0006c	74 7d		 je	 SHORT $LN7@NpcFasi

; 790  : 		{
; 791  : 			if( gObjGetPkTime(lpObj, hour, min) == TRUE )

  0006e	8d 45 f4	 lea	 eax, DWORD PTR _min$3[ebp]
  00071	50		 push	 eax
  00072	8d 4d f8	 lea	 ecx, DWORD PTR _hour$4[ebp]
  00075	51		 push	 ecx
  00076	8b 55 0c	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00079	52		 push	 edx
  0007a	e8 00 00 00 00	 call	 ?gObjGetPkTime@@YAHPAVOBJECTSTRUCT@@AAH1@Z ; gObjGetPkTime
  0007f	83 c4 0c	 add	 esp, 12			; 0000000cH
  00082	83 f8 01	 cmp	 eax, 1
  00085	75 5f		 jne	 SHORT $LN9@NpcFasi

; 792  : 			{
; 793  : 				wsprintf(szTalk, lMsg.Get(1103), hour, min);

  00087	8b 45 f4	 mov	 eax, DWORD PTR _min$3[ebp]
  0008a	50		 push	 eax
  0008b	8b 4d f8	 mov	 ecx, DWORD PTR _hour$4[ebp]
  0008e	51		 push	 ecx
  0008f	68 4f 04 00 00	 push	 1103			; 0000044fH
  00094	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00099	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  0009f	50		 push	 eax
  000a0	8d 55 90	 lea	 edx, DWORD PTR _szTalk$2[ebp]
  000a3	52		 push	 edx
  000a4	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  000aa	83 c4 10	 add	 esp, 16			; 00000010H

; 794  : 				ChatTargetSend(lpNpc, szTalk, lpObj->m_Index);

  000ad	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b0	8b 08		 mov	 ecx, DWORD PTR [eax]
  000b2	51		 push	 ecx
  000b3	8d 55 90	 lea	 edx, DWORD PTR _szTalk$2[ebp]
  000b6	52		 push	 edx
  000b7	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  000ba	50		 push	 eax
  000bb	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  000c0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 795  : 				lpNpc->TargetNumber = lpObj->m_Index;			

  000c3	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  000c6	8b 4d 0c	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000c9	66 8b 11	 mov	 dx, WORD PTR [ecx]
  000cc	66 89 90 ac 02
	00 00		 mov	 WORD PTR [eax+684], dx

; 796  : 
; 797  : #ifdef ADD_PK_LIMIT_FREE_OPTION_20050324
; 798  : 				if (!gPkLimitFree) {

  000d3	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gPkLimitFree@@3HA, 0 ; gPkLimitFree
  000da	75 0a		 jne	 SHORT $LN9@NpcFasi

; 799  : #endif
; 800  : 				return TRUE;

  000dc	b8 01 00 00 00	 mov	 eax, 1
  000e1	e9 ca 00 00 00	 jmp	 $LN1@NpcFasi
$LN9@NpcFasi:

; 801  : #ifdef ADD_PK_LIMIT_FREE_OPTION_20050324
; 802  : 				}
; 803  : #endif
; 804  : 			}
; 805  : 		}

  000e6	e9 c3 00 00 00	 jmp	 $LN6@NpcFasi
$LN7@NpcFasi:

; 806  : 		else
; 807  : 		{
; 808  : #ifdef ADD_PK_LIMIT_FREE_OPTION_20050324
; 809  : 			if (!gPkLimitFree) {

  000eb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gPkLimitFree@@3HA, 0 ; gPkLimitFree
  000f2	0f 85 b6 00 00
	00		 jne	 $LN6@NpcFasi

; 810  : #endif
; 811  : 			int talk = (rand()%3);

  000f8	e8 00 00 00 00	 call	 _rand
  000fd	99		 cdq
  000fe	b9 03 00 00 00	 mov	 ecx, 3
  00103	f7 f9		 idiv	 ecx
  00105	89 55 8c	 mov	 DWORD PTR _talk$1[ebp], edx

; 812  : 			switch( talk )

  00108	8b 45 8c	 mov	 eax, DWORD PTR _talk$1[ebp]
  0010b	89 85 48 ff ff
	ff		 mov	 DWORD PTR tv132[ebp], eax
  00111	83 bd 48 ff ff
	ff 00		 cmp	 DWORD PTR tv132[ebp], 0
  00118	74 14		 je	 SHORT $LN12@NpcFasi
  0011a	83 bd 48 ff ff
	ff 01		 cmp	 DWORD PTR tv132[ebp], 1
  00121	74 30		 je	 SHORT $LN13@NpcFasi
  00123	83 bd 48 ff ff
	ff 02		 cmp	 DWORD PTR tv132[ebp], 2
  0012a	74 4c		 je	 SHORT $LN14@NpcFasi
  0012c	eb 6d		 jmp	 SHORT $LN2@NpcFasi
$LN12@NpcFasi:

; 813  : 			{
; 814  : 			case 0 : ChatTargetSend(lpNpc, lMsg.Get(1122), lpObj->m_Index);	// "살인자에겐 아무것도 팔 수 없네!!"

  0012e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00131	8b 08		 mov	 ecx, DWORD PTR [eax]
  00133	51		 push	 ecx
  00134	68 62 04 00 00	 push	 1122			; 00000462H
  00139	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0013e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  00144	50		 push	 eax
  00145	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00148	52		 push	 edx
  00149	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  0014e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 815  : 				break;

  00151	eb 48		 jmp	 SHORT $LN2@NpcFasi
$LN13@NpcFasi:

; 816  : 			case 1 : ChatTargetSend(lpNpc, lMsg.Get(1123), lpObj->m_Index);	// 나에게 더이상 볼일이 있는가?

  00153	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00156	8b 08		 mov	 ecx, DWORD PTR [eax]
  00158	51		 push	 ecx
  00159	68 63 04 00 00	 push	 1123			; 00000463H
  0015e	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00163	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  00169	50		 push	 eax
  0016a	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  0016d	52		 push	 edx
  0016e	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  00173	83 c4 0c	 add	 esp, 12			; 0000000cH

; 817  : 				break;

  00176	eb 23		 jmp	 SHORT $LN2@NpcFasi
$LN14@NpcFasi:

; 818  : 			case 2 : ChatTargetSend(lpNpc, lMsg.Get(1124), lpObj->m_Index);	// 다른데 가서 알아보게

  00178	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0017b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0017d	51		 push	 ecx
  0017e	68 64 04 00 00	 push	 1124			; 00000464H
  00183	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00188	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  0018e	50		 push	 eax
  0018f	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00192	52		 push	 edx
  00193	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  00198	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@NpcFasi:

; 819  : 				break;
; 820  : 			}			
; 821  : 			lpNpc->TargetNumber = 0;

  0019b	33 c0		 xor	 eax, eax
  0019d	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  001a0	66 89 81 ac 02
	00 00		 mov	 WORD PTR [ecx+684], ax

; 822  : 			return TRUE;

  001a7	b8 01 00 00 00	 mov	 eax, 1
  001ac	eb 02		 jmp	 SHORT $LN1@NpcFasi
$LN6@NpcFasi:

; 823  : #ifdef ADD_PK_LIMIT_FREE_OPTION_20050324
; 824  : 			}
; 825  : #endif
; 826  : 		}
; 827  : 	}
; 828  : 	return FALSE;

  001ae	33 c0		 xor	 eax, eax
$LN1@NpcFasi:

; 829  : }

  001b0	5f		 pop	 edi
  001b1	5e		 pop	 esi
  001b2	5b		 pop	 ebx
  001b3	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001b6	33 cd		 xor	 ecx, ebp
  001b8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001bd	8b e5		 mov	 esp, ebp
  001bf	5d		 pop	 ebp
  001c0	c3		 ret	 0
?NpcFasi@@YAHPAVOBJECTSTRUCT@@0@Z ENDP			; NpcFasi
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcGuildMasterTalk@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_nRet$1 = -4						; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcGuildMasterTalk@@YAHPAVOBJECTSTRUCT@@0@Z PROC	; NpcGuildMasterTalk, COMDAT

; 833  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 834  : 	if( gGuildCreate == 0 )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gGuildCreate@@3HA, 0 ; gGuildCreate
  00010	75 21		 jne	 SHORT $LN2@NpcGuildMa

; 835  : 	{
; 836  : 		ChatTargetSend(lpNpc, "서버분할 기간에는 길드를 생성할수가 없습니다", lpObj->m_Index); // 길드를 더이상 만들수가 없소

  00012	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00015	8b 08		 mov	 ecx, DWORD PTR [eax]
  00017	51		 push	 ecx
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@BIAKPPND@?$LM?$KN?$LJ?v?$LK?P?G?R?5?$LB?b?$LA?$KD?$LP?$KB?$LE?B?5?$LB?f?$LF?e?$LI?$KG?5?$LL?$PN?$LM?$LK?G?R@
  0001d	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00020	52		 push	 edx
  00021	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  00026	83 c4 0c	 add	 esp, 12			; 0000000cH

; 837  : 		//ChatTargetSend(lpNpc, lMsg.Get(1119), lpObj->m_Index); // 길드를 더이상 만들수가 없소
; 838  : 		return TRUE;

  00029	b8 01 00 00 00	 mov	 eax, 1
  0002e	e9 ae 00 00 00	 jmp	 $LN1@NpcGuildMa
$LN2@NpcGuildMa:

; 839  : 	}
; 840  : 
; 841  : 	/*if( lpObj->Level < 100 )
; 842  : 	{
; 843  : 		int t=rand()%3;
; 844  : 		switch( t )
; 845  : 		{
; 846  : 		case 0 : ChatTargetSend(lpNpc, "당신이 길드마스터가 되겠다고? 설마~", lpObj->m_Index);	break;
; 847  : 		case 1 : ChatTargetSend(lpNpc, "길드마스터가 되려면 아직 멀었네..", lpObj->m_Index);	break;
; 848  : 		case 2 : ChatTargetSend(lpNpc, "길드마스터가 되려면 레벨이 100은 되어야 한다네..", lpObj->m_Index);	break;
; 849  : 		}
; 850  : 	}
; 851  : 	else*/
; 852  : 	{
; 853  : 		//ChatTargetSend(lpNpc, "111", lpObj->m_Index);
; 854  : 		//ChatTargetSend(lpNpc, "아이템이 모두 +7레벨은 되어야 하네.", lpObj->m_Index);
; 855  : 		if( lpObj->GuildNumber > 0 )

  00033	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00036	83 b8 90 02 00
	00 00		 cmp	 DWORD PTR [eax+656], 0
  0003d	7e 2a		 jle	 SHORT $LN3@NpcGuildMa

; 856  : 		{
; 857  : 			ChatTargetSend(lpNpc, lMsg.Get(1140), lpObj->m_Index);	// "당신은 이미 길드에 속해 있지 않습니까?"

  0003f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00042	8b 08		 mov	 ecx, DWORD PTR [eax]
  00044	51		 push	 ecx
  00045	68 74 04 00 00	 push	 1140			; 00000474H
  0004a	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0004f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  00055	50		 push	 eax
  00056	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00059	52		 push	 edx
  0005a	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  0005f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 858  : 			return TRUE;

  00062	b8 01 00 00 00	 mov	 eax, 1
  00067	eb 78		 jmp	 SHORT $LN1@NpcGuildMa
$LN3@NpcGuildMa:

; 859  : 		}
; 860  : #ifdef _NEW_EXDB_
; 861  : 		int nRet = gObjGuildMasterCapacityTest(lpObj);

  00069	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0006c	50		 push	 eax
  0006d	e8 00 00 00 00	 call	 ?gObjGuildMasterCapacityTest@@YAHPAVOBJECTSTRUCT@@@Z ; gObjGuildMasterCapacityTest
  00072	83 c4 04	 add	 esp, 4
  00075	89 45 fc	 mov	 DWORD PTR _nRet$1[ebp], eax

; 862  : 		if( nRet == 0 ) 

  00078	83 7d fc 00	 cmp	 DWORD PTR _nRet$1[ebp], 0
  0007c	75 25		 jne	 SHORT $LN4@NpcGuildMa

; 863  : 		{
; 864  : 			ChatTargetSend(lpNpc, lMsg.Get(1141), lpObj->m_Index); // 레벨이 100 이상은 되어야 합니다

  0007e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00081	8b 08		 mov	 ecx, DWORD PTR [eax]
  00083	51		 push	 ecx
  00084	68 75 04 00 00	 push	 1141			; 00000475H
  00089	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0008e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  00094	50		 push	 eax
  00095	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  00098	52		 push	 edx
  00099	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  0009e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 865  : 		}

  000a1	eb 39		 jmp	 SHORT $LN5@NpcGuildMa
$LN4@NpcGuildMa:

; 866  : 		else if( nRet == 2 ) 

  000a3	83 7d fc 02	 cmp	 DWORD PTR _nRet$1[ebp], 2
  000a7	75 25		 jne	 SHORT $LN6@NpcGuildMa

; 867  : 		{
; 868  : 			ChatTargetSend(lpNpc, lMsg.Get(1142), lpObj->m_Index);	// 착용한 아이템이 모두 +7레벨은 되어야 합니다

  000a9	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000ac	8b 08		 mov	 ecx, DWORD PTR [eax]
  000ae	51		 push	 ecx
  000af	68 76 04 00 00	 push	 1142			; 00000476H
  000b4	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000b9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  000bf	50		 push	 eax
  000c0	8b 55 08	 mov	 edx, DWORD PTR _lpNpc$[ebp]
  000c3	52		 push	 edx
  000c4	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAVOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  000c9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 869  : 		}

  000cc	eb 0e		 jmp	 SHORT $LN5@NpcGuildMa
$LN6@NpcGuildMa:

; 870  : 		else 
; 871  : #endif
; 872  : 		{
; 873  : 			GCGuildMasterQuestionSend(lpObj->m_Index);			

  000ce	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000d3	51		 push	 ecx
  000d4	e8 00 00 00 00	 call	 ?GCGuildMasterQuestionSend@@YAXH@Z ; GCGuildMasterQuestionSend
  000d9	83 c4 04	 add	 esp, 4
$LN5@NpcGuildMa:

; 874  : 		}
; 875  : 	}
; 876  : 	return TRUE;

  000dc	b8 01 00 00 00	 mov	 eax, 1
$LN1@NpcGuildMa:

; 877  : }

  000e1	5f		 pop	 edi
  000e2	5e		 pop	 esi
  000e3	5b		 pop	 ebx
  000e4	8b e5		 mov	 esp, ebp
  000e6	5d		 pop	 ebp
  000e7	c3		 ret	 0
?NpcGuildMasterTalk@@YAHPAVOBJECTSTRUCT@@0@Z ENDP	; NpcGuildMasterTalk
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ChaosCastle.h
;	COMDAT ??__Eg_iChaosCastle_MonsterItems@@YAXXZ
text$di	SEGMENT
??__Eg_iChaosCastle_MonsterItems@@YAXXZ PROC		; `dynamic initializer for 'g_iChaosCastle_MonsterItems'', COMDAT

; 359  : };

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 337  : 	MAKE_ITEMNUM(14, 13),		1,								// 1번 캐슬 - 축석

  00009	6a 0d		 push	 13			; 0000000dH
  0000b	6a 0e		 push	 14			; 0000000eH
  0000d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00012	83 c4 08	 add	 esp, 8
  00015	a3 00 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA, eax
  0001a	c7 05 04 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+4, 1

; 338  : 	MAKE_ITEMNUM(14, 14),		2,								// 1번 캐슬 - 영석

  00024	6a 0e		 push	 14			; 0000000eH
  00026	6a 0e		 push	 14			; 0000000eH
  00028	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0002d	83 c4 08	 add	 esp, 8
  00030	a3 08 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+8, eax
  00035	c7 05 0c 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+12, 2

; 339  : 	
; 340  : 	MAKE_ITEMNUM(14, 13),		1,								// 2번 캐슬 - 축석

  0003f	6a 0d		 push	 13			; 0000000dH
  00041	6a 0e		 push	 14			; 0000000eH
  00043	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00048	83 c4 08	 add	 esp, 8
  0004b	a3 10 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+16, eax
  00050	c7 05 14 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+20, 1

; 341  : 	MAKE_ITEMNUM(14, 14),		3,								// 2번 캐슬 - 영석

  0005a	6a 0e		 push	 14			; 0000000eH
  0005c	6a 0e		 push	 14			; 0000000eH
  0005e	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00063	83 c4 08	 add	 esp, 8
  00066	a3 18 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+24, eax
  0006b	c7 05 1c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+28, 3

; 342  : 	
; 343  : 	MAKE_ITEMNUM(14, 13),		1,								// 3번 캐슬 - 축석

  00075	6a 0d		 push	 13			; 0000000dH
  00077	6a 0e		 push	 14			; 0000000eH
  00079	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0007e	83 c4 08	 add	 esp, 8
  00081	a3 20 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+32, eax
  00086	c7 05 24 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+36, 1

; 344  : 	MAKE_ITEMNUM(14, 14),		3,								// 3번 캐슬 - 영석

  00090	6a 0e		 push	 14			; 0000000eH
  00092	6a 0e		 push	 14			; 0000000eH
  00094	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00099	83 c4 08	 add	 esp, 8
  0009c	a3 28 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+40, eax
  000a1	c7 05 2c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+44, 3

; 345  : 	
; 346  : 	MAKE_ITEMNUM(14, 13),		2,								// 4번 캐슬 - 축석

  000ab	6a 0d		 push	 13			; 0000000dH
  000ad	6a 0e		 push	 14			; 0000000eH
  000af	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000b4	83 c4 08	 add	 esp, 8
  000b7	a3 30 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+48, eax
  000bc	c7 05 34 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+52, 2

; 347  : 	MAKE_ITEMNUM(14, 14),		2,								// 4번 캐슬 - 영석

  000c6	6a 0e		 push	 14			; 0000000eH
  000c8	6a 0e		 push	 14			; 0000000eH
  000ca	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000cf	83 c4 08	 add	 esp, 8
  000d2	a3 38 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+56, eax
  000d7	c7 05 3c 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+60, 2

; 348  : 	
; 349  : 	MAKE_ITEMNUM(14, 13),		2,								// 5번 캐슬 - 축석

  000e1	6a 0d		 push	 13			; 0000000dH
  000e3	6a 0e		 push	 14			; 0000000eH
  000e5	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000ea	83 c4 08	 add	 esp, 8
  000ed	a3 40 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+64, eax
  000f2	c7 05 44 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+68, 2

; 350  : 	MAKE_ITEMNUM(14, 14),		3,								// 5번 캐슬 - 영석

  000fc	6a 0e		 push	 14			; 0000000eH
  000fe	6a 0e		 push	 14			; 0000000eH
  00100	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00105	83 c4 08	 add	 esp, 8
  00108	a3 48 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+72, eax
  0010d	c7 05 4c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+76, 3

; 351  : 	
; 352  : 	MAKE_ITEMNUM(14, 13),		2,								// 6번 캐슬 - 축석

  00117	6a 0d		 push	 13			; 0000000dH
  00119	6a 0e		 push	 14			; 0000000eH
  0011b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00120	83 c4 08	 add	 esp, 8
  00123	a3 50 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+80, eax
  00128	c7 05 54 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+84, 2

; 353  : 	MAKE_ITEMNUM(14, 14),		3,								// 6번 캐슬 - 영석

  00132	6a 0e		 push	 14			; 0000000eH
  00134	6a 0e		 push	 14			; 0000000eH
  00136	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0013b	83 c4 08	 add	 esp, 8
  0013e	a3 58 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+88, eax
  00143	c7 05 5c 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?g_iChaosCastle_MonsterItems@@3PAY111HA+92, 3
  0014d	5f		 pop	 edi
  0014e	5e		 pop	 esi
  0014f	5b		 pop	 ebx
  00150	8b e5		 mov	 esp, ebp
  00152	5d		 pop	 ebp
  00153	c3		 ret	 0
??__Eg_iChaosCastle_MonsterItems@@YAXXZ ENDP		; `dynamic initializer for 'g_iChaosCastle_MonsterItems''
text$di	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\gObjMonster.h
;	COMDAT ?TalkRefAdd@CQeustNpcTeleport@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?TalkRefAdd@CQeustNpcTeleport@@QAEXXZ PROC		; CQeustNpcTeleport::TalkRefAdd, COMDAT
; _this$ = ecx

; 137  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 138  : 		EnterCriticalSection(&CsRef);

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 c0 04	 add	 eax, 4
  00012	50		 push	 eax
  00013	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EnterCriticalSection@4

; 139  : 		RefCount++;

  00019	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001e	83 c1 01	 add	 ecx, 1
  00021	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00024	89 0a		 mov	 DWORD PTR [edx], ecx

; 140  : 		LogAdd("QeustNpc RefCount Inc = %d", RefCount);

  00026	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00029	8b 08		 mov	 ecx, DWORD PTR [eax]
  0002b	51		 push	 ecx
  0002c	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@FMJKLKBP@QeustNpc?5RefCount?5Inc?5?$DN?5?$CFd@
  00031	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00037	83 c4 08	 add	 esp, 8

; 141  : 		LeaveCriticalSection(&CsRef);

  0003a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003d	83 c0 04	 add	 eax, 4
  00040	50		 push	 eax
  00041	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__LeaveCriticalSection@4

; 142  : 	}

  00047	5f		 pop	 edi
  00048	5e		 pop	 esi
  00049	5b		 pop	 ebx
  0004a	8b e5		 mov	 esp, ebp
  0004c	5d		 pop	 ebp
  0004d	c3		 ret	 0
?TalkRefAdd@CQeustNpcTeleport@@QAEXXZ ENDP		; CQeustNpcTeleport::TalkRefAdd
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\DevilSquare.h
;	COMDAT ?GetState@CDevilSquare@@QAE?AW4eDevilSquareState@@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetState@CDevilSquare@@QAE?AW4eDevilSquareState@@XZ PROC ; CDevilSquare::GetState, COMDAT
; _this$ = ecx

; 121  : 	eDevilSquareState		GetState(){return m_eState;}

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  00012	5f		 pop	 edi
  00013	5e		 pop	 esi
  00014	5b		 pop	 ebx
  00015	8b e5		 mov	 esp, ebp
  00017	5d		 pop	 ebp
  00018	c3		 ret	 0
?GetState@CDevilSquare@@QAE?AW4eDevilSquareState@@XZ ENDP ; CDevilSquare::GetState
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?NpcTalk@@YAHPAVOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
tv91 = -72						; size = 4
_npcnum$ = -4						; size = 4
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NpcTalk@@YAHPAVOBJECTSTRUCT@@0@Z PROC			; NpcTalk, COMDAT

; 240  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 241  : 	int npcnum = lpNpc->Class;

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0000c	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  00013	89 4d fc	 mov	 DWORD PTR _npcnum$[ebp], ecx

; 242  : 	if( npcnum < 0 ) return 0;

  00016	83 7d fc 00	 cmp	 DWORD PTR _npcnum$[ebp], 0
  0001a	7d 07		 jge	 SHORT $LN4@NpcTalk
  0001c	33 c0		 xor	 eax, eax
  0001e	e9 b2 03 00 00	 jmp	 $LN1@NpcTalk
$LN4@NpcTalk:

; 243  : 	
; 244  : #ifdef BLOOD_DEVILSQUARE_TRADE_BUG_FIX
; 245  : 	if( lpObj->m_IfState.use > 0 )

  00023	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00026	8a 88 56 0c 00
	00		 mov	 cl, BYTE PTR [eax+3158]
  0002c	80 e1 03	 and	 cl, 3
  0002f	0f b6 d1	 movzx	 edx, cl
  00032	85 d2		 test	 edx, edx
  00034	7e 0a		 jle	 SHORT $LN5@NpcTalk

; 246  : 	{	// 창을 사용하고 있을때는.. 사용할수 없다
; 247  : 		return TRUE;

  00036	b8 01 00 00 00	 mov	 eax, 1
  0003b	e9 95 03 00 00	 jmp	 $LN1@NpcTalk
$LN5@NpcTalk:

; 248  : 	}
; 249  : #endif
; 250  : 
; 251  : 	if ( NpcResetCheck(lpNpc, lpObj) != FALSE )

  00040	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00043	50		 push	 eax
  00044	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00047	51		 push	 ecx
  00048	e8 00 00 00 00	 call	 ?NpcResetCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcResetCheck
  0004d	83 c4 08	 add	 esp, 8
  00050	85 c0		 test	 eax, eax
  00052	74 0a		 je	 SHORT $LN6@NpcTalk

; 252  : 	{
; 253  : 		return TRUE;

  00054	b8 01 00 00 00	 mov	 eax, 1
  00059	e9 77 03 00 00	 jmp	 $LN1@NpcTalk
$LN6@NpcTalk:

; 254  : 	}
; 255  : 
; 256  : 	if ( NpcPkClearCheck(lpNpc, lpObj) != FALSE )

  0005e	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00061	50		 push	 eax
  00062	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00065	51		 push	 ecx
  00066	e8 00 00 00 00	 call	 ?NpcPkClearCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcPkClearCheck
  0006b	83 c4 08	 add	 esp, 8
  0006e	85 c0		 test	 eax, eax
  00070	74 0a		 je	 SHORT $LN7@NpcTalk

; 257  : 	{
; 258  : 		return TRUE;

  00072	b8 01 00 00 00	 mov	 eax, 1
  00077	e9 59 03 00 00	 jmp	 $LN1@NpcTalk
$LN7@NpcTalk:

; 259  : 	}
; 260  : 
; 261  : 	if ( NpcBuffHelperCheck(lpNpc, lpObj) != FALSE )

  0007c	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007f	50		 push	 eax
  00080	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00083	51		 push	 ecx
  00084	e8 00 00 00 00	 call	 ?NpcBuffHelperCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcBuffHelperCheck
  00089	83 c4 08	 add	 esp, 8
  0008c	85 c0		 test	 eax, eax
  0008e	74 0a		 je	 SHORT $LN8@NpcTalk

; 262  : 	{
; 263  : 		return TRUE;

  00090	b8 01 00 00 00	 mov	 eax, 1
  00095	e9 3b 03 00 00	 jmp	 $LN1@NpcTalk
$LN8@NpcTalk:

; 264  : 	}
; 265  : 
; 266  : #ifdef SECOND_QUEST
; 267  : 	if( npcnum == NPC_QEUSTNPC2 )

  0009a	81 7d fc e5 00
	00 00		 cmp	 DWORD PTR _npcnum$[ebp], 229 ; 000000e5H
  000a1	75 18		 jne	 SHORT $LN9@NpcTalk

; 268  : 	{
; 269  : 		gQeustNpcTeleport.TalkRefAdd();

  000a3	b9 00 00 00 00	 mov	 ecx, OFFSET ?gQeustNpcTeleport@@3VCQeustNpcTeleport@@A ; gQeustNpcTeleport
  000a8	e8 00 00 00 00	 call	 ?TalkRefAdd@CQeustNpcTeleport@@QAEXXZ ; CQeustNpcTeleport::TalkRefAdd

; 270  : 		lpObj->TargetShopNumber = npcnum;

  000ad	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b0	66 8b 4d fc	 mov	 cx, WORD PTR _npcnum$[ebp]
  000b4	66 89 88 ae 02
	00 00		 mov	 WORD PTR [eax+686], cx
$LN9@NpcTalk:

; 271  : 	}
; 272  : #endif
; 273  : 
; 274  : #ifdef PCBANG_COUPON_EVENT_20060124
; 275  : 	if( npcnum == NPC_COUPONNPC )
; 276  : 	{
; 277  : 		if( NpcCouponEvent(lpNpc, lpObj) )
; 278  : 			return 1;
; 279  : 	}
; 280  : #endif // PCBANG_COUPON_EVENT_20060124
; 281  : 
; 282  : #ifdef NEW_SKILL_FORSKYLAND
; 283  : 	// 퀘스트에 관련된 NPC를 체크한다
; 284  : 	if( NpcQuestCheck(lpNpc, lpObj) )

  000bb	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000be	50		 push	 eax
  000bf	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  000c2	51		 push	 ecx
  000c3	e8 00 00 00 00	 call	 ?NpcQuestCheck@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcQuestCheck
  000c8	83 c4 08	 add	 esp, 8
  000cb	85 c0		 test	 eax, eax
  000cd	74 0a		 je	 SHORT $LN10@NpcTalk

; 285  : 		return 1;

  000cf	b8 01 00 00 00	 mov	 eax, 1
  000d4	e9 fc 02 00 00	 jmp	 $LN1@NpcTalk
$LN10@NpcTalk:

; 286  : #endif
; 287  : 
; 288  : 	switch( npcnum )

  000d9	8b 45 fc	 mov	 eax, DWORD PTR _npcnum$[ebp]
  000dc	89 45 b8	 mov	 DWORD PTR tv91[ebp], eax
  000df	8b 4d b8	 mov	 ecx, DWORD PTR tv91[ebp]
  000e2	81 e9 e2 00 00
	00		 sub	 ecx, 226		; 000000e2H
  000e8	89 4d b8	 mov	 DWORD PTR tv91[ebp], ecx
  000eb	83 7d b8 1d	 cmp	 DWORD PTR tv91[ebp], 29	; 0000001dH
  000ef	0f 87 de 02 00
	00		 ja	 $LN2@NpcTalk
  000f5	8b 55 b8	 mov	 edx, DWORD PTR tv91[ebp]
  000f8	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN54@NpcTalk[edx*4]
$LN11@NpcTalk:

; 289  : 	{
; 290  : 	case NPC_FASI : //	마법사 파시
; 291  : 		if( NpcFasi(lpNpc, lpObj) == TRUE ) return 1;

  000ff	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00102	50		 push	 eax
  00103	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00106	51		 push	 ecx
  00107	e8 00 00 00 00	 call	 ?NpcFasi@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcFasi
  0010c	83 c4 08	 add	 esp, 8
  0010f	83 f8 01	 cmp	 eax, 1
  00112	75 0a		 jne	 SHORT $LN12@NpcTalk
  00114	b8 01 00 00 00	 mov	 eax, 1
  00119	e9 b7 02 00 00	 jmp	 $LN1@NpcTalk
$LN12@NpcTalk:

; 292  : 		break;

  0011e	e9 b0 02 00 00	 jmp	 $LN2@NpcTalk
$LN13@NpcTalk:

; 293  : 	case NPC_GUILDMASTER :
; 294  : 		if( NpcGuildMasterTalk(lpNpc, lpObj) == TRUE ) return 1;

  00123	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00126	50		 push	 eax
  00127	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  0012a	51		 push	 ecx
  0012b	e8 00 00 00 00	 call	 ?NpcGuildMasterTalk@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcGuildMasterTalk
  00130	83 c4 08	 add	 esp, 8
  00133	83 f8 01	 cmp	 eax, 1
  00136	75 0a		 jne	 SHORT $LN14@NpcTalk
  00138	b8 01 00 00 00	 mov	 eax, 1
  0013d	e9 93 02 00 00	 jmp	 $LN1@NpcTalk
$LN14@NpcTalk:

; 295  : 		break;

  00142	e9 8c 02 00 00	 jmp	 $LN2@NpcTalk
$LN15@NpcTalk:

; 296  : 	case NPC_BATTLEANNOUNCER :
; 297  : 		if( NpcBattleAnnouncer(lpNpc, lpObj) == TRUE ) return 1;

  00147	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0014a	50		 push	 eax
  0014b	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  0014e	51		 push	 ecx
  0014f	e8 00 00 00 00	 call	 ?NpcBattleAnnouncer@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcBattleAnnouncer
  00154	83 c4 08	 add	 esp, 8
  00157	83 f8 01	 cmp	 eax, 1
  0015a	75 0a		 jne	 SHORT $LN16@NpcTalk
  0015c	b8 01 00 00 00	 mov	 eax, 1
  00161	e9 6f 02 00 00	 jmp	 $LN1@NpcTalk
$LN16@NpcTalk:

; 298  : 		break;

  00166	e9 68 02 00 00	 jmp	 $LN2@NpcTalk
$LN17@NpcTalk:

; 299  : 
; 300  : 	case NPC_ROLENSIAGUARD: // 로랜시아 경비병
; 301  : 		if( NpcRolensiaGuard(lpNpc, lpObj) == TRUE ) return 1;

  0016b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0016e	50		 push	 eax
  0016f	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00172	51		 push	 ecx
  00173	e8 00 00 00 00	 call	 ?NpcRolensiaGuard@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcRolensiaGuard
  00178	83 c4 08	 add	 esp, 8
  0017b	83 f8 01	 cmp	 eax, 1
  0017e	75 0a		 jne	 SHORT $LN18@NpcTalk
  00180	b8 01 00 00 00	 mov	 eax, 1
  00185	e9 4b 02 00 00	 jmp	 $LN1@NpcTalk
$LN18@NpcTalk:

; 302  : 		break;

  0018a	e9 44 02 00 00	 jmp	 $LN2@NpcTalk
$LN19@NpcTalk:

; 303  : 
; 304  : 	case NPC_CHAOSGOBLELIN: // 카오스 고블린
; 305  : 		if( NpcChaosGoblelin(lpNpc, lpObj) == TRUE ) return 1;

  0018f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00192	50		 push	 eax
  00193	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00196	51		 push	 ecx
  00197	e8 00 00 00 00	 call	 ?NpcChaosGoblelin@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcChaosGoblelin
  0019c	83 c4 08	 add	 esp, 8
  0019f	83 f8 01	 cmp	 eax, 1
  001a2	75 0a		 jne	 SHORT $LN20@NpcTalk
  001a4	b8 01 00 00 00	 mov	 eax, 1
  001a9	e9 27 02 00 00	 jmp	 $LN1@NpcTalk
$LN20@NpcTalk:

; 306  : 		break;

  001ae	e9 20 02 00 00	 jmp	 $LN2@NpcTalk
$LN21@NpcTalk:

; 307  : 
; 308  : 	case NPC_RUSIPHER: // 루시퍼(카론)
; 309  : 		if( NpcRusipher(lpNpc, lpObj) == TRUE ) return 1;

  001b3	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001b6	50		 push	 eax
  001b7	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  001ba	51		 push	 ecx
  001bb	e8 00 00 00 00	 call	 ?NpcRusipher@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcRusipher
  001c0	83 c4 08	 add	 esp, 8
  001c3	83 f8 01	 cmp	 eax, 1
  001c6	75 0a		 jne	 SHORT $LN22@NpcTalk
  001c8	b8 01 00 00 00	 mov	 eax, 1
  001cd	e9 03 02 00 00	 jmp	 $LN1@NpcTalk
$LN22@NpcTalk:

; 310  : 		break;

  001d2	e9 fc 01 00 00	 jmp	 $LN2@NpcTalk
$LN23@NpcTalk:

; 311  : 
; 312  : 	case NPC_POSIONGIRL: // 물약파는 소녀
; 313  : 		if( NpcPosionGirl(lpNpc, lpObj) == TRUE ) return 1;

  001d7	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001da	50		 push	 eax
  001db	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  001de	51		 push	 ecx
  001df	e8 00 00 00 00	 call	 ?NpcPosionGirl@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcPosionGirl
  001e4	83 c4 08	 add	 esp, 8
  001e7	83 f8 01	 cmp	 eax, 1
  001ea	75 0a		 jne	 SHORT $LN24@NpcTalk
  001ec	b8 01 00 00 00	 mov	 eax, 1
  001f1	e9 df 01 00 00	 jmp	 $LN1@NpcTalk
$LN24@NpcTalk:

; 314  : 		break;

  001f6	e9 d8 01 00 00	 jmp	 $LN2@NpcTalk
$LN25@NpcTalk:

; 315  : 
; 316  : 	case NPC_DEVIASWIZARD: // 데비아스 마법사
; 317  : 		if( NpcDeviasWizard(lpNpc, lpObj) == TRUE ) return 1;

  001fb	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001fe	50		 push	 eax
  001ff	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00202	51		 push	 ecx
  00203	e8 00 00 00 00	 call	 ?NpcDeviasWizard@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcDeviasWizard
  00208	83 c4 08	 add	 esp, 8
  0020b	83 f8 01	 cmp	 eax, 1
  0020e	75 0a		 jne	 SHORT $LN26@NpcTalk
  00210	b8 01 00 00 00	 mov	 eax, 1
  00215	e9 bb 01 00 00	 jmp	 $LN1@NpcTalk
$LN26@NpcTalk:

; 318  : 		break;

  0021a	e9 b4 01 00 00	 jmp	 $LN2@NpcTalk
$LN27@NpcTalk:

; 319  : 
; 320  : 	case NPC_DEVIASGUARD: // 데비아스 경비병
; 321  : 		if( NpcDeviasGuard(lpNpc, lpObj) == TRUE ) return 1;

  0021f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00222	50		 push	 eax
  00223	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00226	51		 push	 ecx
  00227	e8 00 00 00 00	 call	 ?NpcDeviasGuard@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcDeviasGuard
  0022c	83 c4 08	 add	 esp, 8
  0022f	83 f8 01	 cmp	 eax, 1
  00232	75 0a		 jne	 SHORT $LN28@NpcTalk
  00234	b8 01 00 00 00	 mov	 eax, 1
  00239	e9 97 01 00 00	 jmp	 $LN1@NpcTalk
$LN28@NpcTalk:

; 322  : 		break;

  0023e	e9 90 01 00 00	 jmp	 $LN2@NpcTalk
$LN29@NpcTalk:

; 323  : 
; 324  : 		
; 325  : 	case NPC_DEVIASWAREHOUSEMEN: // 데비아스&&노리아 창고지기
; 326  : 		//if( NpcDeviasWareHousemen(lpNpc, lpObj) == TRUE ) return 1;
; 327  : 		if( NpcWarehouse(lpNpc, lpObj) == TRUE ) return 1;

  00243	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00246	50		 push	 eax
  00247	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  0024a	51		 push	 ecx
  0024b	e8 00 00 00 00	 call	 ?NpcWarehouse@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcWarehouse
  00250	83 c4 08	 add	 esp, 8
  00253	83 f8 01	 cmp	 eax, 1
  00256	75 0a		 jne	 SHORT $LN30@NpcTalk
  00258	b8 01 00 00 00	 mov	 eax, 1
  0025d	e9 73 01 00 00	 jmp	 $LN1@NpcTalk
$LN30@NpcTalk:

; 328  : 		break;

  00262	e9 6c 01 00 00	 jmp	 $LN2@NpcTalk
$LN31@NpcTalk:

; 329  : 
; 330  : #ifdef DARKLORD_WORK
; 331  : 	case NPC_DARKSPRIT_TRAINER:		// 다크스피릿 조련사
; 332  : 		if( NpcDarkSpiritTrainer(lpNpc, lpObj) == TRUE) return 1;		

  00267	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0026a	50		 push	 eax
  0026b	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  0026e	51		 push	 ecx
  0026f	e8 00 00 00 00	 call	 ?NpcDarkSpiritTrainer@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcDarkSpiritTrainer
  00274	83 c4 08	 add	 esp, 8
  00277	83 f8 01	 cmp	 eax, 1
  0027a	75 0a		 jne	 SHORT $LN32@NpcTalk
  0027c	b8 01 00 00 00	 mov	 eax, 1
  00281	e9 4f 01 00 00	 jmp	 $LN1@NpcTalk
$LN32@NpcTalk:

; 333  : 		break;

  00286	e9 48 01 00 00	 jmp	 $LN2@NpcTalk
$LN33@NpcTalk:

; 334  : #endif
; 335  : 		
; 336  : 
; 337  : 	case NPC_NORIARARA: // 노리아 라라요정
; 338  : 		if( NpcNoriaRara(lpNpc, lpObj) == TRUE ) return 1;

  0028b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0028e	50		 push	 eax
  0028f	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00292	51		 push	 ecx
  00293	e8 00 00 00 00	 call	 ?NpcNoriaRara@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcNoriaRara
  00298	83 c4 08	 add	 esp, 8
  0029b	83 f8 01	 cmp	 eax, 1
  0029e	75 0a		 jne	 SHORT $LN34@NpcTalk
  002a0	b8 01 00 00 00	 mov	 eax, 1
  002a5	e9 2b 01 00 00	 jmp	 $LN1@NpcTalk
$LN34@NpcTalk:

; 339  : 		break;

  002aa	e9 24 01 00 00	 jmp	 $LN2@NpcTalk
$LN35@NpcTalk:

; 340  : 
; 341  : 	case NPC_DEVIASMADAM: // 데비아스 술집마담
; 342  : 		if( NpcDeviasMadam(lpNpc, lpObj) == TRUE ) return 1;

  002af	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002b2	50		 push	 eax
  002b3	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  002b6	51		 push	 ecx
  002b7	e8 00 00 00 00	 call	 ?NpcDeviasMadam@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcDeviasMadam
  002bc	83 c4 08	 add	 esp, 8
  002bf	83 f8 01	 cmp	 eax, 1
  002c2	75 0a		 jne	 SHORT $LN36@NpcTalk
  002c4	b8 01 00 00 00	 mov	 eax, 1
  002c9	e9 07 01 00 00	 jmp	 $LN1@NpcTalk
$LN36@NpcTalk:

; 343  : 		break;

  002ce	e9 00 01 00 00	 jmp	 $LN2@NpcTalk
$LN37@NpcTalk:

; 344  : 
; 345  : 	case NPC_EVETNCHIPNPC: // 이벤트칩 NPC
; 346  : 		if( NpcEventChipNPC(lpNpc, lpObj) == TRUE ) return 1;

  002d3	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002d6	50		 push	 eax
  002d7	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  002da	51		 push	 ecx
  002db	e8 00 00 00 00	 call	 ?NpcEventChipNPC@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcEventChipNPC
  002e0	83 c4 08	 add	 esp, 8
  002e3	83 f8 01	 cmp	 eax, 1
  002e6	75 0a		 jne	 SHORT $LN38@NpcTalk
  002e8	b8 01 00 00 00	 mov	 eax, 1
  002ed	e9 e3 00 00 00	 jmp	 $LN1@NpcTalk
$LN38@NpcTalk:

; 347  : 		break;

  002f2	e9 dc 00 00 00	 jmp	 $LN2@NpcTalk
$LN39@NpcTalk:

; 348  : 
; 349  : #ifdef JAPAN_NPC_NEWTALK
; 350  : 	case NPC_RELENSIASMITH: // 로랜시아 대장장이
; 351  : 		if( NpcRorensiaSmith(lpNpc, lpObj) == TRUE ) return 1;
; 352  : 		break;
; 353  : 	case NPC_NORIAJANGIN:
; 354  : 		if( NpcNoriJangIn(lpNpc, lpObj) == TRUE ) return 1;
; 355  : 		break;
; 356  : #endif
; 357  : 
; 358  : #ifdef GAMESERVER_DIVISION
; 359  : 		case NPC_SERVERDIVISION: // 로랜시아 대장장이
; 360  : 			if( NpcServerDivision(lpNpc, lpObj) == TRUE ) return 1;
; 361  : 		break;
; 362  : #endif
; 363  : 		
; 364  : #ifdef FOR_BLOODCASTLE
; 365  : 	case NPC_ANGELKING :
; 366  : 		if( NpcAngelKing(lpNpc, lpObj) == TRUE ) return 1;

  002f7	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002fa	50		 push	 eax
  002fb	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  002fe	51		 push	 ecx
  002ff	e8 00 00 00 00	 call	 ?NpcAngelKing@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcAngelKing
  00304	83 c4 08	 add	 esp, 8
  00307	83 f8 01	 cmp	 eax, 1
  0030a	75 0a		 jne	 SHORT $LN40@NpcTalk
  0030c	b8 01 00 00 00	 mov	 eax, 1
  00311	e9 bf 00 00 00	 jmp	 $LN1@NpcTalk
$LN40@NpcTalk:

; 367  : 		break;

  00316	e9 b8 00 00 00	 jmp	 $LN2@NpcTalk
$LN41@NpcTalk:

; 368  : 	case NPC_ANGELMESSANGER :
; 369  : 		if( NpcAngelMessanger(lpNpc, lpObj) == TRUE ) return 1;

  0031b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0031e	50		 push	 eax
  0031f	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00322	51		 push	 ecx
  00323	e8 00 00 00 00	 call	 ?NpcAngelMessanger@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcAngelMessanger
  00328	83 c4 08	 add	 esp, 8
  0032b	83 f8 01	 cmp	 eax, 1
  0032e	75 0a		 jne	 SHORT $LN42@NpcTalk
  00330	b8 01 00 00 00	 mov	 eax, 1
  00335	e9 9b 00 00 00	 jmp	 $LN1@NpcTalk
$LN42@NpcTalk:

; 370  : 		break;

  0033a	e9 94 00 00 00	 jmp	 $LN2@NpcTalk
$LN43@NpcTalk:

; 371  : 	case NPC_ROLENSIAMADAM :
; 372  : 		if( NpcRolensiaMadam(lpNpc, lpObj) == TRUE ) return 1;

  0033f	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00342	50		 push	 eax
  00343	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00346	51		 push	 ecx
  00347	e8 00 00 00 00	 call	 ?NpcRolensiaMadam@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcRolensiaMadam
  0034c	83 c4 08	 add	 esp, 8
  0034f	83 f8 01	 cmp	 eax, 1
  00352	75 07		 jne	 SHORT $LN44@NpcTalk
  00354	b8 01 00 00 00	 mov	 eax, 1
  00359	eb 7a		 jmp	 SHORT $LN1@NpcTalk
$LN44@NpcTalk:

; 373  : 		break;

  0035b	eb 76		 jmp	 SHORT $LN2@NpcTalk
$LN45@NpcTalk:

; 374  : 	case NPC_ROADMERCHANT :
; 375  : 		if( NpcRoadMerchant(lpNpc, lpObj) == TRUE ) return 1;

  0035d	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00360	50		 push	 eax
  00361	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00364	51		 push	 ecx
  00365	e8 00 00 00 00	 call	 ?NpcRoadMerchant@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcRoadMerchant
  0036a	83 c4 08	 add	 esp, 8
  0036d	83 f8 01	 cmp	 eax, 1
  00370	75 07		 jne	 SHORT $LN46@NpcTalk
  00372	b8 01 00 00 00	 mov	 eax, 1
  00377	eb 5c		 jmp	 SHORT $LN1@NpcTalk
$LN46@NpcTalk:

; 376  : 		break;

  00379	eb 58		 jmp	 SHORT $LN2@NpcTalk
$LN47@NpcTalk:

; 377  : 	case NPC_DEVIASWEAPON :
; 378  : 		if( NpcDeviasWeapon(lpNpc, lpObj) == TRUE ) return 1;

  0037b	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0037e	50		 push	 eax
  0037f	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  00382	51		 push	 ecx
  00383	e8 00 00 00 00	 call	 ?NpcDeviasWeapon@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcDeviasWeapon
  00388	83 c4 08	 add	 esp, 8
  0038b	83 f8 01	 cmp	 eax, 1
  0038e	75 07		 jne	 SHORT $LN48@NpcTalk
  00390	b8 01 00 00 00	 mov	 eax, 1
  00395	eb 3e		 jmp	 SHORT $LN1@NpcTalk
$LN48@NpcTalk:

; 379  : 		break;

  00397	eb 3a		 jmp	 SHORT $LN2@NpcTalk
$LN49@NpcTalk:

; 380  : #ifndef JAPAN_NPC_NEWTALK
; 381  : 	case NPC_ROLENSIASMITH: // 로랜시아 대장장이 <- 일본거에도 있음
; 382  : 		if( NpcRorensiaSmith(lpNpc, lpObj) == TRUE ) return 1;

  00399	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0039c	50		 push	 eax
  0039d	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  003a0	51		 push	 ecx
  003a1	e8 00 00 00 00	 call	 ?NpcRorensiaSmith@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcRorensiaSmith
  003a6	83 c4 08	 add	 esp, 8
  003a9	83 f8 01	 cmp	 eax, 1
  003ac	75 07		 jne	 SHORT $LN50@NpcTalk
  003ae	b8 01 00 00 00	 mov	 eax, 1
  003b3	eb 20		 jmp	 SHORT $LN1@NpcTalk
$LN50@NpcTalk:

; 383  : 		break;

  003b5	eb 1c		 jmp	 SHORT $LN2@NpcTalk
$LN51@NpcTalk:

; 384  : 	case NPC_NORIAJANGIN:
; 385  : 		if( NpcNoriJangIn(lpNpc, lpObj) == TRUE ) return 1;

  003b7	8b 45 0c	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003ba	50		 push	 eax
  003bb	8b 4d 08	 mov	 ecx, DWORD PTR _lpNpc$[ebp]
  003be	51		 push	 ecx
  003bf	e8 00 00 00 00	 call	 ?NpcNoriJangIn@@YAHPAVOBJECTSTRUCT@@0@Z ; NpcNoriJangIn
  003c4	83 c4 08	 add	 esp, 8
  003c7	83 f8 01	 cmp	 eax, 1
  003ca	75 07		 jne	 SHORT $LN2@NpcTalk
  003cc	b8 01 00 00 00	 mov	 eax, 1
  003d1	eb 02		 jmp	 SHORT $LN1@NpcTalk
$LN2@NpcTalk:

; 386  : 		break;
; 387  : #endif
; 388  : #endif	
; 389  : 
; 390  : #ifdef JEWEL_MIX_SYSTEM_20050309
; 391  : 	case NPC_JEWEL_MIX_DEALER :
; 392  : 		if( NpcJewelMixDealer(lpNpc, lpObj) == TRUE ) return 1;
; 393  : 		break;
; 394  : #endif
; 395  : #ifdef ADD_NEW_WEAPON_FOR_CASTLE_01_20041116
; 396  : 	case NPC_SIEGE_MACHINE_ATTACK :
; 397  : 		if( NpcSiegeMachine_Attack(lpNpc, lpObj) == TRUE ) return 1;
; 398  : 		break;
; 399  : 	case NPC_SIEGE_MACHINE_DEFENSE :
; 400  : 		if( NpcSiegeMachine_Defense(lpNpc, lpObj) == TRUE ) return 1;
; 401  : 		break;
; 402  : #endif
; 403  : #ifdef ADD_NEW_NPC_CASTLE_20041115
; 404  : 	case NPC_ELDER_CIRCLE :
; 405  : 		if( NpcElderCircle(lpNpc, lpObj) == TRUE ) return 1;
; 406  : 		break;
; 407  : 	case NPC_CASTLE_GUARD :
; 408  : 		if( NpcCastleGuard(lpNpc, lpObj) == TRUE ) return 1;
; 409  : 		break;
; 410  : 	case NPC_CASTLE_GATE_LEVER :
; 411  : 		if( NpcCastleGateLever(lpNpc, lpObj) == TRUE ) return 1;
; 412  : 		break;
; 413  : 	case NPC_CASTLE_CROWN :
; 414  : 		if( NpcCastleCrown(lpNpc, lpObj) == TRUE ) return 1;
; 415  : 		break;
; 416  : 	case NPC_CASTLE_SWITCH1 :
; 417  : 	case NPC_CASTLE_SWITCH2 :
; 418  : 		if( NpcCastleSwitch(lpNpc, lpObj) == TRUE ) return 1;
; 419  : 		break;
; 420  : #endif
; 421  : 
; 422  : #ifdef ADD_CASTLE_HUNTZONE_NPC_01_20050111
; 423  : 	case NPC_CASTLE_HUNTZONE_GUARD :
; 424  : 		if( NpcCastleHuntZoneGuard(lpNpc, lpObj) == TRUE ) return 1;
; 425  : 		break;
; 426  : #endif
; 427  : 
; 428  : #ifdef ADD_NPC_SHADOW_PHANTOM_20050616
; 429  : 	case NPC_SHADOW_PHANTOM :
; 430  : 		if( NpcShadowPhantom(lpNpc, lpObj) == TRUE ) return 1;
; 431  : 		break;
; 432  : #endif
; 433  : 
; 434  : #ifdef CRYWOLF_NPC_WORK_20050912
; 435  : 	case CRYWOLF_NPC_ALTAR1 :
; 436  : 		if( NpcCrywolfAltar(lpNpc, lpObj) == TRUE ) return 1;
; 437  : 		break;
; 438  : 	case CRYWOLF_NPC_ALTAR2 :
; 439  : 		if( NpcCrywolfAltar(lpNpc, lpObj) == TRUE ) return 1;
; 440  : 		break;
; 441  : 	case CRYWOLF_NPC_ALTAR3 :
; 442  : 		if( NpcCrywolfAltar(lpNpc, lpObj) == TRUE ) return 1;
; 443  : 		break;
; 444  : 	case CRYWOLF_NPC_ALTAR4 :
; 445  : 		if( NpcCrywolfAltar(lpNpc, lpObj) == TRUE ) return 1;
; 446  : 		break;
; 447  : 	case CRYWOLF_NPC_ALTAR5 :
; 448  : 		if( NpcCrywolfAltar(lpNpc, lpObj) == TRUE ) return 1;
; 449  : 		break;
; 450  : #endif
; 451  : 
; 452  : #ifdef ADD_SHOP_KALIMA_NPC_REIRA_20060403
; 453  : 	case NPC_KALIMA_REIRA:	// 칼리마 신관 레이라
; 454  : 		if( NpcReira( lpNpc, lpObj ) == TRUE ) return 1;
; 455  : 		break;
; 456  : #endif
; 457  : 
; 458  : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 459  : 	case JEWELOFHARMONY_NPC_PURITY:
; 460  : 	case JEWELOFHARMONY_NPC_SMELT:
; 461  : 	case JEWELOFHARMONY_NPC_RESTORE:
; 462  : 		// 조화의보석 관련 NPC는 따로 처리한다.
; 463  : 		if( g_kJewelOfHarmonySystem.NpcJewelOfHarmony( lpNpc, lpObj ) == TRUE ) 
; 464  : 			return 1;
; 465  : 		break;
; 466  : #endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 467  : 
; 468  : #ifdef ADD_PCS_LOTTERY_SYSTEM_20070117
; 469  : 	case NPC_CHAOSCARDMASTER:
; 470  : 		if( NpcChaosCardMaster( lpNpc, lpObj ) == TRUE )
; 471  : 		{
; 472  : 			return 1;
; 473  : 		}
; 474  : 		break;
; 475  : #endif // ADD_PCS_LOTTERY_SYSTEM_20070117
; 476  : 
; 477  : #ifdef ADD_NEW_NPC_KANTURU_20060612
; 478  : 	case NPC_KANTURU_MACHINE:	// 칸투르 NPC - 출입관리장치
; 479  : 		if( NpcMainatenceMachine( lpNpc, lpObj ) == TRUE ) return 1;
; 480  : 		break;		
; 481  : #endif
; 482  : 
; 483  : #ifdef WHITEANGEL_GET_ITEM_EVENT_20060822
; 484  : 	case NPC_WHITEANGEL_EVENT:	// 화이트엔젤 아이템 지급 이벤트
; 485  : 		if( NpcWhiteAngelEvent( lpNpc, lpObj ) == TRUE )	return 1;
; 486  : 		break;
; 487  : #endif
; 488  : 
; 489  : #ifdef UPDATE_QUARTERMASTER_NPC_20070122	// 물자보급관 파멜라, 안젤라 추가(goni)
; 490  : 	case NPC_QUARTERMASTER_PAMELLA:
; 491  : 		if(NpcQuartermasterPamella(lpNpc, lpObj) == TRUE ) return 1;
; 492  : 		break;
; 493  : 	case NPC_QUARTERMASTER_ANGELA:
; 494  : 		if(NpcQuartermasterAngela(lpNpc, lpObj) == TRUE ) return 1;
; 495  : 		break;
; 496  : #endif
; 497  : 
; 498  : #ifdef ADD_FIRECRACKER_NPC_20070306			// 폭죽판매 NPC 대화
; 499  : 	case NPC_FRIECRACKER_STORE:
; 500  : 		if(NPcFireCrackerStore(lpNpc, lpObj) == TRUE ) return 1;
; 501  : 		break;
; 502  : #endif
; 503  : 
; 504  : #ifdef ADD_EVENT_MAP_ILLUSION_TEMPLE_20070328
; 505  : 	case NPC_PLATFORM_MIRAGE:
; 506  : 		if( NpcPlatformMirage(lpNpc, lpObj)	== TRUE )	return 1;
; 507  : 		break;
; 508  : 
; 509  : 	case NPC_ILLUSION_HOLY_RELICS_STATUE:
; 510  : 		if( NpcIllusionHolyRelicsStatue(lpNpc, lpObj)	== TRUE )	return 1;
; 511  : 		break;
; 512  : 
; 513  : 	case NPC_HOLY_RELICS_BOX_ALLIED:
; 514  : 		if( NpcHolyRelicsBoxAllied(lpNpc, lpObj)	== TRUE )	return 1;
; 515  : 		break;
; 516  : 
; 517  : 	case NPC_HOLY_RELICS_BOX_ILLUSION:
; 518  : 		if( NpcHolyRelicsBoxIllusion(lpNpc, lpObj)	== TRUE )	return 1;
; 519  : 		break;	
; 520  : #endif
; 521  : 
; 522  : #ifdef ADD_ITEM_GIVE_NPC_ALAN_20070823	// 아이템 지급 NPC 앨런의 대화
; 523  : 	case NPC_ALAN:				
; 524  : 		if( NpcAlan( lpNpc, lpObj ) == TRUE )	return 1;
; 525  : 		break;
; 526  : #endif		
; 527  : 
; 528  : #ifdef ADD_SEASON_3_NEW_MAP_20070910	// 엘베란드 NPC 대화
; 529  : 	case NPC_SILVIA:
; 530  : 		if( NpcSilviaTalk(lpNpc, lpObj) == TRUE ) return 1;
; 531  : 		break;
; 532  : 
; 533  : 	case NPC_RHEA:
; 534  : 		if( NpcRheaTalk(lpNpc, lpObj) == TRUE ) return 1;
; 535  : 		break;
; 536  : 
; 537  : 	case NPC_MARCE:
; 538  : 		if( NpcMarceTalk(lpNpc, lpObj) == TRUE ) return 1;
; 539  : 		break;
; 540  : #endif
; 541  : 
; 542  : #ifdef ADD_EVENT_CHERRYBLOSSOM_20080312
; 543  : 	case NPC_CHERRY:
; 544  : 		if( NpcCherryTalk(lpNpc, lpObj) == TRUE ) return 1;
; 545  : 		break;
; 546  : #endif // ADD_EVENT_CHERRYBLOSSOM_20080312
; 547  : 
; 548  : #ifdef ADD_ITEM_SOCKET_OPTION_MIX_20080415
; 549  : 	case NPC_SEED_MASTER:
; 550  : 		if( NpcSeedMaster( lpNpc, lpObj ) == TRUE )
; 551  : 		{
; 552  : 			return 1;
; 553  : 		}
; 554  : 		break;
; 555  : 	case NPC_SEED_RESEARCHER:
; 556  : 		if( NpcSeedResearcher( lpNpc, lpObj ) == TRUE )
; 557  : 		{
; 558  : 			return 1;
; 559  : 		}
; 560  : 		break;
; 561  : #endif // ADD_ITEM_SOCKET_OPTION_MIX_20080415
; 562  : 
; 563  : #ifdef EXPERIENCE_SERVER_NPC_STAT_RESET 
; 564  : 	case NPC_STAT_RESET:
; 565  : 		if( NpcStatResetTalk(lpNpc, lpObj) == TRUE)
; 566  : 		{
; 567  : 			return 1;
; 568  : 		}
; 569  : 		break;
; 570  : #endif //EXPERIENCE_SERVER_NPC_STAT_RESET
; 571  : 
; 572  : #ifdef UPDATE_LUCKY_COIN_EVENT_20081029
; 573  : 	case NPC_DELGADO:
; 574  : 		if( NpcLuckyCoinDelgado(lpNpc, lpObj) == TRUE )
; 575  : 		{
; 576  : 			return 1;
; 577  : 		}
; 578  : 		break;
; 579  : #endif	// UPDATE_LUCKY_COIN_EVENT_20081029
; 580  : 		//------------->
; 581  : 		//20081013 해외 크리스마스 이벤트 - NPC (grooving)
; 582  : #ifdef ADD_NPC_XMASEVENT_20080930
; 583  : 	case NPC_SANTA:
; 584  : 		if( Npc_SantaTalk(lpNpc, lpObj) == TRUE)
; 585  : 		{
; 586  : 			return 1;
; 587  : 		}
; 588  : 		break;
; 589  : 	case NPC_SNOW_MAN:
; 590  : 		if( Npc_SnowManTalk(lpNpc, lpObj) == TRUE)
; 591  : 		{
; 592  : 			return 1;
; 593  : 		}
; 594  : 		break;
; 595  : 	case NPC_LITTLE_SANTA_1:
; 596  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, BUFFTYPE_SANTA_POWER) == TRUE)
; 597  : 		{
; 598  : 			return 1;
; 599  : 		}
; 600  : 		break;
; 601  : 	case NPC_LITTLE_SANTA_2:
; 602  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, BUFFTYPE_SANTA_GUARD) == TRUE)
; 603  : 		{
; 604  : 			return 1;
; 605  : 		}
; 606  : 		break;
; 607  : 	case NPC_LITTLE_SANTA_3://체력 100% 회복
; 608  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, LIFE_RECOVERY) == TRUE)
; 609  : 		{
; 610  : 			return 1;
; 611  : 		}
; 612  : 		break;
; 613  : 	case NPC_LITTLE_SANTA_4://마나 100% 회복
; 614  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, MANA_RECOVERY) == TRUE)
; 615  : 		{
; 616  : 			return 1;
; 617  : 		}
; 618  : 		break;
; 619  : 	case NPC_LITTLE_SANTA_5:
; 620  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, BUFFTYPE_SANTA_HEAL) == TRUE)
; 621  : 		{
; 622  : 			return 1;
; 623  : 		}
; 624  : 		break;
; 625  : 	case NPC_LITTLE_SANTA_6:
; 626  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, BUFFTYPE_SANTA_PROTECT) == TRUE)
; 627  : 		{
; 628  : 			return 1;
; 629  : 		}
; 630  : 		break;
; 631  : 	case NPC_LITTLE_SANTA_7:
; 632  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, BUFFTYPE_SANTA_SPEED) == TRUE)
; 633  : 		{
; 634  : 			return 1;
; 635  : 		}
; 636  : 		break;
; 637  : 	case NPC_LITTLE_SANTA_8:
; 638  : 		if( Npc_LittleSantaTalk(lpNpc, lpObj, BUFFTYPE_SANTA_LUCKY) == TRUE)
; 639  : 		{
; 640  : 			return 1;
; 641  : 		}
; 642  : 		break;
; 643  : #endif //ADD_NPC_XMASEVENT_20080930
; 644  : #ifdef ADD_NEWPVP_PKFIELD
; 645  : 	case NPC_TITUS:
; 646  : 		{
; 647  : 			if( lpObj->m_IfState.use > 0 )
; 648  : 			{
; 649  : 				return TRUE;
; 650  : 			}
; 651  : 
; 652  : 			g_NewPVP.SendChannelList(*lpNpc, *lpObj);
; 653  : 
; 654  : 			PMSG_TALKRESULT pResult;
; 655  : 			pResult.h.c = PMHCE_BYTE;
; 656  : 			pResult.h.headcode = 0x30;
; 657  : 			pResult.h.size = sizeof( pResult );
; 658  : 			pResult.result = 0x21;
; 659  : 			DataSend(lpObj->m_Index, (LPBYTE)&pResult, pResult.h.size);
; 660  : 
; 661  : 			// 성공했을때. 인터페이스 사용한다는 체크를 해둔다
; 662  : 			lpObj->m_IfState.use    = 1;
; 663  : 			lpObj->m_IfState.type   = I_ETCWINDOW;
; 664  : 
; 665  : 			return 1;
; 666  : 		}
; 667  : 		break;
; 668  : #endif // ADD_NEWPVP_PKFIELD
; 669  : 
; 670  : 	}
; 671  : 	return 0;

  003d3	33 c0		 xor	 eax, eax
$LN1@NpcTalk:

; 672  : }

  003d5	5f		 pop	 edi
  003d6	5e		 pop	 esi
  003d7	5b		 pop	 ebx
  003d8	8b e5		 mov	 esp, ebp
  003da	5d		 pop	 ebp
  003db	c3		 ret	 0
$LN54@NpcTalk:
  003dc	00 00 00 00	 DD	 $LN31@NpcTalk
  003e0	00 00 00 00	 DD	 $LN2@NpcTalk
  003e4	00 00 00 00	 DD	 $LN2@NpcTalk
  003e8	00 00 00 00	 DD	 $LN2@NpcTalk
  003ec	00 00 00 00	 DD	 $LN2@NpcTalk
  003f0	00 00 00 00	 DD	 $LN2@NpcTalk
  003f4	00 00 00 00	 DD	 $LN39@NpcTalk
  003f8	00 00 00 00	 DD	 $LN41@NpcTalk
  003fc	00 00 00 00	 DD	 $LN2@NpcTalk
  00400	00 00 00 00	 DD	 $LN2@NpcTalk
  00404	00 00 00 00	 DD	 $LN37@NpcTalk
  00408	00 00 00 00	 DD	 $LN21@NpcTalk
  0040c	00 00 00 00	 DD	 $LN19@NpcTalk
  00410	00 00 00 00	 DD	 $LN15@NpcTalk
  00414	00 00 00 00	 DD	 $LN29@NpcTalk
  00418	00 00 00 00	 DD	 $LN13@NpcTalk
  0041c	00 00 00 00	 DD	 $LN33@NpcTalk
  00420	00 00 00 00	 DD	 $LN51@NpcTalk
  00424	00 00 00 00	 DD	 $LN35@NpcTalk
  00428	00 00 00 00	 DD	 $LN25@NpcTalk
  0042c	00 00 00 00	 DD	 $LN47@NpcTalk
  00430	00 00 00 00	 DD	 $LN27@NpcTalk
  00434	00 00 00 00	 DD	 $LN2@NpcTalk
  00438	00 00 00 00	 DD	 $LN17@NpcTalk
  0043c	00 00 00 00	 DD	 $LN45@NpcTalk
  00440	00 00 00 00	 DD	 $LN49@NpcTalk
  00444	00 00 00 00	 DD	 $LN2@NpcTalk
  00448	00 00 00 00	 DD	 $LN23@NpcTalk
  0044c	00 00 00 00	 DD	 $LN11@NpcTalk
  00450	00 00 00 00	 DD	 $LN43@NpcTalk
?NpcTalk@@YAHPAVOBJECTSTRUCT@@0@Z ENDP			; NpcTalk
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?__empty_global_delete@@YAXPAXI@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
___formal$ = 12						; size = 4
?__empty_global_delete@@YAXPAXI@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAXI@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\NpcTalk.cpp
;	COMDAT ?__empty_global_delete@@YAXPAX@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
?__empty_global_delete@@YAXPAX@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAX@Z ENDP			; __empty_global_delete
_TEXT	ENDS
END
