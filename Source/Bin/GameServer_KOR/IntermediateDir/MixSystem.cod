; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29111.0 

	TITLE	C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_H@YGXPAXIIP6EPAX0@Z@Z			; `vector constructor iterator'
PUBLIC	?__empty_global_delete@@YAXPAX@Z		; __empty_global_delete
PUBLIC	?__empty_global_delete@@YAXPAXI@Z		; __empty_global_delete
PUBLIC	??0CMixSystem@@QAE@XZ				; CMixSystem::CMixSystem
PUBLIC	??1CMixSystem@@UAE@XZ				; CMixSystem::~CMixSystem
PUBLIC	?ChaosBoxCheck@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxCheck
PUBLIC	?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit
PUBLIC	?ChaosBoxItemDown@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxItemDown
PUBLIC	?ChaosBoxMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH@Z ; CMixSystem::ChaosBoxMix
PUBLIC	?DefaultChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::DefaultChaosMix
PUBLIC	?CheckDevilSquareItem@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH1@Z ; CMixSystem::CheckDevilSquareItem
PUBLIC	?DevilSquareEventChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@HH@Z ; CMixSystem::DevilSquareEventChaosMix
PUBLIC	?DevilSquareItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::DevilSquareItemChaosMix
PUBLIC	?LogPlusItemLevelChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::LogPlusItemLevelChaosItem
PUBLIC	?PlusItemLevelChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@H@Z ; CMixSystem::PlusItemLevelChaosMix
PUBLIC	?PegasiaChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::PegasiaChaosMix
PUBLIC	?CircleChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::CircleChaosMix
PUBLIC	?WingChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::WingChaosMix
PUBLIC	?BloodCastleItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::BloodCastleItemChaosMix
PUBLIC	?DarkHorseChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::DarkHorseChaosMix
PUBLIC	?DarkSpiritChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::DarkSpiritChaosMix
PUBLIC	?SetItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::SetItemChaosMix
PUBLIC	?CBUPS_ItemRequest@CMixSystem@@QAEXHPAD0@Z	; CMixSystem::CBUPS_ItemRequest
PUBLIC	?LogDQChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::LogDQChaosItem
PUBLIC	?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem
PUBLIC	??_GCMixSystem@@UAEPAXI@Z			; CMixSystem::`scalar deleting destructor'
PUBLIC	?ChaosEventProtocolCore@@YAXEPAEH@Z		; ChaosEventProtocolCore
PUBLIC	??_7CMixSystem@@6B@				; CMixSystem::`vftable'
PUBLIC	?g_MixSystem@@3VCMixSystem@@A			; g_MixSystem
PUBLIC	??_C@_0FA@LILHPMOA@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CFd?0?$CFd?0@ ; `string'
PUBLIC	??_C@_0CO@OHEDNMHC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5need?5Zen?5?3?5?$CFd?5Su@ ; `string'
PUBLIC	??_C@_0CF@NPEOFJKC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CFd?5Money?5?3?5@ ; `string'
PUBLIC	??_C@_0CK@IKEPLJDI@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Success?5Rate?3?$CFd?5@ ; `string'
PUBLIC	??_C@_0FK@JHMNIDGD@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CF@ ; `string'
PUBLIC	??_C@_0CF@MGDMILOL@?$FLDevilSquare?$FN?5Search?5DevilSquar@ ; `string'
PUBLIC	??_C@_0CC@LINAPAPC@?$FLDevilSquare?$FN?5Other?5DQItems?5Fou@ ; `string'
PUBLIC	??_C@_0CG@FFFDDFEO@?$FLDevilSquare?$FN?5DiffLevel?5DQItems@ ; `string'
PUBLIC	??_C@_0CA@IANBADIL@?$FLDevilSquare?$FN?5DQItems?5Not?5Found@ ; `string'
PUBLIC	??_C@_0BO@MDACFBLC@?$FLDevilSquare?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0DB@BMAIOAHL@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Invalid?5@ ; `string'
PUBLIC	??_C@_0EB@HHHNMGIM@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5No@ ; `string'
PUBLIC	??_C@_0DD@FDPNEDKC@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@ ; `string'
PUBLIC	??_C@_0DI@OFMFJJMN@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@ ; `string'
PUBLIC	??_C@_0DB@DMIHKADD@?$FLDevilSquare?$FN?5DiffLevel?5Devil?8s@ ; `string'
PUBLIC	??_C@_0CH@NMBMOEEC@?$FLDevilSquare?$FN?5Not?5Found?5Chaos?5G@ ; `string'
PUBLIC	??_C@_0DA@FMJGNMLI@?$FLDevilSquare?$FN?5Too?5many?5Devil?8s?5@ ; `string'
PUBLIC	??_C@_0GF@PODFFLNF@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ ; `string'
PUBLIC	??_C@_0FB@PJBJGHOH@?$FL?$CFs?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CF@ ; `string'
PUBLIC	??_C@_0CA@BGIGBHFB@?$FLPlusItemLevel?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0ED@HJNGDDFB@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ ; `string'
PUBLIC	??_C@_0DN@JHMDCPGJ@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ ; `string'
PUBLIC	??_C@_0DK@LLFDLJGI@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ ; `string'
PUBLIC	??_C@_0M@OEKEBNDM@DinorantMix@			; `string'
PUBLIC	??_C@_0BO@BKFHPCAO@?$FLDinorantMix?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0DG@PGAEFDFE@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@ ; `string'
PUBLIC	??_C@_0DD@PGELDBJJ@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@ ; `string'
PUBLIC	??_C@_09CKGJGION@CircleMix@			; `string'
PUBLIC	??_C@_0BM@EFIHICLO@?$FLCircleMix?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0DE@ODBJEMOH@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succ@ ; `string'
PUBLIC	??_C@_0DB@HBBMEHFE@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail@ ; `string'
PUBLIC	??_C@_07LGCJFLJ@WingMix@			; `string'
PUBLIC	??_C@_0BK@BEFIGKLL@?$FLWingMix?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0DC@NHCJDPPL@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succes@ ; `string'
PUBLIC	??_C@_0CP@NJKJKFNH@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CF@ ; `string'
PUBLIC	??_C@_0N@LDINKAHL@DarkHorseMix@			; `string'
PUBLIC	??_C@_0BP@IMILBLLO@?$FLDarkHorseMix?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0DH@OLKNLOID@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5S@ ; `string'
PUBLIC	??_C@_0DE@OLLNPMC@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5F@ ; `string'
PUBLIC	??_C@_0O@OCFEOMDO@DarkSpiritMix@		; `string'
PUBLIC	??_C@_0CA@HOBPNGGO@?$FLDarkSpiritMix?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0DI@COGKJDMF@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ ; `string'
PUBLIC	??_C@_0DF@GJLJAMBJ@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ ; `string'
PUBLIC	??_C@_0L@DBFFCLIB@SetItemMix@			; `string'
PUBLIC	??_C@_0BN@JHMGADIL@?$FLSetItemMix?$FN?5Chaos?5Mix?5Start@ ; `string'
PUBLIC	??_C@_0EC@BFAACIGE@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Suc@ ; `string'
PUBLIC	??_C@_0DC@ILPOEBCF@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fai@ ; `string'
PUBLIC	??_C@_0CI@FBGJBFGF@?$FLDevilSquare?$FN?5?$MA?L?$LK?$KF?F?$KO?5?$LA?f?G?$LA?5?$LP?d?C?$LL?5@ ; `string'
PUBLIC	??_R4CMixSystem@@6B@				; CMixSystem::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCMixSystem@@@8				; CMixSystem `RTTI Type Descriptor'
PUBLIC	??_R3CMixSystem@@8				; CMixSystem::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CMixSystem@@8				; CMixSystem::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CMixSystem@@8			; CMixSystem::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	__real@437f0000
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	??_U@YAPAXI@Z:PROC				; operator new[]
EXTRN	??_V@YAXPAXI@Z:PROC				; operator delete[]
EXTRN	_atexit:PROC
EXTRN	_memcpy:PROC
EXTRN	_rand:PROC
EXTRN	??0CItem@@QAE@XZ:PROC				; CItem::CItem
EXTRN	?Convert@CItem@@QAEXHEEEEEE@Z:PROC		; CItem::Convert
EXTRN	?OldValue@CItem@@QAEXXZ:PROC			; CItem::OldValue
EXTRN	?Clear@CItem@@QAEXXZ:PROC			; CItem::Clear
EXTRN	?IsItem@CItem@@QAEHXZ:PROC			; CItem::IsItem
EXTRN	?IsSetItem@CItem@@QAEHXZ:PROC			; CItem::IsSetItem
EXTRN	?GetName@CItem@@QAEPADXZ:PROC			; CItem::GetName
EXTRN	?IsExtItem@CItem@@QAEHXZ:PROC			; CItem::IsExtItem
EXTRN	?ItemByteConvert@@YAXPAEVCItem@@@Z:PROC		; ItemByteConvert
EXTRN	?ItemGetDurability@@YAHHHHH@Z:PROC		; ItemGetDurability
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?gObjInventoryCommit@@YAHH@Z:PROC		; gObjInventoryCommit
EXTRN	?gObjChaosBoxInsertItemPos@@YAEHVCItem@@HH@Z:PROC ; gObjChaosBoxInsertItemPos
EXTRN	?gObjChaosItemSet@@YAXHHE@Z:PROC		; gObjChaosItemSet
EXTRN	?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z:PROC	; ItemIsBufExOption
EXTRN	?GCMoneySend@@YAXHK@Z:PROC			; GCMoneySend
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
EXTRN	?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z:PROC ; GCUserChaosBoxSend
EXTRN	??_ECMixSystem@@UAEPAXI@Z:PROC			; CMixSystem::`vector deleting destructor'
EXTRN	?MakeItemNumber@@YAHHH@Z:PROC			; MakeItemNumber
EXTRN	?SendData@WzUdp@@QAEHPAEK@Z:PROC		; WzUdp::SendData
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z:PROC	; ItemSerialCreateSend
EXTRN	?PetItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z:PROC ; PetItemSerialCreateSend
EXTRN	?IsSetItem@CSetItemOption@@QAEHH@Z:PROC		; CSetItemOption::IsSetItem
EXTRN	?GetSetOptionName@CSetItemOption@@QAEPADHH@Z:PROC ; CSetItemOption::GetSetOptionName
EXTRN	?CheckMixContition@CSetItemOption@@QAEHHH@Z:PROC ; CSetItemOption::CheckMixContition
EXTRN	?MakeSetOption@CSetItemOption@@QAEHHH@Z:PROC	; CSetItemOption::MakeSetOption
EXTRN	?CheckChoasMixItem@CBloodCastle@@QAEHH@Z:PROC	; CBloodCastle::CheckChoasMixItem
EXTRN	?BloodCastleChaosMix@CBloodCastle@@QAE_NHH@Z:PROC ; CBloodCastle::BloodCastleChaosMix
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?g_GlobalConfig@@3VCGlobalConfig@@A:BYTE	; g_GlobalConfig
EXTRN	?gChaosEvent@@3HA:DWORD				; gChaosEvent
EXTRN	?gDevilSquareEvent@@3HA:DWORD			; gDevilSquareEvent
EXTRN	?gDQChaosSuccessRateLevel1@@3HA:DWORD		; gDQChaosSuccessRateLevel1
EXTRN	?gDQChaosSuccessRateLevel2@@3HA:DWORD		; gDQChaosSuccessRateLevel2
EXTRN	?gDQChaosSuccessRateLevel3@@3HA:DWORD		; gDQChaosSuccessRateLevel3
EXTRN	?gDQChaosSuccessRateLevel4@@3HA:DWORD		; gDQChaosSuccessRateLevel4
EXTRN	?gSetItemOption@@3VCSetItemOption@@A:BYTE	; gSetItemOption
EXTRN	?g_BloodCastle@@3VCBloodCastle@@A:BYTE		; g_BloodCastle
EXTRN	?gUdpSocCE@@3VWzUdp@@A:BYTE			; gUdpSocCE
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?g_MixSystem@@3VCMixSystem@@A DB 03cH DUP (?)		; g_MixSystem
_BSS	ENDS
CRT$XCU	SEGMENT
?g_MixSystem$initializer$@@3P6AXXZA DD FLAT:??__Eg_MixSystem@@YAXXZ ; g_MixSystem$initializer$
CRT$XCU	ENDS
;	COMDAT __real@437f0000
CONST	SEGMENT
__real@437f0000 DD 0437f0000r			; 255
CONST	ENDS
;	COMDAT ??_R1A@?0A@EA@CMixSystem@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CMixSystem@@8 DD FLAT:??_R0?AVCMixSystem@@@8 ; CMixSystem::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CMixSystem@@8
rdata$r	ENDS
;	COMDAT ??_R2CMixSystem@@8
rdata$r	SEGMENT
??_R2CMixSystem@@8 DD FLAT:??_R1A@?0A@EA@CMixSystem@@8	; CMixSystem::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CMixSystem@@8
rdata$r	SEGMENT
??_R3CMixSystem@@8 DD 00H				; CMixSystem::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CMixSystem@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCMixSystem@@@8
data$r	SEGMENT
??_R0?AVCMixSystem@@@8 DD FLAT:??_7type_info@@6B@	; CMixSystem `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCMixSystem@@', 00H
data$r	ENDS
;	COMDAT ??_R4CMixSystem@@6B@
rdata$r	SEGMENT
??_R4CMixSystem@@6B@ DD 00H				; CMixSystem::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCMixSystem@@@8
	DD	FLAT:??_R3CMixSystem@@8
rdata$r	ENDS
;	COMDAT ??_C@_0CI@FBGJBFGF@?$FLDevilSquare?$FN?5?$MA?L?$LK?$KF?F?$KO?5?$LA?f?G?$LA?5?$LP?d?C?$LL?5@
CONST	SEGMENT
??_C@_0CI@FBGJBFGF@?$FLDevilSquare?$FN?5?$MA?L?$LK?$KF?F?$KO?5?$LA?f?G?$LA?5?$LP?d?C?$LL?5@ DB '['
	DB	'DevilSquare] ', 0c0H, 0ccH, 0baH, 0a5H, 0c6H, 0aeH, ' ', 0b0H
	DB	0e6H, 0c7H, 0b0H, ' ', 0bfH, 0e4H, 0c3H, 0bbH, ' [%s][%s]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DC@ILPOEBCF@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fai@
CONST	SEGMENT
??_C@_0DC@ILPOEBCF@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fai@ DB '['
	DB	'SetItemMix] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EC@BFAACIGE@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Suc@
CONST	SEGMENT
??_C@_0EC@BFAACIGE@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Suc@ DB '['
	DB	'SetItemMix] [%s][%s] CBMix Success %d Money : %d-%d (SetName:'
	DB	'%s)', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0BN@JHMGADIL@?$FLSetItemMix?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0BN@JHMGADIL@?$FLSetItemMix?$FN?5Chaos?5Mix?5Start@ DB '[SetItemMix'
	DB	'] Chaos Mix Start', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@DBFFCLIB@SetItemMix@
CONST	SEGMENT
??_C@_0L@DBFFCLIB@SetItemMix@ DB 'SetItemMix', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DF@GJLJAMBJ@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
CONST	SEGMENT
??_C@_0DF@GJLJAMBJ@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ DB '['
	DB	'DarkSpiritMix] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@COGKJDMF@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
CONST	SEGMENT
??_C@_0DI@COGKJDMF@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ DB '['
	DB	'DarkSpiritMix] [%s][%s] CBMix Success %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@HOBPNGGO@?$FLDarkSpiritMix?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0CA@HOBPNGGO@?$FLDarkSpiritMix?$FN?5Chaos?5Mix?5Start@ DB '[DarkSpi'
	DB	'ritMix] Chaos Mix Start', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@OCFEOMDO@DarkSpiritMix@
CONST	SEGMENT
??_C@_0O@OCFEOMDO@DarkSpiritMix@ DB 'DarkSpiritMix', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DE@OLLNPMC@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5F@
CONST	SEGMENT
??_C@_0DE@OLLNPMC@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5F@ DB '['
	DB	'DarkHorseMix] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DH@OLKNLOID@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5S@
CONST	SEGMENT
??_C@_0DH@OLKNLOID@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5S@ DB '['
	DB	'DarkHorseMix] [%s][%s] CBMix Success %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@IMILBLLO@?$FLDarkHorseMix?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0BP@IMILBLLO@?$FLDarkHorseMix?$FN?5Chaos?5Mix?5Start@ DB '[DarkHors'
	DB	'eMix] Chaos Mix Start', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@LDINKAHL@DarkHorseMix@
CONST	SEGMENT
??_C@_0N@LDINKAHL@DarkHorseMix@ DB 'DarkHorseMix', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CP@NJKJKFNH@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CF@
CONST	SEGMENT
??_C@_0CP@NJKJKFNH@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CF@ DB '['
	DB	'WingMix] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DC@NHCJDPPL@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succes@
CONST	SEGMENT
??_C@_0DC@NHCJDPPL@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succes@ DB '['
	DB	'WingMix] [%s][%s] CBMix Success %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BK@BEFIGKLL@?$FLWingMix?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0BK@BEFIGKLL@?$FLWingMix?$FN?5Chaos?5Mix?5Start@ DB '[WingMix] Chao'
	DB	's Mix Start', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_07LGCJFLJ@WingMix@
CONST	SEGMENT
??_C@_07LGCJFLJ@WingMix@ DB 'WingMix', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@HBBMEHFE@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail@
CONST	SEGMENT
??_C@_0DB@HBBMEHFE@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail@ DB '['
	DB	'CircleMix] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DE@ODBJEMOH@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succ@
CONST	SEGMENT
??_C@_0DE@ODBJEMOH@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succ@ DB '['
	DB	'CircleMix] [%s][%s] CBMix Success %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@EFIHICLO@?$FLCircleMix?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0BM@EFIHICLO@?$FLCircleMix?$FN?5Chaos?5Mix?5Start@ DB '[CircleMix] '
	DB	'Chaos Mix Start', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_09CKGJGION@CircleMix@
CONST	SEGMENT
??_C@_09CKGJGION@CircleMix@ DB 'CircleMix', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@PGELDBJJ@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@
CONST	SEGMENT
??_C@_0DD@PGELDBJJ@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@ DB '['
	DB	'DinorantMix] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DG@PGAEFDFE@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@
CONST	SEGMENT
??_C@_0DG@PGAEFDFE@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@ DB '['
	DB	'DinorantMix] [%s][%s] CBMix Success %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BO@BKFHPCAO@?$FLDinorantMix?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0BO@BKFHPCAO@?$FLDinorantMix?$FN?5Chaos?5Mix?5Start@ DB '[DinorantM'
	DB	'ix] Chaos Mix Start', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@OEKEBNDM@DinorantMix@
CONST	SEGMENT
??_C@_0M@OEKEBNDM@DinorantMix@ DB 'DinorantMix', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@LLFDLJGI@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
CONST	SEGMENT
??_C@_0DK@LLFDLJGI@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ DB '['
	DB	'PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DN@JHMDCPGJ@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
CONST	SEGMENT
??_C@_0DN@JHMDCPGJ@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ DB '['
	DB	'PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0ED@HJNGDDFB@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
CONST	SEGMENT
??_C@_0ED@HJNGDDFB@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ DB '['
	DB	'PlusItemLevel] [%s][%s] CBMix Not Enough Money [%d] need zen '
	DB	'[%d]', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@BGIGBHFB@?$FLPlusItemLevel?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0CA@BGIGBHFB@?$FLPlusItemLevel?$FN?5Chaos?5Mix?5Start@ DB '[PlusIte'
	DB	'mLevel] Chaos Mix Start', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0FB@PJBJGHOH@?$FL?$CFs?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CF@
CONST	SEGMENT
??_C@_0FB@PJBJGHOH@?$FL?$CFs?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CF@ DB '['
	DB	'%s] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,'
	DB	'%d,%d,%d,%d,%d,%d]', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0GF@PODFFLNF@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
CONST	SEGMENT
??_C@_0GF@PODFFLNF@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@ DB '['
	DB	'PlusItemLevel] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d]['
	DB	'%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@FMJGNMLI@?$FLDevilSquare?$FN?5Too?5many?5Devil?8s?5@
CONST	SEGMENT
??_C@_0DA@FMJGNMLI@?$FLDevilSquare?$FN?5Too?5many?5Devil?8s?5@ DB '[Devil'
	DB	'Square] Too many Devil''s Key or Eyes [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@NMBMOEEC@?$FLDevilSquare?$FN?5Not?5Found?5Chaos?5G@
CONST	SEGMENT
??_C@_0CH@NMBMOEEC@?$FLDevilSquare?$FN?5Not?5Found?5Chaos?5G@ DB '[DevilS'
	DB	'quare] Not Found Chaos Gem [%d]', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@DMIHKADD@?$FLDevilSquare?$FN?5DiffLevel?5Devil?8s@
CONST	SEGMENT
??_C@_0DB@DMIHKADD@?$FLDevilSquare?$FN?5DiffLevel?5Devil?8s@ DB '[DevilSq'
	DB	'uare] DiffLevel Devil''s Key or Eyes [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@OFMFJJMN@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@
CONST	SEGMENT
??_C@_0DI@OFMFJJMN@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@ DB '['
	DB	'DevilSquare] [%s][%s] CBMix Success Rate:%d Money : %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@FDPNEDKC@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@
CONST	SEGMENT
??_C@_0DD@FDPNEDKC@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@ DB '['
	DB	'DevilSquare] [%s][%s] CBMix Fail %d Money : %d-%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EB@HHHNMGIM@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5No@
CONST	SEGMENT
??_C@_0EB@HHHNMGIM@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5No@ DB '['
	DB	'DevilSquare] [%s][%s] CBMix Not Enough Money [%d] need zen [%'
	DB	'd]', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@BMAIOAHL@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Invalid?5@
CONST	SEGMENT
??_C@_0DB@BMAIOAHL@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Invalid?5@ DB '['
	DB	'DevilSquare] [%s][%s] Invalid DQItem Level [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BO@MDACFBLC@?$FLDevilSquare?$FN?5Chaos?5Mix?5Start@
CONST	SEGMENT
??_C@_0BO@MDACFBLC@?$FLDevilSquare?$FN?5Chaos?5Mix?5Start@ DB '[DevilSqua'
	DB	're] Chaos Mix Start', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@IANBADIL@?$FLDevilSquare?$FN?5DQItems?5Not?5Found@
CONST	SEGMENT
??_C@_0CA@IANBADIL@?$FLDevilSquare?$FN?5DQItems?5Not?5Found@ DB '[DevilSq'
	DB	'uare] DQItems Not Found', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CG@FFFDDFEO@?$FLDevilSquare?$FN?5DiffLevel?5DQItems@
CONST	SEGMENT
??_C@_0CG@FFFDDFEO@?$FLDevilSquare?$FN?5DiffLevel?5DQItems@ DB '[DevilSqu'
	DB	'are] DiffLevel DQItems Found', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@LINAPAPC@?$FLDevilSquare?$FN?5Other?5DQItems?5Fou@
CONST	SEGMENT
??_C@_0CC@LINAPAPC@?$FLDevilSquare?$FN?5Other?5DQItems?5Fou@ DB '[DevilSq'
	DB	'uare] Other DQItems Found', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CF@MGDMILOL@?$FLDevilSquare?$FN?5Search?5DevilSquar@
CONST	SEGMENT
??_C@_0CF@MGDMILOL@?$FLDevilSquare?$FN?5Search?5DevilSquar@ DB '[DevilSqu'
	DB	'are] Search DevilSquareItem', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0FK@JHMNIDGD@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CF@
CONST	SEGMENT
??_C@_0FK@JHMNIDGD@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CF@ DB '['
	DB	'DevilSquare] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d'
	DB	'] Ex:[%d,%d,%d,%d,%d,%d,%d]', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@IKEPLJDI@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Success?5Rate?3?$CFd?5@
CONST	SEGMENT
??_C@_0CK@IKEPLJDI@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Success?5Rate?3?$CFd?5@ DB '['
	DB	'%s][%s] CBMix Success Rate:%d Money : %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CF@NPEOFJKC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CFd?5Money?5?3?5@
CONST	SEGMENT
??_C@_0CF@NPEOFJKC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CFd?5Money?5?3?5@ DB '['
	DB	'%s][%s] CBMix Fail %d Money : %d-%d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CO@OHEDNMHC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5need?5Zen?5?3?5?$CFd?5Su@
CONST	SEGMENT
??_C@_0CO@OHEDNMHC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5need?5Zen?5?3?5?$CFd?5Su@ DB '['
	DB	'%s][%s] CBMix need Zen : %d SuccessRate : %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0FA@LILHPMOA@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CFd?0?$CFd?0@
CONST	SEGMENT
??_C@_0FA@LILHPMOA@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CFd?0?$CFd?0@ DB '['
	DB	'%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d][%d] Ex:[%d,%'
	DB	'd,%d,%d,%d,%d,%d]', 00H			; `string'
CONST	ENDS
;	COMDAT ??_7CMixSystem@@6B@
CONST	SEGMENT
??_7CMixSystem@@6B@ DD FLAT:??_R4CMixSystem@@6B@	; CMixSystem::`vftable'
	DD	FLAT:??_ECMixSystem@@UAEPAXI@Z
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z$0
__ehfuncinfo$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??__Fg_MixSystem@@YAXXZ
text$yd	SEGMENT
??__Fg_MixSystem@@YAXXZ PROC				; `dynamic atexit destructor for 'g_MixSystem'', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_MixSystem@@3VCMixSystem@@A ; g_MixSystem
  0000e	e8 00 00 00 00	 call	 ??1CMixSystem@@UAE@XZ	; CMixSystem::~CMixSystem
  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
??__Fg_MixSystem@@YAXXZ ENDP				; `dynamic atexit destructor for 'g_MixSystem''
text$yd	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ??__Eg_MixSystem@@YAXXZ
text$di	SEGMENT
??__Eg_MixSystem@@YAXXZ PROC				; `dynamic initializer for 'g_MixSystem'', COMDAT

; 62   : CMixSystem g_MixSystem;

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_MixSystem@@3VCMixSystem@@A ; g_MixSystem
  0000e	e8 00 00 00 00	 call	 ??0CMixSystem@@QAE@XZ	; CMixSystem::CMixSystem
  00013	68 00 00 00 00	 push	 OFFSET ??__Fg_MixSystem@@YAXXZ ; `dynamic atexit destructor for 'g_MixSystem''
  00018	e8 00 00 00 00	 call	 _atexit
  0001d	83 c4 04	 add	 esp, 4
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??__Eg_MixSystem@@YAXXZ ENDP				; `dynamic initializer for 'g_MixSystem''
text$di	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?ChaosEventProtocolCore@@YAXEPAEH@Z
_TEXT	SEGMENT
tv65 = -68						; size = 4
_protoNum$ = 8						; size = 1
_aRecv$ = 12						; size = 4
_aLen$ = 16						; size = 4
?ChaosEventProtocolCore@@YAXEPAEH@Z PROC		; ChaosEventProtocolCore, COMDAT

; 6393 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 6394 : 	switch( protoNum )

  00009	0f b6 45 08	 movzx	 eax, BYTE PTR _protoNum$[ebp]
  0000d	89 45 bc	 mov	 DWORD PTR tv65[ebp], eax

; 6395 : 	{
; 6396 : 	case 0x01 :
; 6397 : 	//	CBUPR_ItemRequestRecv((LPCB_PMSG_REQ_PRESENT_RESULT)aRecv);
; 6398 : 		break;
; 6399 : 	}
; 6400 : }

  00010	5f		 pop	 edi
  00011	5e		 pop	 esi
  00012	5b		 pop	 ebx
  00013	8b e5		 mov	 esp, ebp
  00015	5d		 pop	 ebp
  00016	c3		 ret	 0
?ChaosEventProtocolCore@@YAXEPAEH@Z ENDP		; ChaosEventProtocolCore
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCMixSystem@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCMixSystem@@UAEPAXI@Z PROC				; CMixSystem::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CMixSystem@@UAE@XZ	; CMixSystem::~CMixSystem
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0e		 je	 SHORT $LN2@scalar
  0001c	6a 3c		 push	 60			; 0000003cH
  0001e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00021	50		 push	 eax
  00022	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00027	83 c4 08	 add	 esp, 8
$LN2@scalar:
  0002a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c2 04 00	 ret	 4
??_GCMixSystem@@UAEPAXI@Z ENDP				; CMixSystem::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z
_TEXT	SEGMENT
_n$1 = -20						; size = 4
_ExOption$ = -16					; size = 8
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
_sLogType$ = 12						; size = 4
?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z PROC ; CMixSystem::LogChaosItem, COMDAT
; _this$ = ecx

; 1286 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 1287 : 	BYTE ExOption[8];
; 1288 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00016	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  0001d	eb 09		 jmp	 SHORT $LN4@LogChaosIt
$LN2@LogChaosIt:
  0001f	8b 45 ec	 mov	 eax, DWORD PTR _n$1[ebp]
  00022	83 c0 01	 add	 eax, 1
  00025	89 45 ec	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@LogChaosIt:
  00028	83 7d ec 20	 cmp	 DWORD PTR _n$1[ebp], 32	; 00000020H
  0002c	0f 8d 5e 01 00
	00		 jge	 $LN3@LogChaosIt

; 1289 : 	{
; 1290 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00032	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00039	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003c	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00042	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00047	83 f8 01	 cmp	 eax, 1
  0004a	0f 85 3b 01 00
	00		 jne	 $LN5@LogChaosIt

; 1291 : 		{
; 1292 : 			ItemIsBufExOption(ExOption, &lpObj->pChaosBox[n]);

  00050	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00057	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0005a	03 81 ac 0c 00
	00		 add	 eax, DWORD PTR [ecx+3244]
  00060	50		 push	 eax
  00061	8d 55 f0	 lea	 edx, DWORD PTR _ExOption$[ebp]
  00064	52		 push	 edx
  00065	e8 00 00 00 00	 call	 ?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z ; ItemIsBufExOption
  0006a	83 c4 08	 add	 esp, 8

; 1293 : #ifdef ADD_SOCKET_OPTION_LOG_02_20080821
; 1294 : 			LogAddTD("[%s] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380:[%d] HO:[%d,%d] Socket[%d,%d,%d,%d,%d]", 
; 1295 : 					sLogType, lpObj->AccountID, lpObj->Name, 
; 1296 : 					n, 
; 1297 : 					lpObj->pChaosBox[n].GetName(),
; 1298 : 					lpObj->pChaosBox[n].m_Level,
; 1299 : 					lpObj->pChaosBox[n].m_Option1,
; 1300 : 					lpObj->pChaosBox[n].m_Option2,
; 1301 : 					lpObj->pChaosBox[n].m_Option3, 
; 1302 : 					lpObj->pChaosBox[n].m_Number, 
; 1303 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1304 : 					ExOption[0],
; 1305 : 					ExOption[1],
; 1306 : 					ExOption[2],
; 1307 : 					ExOption[3],
; 1308 : 					ExOption[4],
; 1309 : 					ExOption[5],
; 1310 : 					ExOption[6],
; 1311 : 					lpObj->pChaosBox[n].m_SetOption,
; 1312 : 					lpObj->pChaosBox[n].m_ItemOptionEx >> 7,
; 1313 : 					g_kJewelOfHarmonySystem.GetItemStrengthenOption( &lpObj->pChaosBox[n] ),
; 1314 : 					g_kJewelOfHarmonySystem.GetItemOptionLevel( &lpObj->pChaosBox[n] ),
; 1315 : 					lpObj->pChaosBox[n].m_SocketOption[0],
; 1316 : 					lpObj->pChaosBox[n].m_SocketOption[1],
; 1317 : 					lpObj->pChaosBox[n].m_SocketOption[2],
; 1318 : 					lpObj->pChaosBox[n].m_SocketOption[3],
; 1319 : 					lpObj->pChaosBox[n].m_SocketOption[4]
; 1320 : 					);
; 1321 : #else
; 1322 : 	#ifdef MODIFY_LOG_SYSTEM_2_3_20060828
; 1323 : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1324 : 			LogAddTD("[%s] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380:[%d] HO:[%d,%d]", 
; 1325 : 		#else
; 1326 : 			LogAddTD("[%s] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380:[%d] HO:[%d,%d]", 
; 1327 : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1328 : 					sLogType, lpObj->AccountID, lpObj->Name, 
; 1329 : 					n, 
; 1330 : 					lpObj->pChaosBox[n].GetName(),
; 1331 : 					lpObj->pChaosBox[n].m_Level,
; 1332 : 					lpObj->pChaosBox[n].m_Option1,
; 1333 : 					lpObj->pChaosBox[n].m_Option2,
; 1334 : 					lpObj->pChaosBox[n].m_Option3, 
; 1335 : 					lpObj->pChaosBox[n].m_Number, 
; 1336 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1337 : 					ExOption[0],
; 1338 : 					ExOption[1],
; 1339 : 					ExOption[2],
; 1340 : 					ExOption[3],
; 1341 : 					ExOption[4],
; 1342 : 					ExOption[5],
; 1343 : 					ExOption[6],
; 1344 : 					lpObj->pChaosBox[n].m_SetOption,
; 1345 : 					lpObj->pChaosBox[n].m_ItemOptionEx >> 7,
; 1346 : 					g_kJewelOfHarmonySystem.GetItemStrengthenOption( &lpObj->pChaosBox[n] ),
; 1347 : 					g_kJewelOfHarmonySystem.GetItemOptionLevel( &lpObj->pChaosBox[n] )
; 1348 : 					);
; 1349 : 	#else
; 1350 : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1351 : 			LogAddTD("[%s] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 
; 1352 : 		#else
; 1353 : 			LogAddTD("[%s] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 

  0006d	b8 01 00 00 00	 mov	 eax, 1
  00072	6b c8 06	 imul	 ecx, eax, 6
  00075	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  0007a	52		 push	 edx
  0007b	b8 01 00 00 00	 mov	 eax, 1
  00080	6b c8 05	 imul	 ecx, eax, 5
  00083	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  00088	52		 push	 edx
  00089	b8 01 00 00 00	 mov	 eax, 1
  0008e	c1 e0 02	 shl	 eax, 2
  00091	0f b6 4c 05 f0	 movzx	 ecx, BYTE PTR _ExOption$[ebp+eax]
  00096	51		 push	 ecx
  00097	ba 01 00 00 00	 mov	 edx, 1
  0009c	6b c2 03	 imul	 eax, edx, 3
  0009f	0f b6 4c 05 f0	 movzx	 ecx, BYTE PTR _ExOption$[ebp+eax]
  000a4	51		 push	 ecx
  000a5	ba 01 00 00 00	 mov	 edx, 1
  000aa	d1 e2		 shl	 edx, 1
  000ac	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  000b1	50		 push	 eax
  000b2	b9 01 00 00 00	 mov	 ecx, 1
  000b7	c1 e1 00	 shl	 ecx, 0
  000ba	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  000bf	52		 push	 edx
  000c0	b8 01 00 00 00	 mov	 eax, 1
  000c5	6b c8 00	 imul	 ecx, eax, 0
  000c8	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  000cd	52		 push	 edx
  000ce	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  000d5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000d8	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000de	f3 0f 2c 44 02
	24		 cvttss2si eax, DWORD PTR [edx+eax+36]
  000e4	50		 push	 eax
  000e5	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  000ec	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000ef	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  000f5	8b 0c 08	 mov	 ecx, DWORD PTR [eax+ecx]
  000f8	51		 push	 ecx
  000f9	69 55 ec a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00100	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00103	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  00109	0f b6 54 11 7a	 movzx	 edx, BYTE PTR [ecx+edx+122]
  0010e	52		 push	 edx
  0010f	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00116	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00119	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0011f	0f b6 44 02 79	 movzx	 eax, BYTE PTR [edx+eax+121]
  00124	50		 push	 eax
  00125	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  0012c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0012f	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00135	0f b6 4c 08 78	 movzx	 ecx, BYTE PTR [eax+ecx+120]
  0013a	51		 push	 ecx
  0013b	69 55 ec a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00142	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00145	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  0014b	0f bf 54 11 08	 movsx	 edx, WORD PTR [ecx+edx+8]
  00150	52		 push	 edx
  00151	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00158	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0015b	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00161	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00166	50		 push	 eax
  00167	8b 4d ec	 mov	 ecx, DWORD PTR _n$1[ebp]
  0016a	51		 push	 ecx
  0016b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0016e	83 c2 73	 add	 edx, 115		; 00000073H
  00171	52		 push	 edx
  00172	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00175	83 c0 68	 add	 eax, 104		; 00000068H
  00178	50		 push	 eax
  00179	8b 4d 0c	 mov	 ecx, DWORD PTR _sLogType$[ebp]
  0017c	51		 push	 ecx
  0017d	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PJBJGHOH@?$FL?$CFs?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CF@
  00182	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00188	83 c4 4c	 add	 esp, 76			; 0000004cH
$LN5@LogChaosIt:

; 1354 : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1355 : 					sLogType, lpObj->AccountID, lpObj->Name, 
; 1356 : 					n, 
; 1357 : 					lpObj->pChaosBox[n].GetName(),
; 1358 : 					lpObj->pChaosBox[n].m_Level,
; 1359 : 					lpObj->pChaosBox[n].m_Option1,
; 1360 : 					lpObj->pChaosBox[n].m_Option2,
; 1361 : 					lpObj->pChaosBox[n].m_Option3, 
; 1362 : 					lpObj->pChaosBox[n].m_Number, 
; 1363 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1364 : 					ExOption[0],
; 1365 : 					ExOption[1],
; 1366 : 					ExOption[2],
; 1367 : 					ExOption[3],
; 1368 : 					ExOption[4],
; 1369 : 					ExOption[5],
; 1370 : 					ExOption[6]
; 1371 : 					);
; 1372 : 	#endif // MODIFY_LOG_SYSTEM_2_3_20060828
; 1373 : #endif // ADD_SOCKET_OPTION_LOG_02_20080821
; 1374 : 		}		
; 1375 : 	}

  0018b	e9 8f fe ff ff	 jmp	 $LN2@LogChaosIt
$LN3@LogChaosIt:

; 1376 : }

  00190	5f		 pop	 edi
  00191	5e		 pop	 esi
  00192	5b		 pop	 ebx
  00193	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00196	33 cd		 xor	 ecx, ebp
  00198	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0019d	8b e5		 mov	 esp, ebp
  0019f	5d		 pop	 ebp
  001a0	c2 08 00	 ret	 8
?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ENDP ; CMixSystem::LogChaosItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?LogDQChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -20						; size = 4
_ExOption$ = -16					; size = 8
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?LogDQChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::LogDQChaosItem, COMDAT
; _this$ = ecx

; 622  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 623  : 	BYTE ExOption[8];
; 624  : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00016	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  0001d	eb 09		 jmp	 SHORT $LN4@LogDQChaos
$LN2@LogDQChaos:
  0001f	8b 45 ec	 mov	 eax, DWORD PTR _n$1[ebp]
  00022	83 c0 01	 add	 eax, 1
  00025	89 45 ec	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@LogDQChaos:
  00028	83 7d ec 20	 cmp	 DWORD PTR _n$1[ebp], 32	; 00000020H
  0002c	0f 8d 5a 01 00
	00		 jge	 $LN3@LogDQChaos

; 625  : 	{
; 626  : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00032	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00039	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003c	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00042	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00047	83 f8 01	 cmp	 eax, 1
  0004a	0f 85 37 01 00
	00		 jne	 $LN5@LogDQChaos

; 627  : 		{
; 628  : 			ItemIsBufExOption(ExOption, &lpObj->pChaosBox[n]);

  00050	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00057	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0005a	03 81 ac 0c 00
	00		 add	 eax, DWORD PTR [ecx+3244]
  00060	50		 push	 eax
  00061	8d 55 f0	 lea	 edx, DWORD PTR _ExOption$[ebp]
  00064	52		 push	 edx
  00065	e8 00 00 00 00	 call	 ?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z ; ItemIsBufExOption
  0006a	83 c4 08	 add	 esp, 8

; 629  : 
; 630  : #ifdef EXTEND_LOG_SYSTEM_03_20060816
; 631  : 	#ifdef ADD_380ITEM_NEWOPTION_20060711
; 632  : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 633  : 				LogAddTD("[DevilSquare,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex[%d] HO:[%d,%d]", 
; 634  : 		#else
; 635  : 				LogAddTD("[DevilSquare,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex[%d] HO:[%d,%d]", 
; 636  : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 637  : 						lpObj->pChaosBox[n].m_Level,
; 638  : 						lpObj->AccountID, lpObj->Name, 
; 639  : 						n, 
; 640  : 						lpObj->pChaosBox[n].GetName(),
; 641  : 						lpObj->pChaosBox[n].m_Level,
; 642  : 						lpObj->pChaosBox[n].m_Option1,
; 643  : 						lpObj->pChaosBox[n].m_Option2,
; 644  : 						lpObj->pChaosBox[n].m_Option3, 
; 645  : 						lpObj->pChaosBox[n].m_Number, 
; 646  : 						(int)lpObj->pChaosBox[n].m_Durability,
; 647  : 						ExOption[0],
; 648  : 						ExOption[1],
; 649  : 						ExOption[2],
; 650  : 						ExOption[3],
; 651  : 						ExOption[4],
; 652  : 						ExOption[5],
; 653  : 						ExOption[6],
; 654  : 						lpObj->pChaosBox[n].m_SetOption,
; 655  : 						lpObj->pChaosBox[n].m_ItemOptionEx >> 7,
; 656  : 						g_kJewelOfHarmonySystem.GetItemStrengthenOption( &lpObj->pChaosBox[n] ),
; 657  : 						g_kJewelOfHarmonySystem.GetItemOptionLevel( &lpObj->pChaosBox[n] )
; 658  : 						);
; 659  : 	#else
; 660  : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 661  : 				LogAddTD("[DevilSquare,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 
; 662  : 		#else
; 663  : 				LogAddTD("[DevilSquare,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 
; 664  : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 665  : 						(int)lpObj->pChaosBox[n].m_Durability,
; 666  : 						lpObj->AccountID, lpObj->Name, 
; 667  : 						n, 
; 668  : 						lpObj->pChaosBox[n].GetName(),
; 669  : 						lpObj->pChaosBox[n].m_Level,
; 670  : 						lpObj->pChaosBox[n].m_Option1,
; 671  : 						lpObj->pChaosBox[n].m_Option2,
; 672  : 						lpObj->pChaosBox[n].m_Option3, 
; 673  : 						lpObj->pChaosBox[n].m_Number, 
; 674  : 						(int)lpObj->pChaosBox[n].m_Durability,				
; 675  : 						ExOption[0],
; 676  : 						ExOption[1],
; 677  : 						ExOption[2],
; 678  : 						ExOption[3],
; 679  : 						ExOption[4],
; 680  : 						ExOption[5],
; 681  : 						ExOption[6]
; 682  : 						);
; 683  : 	#endif // ADD_380ITEM_NEWOPTION_20060711
; 684  : 
; 685  : #else
; 686  : 	#ifdef ADD_380ITEM_NEWOPTION_20060711
; 687  : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 688  : 				LogAddTD("[DevilSquare] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] 380Ex[%d]", 
; 689  : 		#else
; 690  : 				LogAddTD("[DevilSquare] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] 380Ex[%d]", 
; 691  : 		#endif MODIFY_ITEM_SERIAL_EXPAND_20080227
; 692  : 						lpObj->AccountID, lpObj->Name, 
; 693  : 						n, 
; 694  : 						lpObj->pChaosBox[n].GetName(),
; 695  : 						lpObj->pChaosBox[n].m_Level,
; 696  : 						lpObj->pChaosBox[n].m_Option1,
; 697  : 						lpObj->pChaosBox[n].m_Option2,
; 698  : 						lpObj->pChaosBox[n].m_Option3, 
; 699  : 						lpObj->pChaosBox[n].m_Number, 
; 700  : 						(int)lpObj->pChaosBox[n].m_Durability,				
; 701  : 						ExOption[0],
; 702  : 						ExOption[1],
; 703  : 						ExOption[2],
; 704  : 						ExOption[3],
; 705  : 						ExOption[4],
; 706  : 						ExOption[5],
; 707  : 						ExOption[6],
; 708  : 						lpObj->pChaosBox[n].m_ItemOptionEx >> 7
; 709  : 						);
; 710  : 	#else
; 711  : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 712  : 				LogAddTD("[DevilSquare] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 
; 713  : 		#else
; 714  : 				LogAddTD("[DevilSquare] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 

  0006d	b8 01 00 00 00	 mov	 eax, 1
  00072	6b c8 06	 imul	 ecx, eax, 6
  00075	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  0007a	52		 push	 edx
  0007b	b8 01 00 00 00	 mov	 eax, 1
  00080	6b c8 05	 imul	 ecx, eax, 5
  00083	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  00088	52		 push	 edx
  00089	b8 01 00 00 00	 mov	 eax, 1
  0008e	c1 e0 02	 shl	 eax, 2
  00091	0f b6 4c 05 f0	 movzx	 ecx, BYTE PTR _ExOption$[ebp+eax]
  00096	51		 push	 ecx
  00097	ba 01 00 00 00	 mov	 edx, 1
  0009c	6b c2 03	 imul	 eax, edx, 3
  0009f	0f b6 4c 05 f0	 movzx	 ecx, BYTE PTR _ExOption$[ebp+eax]
  000a4	51		 push	 ecx
  000a5	ba 01 00 00 00	 mov	 edx, 1
  000aa	d1 e2		 shl	 edx, 1
  000ac	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  000b1	50		 push	 eax
  000b2	b9 01 00 00 00	 mov	 ecx, 1
  000b7	c1 e1 00	 shl	 ecx, 0
  000ba	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  000bf	52		 push	 edx
  000c0	b8 01 00 00 00	 mov	 eax, 1
  000c5	6b c8 00	 imul	 ecx, eax, 0
  000c8	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  000cd	52		 push	 edx
  000ce	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  000d5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000d8	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000de	f3 0f 2c 44 02
	24		 cvttss2si eax, DWORD PTR [edx+eax+36]
  000e4	50		 push	 eax
  000e5	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  000ec	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000ef	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  000f5	8b 0c 08	 mov	 ecx, DWORD PTR [eax+ecx]
  000f8	51		 push	 ecx
  000f9	69 55 ec a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00100	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00103	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  00109	0f b6 54 11 7a	 movzx	 edx, BYTE PTR [ecx+edx+122]
  0010e	52		 push	 edx
  0010f	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00116	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00119	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0011f	0f b6 44 02 79	 movzx	 eax, BYTE PTR [edx+eax+121]
  00124	50		 push	 eax
  00125	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  0012c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0012f	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00135	0f b6 4c 08 78	 movzx	 ecx, BYTE PTR [eax+ecx+120]
  0013a	51		 push	 ecx
  0013b	69 55 ec a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00142	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00145	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  0014b	0f bf 54 11 08	 movsx	 edx, WORD PTR [ecx+edx+8]
  00150	52		 push	 edx
  00151	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00158	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0015b	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00161	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00166	50		 push	 eax
  00167	8b 4d ec	 mov	 ecx, DWORD PTR _n$1[ebp]
  0016a	51		 push	 ecx
  0016b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0016e	83 c2 73	 add	 edx, 115		; 00000073H
  00171	52		 push	 edx
  00172	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00175	83 c0 68	 add	 eax, 104		; 00000068H
  00178	50		 push	 eax
  00179	68 00 00 00 00	 push	 OFFSET ??_C@_0FK@JHMNIDGD@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CF@
  0017e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00184	83 c4 48	 add	 esp, 72			; 00000048H
$LN5@LogDQChaos:

; 715  : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 716  : 						lpObj->AccountID, lpObj->Name, 
; 717  : 						n, 
; 718  : 						lpObj->pChaosBox[n].GetName(),
; 719  : 						lpObj->pChaosBox[n].m_Level,
; 720  : 						lpObj->pChaosBox[n].m_Option1,
; 721  : 						lpObj->pChaosBox[n].m_Option2,
; 722  : 						lpObj->pChaosBox[n].m_Option3, 
; 723  : 						lpObj->pChaosBox[n].m_Number, 
; 724  : 						(int)lpObj->pChaosBox[n].m_Durability,				
; 725  : 						ExOption[0],
; 726  : 						ExOption[1],
; 727  : 						ExOption[2],
; 728  : 						ExOption[3],
; 729  : 						ExOption[4],
; 730  : 						ExOption[5],
; 731  : 						ExOption[6]
; 732  : 						);
; 733  : 	#endif // ADD_380ITEM_NEWOPTION_20060711
; 734  : #endif // EXTEND_LOG_SYSTEM_03_20060816
; 735  : 
; 736  : 		}		
; 737  : 	}

  00187	e9 93 fe ff ff	 jmp	 $LN2@LogDQChaos
$LN3@LogDQChaos:

; 738  : }

  0018c	5f		 pop	 edi
  0018d	5e		 pop	 esi
  0018e	5b		 pop	 ebx
  0018f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00192	33 cd		 xor	 ecx, ebp
  00194	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00199	8b e5		 mov	 esp, ebp
  0019b	5d		 pop	 ebp
  0019c	c2 04 00	 ret	 4
?LogDQChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::LogDQChaosItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?CBUPS_ItemRequest@CMixSystem@@QAEXHPAD0@Z
_TEXT	SEGMENT
_pMsg$ = -36						; size = 28
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_AccountId$ = 12					; size = 4
_Name$ = 16						; size = 4
?CBUPS_ItemRequest@CMixSystem@@QAEXHPAD0@Z PROC		; CMixSystem::CBUPS_ItemRequest, COMDAT
; _this$ = ecx

; 6377 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 6378 : 	LogAddTD("[DevilSquare] 이벤트 경품 요청 [%s][%s]", AccountId, Name);

  00016	8b 45 10	 mov	 eax, DWORD PTR _Name$[ebp]
  00019	50		 push	 eax
  0001a	8b 4d 0c	 mov	 ecx, DWORD PTR _AccountId$[ebp]
  0001d	51		 push	 ecx
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0CI@FBGJBFGF@?$FLDevilSquare?$FN?5?$MA?L?$LK?$KF?F?$KO?5?$LA?f?G?$LA?5?$LP?d?C?$LL?5@
  00023	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00029	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6379 : 
; 6380 : 	CB_PMSG_REQ_PRESENT	pMsg;
; 6381 : 
; 6382 : 	pMsg.h.c		= PMHC_BYTE;

  0002c	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 6383 : 	pMsg.h.headcode	= 0x01;

  00030	c6 45 de 01	 mov	 BYTE PTR _pMsg$[ebp+2], 1

; 6384 : 	pMsg.h.size		= sizeof( pMsg );

  00034	c6 45 dd 1c	 mov	 BYTE PTR _pMsg$[ebp+1], 28 ; 0000001cH

; 6385 : 	pMsg.Sequence	= aIndex;

  00038	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0003b	89 45 f4	 mov	 DWORD PTR _pMsg$[ebp+24], eax

; 6386 : 	memcpy(pMsg.AccountId, AccountId, MAX_IDSTRING);

  0003e	6a 0a		 push	 10			; 0000000aH
  00040	8b 45 0c	 mov	 eax, DWORD PTR _AccountId$[ebp]
  00043	50		 push	 eax
  00044	8d 4d df	 lea	 ecx, DWORD PTR _pMsg$[ebp+3]
  00047	51		 push	 ecx
  00048	e8 00 00 00 00	 call	 _memcpy
  0004d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6387 : 	memcpy(pMsg.GameId   , Name     , MAX_IDSTRING);

  00050	6a 0a		 push	 10			; 0000000aH
  00052	8b 45 10	 mov	 eax, DWORD PTR _Name$[ebp]
  00055	50		 push	 eax
  00056	8d 4d e9	 lea	 ecx, DWORD PTR _pMsg$[ebp+13]
  00059	51		 push	 ecx
  0005a	e8 00 00 00 00	 call	 _memcpy
  0005f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6388 : 
; 6389 : 	gUdpSocCE.SendData((LPBYTE)&pMsg, pMsg.h.size);

  00062	0f b6 45 dd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00066	50		 push	 eax
  00067	8d 4d dc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0006a	51		 push	 ecx
  0006b	b9 00 00 00 00	 mov	 ecx, OFFSET ?gUdpSocCE@@3VWzUdp@@A ; gUdpSocCE
  00070	e8 00 00 00 00	 call	 ?SendData@WzUdp@@QAEHPAEK@Z ; WzUdp::SendData

; 6390 : }

  00075	5f		 pop	 edi
  00076	5e		 pop	 esi
  00077	5b		 pop	 ebx
  00078	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0007b	33 cd		 xor	 ecx, ebp
  0007d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00082	8b e5		 mov	 esp, ebp
  00084	5d		 pop	 ebp
  00085	c2 0c 00	 ret	 12			; 0000000cH
?CBUPS_ItemRequest@CMixSystem@@QAEXHPAD0@Z ENDP		; CMixSystem::CBUPS_ItemRequest
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?SetItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_levelitemdur$1 = -240					; size = 4
_NewItem$2 = -236					; size = 168
_setoption$ = -68					; size = 4
_nChaosNeedMoney$ = -64					; size = 4
_n$3 = -60						; size = 4
_pMsg$ = -56						; size = 9
_iMetalOfAncientItemLevel$ = -44			; size = 4
_iChaosMoney$ = -40					; size = 4
_iMixItemChaosMoney$ = -36				; size = 4
_MixSetItemIndex$ = -32					; size = 4
_MixItemCount$ = -28					; size = 4
_MetalOfAncientCount$ = -24				; size = 4
_SoulGemCount$ = -20					; size = 4
_BlessGemCount$ = -16					; size = 4
_ChoasGemCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?SetItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::SetItemChaosMix, COMDAT
; _this$ = ecx

; 6142 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 30 01 00
	00		 sub	 esp, 304		; 00000130H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 6143 : 	lpObj->ChaosLock = TRUE;

  00019	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001c	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 6144 : 	
; 6145 : 	int ChoasGemCount = 0;				// 혼석 수

  00026	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _ChoasGemCount$[ebp], 0

; 6146 : 	int BlessGemCount = 0;				// 영석 수

  0002d	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _BlessGemCount$[ebp], 0

; 6147 : 	int SoulGemCount = 0;				// 영석 수	

  00034	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _SoulGemCount$[ebp], 0

; 6148 : 	int	MetalOfAncientCount = 0;		// 고대의 금속 수

  0003b	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _MetalOfAncientCount$[ebp], 0

; 6149 : 	int	MixItemCount = 0;

  00042	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _MixItemCount$[ebp], 0

; 6150 : 	int	MixSetItemIndex = 0;			// 세트아이템이 될 아이템의 인덱스

  00049	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _MixSetItemIndex$[ebp], 0

; 6151 : 	int	iMixItemChaosMoney = 0;

  00050	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _iMixItemChaosMoney$[ebp], 0

; 6152 : 	int	iChaosMoney = 0;

  00057	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _iChaosMoney$[ebp], 0

; 6153 : 	int	iMetalOfAncientItemLevel = -1;

  0005e	c7 45 d4 ff ff
	ff ff		 mov	 DWORD PTR _iMetalOfAncientItemLevel$[ebp], -1

; 6154 : 
; 6155 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 6156 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00065	6a 09		 push	 9
  00067	68 86 00 00 00	 push	 134			; 00000086H
  0006c	8d 45 c8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0006f	50		 push	 eax
  00070	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00075	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6157 : 	pMsg.Result		= 0x00;		

  00078	c6 45 cb 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 6158 : 
; 6159 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  0007c	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _n$3[ebp], 0
  00083	eb 09		 jmp	 SHORT $LN4@SetItemCha
$LN2@SetItemCha:
  00085	8b 45 c4	 mov	 eax, DWORD PTR _n$3[ebp]
  00088	83 c0 01	 add	 eax, 1
  0008b	89 45 c4	 mov	 DWORD PTR _n$3[ebp], eax
$LN4@SetItemCha:
  0008e	83 7d c4 20	 cmp	 DWORD PTR _n$3[ebp], 32	; 00000020H
  00092	0f 8d 22 03 00
	00		 jge	 $LN3@SetItemCha

; 6160 : 	{
; 6161 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00098	69 4d c4 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$3[ebp], 168
  0009f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a2	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  000a8	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  000ad	83 f8 01	 cmp	 eax, 1
  000b0	0f 85 ff 02 00
	00		 jne	 $LN23@SetItemCha

; 6162 : 		{
; 6163 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 13) )

  000b6	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  000bd	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000c0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000c6	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000cb	6a 0d		 push	 13			; 0000000dH
  000cd	6a 0e		 push	 14			; 0000000eH
  000cf	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000d4	83 c4 08	 add	 esp, 8
  000d7	3b f0		 cmp	 esi, eax
  000d9	75 29		 jne	 SHORT $LN7@SetItemCha

; 6164 : 			{	// 축석
; 6165 : 				BlessGemCount++;

  000db	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  000de	83 c0 01	 add	 eax, 1
  000e1	89 45 f0	 mov	 DWORD PTR _BlessGemCount$[ebp], eax

; 6166 : 				if( BlessGemCount > 3 )

  000e4	83 7d f0 03	 cmp	 DWORD PTR _BlessGemCount$[ebp], 3
  000e8	7e 1a		 jle	 SHORT $LN7@SetItemCha

; 6167 : 					iChaosMoney += 	lpObj->pChaosBox[n].m_BuyMoney;

  000ea	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  000f1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000f4	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000fa	8b 4d d8	 mov	 ecx, DWORD PTR _iChaosMoney$[ebp]
  000fd	03 4c 02 64	 add	 ecx, DWORD PTR [edx+eax+100]
  00101	89 4d d8	 mov	 DWORD PTR _iChaosMoney$[ebp], ecx
$LN7@SetItemCha:

; 6168 : 			}
; 6169 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 14) )

  00104	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  0010b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0010e	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00114	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00119	6a 0e		 push	 14			; 0000000eH
  0011b	6a 0e		 push	 14			; 0000000eH
  0011d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00122	83 c4 08	 add	 esp, 8
  00125	3b f0		 cmp	 esi, eax
  00127	75 29		 jne	 SHORT $LN9@SetItemCha

; 6170 : 			{	// 영석
; 6171 : 				SoulGemCount++;

  00129	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  0012c	83 c0 01	 add	 eax, 1
  0012f	89 45 ec	 mov	 DWORD PTR _SoulGemCount$[ebp], eax

; 6172 : 				if( SoulGemCount > 3 )

  00132	83 7d ec 03	 cmp	 DWORD PTR _SoulGemCount$[ebp], 3
  00136	7e 1a		 jle	 SHORT $LN9@SetItemCha

; 6173 : 					iChaosMoney += 	lpObj->pChaosBox[n].m_BuyMoney;

  00138	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  0013f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00142	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00148	8b 4d d8	 mov	 ecx, DWORD PTR _iChaosMoney$[ebp]
  0014b	03 4c 02 64	 add	 ecx, DWORD PTR [edx+eax+100]
  0014f	89 4d d8	 mov	 DWORD PTR _iChaosMoney$[ebp], ecx
$LN9@SetItemCha:

; 6174 : 			}
; 6175 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 16) )

  00152	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00159	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0015c	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00162	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00167	6a 10		 push	 16			; 00000010H
  00169	6a 0e		 push	 14			; 0000000eH
  0016b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00170	83 c4 08	 add	 esp, 8
  00173	3b f0		 cmp	 esi, eax
  00175	75 1f		 jne	 SHORT $LN10@SetItemCha

; 6176 : 			{	// 생석				
; 6177 : 				iChaosMoney += 	lpObj->pChaosBox[n].m_BuyMoney;

  00177	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  0017e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00181	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00187	8b 4d d8	 mov	 ecx, DWORD PTR _iChaosMoney$[ebp]
  0018a	03 4c 02 64	 add	 ecx, DWORD PTR [edx+eax+100]
  0018e	89 4d d8	 mov	 DWORD PTR _iChaosMoney$[ebp], ecx

; 6178 : 			}

  00191	e9 1f 02 00 00	 jmp	 $LN23@SetItemCha
$LN10@SetItemCha:

; 6179 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  00196	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  0019d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001a0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001a6	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  001ab	6a 0f		 push	 15			; 0000000fH
  001ad	6a 0c		 push	 12			; 0000000cH
  001af	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001b4	83 c4 08	 add	 esp, 8
  001b7	3b f0		 cmp	 esi, eax
  001b9	75 0e		 jne	 SHORT $LN12@SetItemCha

; 6180 : 			{	// 혼석
; 6181 : 				ChoasGemCount++;				

  001bb	8b 45 f4	 mov	 eax, DWORD PTR _ChoasGemCount$[ebp]
  001be	83 c0 01	 add	 eax, 1
  001c1	89 45 f4	 mov	 DWORD PTR _ChoasGemCount$[ebp], eax

; 6182 : 			}

  001c4	e9 ec 01 00 00	 jmp	 $LN23@SetItemCha
$LN12@SetItemCha:

; 6183 : #if GAME_VERSION >= G_V_99B
; 6184 : 			else if( (lpObj->pChaosBox[n].m_Level >= 6 && lpObj->pChaosBox[n].IsExtItem()) )

  001c9	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  001d0	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001d3	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001d9	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001de	83 f8 06	 cmp	 eax, 6
  001e1	7c 6b		 jl	 SHORT $LN14@SetItemCha
  001e3	69 4d c4 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$3[ebp], 168
  001ea	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001ed	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  001f3	e8 00 00 00 00	 call	 ?IsExtItem@CItem@@QAEHXZ ; CItem::IsExtItem
  001f8	85 c0		 test	 eax, eax
  001fa	74 52		 je	 SHORT $LN14@SetItemCha

; 6185 : 			{	// +6 이상 엑설런트 아이템
; 6186 : 				if( gSetItemOption.IsSetItem(lpObj->pChaosBox[n].m_Type) )

  001fc	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00203	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00206	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0020c	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  00211	50		 push	 eax
  00212	b9 00 00 00 00	 mov	 ecx, OFFSET ?gSetItemOption@@3VCSetItemOption@@A ; gSetItemOption
  00217	e8 00 00 00 00	 call	 ?IsSetItem@CSetItemOption@@QAEHH@Z ; CSetItemOption::IsSetItem
  0021c	85 c0		 test	 eax, eax
  0021e	74 29		 je	 SHORT $LN16@SetItemCha

; 6187 : 				{	// 세트 아이템으로 변경할수 있으면
; 6188 : 					MixItemCount++;

  00220	8b 45 e4	 mov	 eax, DWORD PTR _MixItemCount$[ebp]
  00223	83 c0 01	 add	 eax, 1
  00226	89 45 e4	 mov	 DWORD PTR _MixItemCount$[ebp], eax

; 6189 : 					MixSetItemIndex = n;

  00229	8b 45 c4	 mov	 eax, DWORD PTR _n$3[ebp]
  0022c	89 45 e0	 mov	 DWORD PTR _MixSetItemIndex$[ebp], eax

; 6190 : 					iMixItemChaosMoney += 	lpObj->pChaosBox[n].m_BuyMoney;

  0022f	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00236	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00239	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0023f	8b 4d dc	 mov	 ecx, DWORD PTR _iMixItemChaosMoney$[ebp]
  00242	03 4c 02 64	 add	 ecx, DWORD PTR [edx+eax+100]
  00246	89 4d dc	 mov	 DWORD PTR _iMixItemChaosMoney$[ebp], ecx
$LN16@SetItemCha:

; 6191 : 				}
; 6192 : 			}

  00249	e9 67 01 00 00	 jmp	 $LN23@SetItemCha
$LN14@SetItemCha:

; 6193 : 			else if( ((lpObj->pChaosBox[n].m_Type>=ITEM_HELPER+8 && lpObj->pChaosBox[n].m_Type<ITEM_HELPER+14) || 
; 6194 : 					 (lpObj->pChaosBox[n].m_Type>=ITEM_HELPER+20 && lpObj->pChaosBox[n].m_Type<ITEM_HELPER+28)) && 
; 6195 : 					  lpObj->pChaosBox[n].m_Option3 >= 2 && lpObj->pChaosBox[n].m_Level >= 3 ) //반지,목걸이는 +3이상 옵 2이상

  0024e	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00255	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00258	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0025e	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  00263	3d a8 01 00 00	 cmp	 eax, 424		; 000001a8H
  00268	7c 1c		 jl	 SHORT $LN20@SetItemCha
  0026a	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00271	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00274	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0027a	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  0027f	3d ae 01 00 00	 cmp	 eax, 430		; 000001aeH
  00284	7c 40		 jl	 SHORT $LN19@SetItemCha
$LN20@SetItemCha:
  00286	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  0028d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00290	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00296	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  0029b	3d b4 01 00 00	 cmp	 eax, 436		; 000001b4H
  002a0	0f 8c a3 00 00
	00		 jl	 $LN17@SetItemCha
  002a6	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  002ad	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002b0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  002b6	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  002bb	3d bc 01 00 00	 cmp	 eax, 444		; 000001bcH
  002c0	0f 8d 83 00 00
	00		 jge	 $LN17@SetItemCha
$LN19@SetItemCha:
  002c6	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  002cd	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002d0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  002d6	0f b6 44 02 7a	 movzx	 eax, BYTE PTR [edx+eax+122]
  002db	83 f8 02	 cmp	 eax, 2
  002de	7c 69		 jl	 SHORT $LN17@SetItemCha
  002e0	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  002e7	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002ea	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  002f0	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  002f5	83 f8 03	 cmp	 eax, 3
  002f8	7c 4f		 jl	 SHORT $LN17@SetItemCha

; 6196 : 			{
; 6197 : 				if( gSetItemOption.IsSetItem(lpObj->pChaosBox[n].m_Type) )

  002fa	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00301	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00304	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0030a	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  0030f	50		 push	 eax
  00310	b9 00 00 00 00	 mov	 ecx, OFFSET ?gSetItemOption@@3VCSetItemOption@@A ; gSetItemOption
  00315	e8 00 00 00 00	 call	 ?IsSetItem@CSetItemOption@@QAEHH@Z ; CSetItemOption::IsSetItem
  0031a	85 c0		 test	 eax, eax
  0031c	74 29		 je	 SHORT $LN21@SetItemCha

; 6198 : 				{	// 세트 아이템으로 변경할수 있으면
; 6199 : 					MixItemCount++;

  0031e	8b 45 e4	 mov	 eax, DWORD PTR _MixItemCount$[ebp]
  00321	83 c0 01	 add	 eax, 1
  00324	89 45 e4	 mov	 DWORD PTR _MixItemCount$[ebp], eax

; 6200 : 					MixSetItemIndex = n;

  00327	8b 45 c4	 mov	 eax, DWORD PTR _n$3[ebp]
  0032a	89 45 e0	 mov	 DWORD PTR _MixSetItemIndex$[ebp], eax

; 6201 : 					iMixItemChaosMoney += 	lpObj->pChaosBox[n].m_BuyMoney;

  0032d	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00334	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00337	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0033d	8b 4d dc	 mov	 ecx, DWORD PTR _iMixItemChaosMoney$[ebp]
  00340	03 4c 02 64	 add	 ecx, DWORD PTR [edx+eax+100]
  00344	89 4d dc	 mov	 DWORD PTR _iMixItemChaosMoney$[ebp], ecx
$LN21@SetItemCha:

; 6202 : 				}				
; 6203 : 			}

  00347	eb 6c		 jmp	 SHORT $LN23@SetItemCha
$LN17@SetItemCha:

; 6204 : #endif
; 6205 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,27) )

  00349	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00350	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00353	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00359	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0035e	6a 1b		 push	 27			; 0000001bH
  00360	6a 0e		 push	 14			; 0000000eH
  00362	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00367	83 c4 08	 add	 esp, 8
  0036a	3b f0		 cmp	 esi, eax
  0036c	75 23		 jne	 SHORT $LN22@SetItemCha

; 6206 : 			{	// 고대의 금속
; 6207 : 				MetalOfAncientCount++;				

  0036e	8b 45 e8	 mov	 eax, DWORD PTR _MetalOfAncientCount$[ebp]
  00371	83 c0 01	 add	 eax, 1
  00374	89 45 e8	 mov	 DWORD PTR _MetalOfAncientCount$[ebp], eax

; 6208 : 				iMetalOfAncientItemLevel = lpObj->pChaosBox[n].m_Level;

  00377	69 45 c4 a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  0037e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00381	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00387	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0038c	89 45 d4	 mov	 DWORD PTR _iMetalOfAncientItemLevel$[ebp], eax

; 6209 : 			}

  0038f	eb 24		 jmp	 SHORT $LN23@SetItemCha
$LN22@SetItemCha:

; 6210 : 			else
; 6211 : 			{				
; 6212 : 				DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00391	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00395	50		 push	 eax
  00396	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00399	51		 push	 ecx
  0039a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0039d	8b 02		 mov	 eax, DWORD PTR [edx]
  0039f	50		 push	 eax
  003a0	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  003a5	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6213 : 				lpObj->ChaosLock = FALSE;		

  003a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003ab	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN23@SetItemCha:

; 6214 : 			}			
; 6215 : 		}
; 6216 : 	}

  003b5	e9 cb fc ff ff	 jmp	 $LN2@SetItemCha
$LN3@SetItemCha:

; 6217 : 
; 6218 : 	if( ChoasGemCount < 1 || BlessGemCount < 3 ||  SoulGemCount < 3 || 
; 6219 : 		MetalOfAncientCount != 1 || MixItemCount != 1 )

  003ba	83 7d f4 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  003be	7c 18		 jl	 SHORT $LN25@SetItemCha
  003c0	83 7d f0 03	 cmp	 DWORD PTR _BlessGemCount$[ebp], 3
  003c4	7c 12		 jl	 SHORT $LN25@SetItemCha
  003c6	83 7d ec 03	 cmp	 DWORD PTR _SoulGemCount$[ebp], 3
  003ca	7c 0c		 jl	 SHORT $LN25@SetItemCha
  003cc	83 7d e8 01	 cmp	 DWORD PTR _MetalOfAncientCount$[ebp], 1
  003d0	75 06		 jne	 SHORT $LN25@SetItemCha
  003d2	83 7d e4 01	 cmp	 DWORD PTR _MixItemCount$[ebp], 1
  003d6	74 29		 je	 SHORT $LN24@SetItemCha
$LN25@SetItemCha:

; 6220 : 	{
; 6221 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  003d8	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  003dc	50		 push	 eax
  003dd	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  003e0	51		 push	 ecx
  003e1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003e4	8b 02		 mov	 eax, DWORD PTR [edx]
  003e6	50		 push	 eax
  003e7	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  003ec	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6222 : 		lpObj->ChaosLock = FALSE;		

  003ef	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003f2	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 6223 : 		return;

  003fc	e9 0e 05 00 00	 jmp	 $LN1@SetItemCha
$LN24@SetItemCha:

; 6224 : 	}
; 6225 : 
; 6226 : 	LogChaosItem(lpObj, "SetItemMix");

  00401	68 00 00 00 00	 push	 OFFSET ??_C@_0L@DBFFCLIB@SetItemMix@
  00406	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00409	50		 push	 eax
  0040a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0040d	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 6227 : 	LogAddTD("[SetItemMix] Chaos Mix Start");	

  00412	68 00 00 00 00	 push	 OFFSET ??_C@_0BN@JHMGADIL@?$FLSetItemMix?$FN?5Chaos?5Mix?5Start@
  00417	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0041d	83 c4 04	 add	 esp, 4

; 6228 : 
; 6229 : #if GAME_VERSION >= G_V_99B
; 6230 : 	if( !gSetItemOption.CheckMixContition(lpObj->pChaosBox[MixSetItemIndex].m_Type, 

  00420	8b 45 d4	 mov	 eax, DWORD PTR _iMetalOfAncientItemLevel$[ebp]
  00423	50		 push	 eax
  00424	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  0042b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0042e	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00434	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  00439	51		 push	 ecx
  0043a	b9 00 00 00 00	 mov	 ecx, OFFSET ?gSetItemOption@@3VCSetItemOption@@A ; gSetItemOption
  0043f	e8 00 00 00 00	 call	 ?CheckMixContition@CSetItemOption@@QAEHHH@Z ; CSetItemOption::CheckMixContition
  00444	85 c0		 test	 eax, eax
  00446	75 29		 jne	 SHORT $LN26@SetItemCha

; 6231 : 										 iMetalOfAncientItemLevel) )
; 6232 : 	{	// 고대의금속과 해당 아이템의 조합 조건이 맞지 않다
; 6233 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00448	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0044c	50		 push	 eax
  0044d	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00450	51		 push	 ecx
  00451	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00454	8b 02		 mov	 eax, DWORD PTR [edx]
  00456	50		 push	 eax
  00457	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0045c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6234 : 		lpObj->ChaosLock = FALSE;

  0045f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00462	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 6235 : 		return;

  0046c	e9 9e 04 00 00	 jmp	 $LN1@SetItemCha
$LN26@SetItemCha:

; 6236 : 	}
; 6237 : #endif
; 6238 : 
; 6239 : 	lpObj->ChaosSuccessRate = iMixItemChaosMoney/40000;		// 조합 될 아이템 확률

  00471	8b 45 dc	 mov	 eax, DWORD PTR _iMixItemChaosMoney$[ebp]
  00474	99		 cdq
  00475	b9 40 9c 00 00	 mov	 ecx, 40000		; 00009c40H
  0047a	f7 f9		 idiv	 ecx
  0047c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0047f	89 82 b8 0c 00
	00		 mov	 DWORD PTR [edx+3256], eax

; 6240 : 	lpObj->ChaosSuccessRate = iChaosMoney/400000;			// 보석 가격으로 아이템 확률

  00485	8b 45 d8	 mov	 eax, DWORD PTR _iChaosMoney$[ebp]
  00488	99		 cdq
  00489	b9 80 1a 06 00	 mov	 ecx, 400000		; 00061a80H
  0048e	f7 f9		 idiv	 ecx
  00490	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00493	89 82 b8 0c 00
	00		 mov	 DWORD PTR [edx+3256], eax

; 6241 : 
; 6242 : 	if( lpObj->ChaosSuccessRate > 80 )

  00499	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0049c	83 b8 b8 0c 00
	00 50		 cmp	 DWORD PTR [eax+3256], 80 ; 00000050H
  004a3	7e 0d		 jle	 SHORT $LN27@SetItemCha

; 6243 : 	{	// 최대 확률은 80%
; 6244 : 		lpObj->ChaosSuccessRate = 80;

  004a5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004a8	c7 80 b8 0c 00
	00 50 00 00 00	 mov	 DWORD PTR [eax+3256], 80 ; 00000050H
$LN27@SetItemCha:

; 6245 : 	}
; 6246 : 
; 6247 : 	int nChaosNeedMoney = (lpObj->ChaosSuccessRate-50)*1000000;		// 필요 젠은 (성공확률-50)*백만젠

  004b2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004b5	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  004bb	83 e9 32	 sub	 ecx, 50			; 00000032H
  004be	69 d1 40 42 0f
	00		 imul	 edx, ecx, 1000000
  004c4	89 55 c0	 mov	 DWORD PTR _nChaosNeedMoney$[ebp], edx

; 6248 : 	if( lpObj->Money < nChaosNeedMoney )

  004c7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ca	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  004d0	3b 4d c0	 cmp	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  004d3	7d 2d		 jge	 SHORT $LN28@SetItemCha

; 6249 : 	{	
; 6250 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  004d5	c6 45 cb 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 6251 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  004d9	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  004dd	50		 push	 eax
  004de	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  004e1	51		 push	 ecx
  004e2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  004e5	8b 02		 mov	 eax, DWORD PTR [edx]
  004e7	50		 push	 eax
  004e8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  004ed	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6252 : 		lpObj->ChaosLock = FALSE;

  004f0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004f3	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 6253 : 		return;

  004fd	e9 0d 04 00 00	 jmp	 $LN1@SetItemCha
$LN28@SetItemCha:

; 6254 : 	}
; 6255 : 
; 6256 : #if GAME_VERSION >= G_V_99B
; 6257 : 	int setoption = gSetItemOption.MakeSetOption(lpObj->pChaosBox[MixSetItemIndex].m_Type, iMetalOfAncientItemLevel);

  00502	8b 45 d4	 mov	 eax, DWORD PTR _iMetalOfAncientItemLevel$[ebp]
  00505	50		 push	 eax
  00506	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  0050d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00510	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00516	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  0051b	51		 push	 ecx
  0051c	b9 00 00 00 00	 mov	 ecx, OFFSET ?gSetItemOption@@3VCSetItemOption@@A ; gSetItemOption
  00521	e8 00 00 00 00	 call	 ?MakeSetOption@CSetItemOption@@QAEHHH@Z ; CSetItemOption::MakeSetOption
  00526	89 45 bc	 mov	 DWORD PTR _setoption$[ebp], eax

; 6258 : 	if( setoption == 0 )

  00529	83 7d bc 00	 cmp	 DWORD PTR _setoption$[ebp], 0
  0052d	75 2d		 jne	 SHORT $LN29@SetItemCha

; 6259 : 	{	// 해당 세트 옵션을 찾을수 없다
; 6260 : 		pMsg.Result		= 0x00;		// 실패

  0052f	c6 45 cb 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 6261 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00533	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00537	50		 push	 eax
  00538	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0053b	51		 push	 ecx
  0053c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0053f	8b 02		 mov	 eax, DWORD PTR [edx]
  00541	50		 push	 eax
  00542	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00547	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6262 : 		lpObj->ChaosLock = FALSE;

  0054a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0054d	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 6263 : 		return;

  00557	e9 b3 03 00 00	 jmp	 $LN1@SetItemCha
$LN29@SetItemCha:

; 6264 : 	}
; 6265 : #endif
; 6266 : 
; 6267 : 	lpObj->Money -= nChaosNeedMoney;

  0055c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0055f	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00565	2b 4d c0	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00568	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0056b	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 6268 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);		

  00571	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00574	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  0057a	51		 push	 ecx
  0057b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0057e	8b 02		 mov	 eax, DWORD PTR [edx]
  00580	50		 push	 eax
  00581	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  00586	83 c4 08	 add	 esp, 8

; 6269 : 
; 6270 : #if TESTSERVER == 1
; 6271 : 	lpObj->ChaosSuccessRate = 100;
; 6272 : #endif
; 6273 : 
; 6274 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  00589	e8 00 00 00 00	 call	 _rand
  0058e	99		 cdq
  0058f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00594	f7 f9		 idiv	 ecx
  00596	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00599	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  0059f	0f 8d f8 02 00
	00		 jge	 $LN30@SetItemCha

; 6275 : 	{
; 6276 : #if GAME_VERSION >= G_V_99B
; 6277 : 		lpObj->pChaosBox[MixSetItemIndex].m_SetOption = setoption;

  005a5	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  005ac	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  005af	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  005b5	8a 4d bc	 mov	 cl, BYTE PTR _setoption$[ebp]
  005b8	88 8c 02 92 00
	00 00		 mov	 BYTE PTR [edx+eax+146], cl

; 6278 : 
; 6279 : 		if( rand()%100 < 80 )

  005bf	e8 00 00 00 00	 call	 _rand
  005c4	99		 cdq
  005c5	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  005ca	f7 f9		 idiv	 ecx
  005cc	83 fa 50	 cmp	 edx, 80			; 00000050H
  005cf	7d 34		 jge	 SHORT $LN32@SetItemCha

; 6280 : 		{	// 80%가 +5 스탯 상승			
; 6281 : 			lpObj->pChaosBox[MixSetItemIndex].m_SetOption |= 0x04;

  005d1	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  005d8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  005db	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  005e1	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  005e9	83 c8 04	 or	 eax, 4
  005ec	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  005f3	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  005f6	8b 92 ac 0c 00
	00		 mov	 edx, DWORD PTR [edx+3244]
  005fc	88 84 0a 92 00
	00 00		 mov	 BYTE PTR [edx+ecx+146], al

; 6282 : 		}

  00603	eb 32		 jmp	 SHORT $LN33@SetItemCha
$LN32@SetItemCha:

; 6283 : 		else
; 6284 : 		{	// 20%가 +10 스탯 상승			
; 6285 : 			lpObj->pChaosBox[MixSetItemIndex].m_SetOption |= 0x08;

  00605	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  0060c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0060f	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00615	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  0061d	83 c8 08	 or	 eax, 8
  00620	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  00627	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0062a	8b 92 ac 0c 00
	00		 mov	 edx, DWORD PTR [edx+3244]
  00630	88 84 0a 92 00
	00 00		 mov	 BYTE PTR [edx+ecx+146], al
$LN33@SetItemCha:

; 6286 : 		}
; 6287 : #endif
; 6288 : 		
; 6289 : 		pMsg.Result  = 1;

  00637	c6 45 cb 01	 mov	 BYTE PTR _pMsg$[ebp+3], 1

; 6290 : 
; 6291 : 		CItem NewItem;

  0063b	8d 8d 14 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$2[ebp]
  00641	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 6292 : 		float levelitemdur =  (float)ItemGetDurability(lpObj->pChaosBox[MixSetItemIndex].m_Type, 

  00646	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  0064d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00650	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00656	e8 00 00 00 00	 call	 ?IsSetItem@CItem@@QAEHXZ ; CItem::IsSetItem
  0065b	50		 push	 eax
  0065c	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  00663	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00666	03 8a ac 0c 00
	00		 add	 ecx, DWORD PTR [edx+3244]
  0066c	e8 00 00 00 00	 call	 ?IsExtItem@CItem@@QAEHXZ ; CItem::IsExtItem
  00671	50		 push	 eax
  00672	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  00679	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0067c	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00682	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  00687	50		 push	 eax
  00688	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  0068f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00692	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00698	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  0069d	51		 push	 ecx
  0069e	e8 00 00 00 00	 call	 ?ItemGetDurability@@YAHHHHH@Z ; ItemGetDurability
  006a3	83 c4 10	 add	 esp, 16			; 00000010H
  006a6	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  006aa	f3 0f 11 85 10
	ff ff ff	 movss	 DWORD PTR _levelitemdur$1[ebp], xmm0

; 6293 : 													   lpObj->pChaosBox[MixSetItemIndex].m_Level, 
; 6294 : 												       lpObj->pChaosBox[MixSetItemIndex].IsExtItem(),
; 6295 : 													   lpObj->pChaosBox[MixSetItemIndex].IsSetItem());
; 6296 : 
; 6297 : 		
; 6298 : 		NewItem.m_Level      = lpObj->pChaosBox[MixSetItemIndex].m_Level;

  006b2	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  006b9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  006bc	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  006c2	66 8b 44 02 08	 mov	 ax, WORD PTR [edx+eax+8]
  006c7	66 89 85 1c ff
	ff ff		 mov	 WORD PTR _NewItem$2[ebp+8], ax

; 6299 : 		NewItem.m_Durability = levelitemdur*lpObj->pChaosBox[MixSetItemIndex].m_Durability/lpObj->pChaosBox[MixSetItemIndex].m_BaseDurability;

  006ce	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  006d5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  006d8	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  006de	f3 0f 10 85 10
	ff ff ff	 movss	 xmm0, DWORD PTR _levelitemdur$1[ebp]
  006e6	f3 0f 59 44 02
	24		 mulss	 xmm0, DWORD PTR [edx+eax+36]
  006ec	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  006f3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  006f6	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  006fc	f3 0f 5e 44 02
	2c		 divss	 xmm0, DWORD PTR [edx+eax+44]
  00702	f3 0f 11 85 38
	ff ff ff	 movss	 DWORD PTR _NewItem$2[ebp+36], xmm0

; 6300 : 
; 6301 : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 6302 : 		// 강화옵션은 그대로 가야한다. 시리얼 발급 아님.
; 6303 : 		NewItem.m_JewelOfHarmonyOption = lpObj->pChaosBox[MixSetItemIndex].m_JewelOfHarmonyOption;
; 6304 : #endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 6305 : 
; 6306 : 		
; 6307 : #ifdef ADD_ITEM_SOCKET_OPTION_EXTEND_20080422
; 6308 : 		NewItem.Convert(lpObj->pChaosBox[MixSetItemIndex].m_Type, 
; 6309 : 			            lpObj->pChaosBox[MixSetItemIndex].m_Option1, 
; 6310 : 						lpObj->pChaosBox[MixSetItemIndex].m_Option2, 
; 6311 : 						lpObj->pChaosBox[MixSetItemIndex].m_Option3, 
; 6312 : 						lpObj->pChaosBox[MixSetItemIndex].m_NewOption,
; 6313 : 						lpObj->pChaosBox[MixSetItemIndex].m_SetOption,
; 6314 : 						lpObj->pChaosBox[MixSetItemIndex].m_ItemOptionEx,
; 6315 : 						lpObj->pChaosBox[MixSetItemIndex].m_SocketOption,
; 6316 : 						lpObj->pChaosBox[MixSetItemIndex].m_BonusSocketOption);
; 6317 : #else
; 6318 : 	#ifdef ADD_380ITEM_NEWOPTION_20060711
; 6319 : 		NewItem.Convert(lpObj->pChaosBox[MixSetItemIndex].m_Type, 
; 6320 : 			            lpObj->pChaosBox[MixSetItemIndex].m_Option1, 
; 6321 : 						lpObj->pChaosBox[MixSetItemIndex].m_Option2, 
; 6322 : 						lpObj->pChaosBox[MixSetItemIndex].m_Option3, 
; 6323 : 						lpObj->pChaosBox[MixSetItemIndex].m_NewOption,
; 6324 : 						lpObj->pChaosBox[MixSetItemIndex].m_SetOption,
; 6325 : 						lpObj->pChaosBox[MixSetItemIndex].m_ItemOptionEx);	
; 6326 : 	#else
; 6327 : 		NewItem.Convert(lpObj->pChaosBox[MixSetItemIndex].m_Type, 

  0070a	6a 01		 push	 1
  0070c	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  00713	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00716	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0071c	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  00724	50		 push	 eax
  00725	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  0072c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0072f	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00735	0f b6 4c 08 7b	 movzx	 ecx, BYTE PTR [eax+ecx+123]
  0073a	51		 push	 ecx
  0073b	69 55 e0 a8 00
	00 00		 imul	 edx, DWORD PTR _MixSetItemIndex$[ebp], 168
  00742	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00745	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  0074b	0f b6 54 11 7a	 movzx	 edx, BYTE PTR [ecx+edx+122]
  00750	52		 push	 edx
  00751	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  00758	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0075b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00761	0f b6 44 02 79	 movzx	 eax, BYTE PTR [edx+eax+121]
  00766	50		 push	 eax
  00767	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  0076e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00771	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00777	0f b6 4c 08 78	 movzx	 ecx, BYTE PTR [eax+ecx+120]
  0077c	51		 push	 ecx
  0077d	69 55 e0 a8 00
	00 00		 imul	 edx, DWORD PTR _MixSetItemIndex$[ebp], 168
  00784	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00787	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  0078d	0f bf 54 11 06	 movsx	 edx, WORD PTR [ecx+edx+6]
  00792	52		 push	 edx
  00793	8d 8d 14 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$2[ebp]
  00799	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEE@Z ; CItem::Convert

; 6328 : 			            lpObj->pChaosBox[MixSetItemIndex].m_Option1, 
; 6329 : 						lpObj->pChaosBox[MixSetItemIndex].m_Option2, 
; 6330 : 						lpObj->pChaosBox[MixSetItemIndex].m_Option3, 
; 6331 : 						lpObj->pChaosBox[MixSetItemIndex].m_NewOption,
; 6332 : 						lpObj->pChaosBox[MixSetItemIndex].m_SetOption);	
; 6333 : 	#endif // ADD_380ITEM_NEWOPTION_20060711
; 6334 : #endif // ADD_ITEM_SOCKET_OPTION_EXTEND_20080422
; 6335 : 
; 6336 : 		
; 6337 : 		NewItem.m_Number = lpObj->pChaosBox[MixSetItemIndex].m_Number;

  0079e	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _MixSetItemIndex$[ebp], 168
  007a5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  007a8	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  007ae	8b 04 02	 mov	 eax, DWORD PTR [edx+eax]
  007b1	89 85 14 ff ff
	ff		 mov	 DWORD PTR _NewItem$2[ebp], eax

; 6338 : 
; 6339 : 		ItemByteConvert(pMsg.ItemInfo, NewItem);

  007b7	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  007bd	b9 2a 00 00 00	 mov	 ecx, 42			; 0000002aH
  007c2	8d b5 14 ff ff
	ff		 lea	 esi, DWORD PTR _NewItem$2[ebp]
  007c8	8b fc		 mov	 edi, esp
  007ca	f3 a5		 rep movsd
  007cc	8d 45 cc	 lea	 eax, DWORD PTR _pMsg$[ebp+4]
  007cf	50		 push	 eax
  007d0	e8 00 00 00 00	 call	 ?ItemByteConvert@@YAXPAEVCItem@@@Z ; ItemByteConvert
  007d5	81 c4 ac 00 00
	00		 add	 esp, 172		; 000000acH

; 6340 : 		
; 6341 : 		ChaosBoxInit(lpObj);

  007db	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007de	50		 push	 eax
  007df	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  007e2	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 6342 : 		gObjChaosBoxInsertItemPos(lpObj->m_Index, NewItem, 0, -1);

  007e7	6a ff		 push	 -1
  007e9	6a 00		 push	 0
  007eb	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  007f1	b9 2a 00 00 00	 mov	 ecx, 42			; 0000002aH
  007f6	8d b5 14 ff ff
	ff		 lea	 esi, DWORD PTR _NewItem$2[ebp]
  007fc	8b fc		 mov	 edi, esp
  007fe	f3 a5		 rep movsd
  00800	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00803	8b 08		 mov	 ecx, DWORD PTR [eax]
  00805	51		 push	 ecx
  00806	e8 00 00 00 00	 call	 ?gObjChaosBoxInsertItemPos@@YAEHVCItem@@HH@Z ; gObjChaosBoxInsertItemPos
  0080b	81 c4 b4 00 00
	00		 add	 esp, 180		; 000000b4H

; 6343 : 		gObjChaosItemSet(lpObj->m_Index, 0, 1);		

  00811	6a 01		 push	 1
  00813	6a 00		 push	 0
  00815	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00818	8b 08		 mov	 ecx, DWORD PTR [eax]
  0081a	51		 push	 ecx
  0081b	e8 00 00 00 00	 call	 ?gObjChaosItemSet@@YAXHHE@Z ; gObjChaosItemSet
  00820	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6344 : 
; 6345 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00823	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00827	50		 push	 eax
  00828	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0082b	51		 push	 ecx
  0082c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0082f	8b 02		 mov	 eax, DWORD PTR [edx]
  00831	50		 push	 eax
  00832	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00837	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6346 : 
; 6347 : 		//GCUserChaosBoxSend(lpObj);
; 6348 : #if GAME_VERSION >= G_V_99B
; 6349 : 		LogAddTD("[SetItemMix] [%s][%s] CBMix Success %d Money : %d-%d (SetName:%s)", 

  0083a	8b 45 bc	 mov	 eax, DWORD PTR _setoption$[ebp]
  0083d	50		 push	 eax
  0083e	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _MixSetItemIndex$[ebp], 168
  00845	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00848	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  0084e	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  00853	51		 push	 ecx
  00854	b9 00 00 00 00	 mov	 ecx, OFFSET ?gSetItemOption@@3VCSetItemOption@@A ; gSetItemOption
  00859	e8 00 00 00 00	 call	 ?GetSetOptionName@CSetItemOption@@QAEPADHH@Z ; CSetItemOption::GetSetOptionName
  0085e	50		 push	 eax
  0085f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00862	8b 82 b4 0c 00
	00		 mov	 eax, DWORD PTR [edx+3252]
  00868	50		 push	 eax
  00869	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0086c	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00872	52		 push	 edx
  00873	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00876	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  0087c	51		 push	 ecx
  0087d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00880	83 c2 73	 add	 edx, 115		; 00000073H
  00883	52		 push	 edx
  00884	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00887	83 c0 68	 add	 eax, 104		; 00000068H
  0088a	50		 push	 eax
  0088b	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@BFAACIGE@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Suc@
  00890	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00896	83 c4 1c	 add	 esp, 28			; 0000001cH

; 6350 : 			     lpObj->AccountID, lpObj->Name, 
; 6351 : 			     lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, 
; 6352 : 				 gSetItemOption.GetSetOptionName(lpObj->pChaosBox[MixSetItemIndex].m_Type, setoption ));
; 6353 : #else
; 6354 : 		LogAddTD("[SetItemMix] [%s][%s] CBMix Success %d Money : %d-%d", 
; 6355 : 			lpObj->AccountID, lpObj->Name, 
; 6356 : 			lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney);
; 6357 : #endif
; 6358 : 
; 6359 : 		return;

  00899	eb 74		 jmp	 SHORT $LN1@SetItemCha

; 6360 : 	}

  0089b	eb 65		 jmp	 SHORT $LN31@SetItemCha
$LN30@SetItemCha:

; 6361 : 	else
; 6362 : 	{	// 조합실패	
; 6363 : 
; 6364 : 		ChaosBoxInit(lpObj);

  0089d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008a0	50		 push	 eax
  008a1	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  008a4	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 6365 : 		GCUserChaosBoxSend(lpObj);

  008a9	6a 00		 push	 0
  008ab	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008ae	50		 push	 eax
  008af	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  008b4	83 c4 08	 add	 esp, 8

; 6366 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  008b7	0f b6 45 c9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  008bb	50		 push	 eax
  008bc	8d 4d c8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  008bf	51		 push	 ecx
  008c0	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  008c3	8b 02		 mov	 eax, DWORD PTR [edx]
  008c5	50		 push	 eax
  008c6	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  008cb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 6367 : 		LogAddTD("[SetItemMix] [%s][%s] CBMix Fail %d Money : %d-%d",  

  008ce	8b 45 c0	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  008d1	50		 push	 eax
  008d2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  008d5	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  008db	52		 push	 edx
  008dc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008df	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  008e5	51		 push	 ecx
  008e6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  008e9	83 c2 73	 add	 edx, 115		; 00000073H
  008ec	52		 push	 edx
  008ed	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008f0	83 c0 68	 add	 eax, 104		; 00000068H
  008f3	50		 push	 eax
  008f4	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@ILPOEBCF@?$FLSetItemMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fai@
  008f9	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  008ff	83 c4 18	 add	 esp, 24			; 00000018H
$LN31@SetItemCha:

; 6368 : 			   lpObj->AccountID, lpObj->Name, 
; 6369 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 6370 : 	}	
; 6371 : 
; 6372 : 	lpObj->ChaosLock = FALSE;	

  00902	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00905	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN1@SetItemCha:

; 6373 : }

  0090f	5f		 pop	 edi
  00910	5e		 pop	 esi
  00911	5b		 pop	 ebx
  00912	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00915	33 cd		 xor	 ecx, ebp
  00917	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0091c	8b e5		 mov	 esp, ebp
  0091e	5d		 pop	 ebp
  0091f	c2 04 00	 ret	 4
?SetItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::SetItemChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?DarkSpiritChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
tv217 = -164						; size = 4
_optionc$1 = -96					; size = 4
_option3rand$2 = -92					; size = 4
_Option1$3 = -88					; size = 4
_NOption$4 = -84					; size = 4
_Option3$5 = -80					; size = 4
_Option2$6 = -76					; size = 4
_itemtype$7 = -72					; size = 4
_index$8 = -68						; size = 4
_type$9 = -64						; size = 4
_itemlevel$10 = -60					; size = 4
_nChaosNeedMoney$ = -56					; size = 4
_n$11 = -52						; size = 4
_iInvalidItemCount$ = -48				; size = 4
_pMsg$ = -44						; size = 9
_iChaosMoney$ = -32					; size = 4
_SoulOfSpirit$ = -28					; size = 4
_CreatureGemCount$ = -24				; size = 4
_SoulGemCount$ = -20					; size = 4
_BlessGemCount$ = -16					; size = 4
_ChoasGemCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?DarkSpiritChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::DarkSpiritChaosMix, COMDAT
; _this$ = ecx

; 3254 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a4 00 00
	00		 sub	 esp, 164		; 000000a4H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 3255 : 	lpObj->ChaosLock = TRUE;

  00019	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001c	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 3256 : 	
; 3257 : 	int ChoasGemCount = 0;				// 혼석 수

  00026	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _ChoasGemCount$[ebp], 0

; 3258 : 	int BlessGemCount = 0;				// 축석 수

  0002d	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _BlessGemCount$[ebp], 0

; 3259 : 	int SoulGemCount = 0;				// 영석 수	

  00034	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _SoulGemCount$[ebp], 0

; 3260 : 	int CreatureGemCount = 0;			// 창석 수	

  0003b	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _CreatureGemCount$[ebp], 0

; 3261 : 
; 3262 : 	int	SoulOfSpirit = 0;			// 다크호스의 영혼 수

  00042	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _SoulOfSpirit$[ebp], 0

; 3263 : 	
; 3264 : 	int	iChaosMoney = 0;

  00049	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _iChaosMoney$[ebp], 0

; 3265 : 
; 3266 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 3267 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00050	6a 09		 push	 9
  00052	68 86 00 00 00	 push	 134			; 00000086H
  00057	8d 45 d4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0005a	50		 push	 eax
  0005b	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00060	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3268 : 	pMsg.Result		= 0x00;

  00063	c6 45 d7 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 3269 : 
; 3270 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3271 : 	int iCharmOfLuckCount = 0;
; 3272 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3273 : 	
; 3274 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3275 : 	int iInvalidItemCount = 0;

  00067	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _iInvalidItemCount$[ebp], 0

; 3276 : #endif
; 3277 : 
; 3278 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  0006e	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _n$11[ebp], 0
  00075	eb 09		 jmp	 SHORT $LN4@DarkSpirit
$LN2@DarkSpirit:
  00077	8b 45 cc	 mov	 eax, DWORD PTR _n$11[ebp]
  0007a	83 c0 01	 add	 eax, 1
  0007d	89 45 cc	 mov	 DWORD PTR _n$11[ebp], eax
$LN4@DarkSpirit:
  00080	83 7d cc 20	 cmp	 DWORD PTR _n$11[ebp], 32 ; 00000020H
  00084	0f 8d 3f 01 00
	00		 jge	 $LN3@DarkSpirit

; 3279 : 	{
; 3280 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  0008a	69 4d cc a8 00
	00 00		 imul	 ecx, DWORD PTR _n$11[ebp], 168
  00091	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00094	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  0009a	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0009f	83 f8 01	 cmp	 eax, 1
  000a2	0f 85 1c 01 00
	00		 jne	 $LN7@DarkSpirit

; 3281 : 		{
; 3282 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 13) )

  000a8	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  000af	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000b2	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000b8	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000bd	6a 0d		 push	 13			; 0000000dH
  000bf	6a 0e		 push	 14			; 0000000eH
  000c1	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000c6	83 c4 08	 add	 esp, 8
  000c9	3b f0		 cmp	 esi, eax
  000cb	75 0e		 jne	 SHORT $LN8@DarkSpirit

; 3283 : 			{	// 축석
; 3284 : 				BlessGemCount++;

  000cd	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  000d0	83 c0 01	 add	 eax, 1
  000d3	89 45 f0	 mov	 DWORD PTR _BlessGemCount$[ebp], eax

; 3285 : 			}

  000d6	e9 e9 00 00 00	 jmp	 $LN7@DarkSpirit
$LN8@DarkSpirit:

; 3286 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3287 : 			else
; 3288 : #endif
; 3289 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 14) )

  000db	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  000e2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000e5	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000eb	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000f0	6a 0e		 push	 14			; 0000000eH
  000f2	6a 0e		 push	 14			; 0000000eH
  000f4	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000f9	83 c4 08	 add	 esp, 8
  000fc	3b f0		 cmp	 esi, eax
  000fe	75 0e		 jne	 SHORT $LN10@DarkSpirit

; 3290 : 			{	// 영석
; 3291 : 				SoulGemCount++;				

  00100	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  00103	83 c0 01	 add	 eax, 1
  00106	89 45 ec	 mov	 DWORD PTR _SoulGemCount$[ebp], eax

; 3292 : 			}

  00109	e9 b6 00 00 00	 jmp	 $LN7@DarkSpirit
$LN10@DarkSpirit:

; 3293 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3294 : 			else
; 3295 : #endif
; 3296 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 22) )

  0010e	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00115	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00118	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0011e	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00123	6a 16		 push	 22			; 00000016H
  00125	6a 0e		 push	 14			; 0000000eH
  00127	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0012c	83 c4 08	 add	 esp, 8
  0012f	3b f0		 cmp	 esi, eax
  00131	75 0e		 jne	 SHORT $LN12@DarkSpirit

; 3297 : 			{	// 창석		
; 3298 : 				CreatureGemCount++;				

  00133	8b 45 e8	 mov	 eax, DWORD PTR _CreatureGemCount$[ebp]
  00136	83 c0 01	 add	 eax, 1
  00139	89 45 e8	 mov	 DWORD PTR _CreatureGemCount$[ebp], eax

; 3299 : 			}

  0013c	e9 83 00 00 00	 jmp	 $LN7@DarkSpirit
$LN12@DarkSpirit:

; 3300 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  00141	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00148	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0014b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00151	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00156	6a 0f		 push	 15			; 0000000fH
  00158	6a 0c		 push	 12			; 0000000cH
  0015a	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0015f	83 c4 08	 add	 esp, 8
  00162	3b f0		 cmp	 esi, eax
  00164	75 0b		 jne	 SHORT $LN14@DarkSpirit

; 3301 : 			{	// 혼석
; 3302 : 				ChoasGemCount++;				

  00166	8b 45 f4	 mov	 eax, DWORD PTR _ChoasGemCount$[ebp]
  00169	83 c0 01	 add	 eax, 1
  0016c	89 45 f4	 mov	 DWORD PTR _ChoasGemCount$[ebp], eax

; 3303 : 			}

  0016f	eb 53		 jmp	 SHORT $LN7@DarkSpirit
$LN14@DarkSpirit:

; 3304 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13, 31) && lpObj->pChaosBox[n].m_Level == 1 )

  00171	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00178	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0017b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00181	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00186	6a 1f		 push	 31			; 0000001fH
  00188	6a 0d		 push	 13			; 0000000dH
  0018a	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0018f	83 c4 08	 add	 esp, 8
  00192	3b f0		 cmp	 esi, eax
  00194	75 25		 jne	 SHORT $LN16@DarkSpirit
  00196	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  0019d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001a0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001a6	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001ab	83 f8 01	 cmp	 eax, 1
  001ae	75 0b		 jne	 SHORT $LN16@DarkSpirit

; 3305 : 			{	// 다크스피릿의 영혼
; 3306 : 				SoulOfSpirit++;				

  001b0	8b 45 e4	 mov	 eax, DWORD PTR _SoulOfSpirit$[ebp]
  001b3	83 c0 01	 add	 eax, 1
  001b6	89 45 e4	 mov	 DWORD PTR _SoulOfSpirit$[ebp], eax

; 3307 : 			}

  001b9	eb 09		 jmp	 SHORT $LN7@DarkSpirit
$LN16@DarkSpirit:

; 3308 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3309 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 3310 : 			{
; 3311 : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 3312 : 			}
; 3313 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3314 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3315 : 			else
; 3316 : 			{
; 3317 : 				iInvalidItemCount++;

  001bb	8b 45 d0	 mov	 eax, DWORD PTR _iInvalidItemCount$[ebp]
  001be	83 c0 01	 add	 eax, 1
  001c1	89 45 d0	 mov	 DWORD PTR _iInvalidItemCount$[ebp], eax
$LN7@DarkSpirit:

; 3318 : 			}
; 3319 : #endif
; 3320 : 			
; 3321 : 		}
; 3322 : 	}

  001c4	e9 ae fe ff ff	 jmp	 $LN2@DarkSpirit
$LN3@DarkSpirit:

; 3323 : 
; 3324 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3325 : 	if( ChoasGemCount != 1 || BlessGemCount != 2 ||  SoulGemCount != 2 || CreatureGemCount != 1 || SoulOfSpirit != 1 
; 3326 : 		|| iInvalidItemCount > 0 )

  001c9	83 7d f4 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  001cd	75 1e		 jne	 SHORT $LN19@DarkSpirit
  001cf	83 7d f0 02	 cmp	 DWORD PTR _BlessGemCount$[ebp], 2
  001d3	75 18		 jne	 SHORT $LN19@DarkSpirit
  001d5	83 7d ec 02	 cmp	 DWORD PTR _SoulGemCount$[ebp], 2
  001d9	75 12		 jne	 SHORT $LN19@DarkSpirit
  001db	83 7d e8 01	 cmp	 DWORD PTR _CreatureGemCount$[ebp], 1
  001df	75 0c		 jne	 SHORT $LN19@DarkSpirit
  001e1	83 7d e4 01	 cmp	 DWORD PTR _SoulOfSpirit$[ebp], 1
  001e5	75 06		 jne	 SHORT $LN19@DarkSpirit
  001e7	83 7d d0 00	 cmp	 DWORD PTR _iInvalidItemCount$[ebp], 0
  001eb	7e 29		 jle	 SHORT $LN18@DarkSpirit
$LN19@DarkSpirit:

; 3327 : #else
; 3328 : 	if( ChoasGemCount != 1 || BlessGemCount != 2 ||  SoulGemCount != 2 || CreatureGemCount != 1 || SoulOfSpirit != 1 )
; 3329 : #endif
; 3330 : 	{
; 3331 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  001ed	0f b6 45 d5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  001f1	50		 push	 eax
  001f2	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  001f5	51		 push	 ecx
  001f6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001f9	8b 02		 mov	 eax, DWORD PTR [edx]
  001fb	50		 push	 eax
  001fc	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00201	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3332 : 		lpObj->ChaosLock = FALSE;		

  00204	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00207	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3333 : 		return;

  00211	e9 a1 02 00 00	 jmp	 $LN1@DarkSpirit
$LN18@DarkSpirit:

; 3334 : 	}
; 3335 : 
; 3336 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3337 : 	if( iCharmOfLuckCount > 10 )
; 3338 : 	{
; 3339 : 		pMsg.Result = 0xF0;
; 3340 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 3341 : 		lpObj->ChaosLock = FALSE;
; 3342 : 		return;
; 3343 : 	}
; 3344 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3345 : 
; 3346 : 	LogChaosItem(lpObj, "DarkSpiritMix");

  00216	68 00 00 00 00	 push	 OFFSET ??_C@_0O@OCFEOMDO@DarkSpiritMix@
  0021b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0021e	50		 push	 eax
  0021f	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00222	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 3347 : 	LogAddTD("[DarkSpiritMix] Chaos Mix Start");	

  00227	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@HOBPNGGO@?$FLDarkSpiritMix?$FN?5Chaos?5Mix?5Start@
  0022c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00232	83 c4 04	 add	 esp, 4

; 3348 : 
; 3349 : 	lpObj->ChaosSuccessRate = 60;

  00235	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00238	c7 80 b8 0c 00
	00 3c 00 00 00	 mov	 DWORD PTR [eax+3256], 60 ; 0000003cH

; 3350 : 
; 3351 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3352 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 3353 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3354 : 
; 3355 : 	int nChaosNeedMoney = 1000000;

  00242	c7 45 c8 40 42
	0f 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 1000000 ; 000f4240H

; 3356 : 
; 3357 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 다크스피릿 조합
; 3358 : 	INT iChaosTaxMoney		= (INT)((INT64)nChaosNeedMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 3359 : 	if (iChaosTaxMoney < 0)
; 3360 : 		iChaosTaxMoney		= 0;
; 3361 : 
; 3362 : 	nChaosNeedMoney			= nChaosNeedMoney + iChaosTaxMoney;
; 3363 : 	if (nChaosNeedMoney < 0)
; 3364 : 		nChaosNeedMoney		= 0;
; 3365 : #endif
; 3366 : 
; 3367 : 	if( lpObj->Money < nChaosNeedMoney )

  00249	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0024c	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00252	3b 4d c8	 cmp	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00255	7d 2d		 jge	 SHORT $LN20@DarkSpirit

; 3368 : 	{	
; 3369 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  00257	c6 45 d7 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 3370 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0025b	0f b6 45 d5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0025f	50		 push	 eax
  00260	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00263	51		 push	 ecx
  00264	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00267	8b 02		 mov	 eax, DWORD PTR [edx]
  00269	50		 push	 eax
  0026a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0026f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3371 : 		lpObj->ChaosLock = FALSE;

  00272	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00275	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3372 : 		return;

  0027f	e9 33 02 00 00	 jmp	 $LN1@DarkSpirit
$LN20@DarkSpirit:

; 3373 : 	}
; 3374 : 	
; 3375 : 	lpObj->Money -= nChaosNeedMoney;

  00284	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00287	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  0028d	2b 4d c8	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00290	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00293	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 3376 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 다크스피릿 조합
; 3377 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 3378 : #endif
; 3379 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);		

  00299	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0029c	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  002a2	51		 push	 ecx
  002a3	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002a6	8b 02		 mov	 eax, DWORD PTR [edx]
  002a8	50		 push	 eax
  002a9	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  002ae	83 c4 08	 add	 esp, 8

; 3380 : 
; 3381 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  002b1	e8 00 00 00 00	 call	 _rand
  002b6	99		 cdq
  002b7	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  002bc	f7 f9		 idiv	 ecx
  002be	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002c1	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  002c7	0f 8d 78 01 00
	00		 jge	 $LN21@DarkSpirit

; 3382 : 	{	
; 3383 : 		int itemlevel = 0;

  002cd	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _itemlevel$10[ebp], 0

; 3384 : 		int type = 13;

  002d4	c7 45 c0 0d 00
	00 00		 mov	 DWORD PTR _type$9[ebp], 13 ; 0000000dH

; 3385 : 		int index = 5;

  002db	c7 45 bc 05 00
	00 00		 mov	 DWORD PTR _index$8[ebp], 5

; 3386 : 		int itemtype = MAKE_ITEMNUM(type, index);

  002e2	8b 45 bc	 mov	 eax, DWORD PTR _index$8[ebp]
  002e5	50		 push	 eax
  002e6	8b 4d c0	 mov	 ecx, DWORD PTR _type$9[ebp]
  002e9	51		 push	 ecx
  002ea	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  002ef	83 c4 08	 add	 esp, 8
  002f2	89 45 b8	 mov	 DWORD PTR _itemtype$7[ebp], eax

; 3387 : 
; 3388 : 		int Option2 = 0;

  002f5	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _Option2$6[ebp], 0

; 3389 : 		int Option3 = 0;

  002fc	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 0

; 3390 : 		int NOption = 0;

  00303	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR _NOption$4[ebp], 0

; 3391 : 
; 3392 : 		int	Option1 = 0;

  0030a	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR _Option1$3[ebp], 0

; 3393 : 
; 3394 : 		if((rand()%100) < (6+(lpObj->ChaosSuccessRate/5)) ) Option1 = 1;

  00311	e8 00 00 00 00	 call	 _rand
  00316	99		 cdq
  00317	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0031c	f7 f9		 idiv	 ecx
  0031e	8b ca		 mov	 ecx, edx
  00320	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00323	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  00329	99		 cdq
  0032a	be 05 00 00 00	 mov	 esi, 5
  0032f	f7 fe		 idiv	 esi
  00331	83 c0 06	 add	 eax, 6
  00334	3b c8		 cmp	 ecx, eax
  00336	7d 07		 jge	 SHORT $LN23@DarkSpirit
  00338	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR _Option1$3[ebp], 1
$LN23@DarkSpirit:

; 3395 : 
; 3396 : 		if( rand()%5 == 0 )

  0033f	e8 00 00 00 00	 call	 _rand
  00344	99		 cdq
  00345	b9 05 00 00 00	 mov	 ecx, 5
  0034a	f7 f9		 idiv	 ecx
  0034c	85 d2		 test	 edx, edx
  0034e	75 07		 jne	 SHORT $LN24@DarkSpirit

; 3397 : 		{	// 행운
; 3398 : 			Option2 = 1;

  00350	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR _Option2$6[ebp], 1
$LN24@DarkSpirit:

; 3399 : 		}
; 3400 : 
; 3401 : 		int option3rand, optionc;
; 3402 : 
; 3403 : 		option3rand = (rand()%100);

  00357	e8 00 00 00 00	 call	 _rand
  0035c	99		 cdq
  0035d	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00362	f7 f9		 idiv	 ecx
  00364	89 55 a4	 mov	 DWORD PTR _option3rand$2[ebp], edx

; 3404 : 		optionc		= (rand()%3);

  00367	e8 00 00 00 00	 call	 _rand
  0036c	99		 cdq
  0036d	b9 03 00 00 00	 mov	 ecx, 3
  00372	f7 f9		 idiv	 ecx
  00374	89 55 a0	 mov	 DWORD PTR _optionc$1[ebp], edx

; 3405 : 
; 3406 : 		switch( optionc )

  00377	8b 45 a0	 mov	 eax, DWORD PTR _optionc$1[ebp]
  0037a	89 85 5c ff ff
	ff		 mov	 DWORD PTR tv217[ebp], eax
  00380	83 bd 5c ff ff
	ff 00		 cmp	 DWORD PTR tv217[ebp], 0
  00387	74 14		 je	 SHORT $LN25@DarkSpirit
  00389	83 bd 5c ff ff
	ff 01		 cmp	 DWORD PTR tv217[ebp], 1
  00390	74 1a		 je	 SHORT $LN27@DarkSpirit
  00392	83 bd 5c ff ff
	ff 02		 cmp	 DWORD PTR tv217[ebp], 2
  00399	74 20		 je	 SHORT $LN29@DarkSpirit
  0039b	eb 2b		 jmp	 SHORT $LN5@DarkSpirit
$LN25@DarkSpirit:

; 3407 : 		{	// 꽝 80%
; 3408 : 		case 0 :
; 3409 : 			if( option3rand < 4 ) Option3 = 3;	// 옵션

  0039d	83 7d a4 04	 cmp	 DWORD PTR _option3rand$2[ebp], 4
  003a1	7d 07		 jge	 SHORT $LN26@DarkSpirit
  003a3	c7 45 b0 03 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 3
$LN26@DarkSpirit:

; 3410 : 			break;

  003aa	eb 1c		 jmp	 SHORT $LN5@DarkSpirit
$LN27@DarkSpirit:

; 3411 : 		case 1 :
; 3412 : 			if( option3rand < 10 ) Option3 = 2;	// 옵션

  003ac	83 7d a4 0a	 cmp	 DWORD PTR _option3rand$2[ebp], 10 ; 0000000aH
  003b0	7d 07		 jge	 SHORT $LN28@DarkSpirit
  003b2	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 2
$LN28@DarkSpirit:

; 3413 : 			break;

  003b9	eb 0d		 jmp	 SHORT $LN5@DarkSpirit
$LN29@DarkSpirit:

; 3414 : 		case 2 :
; 3415 : 			if( option3rand < 20 ) Option3 = 1;	// 옵션

  003bb	83 7d a4 14	 cmp	 DWORD PTR _option3rand$2[ebp], 20 ; 00000014H
  003bf	7d 07		 jge	 SHORT $LN5@DarkSpirit
  003c1	c7 45 b0 01 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 1
$LN5@DarkSpirit:

; 3416 : 			break;
; 3417 : 		}
; 3418 : 
; 3419 : 		PetItemSerialCreateSend(lpObj->m_Index, 254, 0, 0, itemtype, itemlevel, 0, Option1, Option2, Option3, -1, 0, 0);			

  003c8	6a 00		 push	 0
  003ca	6a 00		 push	 0
  003cc	6a ff		 push	 -1
  003ce	0f b6 45 b0	 movzx	 eax, BYTE PTR _Option3$5[ebp]
  003d2	50		 push	 eax
  003d3	0f b6 4d b4	 movzx	 ecx, BYTE PTR _Option2$6[ebp]
  003d7	51		 push	 ecx
  003d8	0f b6 55 a8	 movzx	 edx, BYTE PTR _Option1$3[ebp]
  003dc	52		 push	 edx
  003dd	6a 00		 push	 0
  003df	0f b6 45 c4	 movzx	 eax, BYTE PTR _itemlevel$10[ebp]
  003e3	50		 push	 eax
  003e4	8b 4d b8	 mov	 ecx, DWORD PTR _itemtype$7[ebp]
  003e7	51		 push	 ecx
  003e8	6a 00		 push	 0
  003ea	6a 00		 push	 0
  003ec	68 fe 00 00 00	 push	 254			; 000000feH
  003f1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003f4	8b 02		 mov	 eax, DWORD PTR [edx]
  003f6	50		 push	 eax
  003f7	e8 00 00 00 00	 call	 ?PetItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; PetItemSerialCreateSend
  003fc	83 c4 34	 add	 esp, 52			; 00000034H

; 3420 : 		gObjInventoryCommit(lpObj->m_Index);		

  003ff	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00402	8b 08		 mov	 ecx, DWORD PTR [eax]
  00404	51		 push	 ecx
  00405	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  0040a	83 c4 04	 add	 esp, 4

; 3421 : 
; 3422 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3423 : 		LogAddTD("[DarkSpiritMix] [%s][%s] CBMix Success %d Money : %d-%d, CharmRate : %d", 
; 3424 : 			   lpObj->AccountID, lpObj->Name, 
; 3425 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);
; 3426 : #else
; 3427 : 		LogAddTD("[DarkSpiritMix] [%s][%s] CBMix Success %d Money : %d-%d", 

  0040d	8b 45 c8	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00410	50		 push	 eax
  00411	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00414	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  0041a	52		 push	 edx
  0041b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0041e	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00424	51		 push	 ecx
  00425	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00428	83 c2 73	 add	 edx, 115		; 00000073H
  0042b	52		 push	 edx
  0042c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0042f	83 c0 68	 add	 eax, 104		; 00000068H
  00432	50		 push	 eax
  00433	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@COGKJDMF@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
  00438	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0043e	83 c4 18	 add	 esp, 24			; 00000018H

; 3428 : 			   lpObj->AccountID, lpObj->Name, 
; 3429 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);
; 3430 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3431 : 		return;

  00441	eb 74		 jmp	 SHORT $LN1@DarkSpirit

; 3432 : 	}

  00443	eb 65		 jmp	 SHORT $LN22@DarkSpirit
$LN21@DarkSpirit:

; 3433 : 	else
; 3434 : 	{	// 조합실패	
; 3435 : 
; 3436 : 		ChaosBoxInit(lpObj);

  00445	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00448	50		 push	 eax
  00449	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0044c	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 3437 : 		GCUserChaosBoxSend(lpObj, 1);

  00451	6a 01		 push	 1
  00453	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00456	50		 push	 eax
  00457	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  0045c	83 c4 08	 add	 esp, 8

; 3438 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0045f	0f b6 45 d5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00463	50		 push	 eax
  00464	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00467	51		 push	 ecx
  00468	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0046b	8b 02		 mov	 eax, DWORD PTR [edx]
  0046d	50		 push	 eax
  0046e	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00473	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3439 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3440 : 		LogAddTD("[DarkSpiritMix] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 3441 : 			   lpObj->AccountID, lpObj->Name, 
; 3442 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);	
; 3443 : #else
; 3444 : 		LogAddTD("[DarkSpiritMix] [%s][%s] CBMix Fail %d Money : %d-%d",  

  00476	8b 45 c8	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00479	50		 push	 eax
  0047a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0047d	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00483	52		 push	 edx
  00484	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00487	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  0048d	51		 push	 ecx
  0048e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00491	83 c2 73	 add	 edx, 115		; 00000073H
  00494	52		 push	 edx
  00495	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00498	83 c0 68	 add	 eax, 104		; 00000068H
  0049b	50		 push	 eax
  0049c	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@GJLJAMBJ@?$FLDarkSpiritMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
  004a1	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  004a7	83 c4 18	 add	 esp, 24			; 00000018H
$LN22@DarkSpirit:

; 3445 : 			   lpObj->AccountID, lpObj->Name, 
; 3446 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 3447 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3448 : 	}	
; 3449 : 
; 3450 : 	lpObj->ChaosLock = FALSE;	

  004aa	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ad	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN1@DarkSpirit:

; 3451 : }

  004b7	5f		 pop	 edi
  004b8	5e		 pop	 esi
  004b9	5b		 pop	 ebx
  004ba	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004bd	33 cd		 xor	 ecx, ebp
  004bf	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004c4	8b e5		 mov	 esp, ebp
  004c6	5d		 pop	 ebp
  004c7	c2 04 00	 ret	 4
?DarkSpiritChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::DarkSpiritChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?DarkHorseChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
tv217 = -164						; size = 4
_optionc$1 = -96					; size = 4
_option3rand$2 = -92					; size = 4
_Option1$3 = -88					; size = 4
_NOption$4 = -84					; size = 4
_Option3$5 = -80					; size = 4
_Option2$6 = -76					; size = 4
_itemtype$7 = -72					; size = 4
_index$8 = -68						; size = 4
_type$9 = -64						; size = 4
_itemlevel$10 = -60					; size = 4
_nChaosNeedMoney$ = -56					; size = 4
_n$11 = -52						; size = 4
_iInvalidItemCount$ = -48				; size = 4
_pMsg$ = -44						; size = 9
_iChaosMoney$ = -32					; size = 4
_SoulOfDarkHorse$ = -28					; size = 4
_CreatureGemCount$ = -24				; size = 4
_SoulGemCount$ = -20					; size = 4
_BlessGemCount$ = -16					; size = 4
_ChoasGemCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?DarkHorseChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::DarkHorseChaosMix, COMDAT
; _this$ = ecx

; 3052 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a4 00 00
	00		 sub	 esp, 164		; 000000a4H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 3053 : 	lpObj->ChaosLock = TRUE;

  00019	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001c	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 3054 : 	
; 3055 : 	int ChoasGemCount = 0;				// 혼석 수

  00026	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _ChoasGemCount$[ebp], 0

; 3056 : 	int BlessGemCount = 0;				// 축석 수

  0002d	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _BlessGemCount$[ebp], 0

; 3057 : 	int SoulGemCount = 0;				// 영석 수	

  00034	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _SoulGemCount$[ebp], 0

; 3058 : 	int CreatureGemCount = 0;			// 창석 수	

  0003b	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _CreatureGemCount$[ebp], 0

; 3059 : 
; 3060 : 	int	SoulOfDarkHorse = 0;			// 다크호스의 영혼 수

  00042	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _SoulOfDarkHorse$[ebp], 0

; 3061 : 	
; 3062 : 	int	iChaosMoney = 0;

  00049	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _iChaosMoney$[ebp], 0

; 3063 : 
; 3064 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 3065 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00050	6a 09		 push	 9
  00052	68 86 00 00 00	 push	 134			; 00000086H
  00057	8d 45 d4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0005a	50		 push	 eax
  0005b	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00060	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3066 : 	pMsg.Result		= 0x00;				

  00063	c6 45 d7 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 3067 : 
; 3068 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3069 : 	int iCharmOfLuckCount = 0;
; 3070 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3071 : 
; 3072 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3073 : 	int iInvalidItemCount = 0;

  00067	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _iInvalidItemCount$[ebp], 0

; 3074 : #endif
; 3075 : 
; 3076 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  0006e	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _n$11[ebp], 0
  00075	eb 09		 jmp	 SHORT $LN4@DarkHorseC
$LN2@DarkHorseC:
  00077	8b 45 cc	 mov	 eax, DWORD PTR _n$11[ebp]
  0007a	83 c0 01	 add	 eax, 1
  0007d	89 45 cc	 mov	 DWORD PTR _n$11[ebp], eax
$LN4@DarkHorseC:
  00080	83 7d cc 20	 cmp	 DWORD PTR _n$11[ebp], 32 ; 00000020H
  00084	0f 8d 3e 01 00
	00		 jge	 $LN3@DarkHorseC

; 3077 : 	{
; 3078 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  0008a	69 4d cc a8 00
	00 00		 imul	 ecx, DWORD PTR _n$11[ebp], 168
  00091	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00094	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  0009a	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0009f	83 f8 01	 cmp	 eax, 1
  000a2	0f 85 1b 01 00
	00		 jne	 $LN7@DarkHorseC

; 3079 : 		{
; 3080 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 13) )

  000a8	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  000af	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000b2	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000b8	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000bd	6a 0d		 push	 13			; 0000000dH
  000bf	6a 0e		 push	 14			; 0000000eH
  000c1	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000c6	83 c4 08	 add	 esp, 8
  000c9	3b f0		 cmp	 esi, eax
  000cb	75 0e		 jne	 SHORT $LN8@DarkHorseC

; 3081 : 			{	// 축석
; 3082 : 				BlessGemCount++;

  000cd	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  000d0	83 c0 01	 add	 eax, 1
  000d3	89 45 f0	 mov	 DWORD PTR _BlessGemCount$[ebp], eax

; 3083 : 			}

  000d6	e9 e8 00 00 00	 jmp	 $LN7@DarkHorseC
$LN8@DarkHorseC:

; 3084 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3085 : 			else
; 3086 : #endif
; 3087 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 14) )

  000db	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  000e2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000e5	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000eb	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000f0	6a 0e		 push	 14			; 0000000eH
  000f2	6a 0e		 push	 14			; 0000000eH
  000f4	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000f9	83 c4 08	 add	 esp, 8
  000fc	3b f0		 cmp	 esi, eax
  000fe	75 0e		 jne	 SHORT $LN10@DarkHorseC

; 3088 : 			{	// 영석
; 3089 : 				SoulGemCount++;				

  00100	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  00103	83 c0 01	 add	 eax, 1
  00106	89 45 ec	 mov	 DWORD PTR _SoulGemCount$[ebp], eax

; 3090 : 			}

  00109	e9 b5 00 00 00	 jmp	 $LN7@DarkHorseC
$LN10@DarkHorseC:

; 3091 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3092 : 			else
; 3093 : #endif
; 3094 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 22) )

  0010e	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00115	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00118	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0011e	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00123	6a 16		 push	 22			; 00000016H
  00125	6a 0e		 push	 14			; 0000000eH
  00127	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0012c	83 c4 08	 add	 esp, 8
  0012f	3b f0		 cmp	 esi, eax
  00131	75 0e		 jne	 SHORT $LN12@DarkHorseC

; 3095 : 			{	// 창석		
; 3096 : 				CreatureGemCount++;				

  00133	8b 45 e8	 mov	 eax, DWORD PTR _CreatureGemCount$[ebp]
  00136	83 c0 01	 add	 eax, 1
  00139	89 45 e8	 mov	 DWORD PTR _CreatureGemCount$[ebp], eax

; 3097 : 			}

  0013c	e9 82 00 00 00	 jmp	 $LN7@DarkHorseC
$LN12@DarkHorseC:

; 3098 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  00141	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00148	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0014b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00151	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00156	6a 0f		 push	 15			; 0000000fH
  00158	6a 0c		 push	 12			; 0000000cH
  0015a	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0015f	83 c4 08	 add	 esp, 8
  00162	3b f0		 cmp	 esi, eax
  00164	75 0b		 jne	 SHORT $LN14@DarkHorseC

; 3099 : 			{	// 혼석
; 3100 : 				ChoasGemCount++;				

  00166	8b 45 f4	 mov	 eax, DWORD PTR _ChoasGemCount$[ebp]
  00169	83 c0 01	 add	 eax, 1
  0016c	89 45 f4	 mov	 DWORD PTR _ChoasGemCount$[ebp], eax

; 3101 : 			}

  0016f	eb 52		 jmp	 SHORT $LN7@DarkHorseC
$LN14@DarkHorseC:

; 3102 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13, 31) && lpObj->pChaosBox[n].m_Level == 0)

  00171	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00178	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0017b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00181	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00186	6a 1f		 push	 31			; 0000001fH
  00188	6a 0d		 push	 13			; 0000000dH
  0018a	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0018f	83 c4 08	 add	 esp, 8
  00192	3b f0		 cmp	 esi, eax
  00194	75 24		 jne	 SHORT $LN16@DarkHorseC
  00196	69 45 cc a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  0019d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001a0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001a6	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001ab	85 c0		 test	 eax, eax
  001ad	75 0b		 jne	 SHORT $LN16@DarkHorseC

; 3103 : 			{	// 다크호스의 영혼
; 3104 : 				SoulOfDarkHorse++;				

  001af	8b 45 e4	 mov	 eax, DWORD PTR _SoulOfDarkHorse$[ebp]
  001b2	83 c0 01	 add	 eax, 1
  001b5	89 45 e4	 mov	 DWORD PTR _SoulOfDarkHorse$[ebp], eax

; 3105 : 			}

  001b8	eb 09		 jmp	 SHORT $LN7@DarkHorseC
$LN16@DarkHorseC:

; 3106 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3107 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3108 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 3109 : 			{
; 3110 : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 3111 : 			}
; 3112 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3113 : 			else
; 3114 : 			{
; 3115 : 				iInvalidItemCount++;

  001ba	8b 45 d0	 mov	 eax, DWORD PTR _iInvalidItemCount$[ebp]
  001bd	83 c0 01	 add	 eax, 1
  001c0	89 45 d0	 mov	 DWORD PTR _iInvalidItemCount$[ebp], eax
$LN7@DarkHorseC:

; 3116 : 			}
; 3117 : #endif
; 3118 : 
; 3119 : 		}
; 3120 : 	}

  001c3	e9 af fe ff ff	 jmp	 $LN2@DarkHorseC
$LN3@DarkHorseC:

; 3121 : 
; 3122 : #ifdef MODIFY_DARKLORD_PETITEM_CHAOS_MIX_20041117
; 3123 : 	if( ChoasGemCount != 1 || BlessGemCount != 5 ||  SoulGemCount != 5 || CreatureGemCount != 1 || SoulOfDarkHorse != 1 
; 3124 : 		|| iInvalidItemCount > 0 )

  001c8	83 7d f4 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  001cc	75 1e		 jne	 SHORT $LN19@DarkHorseC
  001ce	83 7d f0 05	 cmp	 DWORD PTR _BlessGemCount$[ebp], 5
  001d2	75 18		 jne	 SHORT $LN19@DarkHorseC
  001d4	83 7d ec 05	 cmp	 DWORD PTR _SoulGemCount$[ebp], 5
  001d8	75 12		 jne	 SHORT $LN19@DarkHorseC
  001da	83 7d e8 01	 cmp	 DWORD PTR _CreatureGemCount$[ebp], 1
  001de	75 0c		 jne	 SHORT $LN19@DarkHorseC
  001e0	83 7d e4 01	 cmp	 DWORD PTR _SoulOfDarkHorse$[ebp], 1
  001e4	75 06		 jne	 SHORT $LN19@DarkHorseC
  001e6	83 7d d0 00	 cmp	 DWORD PTR _iInvalidItemCount$[ebp], 0
  001ea	7e 29		 jle	 SHORT $LN18@DarkHorseC
$LN19@DarkHorseC:

; 3125 : #else
; 3126 : 	if( ChoasGemCount != 1 || BlessGemCount != 5 ||  SoulGemCount != 5 || CreatureGemCount != 1 || SoulOfDarkHorse != 1 )
; 3127 : #endif
; 3128 : 	{
; 3129 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  001ec	0f b6 45 d5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  001f0	50		 push	 eax
  001f1	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  001f4	51		 push	 ecx
  001f5	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001f8	8b 02		 mov	 eax, DWORD PTR [edx]
  001fa	50		 push	 eax
  001fb	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00200	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3130 : 		lpObj->ChaosLock = FALSE;		

  00203	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00206	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3131 : 		return;

  00210	e9 a1 02 00 00	 jmp	 $LN1@DarkHorseC
$LN18@DarkHorseC:

; 3132 : 	}
; 3133 : 
; 3134 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3135 : 	if( iCharmOfLuckCount > 10 )
; 3136 : 	{
; 3137 : 		pMsg.Result = 0xF0;
; 3138 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 3139 : 		lpObj->ChaosLock = FALSE;
; 3140 : 
; 3141 : 		return;
; 3142 : 	}
; 3143 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3144 : 
; 3145 : 	LogChaosItem(lpObj, "DarkHorseMix");

  00215	68 00 00 00 00	 push	 OFFSET ??_C@_0N@LDINKAHL@DarkHorseMix@
  0021a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0021d	50		 push	 eax
  0021e	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00221	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 3146 : 	LogAddTD("[DarkHorseMix] Chaos Mix Start");	

  00226	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@IMILBLLO@?$FLDarkHorseMix?$FN?5Chaos?5Mix?5Start@
  0022b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00231	83 c4 04	 add	 esp, 4

; 3147 : 
; 3148 : 	lpObj->ChaosSuccessRate = 60;

  00234	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00237	c7 80 b8 0c 00
	00 3c 00 00 00	 mov	 DWORD PTR [eax+3256], 60 ; 0000003cH

; 3149 : 
; 3150 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3151 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 3152 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3153 : 
; 3154 : 	int nChaosNeedMoney = 5000000;

  00241	c7 45 c8 40 4b
	4c 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 5000000 ; 004c4b40H

; 3155 : 
; 3156 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 다크호스 조합
; 3157 : 	INT iChaosTaxMoney		= (INT)((INT64)nChaosNeedMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 3158 : 	if (iChaosTaxMoney < 0)
; 3159 : 		iChaosTaxMoney		= 0;
; 3160 : 
; 3161 : 	nChaosNeedMoney			= nChaosNeedMoney + iChaosTaxMoney;
; 3162 : 	if (nChaosNeedMoney < 0)
; 3163 : 		nChaosNeedMoney		= 0;
; 3164 : #endif
; 3165 : 
; 3166 : 	if( lpObj->Money < nChaosNeedMoney )

  00248	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0024b	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00251	3b 4d c8	 cmp	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00254	7d 2d		 jge	 SHORT $LN20@DarkHorseC

; 3167 : 	{	
; 3168 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  00256	c6 45 d7 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 3169 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0025a	0f b6 45 d5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0025e	50		 push	 eax
  0025f	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00262	51		 push	 ecx
  00263	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00266	8b 02		 mov	 eax, DWORD PTR [edx]
  00268	50		 push	 eax
  00269	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0026e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3170 : 		lpObj->ChaosLock = FALSE;

  00271	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00274	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3171 : 		return;

  0027e	e9 33 02 00 00	 jmp	 $LN1@DarkHorseC
$LN20@DarkHorseC:

; 3172 : 	}
; 3173 : 	
; 3174 : 	lpObj->Money -= nChaosNeedMoney;

  00283	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00286	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  0028c	2b 4d c8	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  0028f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00292	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 3175 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 다크호스 조합
; 3176 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 3177 : #endif
; 3178 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);		

  00298	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0029b	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  002a1	51		 push	 ecx
  002a2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002a5	8b 02		 mov	 eax, DWORD PTR [edx]
  002a7	50		 push	 eax
  002a8	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  002ad	83 c4 08	 add	 esp, 8

; 3179 : 
; 3180 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  002b0	e8 00 00 00 00	 call	 _rand
  002b5	99		 cdq
  002b6	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  002bb	f7 f9		 idiv	 ecx
  002bd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002c0	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  002c6	0f 8d 78 01 00
	00		 jge	 $LN21@DarkHorseC

; 3181 : 	{	
; 3182 : 		int itemlevel = 0;

  002cc	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _itemlevel$10[ebp], 0

; 3183 : 		int type = 13;

  002d3	c7 45 c0 0d 00
	00 00		 mov	 DWORD PTR _type$9[ebp], 13 ; 0000000dH

; 3184 : 		int index = 4;

  002da	c7 45 bc 04 00
	00 00		 mov	 DWORD PTR _index$8[ebp], 4

; 3185 : 		int itemtype = MAKE_ITEMNUM(type, index);

  002e1	8b 45 bc	 mov	 eax, DWORD PTR _index$8[ebp]
  002e4	50		 push	 eax
  002e5	8b 4d c0	 mov	 ecx, DWORD PTR _type$9[ebp]
  002e8	51		 push	 ecx
  002e9	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  002ee	83 c4 08	 add	 esp, 8
  002f1	89 45 b8	 mov	 DWORD PTR _itemtype$7[ebp], eax

; 3186 : 
; 3187 : 		int Option2 = 0;

  002f4	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _Option2$6[ebp], 0

; 3188 : 		int Option3 = 0;

  002fb	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 0

; 3189 : 		int NOption = 0;

  00302	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR _NOption$4[ebp], 0

; 3190 : 
; 3191 : 		int	Option1 = 0;

  00309	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR _Option1$3[ebp], 0

; 3192 : 
; 3193 : 		if((rand()%100) < (6+(lpObj->ChaosSuccessRate/5)) ) Option1 = 1;

  00310	e8 00 00 00 00	 call	 _rand
  00315	99		 cdq
  00316	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0031b	f7 f9		 idiv	 ecx
  0031d	8b ca		 mov	 ecx, edx
  0031f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00322	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  00328	99		 cdq
  00329	be 05 00 00 00	 mov	 esi, 5
  0032e	f7 fe		 idiv	 esi
  00330	83 c0 06	 add	 eax, 6
  00333	3b c8		 cmp	 ecx, eax
  00335	7d 07		 jge	 SHORT $LN23@DarkHorseC
  00337	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR _Option1$3[ebp], 1
$LN23@DarkHorseC:

; 3194 : 
; 3195 : 		if( rand()%5 == 0 )

  0033e	e8 00 00 00 00	 call	 _rand
  00343	99		 cdq
  00344	b9 05 00 00 00	 mov	 ecx, 5
  00349	f7 f9		 idiv	 ecx
  0034b	85 d2		 test	 edx, edx
  0034d	75 07		 jne	 SHORT $LN24@DarkHorseC

; 3196 : 		{	// 행운
; 3197 : 			Option2 = 1;

  0034f	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR _Option2$6[ebp], 1
$LN24@DarkHorseC:

; 3198 : 		}
; 3199 : 
; 3200 : 		int option3rand, optionc;
; 3201 : 
; 3202 : 		option3rand = (rand()%100);

  00356	e8 00 00 00 00	 call	 _rand
  0035b	99		 cdq
  0035c	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00361	f7 f9		 idiv	 ecx
  00363	89 55 a4	 mov	 DWORD PTR _option3rand$2[ebp], edx

; 3203 : 		optionc		= (rand()%3);

  00366	e8 00 00 00 00	 call	 _rand
  0036b	99		 cdq
  0036c	b9 03 00 00 00	 mov	 ecx, 3
  00371	f7 f9		 idiv	 ecx
  00373	89 55 a0	 mov	 DWORD PTR _optionc$1[ebp], edx

; 3204 : 
; 3205 : 		switch( optionc )

  00376	8b 45 a0	 mov	 eax, DWORD PTR _optionc$1[ebp]
  00379	89 85 5c ff ff
	ff		 mov	 DWORD PTR tv217[ebp], eax
  0037f	83 bd 5c ff ff
	ff 00		 cmp	 DWORD PTR tv217[ebp], 0
  00386	74 14		 je	 SHORT $LN25@DarkHorseC
  00388	83 bd 5c ff ff
	ff 01		 cmp	 DWORD PTR tv217[ebp], 1
  0038f	74 1a		 je	 SHORT $LN27@DarkHorseC
  00391	83 bd 5c ff ff
	ff 02		 cmp	 DWORD PTR tv217[ebp], 2
  00398	74 20		 je	 SHORT $LN29@DarkHorseC
  0039a	eb 2b		 jmp	 SHORT $LN5@DarkHorseC
$LN25@DarkHorseC:

; 3206 : 		{	// 꽝 80%
; 3207 : 		case 0 :
; 3208 : 			if( option3rand < 4 ) Option3 = 3;	// 옵션

  0039c	83 7d a4 04	 cmp	 DWORD PTR _option3rand$2[ebp], 4
  003a0	7d 07		 jge	 SHORT $LN26@DarkHorseC
  003a2	c7 45 b0 03 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 3
$LN26@DarkHorseC:

; 3209 : 			break;

  003a9	eb 1c		 jmp	 SHORT $LN5@DarkHorseC
$LN27@DarkHorseC:

; 3210 : 		case 1 :
; 3211 : 			if( option3rand < 10 ) Option3 = 2;	// 옵션

  003ab	83 7d a4 0a	 cmp	 DWORD PTR _option3rand$2[ebp], 10 ; 0000000aH
  003af	7d 07		 jge	 SHORT $LN28@DarkHorseC
  003b1	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 2
$LN28@DarkHorseC:

; 3212 : 			break;

  003b8	eb 0d		 jmp	 SHORT $LN5@DarkHorseC
$LN29@DarkHorseC:

; 3213 : 		case 2 :
; 3214 : 			if( option3rand < 20 ) Option3 = 1;	// 옵션

  003ba	83 7d a4 14	 cmp	 DWORD PTR _option3rand$2[ebp], 20 ; 00000014H
  003be	7d 07		 jge	 SHORT $LN5@DarkHorseC
  003c0	c7 45 b0 01 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 1
$LN5@DarkHorseC:

; 3215 : 			break;
; 3216 : 		}
; 3217 : 
; 3218 : 		PetItemSerialCreateSend(lpObj->m_Index, 254, 0, 0, itemtype, itemlevel, 0, Option1, Option2, Option3, -1, 0, 0);

  003c7	6a 00		 push	 0
  003c9	6a 00		 push	 0
  003cb	6a ff		 push	 -1
  003cd	0f b6 45 b0	 movzx	 eax, BYTE PTR _Option3$5[ebp]
  003d1	50		 push	 eax
  003d2	0f b6 4d b4	 movzx	 ecx, BYTE PTR _Option2$6[ebp]
  003d6	51		 push	 ecx
  003d7	0f b6 55 a8	 movzx	 edx, BYTE PTR _Option1$3[ebp]
  003db	52		 push	 edx
  003dc	6a 00		 push	 0
  003de	0f b6 45 c4	 movzx	 eax, BYTE PTR _itemlevel$10[ebp]
  003e2	50		 push	 eax
  003e3	8b 4d b8	 mov	 ecx, DWORD PTR _itemtype$7[ebp]
  003e6	51		 push	 ecx
  003e7	6a 00		 push	 0
  003e9	6a 00		 push	 0
  003eb	68 fe 00 00 00	 push	 254			; 000000feH
  003f0	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003f3	8b 02		 mov	 eax, DWORD PTR [edx]
  003f5	50		 push	 eax
  003f6	e8 00 00 00 00	 call	 ?PetItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; PetItemSerialCreateSend
  003fb	83 c4 34	 add	 esp, 52			; 00000034H

; 3219 : 		gObjInventoryCommit(lpObj->m_Index);		

  003fe	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00401	8b 08		 mov	 ecx, DWORD PTR [eax]
  00403	51		 push	 ecx
  00404	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  00409	83 c4 04	 add	 esp, 4

; 3220 : 
; 3221 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3222 : 		LogAddTD("[DarkHorseMix] [%s][%s] CBMix Success %d Money : %d-%d, CharmRate : %d", 
; 3223 : 			   lpObj->AccountID, lpObj->Name, 
; 3224 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);
; 3225 : #else
; 3226 : 		LogAddTD("[DarkHorseMix] [%s][%s] CBMix Success %d Money : %d-%d", 

  0040c	8b 45 c8	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  0040f	50		 push	 eax
  00410	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00413	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00419	52		 push	 edx
  0041a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0041d	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00423	51		 push	 ecx
  00424	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00427	83 c2 73	 add	 edx, 115		; 00000073H
  0042a	52		 push	 edx
  0042b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0042e	83 c0 68	 add	 eax, 104		; 00000068H
  00431	50		 push	 eax
  00432	68 00 00 00 00	 push	 OFFSET ??_C@_0DH@OLKNLOID@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5S@
  00437	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0043d	83 c4 18	 add	 esp, 24			; 00000018H

; 3227 : 			   lpObj->AccountID, lpObj->Name, 
; 3228 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);
; 3229 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3230 : 		return;

  00440	eb 74		 jmp	 SHORT $LN1@DarkHorseC

; 3231 : 	}

  00442	eb 65		 jmp	 SHORT $LN22@DarkHorseC
$LN21@DarkHorseC:

; 3232 : 	else
; 3233 : 	{	// 조합실패	
; 3234 : 
; 3235 : 		ChaosBoxInit(lpObj);

  00444	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00447	50		 push	 eax
  00448	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0044b	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 3236 : 		GCUserChaosBoxSend(lpObj, 1);

  00450	6a 01		 push	 1
  00452	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00455	50		 push	 eax
  00456	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  0045b	83 c4 08	 add	 esp, 8

; 3237 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0045e	0f b6 45 d5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00462	50		 push	 eax
  00463	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00466	51		 push	 ecx
  00467	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0046a	8b 02		 mov	 eax, DWORD PTR [edx]
  0046c	50		 push	 eax
  0046d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00472	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3238 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3239 : 		LogAddTD("[DarkHorseMix] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 3240 : 			   lpObj->AccountID, lpObj->Name, 
; 3241 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);	
; 3242 : #else
; 3243 : 		LogAddTD("[DarkHorseMix] [%s][%s] CBMix Fail %d Money : %d-%d",  

  00475	8b 45 c8	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00478	50		 push	 eax
  00479	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0047c	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00482	52		 push	 edx
  00483	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00486	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  0048c	51		 push	 ecx
  0048d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00490	83 c2 73	 add	 edx, 115		; 00000073H
  00493	52		 push	 edx
  00494	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00497	83 c0 68	 add	 eax, 104		; 00000068H
  0049a	50		 push	 eax
  0049b	68 00 00 00 00	 push	 OFFSET ??_C@_0DE@OLLNPMC@?$FLDarkHorseMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5F@
  004a0	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  004a6	83 c4 18	 add	 esp, 24			; 00000018H
$LN22@DarkHorseC:

; 3244 : 			   lpObj->AccountID, lpObj->Name, 
; 3245 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 3246 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3247 : 	}	
; 3248 : 
; 3249 : 	lpObj->ChaosLock = FALSE;	

  004a9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ac	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN1@DarkHorseC:

; 3250 : }

  004b6	5f		 pop	 edi
  004b7	5e		 pop	 esi
  004b8	5b		 pop	 ebx
  004b9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004bc	33 cd		 xor	 ecx, ebp
  004be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004c3	8b e5		 mov	 esp, ebp
  004c5	5d		 pop	 ebp
  004c6	c2 04 00	 ret	 4
?DarkHorseChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::DarkHorseChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?BloodCastleItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
tv78 = -100						; size = 4
tv88 = -96						; size = 4
tv79 = -96						; size = 4
_iRET_VAL$ = -28					; size = 4
_aIndex$ = -24						; size = 4
_pMsg$ = -20						; size = 9
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?BloodCastleItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::BloodCastleItemChaosMix, COMDAT
; _this$ = ecx

; 2947 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 2948 : 	lpObj->ChaosLock = TRUE;

  00016	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00019	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 2949 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 2950 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00023	6a 09		 push	 9
  00025	68 86 00 00 00	 push	 134			; 00000086H
  0002a	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00033	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2951 : 	pMsg.Result		= 0x00;	

  00036	c6 45 ef 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 2952 : 
; 2953 : 	int aIndex = lpObj->m_Index;

  0003a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0003f	89 4d e8	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 2954 : 
; 2955 : 	// 대천사의서, 블러드본 체크
; 2956 : 	int iRET_VAL = g_BloodCastle.CheckChoasMixItem(aIndex);

  00042	8b 45 e8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00045	50		 push	 eax
  00046	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  0004b	e8 00 00 00 00	 call	 ?CheckChoasMixItem@CBloodCastle@@QAEHH@Z ; CBloodCastle::CheckChoasMixItem
  00050	89 45 e4	 mov	 DWORD PTR _iRET_VAL$[ebp], eax

; 2957 : 
; 2958 : #ifdef ADD_BLOODCASTLE_FOR_MASTER_LEVEL_20071010	// 블러드캐슬 맵 인덱스 변경
; 2959 : 	int iMapNum = g_BloodCastle.GetMapNumByBCBridge( iRET_VAL - 1 );
; 2960 : 	if (CHECK_BLOODCASTLE( iMapNum ) ) 
; 2961 : 	{
; 2962 : #else
; 2963 : 	if (CHECK_BLOODCASTLE(iRET_VAL - 1 + MAP_INDEX_BLOODCASTLE1)) {

  00053	8b 45 e4	 mov	 eax, DWORD PTR _iRET_VAL$[ebp]
  00056	83 c0 0a	 add	 eax, 10			; 0000000aH
  00059	83 f8 0b	 cmp	 eax, 11			; 0000000bH
  0005c	7d 09		 jge	 SHORT $LN19@BloodCastl
  0005e	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
  00065	eb 21		 jmp	 SHORT $LN20@BloodCastl
$LN19@BloodCastl:
  00067	8b 4d e4	 mov	 ecx, DWORD PTR _iRET_VAL$[ebp]
  0006a	83 c1 0a	 add	 ecx, 10			; 0000000aH
  0006d	83 f9 11	 cmp	 ecx, 17			; 00000011H
  00070	7e 09		 jle	 SHORT $LN17@BloodCastl
  00072	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv78[ebp], 0
  00079	eb 07		 jmp	 SHORT $LN18@BloodCastl
$LN17@BloodCastl:
  0007b	c7 45 9c 01 00
	00 00		 mov	 DWORD PTR tv78[ebp], 1
$LN18@BloodCastl:
  00082	8b 55 9c	 mov	 edx, DWORD PTR tv78[ebp]
  00085	89 55 a0	 mov	 DWORD PTR tv79[ebp], edx
$LN20@BloodCastl:
  00088	83 7d a0 00	 cmp	 DWORD PTR tv79[ebp], 0
  0008c	74 30		 je	 SHORT $LN4@BloodCastl

; 2964 : #endif
; 2965 : 		// 특정 레벨의 블러드캐슬 입장권 (투망) 재료가 있다. => 블러드캐슬 조합을 한다.
; 2966 : 		if( !g_BloodCastle.BloodCastleChaosMix(aIndex, iRET_VAL) )				

  0008e	8b 45 e4	 mov	 eax, DWORD PTR _iRET_VAL$[ebp]
  00091	50		 push	 eax
  00092	8b 4d e8	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  00095	51		 push	 ecx
  00096	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_BloodCastle@@3VCBloodCastle@@A ; g_BloodCastle
  0009b	e8 00 00 00 00	 call	 ?BloodCastleChaosMix@CBloodCastle@@QAE_NHH@Z ; CBloodCastle::BloodCastleChaosMix
  000a0	0f b6 d0	 movzx	 edx, al
  000a3	85 d2		 test	 edx, edx
  000a5	75 0d		 jne	 SHORT $LN6@BloodCastl

; 2967 : 			lpObj->ChaosLock = FALSE;

  000a7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000aa	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN6@BloodCastl:

; 2968 : 		return;

  000b4	e9 48 01 00 00	 jmp	 $LN1@BloodCastl

; 2969 : 	}

  000b9	e9 36 01 00 00	 jmp	 $LN5@BloodCastl
$LN4@BloodCastl:

; 2970 : 	else {
; 2971 : 		// 그외의 에러들
; 2972 : 		switch(iRET_VAL) {

  000be	8b 45 e4	 mov	 eax, DWORD PTR _iRET_VAL$[ebp]
  000c1	89 45 a0	 mov	 DWORD PTR tv88[ebp], eax
  000c4	8b 4d a0	 mov	 ecx, DWORD PTR tv88[ebp]
  000c7	83 e9 09	 sub	 ecx, 9
  000ca	89 4d a0	 mov	 DWORD PTR tv88[ebp], ecx
  000cd	83 7d a0 05	 cmp	 DWORD PTR tv88[ebp], 5
  000d1	0f 87 1d 01 00
	00		 ja	 $LN5@BloodCastl
  000d7	8b 55 a0	 mov	 edx, DWORD PTR tv88[ebp]
  000da	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN21@BloodCastl[edx*4]

; 2973 : 		case 0 :		// 예외 오류 - 이경우엔 일단 내려간다.
; 2974 : 			{
; 2975 : 			}
; 2976 : 			break;

  000e1	e9 0e 01 00 00	 jmp	 $LN5@BloodCastl

; 2977 : 		case 8 :		// 다른 아이템이 존재 -> 기존의 카오스 시스템으로 넘김
; 2978 : 			{
; 2979 : 			}
; 2980 : 			break;

  000e6	e9 09 01 00 00	 jmp	 $LN5@BloodCastl
$LN9@BloodCastl:

; 2981 : 		case 9 :		// 아이템 레벨이 맞지않음
; 2982 : 			{
; 2983 : 				pMsg.Result	= 0x0A;

  000eb	c6 45 ef 0a	 mov	 BYTE PTR _pMsg$[ebp+3], 10 ; 0000000aH

; 2984 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  000ef	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  000f3	50		 push	 eax
  000f4	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000f7	51		 push	 ecx
  000f8	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  000fb	52		 push	 edx
  000fc	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00101	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2985 : 				lpObj->ChaosLock = FALSE;

  00104	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00107	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2986 : 				return;

  00111	e9 eb 00 00 00	 jmp	 $LN1@BloodCastl

; 2987 : 			}
; 2988 : 			break;

  00116	e9 d9 00 00 00	 jmp	 $LN5@BloodCastl
$LN10@BloodCastl:

; 2989 : 		case 10 :		// 혼석이 없다. (혼석은 가장 기본이 되므로 카오스조합 않됨)
; 2990 : 			{
; 2991 : 				pMsg.Result	= 0x0A;

  0011b	c6 45 ef 0a	 mov	 BYTE PTR _pMsg$[ebp+3], 10 ; 0000000aH

; 2992 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0011f	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00123	50		 push	 eax
  00124	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00127	51		 push	 ecx
  00128	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  0012b	52		 push	 edx
  0012c	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00131	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2993 : 				lpObj->ChaosLock = FALSE;

  00134	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00137	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2994 : 				return;

  00141	e9 bb 00 00 00	 jmp	 $LN1@BloodCastl

; 2995 : 			}
; 2996 : 			break;

  00146	e9 a9 00 00 00	 jmp	 $LN5@BloodCastl
$LN11@BloodCastl:

; 2997 : 		case 11 :		// 블러드 카오스 아이템 중 하나가 없다. (적어도 한개는 있음)
; 2998 : 			{
; 2999 : 				pMsg.Result	= 0x0A;

  0014b	c6 45 ef 0a	 mov	 BYTE PTR _pMsg$[ebp+3], 10 ; 0000000aH

; 3000 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0014f	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00153	50		 push	 eax
  00154	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00157	51		 push	 ecx
  00158	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  0015b	52		 push	 edx
  0015c	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00161	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3001 : 				lpObj->ChaosLock = FALSE;

  00164	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00167	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3002 : 				return;

  00171	e9 8b 00 00 00	 jmp	 $LN1@BloodCastl

; 3003 : 			}
; 3004 : 			break;

  00176	eb 7c		 jmp	 SHORT $LN5@BloodCastl
$LN12@BloodCastl:

; 3005 : 		case 12 :		// 이벤트 아이템이 너무 많다.
; 3006 : 			{
; 3007 : 				pMsg.Result	= 0x08;

  00178	c6 45 ef 08	 mov	 BYTE PTR _pMsg$[ebp+3], 8

; 3008 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0017c	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00180	50		 push	 eax
  00181	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00184	51		 push	 ecx
  00185	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00188	52		 push	 edx
  00189	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0018e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3009 : 				lpObj->ChaosLock = FALSE;

  00191	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00194	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3010 : 				return;

  0019e	eb 61		 jmp	 SHORT $LN1@BloodCastl

; 3011 : 			}
; 3012 : 			break;

  001a0	eb 52		 jmp	 SHORT $LN5@BloodCastl
$LN13@BloodCastl:

; 3013 : 		case 13 :		// 조합에 필요한 돈이 모자르다. (사실 여기의 리턴값에는 없고 조합시 처리 된다.)
; 3014 : 			{
; 3015 : 				pMsg.Result	= 0x0B;

  001a2	c6 45 ef 0b	 mov	 BYTE PTR _pMsg$[ebp+3], 11 ; 0000000bH

; 3016 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  001a6	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  001aa	50		 push	 eax
  001ab	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  001ae	51		 push	 ecx
  001af	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  001b2	52		 push	 edx
  001b3	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  001b8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3017 : 				lpObj->ChaosLock = FALSE;

  001bb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001be	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3018 : 				return;

  001c8	eb 37		 jmp	 SHORT $LN1@BloodCastl

; 3019 : 			}
; 3020 : 			break;

  001ca	eb 28		 jmp	 SHORT $LN5@BloodCastl
$LN14@BloodCastl:

; 3021 : 		case 14 :		// 조합을 하려는 나의 레벨이 낮다.
; 3022 : 			{
; 3023 : 				pMsg.Result	= 0x09;

  001cc	c6 45 ef 09	 mov	 BYTE PTR _pMsg$[ebp+3], 9

; 3024 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  001d0	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  001d4	50		 push	 eax
  001d5	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  001d8	51		 push	 ecx
  001d9	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  001dc	52		 push	 edx
  001dd	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  001e2	83 c4 0c	 add	 esp, 12			; 0000000cH

; 3025 : 				lpObj->ChaosLock = FALSE;

  001e5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001e8	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 3026 : 				return;

  001f2	eb 0d		 jmp	 SHORT $LN1@BloodCastl
$LN5@BloodCastl:

; 3027 : 			}
; 3028 : 			break;
; 3029 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3030 : 		case 15:
; 3031 : 			{
; 3032 : 				pMsg.Result	= 0xF0;
; 3033 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 3034 : 				lpObj->ChaosLock = FALSE;
; 3035 : 				return;
; 3036 : 			}
; 3037 : 			break;
; 3038 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 3039 : 		default:
; 3040 : 			{
; 3041 : 			}
; 3042 : 			break;
; 3043 : 		}
; 3044 : 	}	
; 3045 : 
; 3046 : 	lpObj->ChaosLock = FALSE;

  001f4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001f7	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN1@BloodCastl:

; 3047 : }

  00201	5f		 pop	 edi
  00202	5e		 pop	 esi
  00203	5b		 pop	 ebx
  00204	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00207	33 cd		 xor	 ecx, ebp
  00209	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0020e	8b e5		 mov	 esp, ebp
  00210	5d		 pop	 ebp
  00211	c2 04 00	 ret	 4
$LN21@BloodCastl:
  00214	00 00 00 00	 DD	 $LN9@BloodCastl
  00218	00 00 00 00	 DD	 $LN10@BloodCastl
  0021c	00 00 00 00	 DD	 $LN11@BloodCastl
  00220	00 00 00 00	 DD	 $LN12@BloodCastl
  00224	00 00 00 00	 DD	 $LN13@BloodCastl
  00228	00 00 00 00	 DD	 $LN14@BloodCastl
?BloodCastleItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::BloodCastleItemChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?WingChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
tv292 = -168						; size = 4
_n$1 = -100						; size = 4
_optionc$2 = -96					; size = 4
_option3rand$3 = -92					; size = 4
_NOption$4 = -88					; size = 4
_Option3$5 = -84					; size = 4
_Option2$6 = -80					; size = 4
_itemtype$7 = -76					; size = 4
_index$8 = -72						; size = 4
_type$9 = -68						; size = 4
_itemlevel$10 = -64					; size = 4
_pWing$ = -60						; size = 4
_nChaosNeedMoney$ = -56					; size = 4
_pMsg$ = -52						; size = 9
_n$11 = -40						; size = 4
_iSleeveOfLord$ = -36					; size = 4
_iWingChaosMoney$ = -32					; size = 4
_iChaosMoney$ = -28					; size = 4
_WingIndex$ = -24					; size = 4
_LokesFeathersCount$ = -20				; size = 4
_ChoasGemCount$ = -16					; size = 4
_WingCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?WingChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z PROC	; CMixSystem::WingChaosMix, COMDAT
; _this$ = ecx

; 2471 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 2472 : 	lpObj->ChaosLock = TRUE;

  00019	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001c	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 2473 : 
; 2474 : 	int WingCount = 0;

  00026	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _WingCount$[ebp], 0

; 2475 : 	int ChoasGemCount = 0;

  0002d	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _ChoasGemCount$[ebp], 0

; 2476 : 	int LokesFeathersCount = 0;	

  00034	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _LokesFeathersCount$[ebp], 0

; 2477 : 
; 2478 : 	int WingIndex = -1;

  0003b	c7 45 e8 ff ff
	ff ff		 mov	 DWORD PTR _WingIndex$[ebp], -1

; 2479 : 	int	iChaosMoney = 0;

  00042	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _iChaosMoney$[ebp], 0

; 2480 : 
; 2481 : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 2482 : 	int iWingCharmItemNum		= -1;
; 2483 : #endif
; 2484 : 	
; 2485 : #ifdef MODIFY_WINGMIX_454BUG_20040512
; 2486 : 	DWORD iWingChaosMoney = 0;	

  00049	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _iWingChaosMoney$[ebp], 0

; 2487 : #else
; 2488 : 	int	iWingChaosMoney = 0;	
; 2489 : #endif
; 2490 : 
; 2491 : #ifdef DARKLORD_WORK
; 2492 : 	int	iSleeveOfLord = 0;

  00050	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _iSleeveOfLord$[ebp], 0

; 2493 : #endif
; 2494 : 
; 2495 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2496 : 	int iCharmOfLuckCount = 0;
; 2497 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2498 : 
; 2499 : #ifndef MODIFY_LOG_SYSTEM_2_3_20060828
; 2500 : 	#ifdef EXTEND_LOG_SYSTEM_03_20060816
; 2501 : 	BYTE ExOption[8];
; 2502 : 	#endif
; 2503 : #endif // MODIFY_LOG_SYSTEM_2_3_20060828
; 2504 : 	
; 2505 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00057	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _n$11[ebp], 0
  0005e	eb 09		 jmp	 SHORT $LN4@WingChaosM
$LN2@WingChaosM:
  00060	8b 45 d8	 mov	 eax, DWORD PTR _n$11[ebp]
  00063	83 c0 01	 add	 eax, 1
  00066	89 45 d8	 mov	 DWORD PTR _n$11[ebp], eax
$LN4@WingChaosM:
  00069	83 7d d8 20	 cmp	 DWORD PTR _n$11[ebp], 32 ; 00000020H
  0006d	0f 8d ef 01 00
	00		 jge	 $LN3@WingChaosM

; 2506 : 	{
; 2507 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00073	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$11[ebp], 168
  0007a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007d	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00083	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00088	83 f8 01	 cmp	 eax, 1
  0008b	0f 85 cc 01 00
	00		 jne	 $LN10@WingChaosM

; 2508 : 		{
; 2509 : #ifdef DARKLORD_WORK
; 2510 : 			if( (lpObj->pChaosBox[n].m_Type >= MAKE_ITEMNUM(12, 3) &&  lpObj->pChaosBox[n].m_Type <= MAKE_ITEMNUM(12, 6)) ||

  00091	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00098	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0009b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000a1	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000a6	6a 03		 push	 3
  000a8	6a 0c		 push	 12			; 0000000cH
  000aa	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000af	83 c4 08	 add	 esp, 8
  000b2	3b f0		 cmp	 esi, eax
  000b4	7c 25		 jl	 SHORT $LN13@WingChaosM
  000b6	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  000bd	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000c0	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000c6	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000cb	6a 06		 push	 6
  000cd	6a 0c		 push	 12			; 0000000cH
  000cf	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000d4	83 c4 08	 add	 esp, 8
  000d7	3b f0		 cmp	 esi, eax
  000d9	7e 25		 jle	 SHORT $LN12@WingChaosM
$LN13@WingChaosM:
  000db	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  000e2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000e5	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000eb	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000f0	6a 1e		 push	 30			; 0000001eH
  000f2	6a 0e		 push	 14			; 0000000eH
  000f4	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000f9	83 c4 08	 add	 esp, 8
  000fc	3b f0		 cmp	 esi, eax
  000fe	75 14		 jne	 SHORT $LN11@WingChaosM
$LN12@WingChaosM:

; 2511 : #ifdef ADD_SUMMONER_SECOND_THIRD_WING_20071130	// 절망의 날개 조합
; 2512 : 				lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12,42) ||
; 2513 : #endif				
; 2514 : 				lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,30) )
; 2515 : #else
; 2516 : 			if( lpObj->pChaosBox[n].m_Type >= MAKE_ITEMNUM(12, 3) &&  lpObj->pChaosBox[n].m_Type <= MAKE_ITEMNUM(12, 6))
; 2517 : #endif
; 2518 : 			{	// 이미 날개 조합된 아이템들이 끼어있다면 이 날개조합은 이루어지지 않는다. (2003.10.22 - B4nFter)
; 2519 : 				lpObj->ChaosLock = FALSE;

  00100	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00103	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2520 : 				return FALSE;

  0010d	33 c0		 xor	 eax, eax
  0010f	e9 3b 06 00 00	 jmp	 $LN1@WingChaosM
$LN11@WingChaosM:

; 2521 : 			}
; 2522 : 
; 2523 : 			if( lpObj->pChaosBox[n].m_Type >= MAKE_ITEMNUM(12, 0) &&  lpObj->pChaosBox[n].m_Type <= MAKE_ITEMNUM(12, 2))

  00114	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  0011b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0011e	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00124	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00129	6a 00		 push	 0
  0012b	6a 0c		 push	 12			; 0000000cH
  0012d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00132	83 c4 08	 add	 esp, 8
  00135	3b f0		 cmp	 esi, eax
  00137	7c 50		 jl	 SHORT $LN14@WingChaosM
  00139	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00140	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00143	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00149	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0014e	6a 02		 push	 2
  00150	6a 0c		 push	 12			; 0000000cH
  00152	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00157	83 c4 08	 add	 esp, 8
  0015a	3b f0		 cmp	 esi, eax
  0015c	7f 2b		 jg	 SHORT $LN14@WingChaosM

; 2524 : 			{	// 날개
; 2525 : 				//if( lpObj->pChaosBox[n].m_Level >= 1 || lpObj->pChaosBox[n].m_Option2 || lpObj->pChaosBox[n].m_Option3 >= 1 )
; 2526 : 				{	// 최소 레벨이 있거나 행운, 추가 옵션중에 하나가 있어야 된다
; 2527 : 					WingCount++;

  0015e	8b 45 f4	 mov	 eax, DWORD PTR _WingCount$[ebp]
  00161	83 c0 01	 add	 eax, 1
  00164	89 45 f4	 mov	 DWORD PTR _WingCount$[ebp], eax

; 2528 : 					WingIndex = n;

  00167	8b 45 d8	 mov	 eax, DWORD PTR _n$11[ebp]
  0016a	89 45 e8	 mov	 DWORD PTR _WingIndex$[ebp], eax

; 2529 : 					iWingChaosMoney = 	lpObj->pChaosBox[n].m_BuyMoney;

  0016d	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00174	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00177	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0017d	8b 44 02 64	 mov	 eax, DWORD PTR [edx+eax+100]
  00181	89 45 e0	 mov	 DWORD PTR _iWingChaosMoney$[ebp], eax

; 2530 : 				}
; 2531 : 				
; 2532 : 			}

  00184	e9 d4 00 00 00	 jmp	 $LN10@WingChaosM
$LN14@WingChaosM:

; 2533 : #ifdef ADD_SUMMONER_SECOND_THIRD_WING_20071130	// 2차날개 조합재료에 재앙의 날개 추가
; 2534 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 41))
; 2535 : 			{		
; 2536 : 				WingCount++;
; 2537 : 				WingIndex = n;
; 2538 : 				iWingChaosMoney = 	lpObj->pChaosBox[n].m_BuyMoney;
; 2539 : 			}
; 2540 : #endif
; 2541 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  00189	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00190	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00193	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00199	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0019e	6a 0f		 push	 15			; 0000000fH
  001a0	6a 0c		 push	 12			; 0000000cH
  001a2	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001a7	83 c4 08	 add	 esp, 8
  001aa	3b f0		 cmp	 esi, eax
  001ac	75 0e		 jne	 SHORT $LN16@WingChaosM

; 2542 : 			{	// 혼석
; 2543 : 				ChoasGemCount++;				

  001ae	8b 45 f0	 mov	 eax, DWORD PTR _ChoasGemCount$[ebp]
  001b1	83 c0 01	 add	 eax, 1
  001b4	89 45 f0	 mov	 DWORD PTR _ChoasGemCount$[ebp], eax

; 2544 : 			}

  001b7	e9 a1 00 00 00	 jmp	 $LN10@WingChaosM
$LN16@WingChaosM:

; 2545 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13, 14) )

  001bc	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  001c3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001c6	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001cc	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  001d1	6a 0e		 push	 14			; 0000000eH
  001d3	6a 0d		 push	 13			; 0000000dH
  001d5	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001da	83 c4 08	 add	 esp, 8
  001dd	3b f0		 cmp	 esi, eax
  001df	75 2f		 jne	 SHORT $LN18@WingChaosM

; 2546 : 			{	// 로크의 깃털 
; 2547 : #ifdef DARKLORD_WORK
; 2548 : 				if( lpObj->pChaosBox[n].m_Level == 0 )

  001e1	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  001e8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001eb	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001f1	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001f6	85 c0		 test	 eax, eax
  001f8	75 0b		 jne	 SHORT $LN20@WingChaosM

; 2549 : 					LokesFeathersCount++;

  001fa	8b 45 ec	 mov	 eax, DWORD PTR _LokesFeathersCount$[ebp]
  001fd	83 c0 01	 add	 eax, 1
  00200	89 45 ec	 mov	 DWORD PTR _LokesFeathersCount$[ebp], eax
  00203	eb 09		 jmp	 SHORT $LN21@WingChaosM
$LN20@WingChaosM:

; 2550 : 				else	// 군주의 소매
; 2551 : 					iSleeveOfLord++;

  00205	8b 45 dc	 mov	 eax, DWORD PTR _iSleeveOfLord$[ebp]
  00208	83 c0 01	 add	 eax, 1
  0020b	89 45 dc	 mov	 DWORD PTR _iSleeveOfLord$[ebp], eax
$LN21@WingChaosM:

; 2552 : #else
; 2553 : 				LokesFeathersCount++;				
; 2554 : #endif
; 2555 : 			}

  0020e	eb 4d		 jmp	 SHORT $LN10@WingChaosM
$LN18@WingChaosM:

; 2556 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2557 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 2558 : 			{
; 2559 : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 2560 : 			}
; 2561 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2562 : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 2563 : 			else if (lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 88) || lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 89) 
; 2564 : 				|| lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 90) || lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 91)
; 2565 : 				|| lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 92) ) 
; 2566 : 			{
; 2567 : 				iWingCharmItemNum = lpObj->pChaosBox[n].m_Type;
; 2568 : 			}
; 2569 : 			
; 2570 : #endif
; 2571 : 			else
; 2572 : 			{
; 2573 : #ifdef WING_MIX_MODIFY
; 2574 : 				if( lpObj->pChaosBox[n].IsExtItem() && lpObj->pChaosBox[n].m_Level >= 4 )

  00210	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$11[ebp], 168
  00217	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0021a	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00220	e8 00 00 00 00	 call	 ?IsExtItem@CItem@@QAEHXZ ; CItem::IsExtItem
  00225	85 c0		 test	 eax, eax
  00227	74 34		 je	 SHORT $LN10@WingChaosM
  00229	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  00230	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00233	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00239	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0023e	83 f8 04	 cmp	 eax, 4
  00241	7c 1a		 jl	 SHORT $LN10@WingChaosM

; 2575 : #else
; 2576 : 				if( lpObj->pChaosBox[n].IsExtItem() && lpObj->pChaosBox[n].m_Level >= 4 &&
; 2577 : 					(lpObj->pChaosBox[n].m_Type<MAKE_ITEMNUM(12,3) || lpObj->pChaosBox[n].m_Type>MAKE_ITEMNUM(12,6)) )
; 2578 : #endif			
; 2579 : 				{	// 엑설런트 아이템(+4, 옵션+4이상)
; 2580 : 					iChaosMoney += 	lpObj->pChaosBox[n].m_BuyMoney;				

  00243	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$11[ebp], 168
  0024a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0024d	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00253	8b 4d e4	 mov	 ecx, DWORD PTR _iChaosMoney$[ebp]
  00256	03 4c 02 64	 add	 ecx, DWORD PTR [edx+eax+100]
  0025a	89 4d e4	 mov	 DWORD PTR _iChaosMoney$[ebp], ecx
$LN10@WingChaosM:

; 2581 : 				}
; 2582 : 			}
; 2583 : #ifndef MODIFY_LOG_SYSTEM_2_3_20060828
; 2584 : 	#ifdef EXTEND_LOG_SYSTEM_03_20060816
; 2585 : 		#ifdef ADD_380ITEM_NEWOPTION_20060711
; 2586 : 			ItemIsBufExOption(ExOption, &lpObj->pChaosBox[n]);
; 2587 : 			#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 2588 : 			LogAddTD("[WingMix,2] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex:[%d] HO:[%d,%d]",
; 2589 : 			#else
; 2590 : 			LogAddTD("[WingMix,2] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex:[%d] HO:[%d,%d]",
; 2591 : 			#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 2592 : 				lpObj->AccountID, lpObj->Name,
; 2593 : 				n,
; 2594 : 				lpObj->pChaosBox[n].GetName(),
; 2595 : 				lpObj->pChaosBox[n].m_Level,
; 2596 : 				lpObj->pChaosBox[n].m_Option1,
; 2597 : 				lpObj->pChaosBox[n].m_Option2,
; 2598 : 				lpObj->pChaosBox[n].m_Option3,
; 2599 : 				lpObj->pChaosBox[n].m_Number,
; 2600 : 				(int)lpObj->pChaosBox[n].m_Durability,
; 2601 : 				ExOption[0],
; 2602 : 				ExOption[1],
; 2603 : 				ExOption[2],
; 2604 : 				ExOption[3],
; 2605 : 				ExOption[4],
; 2606 : 				ExOption[5],
; 2607 : 				ExOption[6],
; 2608 : 				lpObj->pChaosBox[n].m_SetOption,
; 2609 : 				lpObj->pChaosBox[n].m_ItemOptionEx >> 7,
; 2610 : 				g_kJewelOfHarmonySystem.GetItemStrengthenOption( &lpObj->pChaosBox[n] ),
; 2611 : 				g_kJewelOfHarmonySystem.GetItemOptionLevel( &lpObj->pChaosBox[n] )
; 2612 : 				);
; 2613 : 		#endif // ADD_380ITEM_NEWOPTION_20060711
; 2614 : 	#endif // EXTEND_LOG_SYSTEM_03_20060816
; 2615 : #endif // MODIFY_LOG_SYSTEM_2_3_20060828
; 2616 : 		}
; 2617 : 	}

  0025d	e9 fe fd ff ff	 jmp	 $LN2@WingChaosM
$LN3@WingChaosM:

; 2618 : 
; 2619 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 2620 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00262	6a 09		 push	 9
  00264	68 86 00 00 00	 push	 134			; 00000086H
  00269	8d 45 cc	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0026c	50		 push	 eax
  0026d	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00272	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2621 : 	pMsg.Result		= 0x00;	

  00275	c6 45 cf 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 2622 : 
; 2623 : /*
; 2624 : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 2625 : 	if(iCharmOfLuckCount > 0 && iWingCharmItemNum > -1 ){
; 2626 : 		// 행운의 부적과 날개 부적은 조합될 수 없다.(같이 사용할 수 없다)
; 2627 : 		lpObj->ChaosLock = FALSE;
; 2628 : 		pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다
; 2629 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2630 : 		return FALSE;
; 2631 : 	}
; 2632 : #endif //ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 2633 : */
; 2634 : 
; 2635 : #ifdef DARKLORD_WORK
; 2636 : 	if( iSleeveOfLord == 1 )

  00279	83 7d dc 01	 cmp	 DWORD PTR _iSleeveOfLord$[ebp], 1
  0027d	75 43		 jne	 SHORT $LN23@WingChaosM

; 2637 : 	{	// 망토 조합
; 2638 : 		if( WingCount != 1 || ChoasGemCount != 1 || LokesFeathersCount != 0 )

  0027f	83 7d f4 01	 cmp	 DWORD PTR _WingCount$[ebp], 1
  00283	75 0c		 jne	 SHORT $LN26@WingChaosM
  00285	83 7d f0 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  00289	75 06		 jne	 SHORT $LN26@WingChaosM
  0028b	83 7d ec 00	 cmp	 DWORD PTR _LokesFeathersCount$[ebp], 0
  0028f	74 2f		 je	 SHORT $LN25@WingChaosM
$LN26@WingChaosM:

; 2639 : 		{
; 2640 : 			lpObj->ChaosLock = FALSE;

  00291	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00294	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2641 : 			pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다

  0029e	c6 45 cf 07	 mov	 BYTE PTR _pMsg$[ebp+3], 7

; 2642 : 			DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  002a2	0f b6 45 cd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  002a6	50		 push	 eax
  002a7	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  002aa	51		 push	 ecx
  002ab	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002ae	8b 02		 mov	 eax, DWORD PTR [edx]
  002b0	50		 push	 eax
  002b1	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  002b6	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2643 : 			return FALSE;	// 조합 아이템이 없거나 로크의 깃털이 있다.

  002b9	33 c0		 xor	 eax, eax
  002bb	e9 8f 04 00 00	 jmp	 $LN1@WingChaosM
$LN25@WingChaosM:

; 2644 : 		}
; 2645 : 	}

  002c0	eb 78		 jmp	 SHORT $LN24@WingChaosM
$LN23@WingChaosM:

; 2646 : 	else if( LokesFeathersCount == 1 )

  002c2	83 7d ec 01	 cmp	 DWORD PTR _LokesFeathersCount$[ebp], 1
  002c6	75 43		 jne	 SHORT $LN27@WingChaosM

; 2647 : 	{	// 날개 조합
; 2648 : 		if( WingCount != 1 || ChoasGemCount != 1 || iSleeveOfLord != 0 )

  002c8	83 7d f4 01	 cmp	 DWORD PTR _WingCount$[ebp], 1
  002cc	75 0c		 jne	 SHORT $LN30@WingChaosM
  002ce	83 7d f0 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  002d2	75 06		 jne	 SHORT $LN30@WingChaosM
  002d4	83 7d dc 00	 cmp	 DWORD PTR _iSleeveOfLord$[ebp], 0
  002d8	74 2f		 je	 SHORT $LN29@WingChaosM
$LN30@WingChaosM:

; 2649 : 		{
; 2650 : 			pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다

  002da	c6 45 cf 07	 mov	 BYTE PTR _pMsg$[ebp+3], 7

; 2651 : 			DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  002de	0f b6 45 cd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  002e2	50		 push	 eax
  002e3	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  002e6	51		 push	 ecx
  002e7	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002ea	8b 02		 mov	 eax, DWORD PTR [edx]
  002ec	50		 push	 eax
  002ed	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  002f2	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2652 : 			lpObj->ChaosLock = FALSE;

  002f5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002f8	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2653 : 			return FALSE;	// 조합 아이템이 없거나 군주의 소매가 있다이 있다.

  00302	33 c0		 xor	 eax, eax
  00304	e9 46 04 00 00	 jmp	 $LN1@WingChaosM
$LN29@WingChaosM:

; 2654 : 		}
; 2655 : 	}

  00309	eb 2f		 jmp	 SHORT $LN24@WingChaosM
$LN27@WingChaosM:

; 2656 : 	else 
; 2657 : 	{
; 2658 : 		lpObj->ChaosLock = FALSE;

  0030b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0030e	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2659 : 		pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다

  00318	c6 45 cf 07	 mov	 BYTE PTR _pMsg$[ebp+3], 7

; 2660 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0031c	0f b6 45 cd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00320	50		 push	 eax
  00321	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00324	51		 push	 ecx
  00325	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00328	8b 02		 mov	 eax, DWORD PTR [edx]
  0032a	50		 push	 eax
  0032b	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00330	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2661 : 		return FALSE;

  00333	33 c0		 xor	 eax, eax
  00335	e9 15 04 00 00	 jmp	 $LN1@WingChaosM
$LN24@WingChaosM:

; 2662 : 	}
; 2663 : #else
; 2664 : 	if( WingCount != 1 || ChoasGemCount != 1 || LokesFeathersCount != 1 )
; 2665 : 	{	// 조합에 필요한 아이템이 없다
; 2666 : 		pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다
; 2667 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2668 : 		return FALSE;
; 2669 : 	}
; 2670 : #endif	
; 2671 : 
; 2672 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2673 : 	if( iCharmOfLuckCount > 10 )
; 2674 : 	{
; 2675 : 		lpObj->ChaosLock = FALSE;
; 2676 : 		pMsg.Result		= 0xF0;
; 2677 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2678 : 	}
; 2679 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2680 : 
; 2681 : 	int nChaosNeedMoney = 5000000;

  0033a	c7 45 c8 40 4b
	4c 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 5000000 ; 004c4b40H

; 2682 : 
; 2683 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 2차날개 (다크로드 망토) 조합
; 2684 : 	INT iChaosTaxMoney		= (INT)((INT64)nChaosNeedMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 2685 : 	if (iChaosTaxMoney < 0)
; 2686 : 		iChaosTaxMoney		= 0;
; 2687 : 
; 2688 : 	nChaosNeedMoney			= nChaosNeedMoney + iChaosTaxMoney;
; 2689 : 	if (nChaosNeedMoney < 0)
; 2690 : 		nChaosNeedMoney		= 0;
; 2691 : #endif
; 2692 : 
; 2693 : 	if( lpObj->Money < nChaosNeedMoney )

  00341	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00344	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  0034a	3b 4d c8	 cmp	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  0034d	7d 32		 jge	 SHORT $LN31@WingChaosM

; 2694 : 	{		
; 2695 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  0034f	c6 45 cf 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 2696 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00353	0f b6 45 cd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00357	50		 push	 eax
  00358	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0035b	51		 push	 ecx
  0035c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0035f	8b 02		 mov	 eax, DWORD PTR [edx]
  00361	50		 push	 eax
  00362	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00367	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2697 : 		lpObj->ChaosLock = FALSE;

  0036a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0036d	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2698 : 		return TRUE;

  00377	b8 01 00 00 00	 mov	 eax, 1
  0037c	e9 ce 03 00 00	 jmp	 $LN1@WingChaosM
$LN31@WingChaosM:

; 2699 : 	}
; 2700 : 
; 2701 : 	CItem* pWing = &lpObj->pChaosBox[WingIndex];

  00381	69 45 e8 a8 00
	00 00		 imul	 eax, DWORD PTR _WingIndex$[ebp], 168
  00388	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0038b	03 81 ac 0c 00
	00		 add	 eax, DWORD PTR [ecx+3244]
  00391	89 45 c4	 mov	 DWORD PTR _pWing$[ebp], eax

; 2702 : 
; 2703 : 	//lpObj->ChaosSuccessRate = pWing->m_Level*4;		// 날개 레벨 * 2 ( 0 ~ 22 % )
; 2704 : 	//lpObj->ChaosSuccessRate += (pWing->m_Option2*5);	// 행운 * 5		( 5% )
; 2705 : 	//lpObj->ChaosSuccessRate += (pWing->m_Option3*4);	// 옵션 *4		( 0 ~ 16 % )
; 2706 : 
; 2707 : 	lpObj->ChaosSuccessRate = iWingChaosMoney/4000000;

  00394	8b 45 e0	 mov	 eax, DWORD PTR _iWingChaosMoney$[ebp]
  00397	33 d2		 xor	 edx, edx
  00399	b9 00 09 3d 00	 mov	 ecx, 4000000		; 003d0900H
  0039e	f7 f1		 div	 ecx
  003a0	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003a3	89 82 b8 0c 00
	00		 mov	 DWORD PTR [edx+3256], eax

; 2708 : 	lpObj->ChaosSuccessRate += iChaosMoney/40000;		// 엑셀런트 아이템은 기존의 카오스 조합(돈으로 보는것하고) 같이한다

  003a9	8b 45 e4	 mov	 eax, DWORD PTR _iChaosMoney$[ebp]
  003ac	99		 cdq
  003ad	b9 40 9c 00 00	 mov	 ecx, 40000		; 00009c40H
  003b2	f7 f9		 idiv	 ecx
  003b4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003b7	03 82 b8 0c 00
	00		 add	 eax, DWORD PTR [edx+3256]
  003bd	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003c0	89 81 b8 0c 00
	00		 mov	 DWORD PTR [ecx+3256], eax

; 2709 : 
; 2710 : 
; 2711 : 	if(lpObj->ChaosSuccessRate < g_GlobalConfig.m_iWingCombinationRate)

  003c6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003c9	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  003cf	3b 0d 90 00 00
	00		 cmp	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+144
  003d5	7d 0f		 jge	 SHORT $LN32@WingChaosM

; 2712 : 		lpObj->ChaosSuccessRate = g_GlobalConfig.m_iWingCombinationRate;

  003d7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003da	8b 0d 90 00 00
	00		 mov	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+144
  003e0	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx
$LN32@WingChaosM:

; 2713 : 
; 2714 : #ifdef MODIFY_CHAOSMIX_MONEY_OVER_MAX_FIX_RATE_20071114
; 2715 : 	if( lpObj->ChaosSuccessRate < 0 )

  003e6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003e9	83 b8 b8 0c 00
	00 00		 cmp	 DWORD PTR [eax+3256], 0
  003f0	7d 0d		 jge	 SHORT $LN33@WingChaosM

; 2716 : 	{
; 2717 : 		lpObj->ChaosSuccessRate = 100;

  003f2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003f5	c7 80 b8 0c 00
	00 64 00 00 00	 mov	 DWORD PTR [eax+3256], 100 ; 00000064H
$LN33@WingChaosM:

; 2718 : 	}
; 2719 : #endif // MODIFY_CHAOSMIX_MONEY_OVER_MAX_FIX_RATE_20071114	
; 2720 : 
; 2721 : 	if( lpObj->ChaosSuccessRate == 0 )

  003ff	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00402	83 b8 b8 0c 00
	00 00		 cmp	 DWORD PTR [eax+3256], 0
  00409	75 2f		 jne	 SHORT $LN34@WingChaosM

; 2722 : 	{
; 2723 : 		pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다

  0040b	c6 45 cf 07	 mov	 BYTE PTR _pMsg$[ebp+3], 7

; 2724 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0040f	0f b6 45 cd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00413	50		 push	 eax
  00414	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00417	51		 push	 ecx
  00418	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0041b	8b 02		 mov	 eax, DWORD PTR [edx]
  0041d	50		 push	 eax
  0041e	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00423	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2725 : 		lpObj->ChaosLock = FALSE;

  00426	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00429	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2726 : 		return FALSE;	// 0%면 조합이 안되게 한다

  00433	33 c0		 xor	 eax, eax
  00435	e9 15 03 00 00	 jmp	 $LN1@WingChaosM
$LN34@WingChaosM:

; 2727 : 	}
; 2728 : 
; 2729 : #ifdef MODIFY_LOG_SYSTEM_2_3_20060828
; 2730 : 	LogChaosItem(lpObj, "WingMix,2");
; 2731 : 	LogAddTD("[WingMix,2] Chaos Mix Start");	
; 2732 : #else
; 2733 : 	LogChaosItem(lpObj, "WingMix");

  0043a	68 00 00 00 00	 push	 OFFSET ??_C@_07LGCJFLJ@WingMix@
  0043f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00442	50		 push	 eax
  00443	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00446	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 2734 : 	LogAddTD("[WingMix] Chaos Mix Start");	

  0044b	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@BEFIGKLL@?$FLWingMix?$FN?5Chaos?5Mix?5Start@
  00450	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00456	83 c4 04	 add	 esp, 4

; 2735 : #endif // MODIFY_LOG_SYSTEM_2_3_20060828
; 2736 : 
; 2737 : 	if( lpObj->ChaosSuccessRate > 100 )

  00459	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0045c	83 b8 b8 0c 00
	00 64		 cmp	 DWORD PTR [eax+3256], 100 ; 00000064H
  00463	7e 0d		 jle	 SHORT $LN35@WingChaosM

; 2738 : 		lpObj->ChaosSuccessRate = 100;	// 최대 확률은 90%

  00465	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00468	c7 80 b8 0c 00
	00 64 00 00 00	 mov	 DWORD PTR [eax+3256], 100 ; 00000064H
$LN35@WingChaosM:

; 2739 : 
; 2740 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2741 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 2742 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2743 : 
; 2744 : #if TESTSERVER == 1
; 2745 : 	char msg[255];
; 2746 : 	wsprintf(msg, "날개조합확률=%d", lpObj->ChaosSuccessRate);
; 2747 : 	GCServerMsgStringSend(msg, lpObj->m_Index, 1);	
; 2748 : #endif
; 2749 : 	
; 2750 : 	lpObj->Money -= nChaosNeedMoney;

  00472	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00475	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  0047b	2b 4d c8	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  0047e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00481	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 2751 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 2차날개 (다크로드 망토) 조합
; 2752 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 2753 : #endif
; 2754 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);	

  00487	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0048a	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00490	51		 push	 ecx
  00491	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00494	8b 02		 mov	 eax, DWORD PTR [edx]
  00496	50		 push	 eax
  00497	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  0049c	83 c4 08	 add	 esp, 8

; 2755 : 
; 2756 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  0049f	e8 00 00 00 00	 call	 _rand
  004a4	99		 cdq
  004a5	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  004aa	f7 f9		 idiv	 ecx
  004ac	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004af	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  004b5	0f 8d fd 01 00
	00		 jge	 $LN36@WingChaosM

; 2757 : 	{	// 성공 날개 생성	
; 2758 : 		int itemlevel = 0;

  004bb	c7 45 c0 00 00
	00 00		 mov	 DWORD PTR _itemlevel$10[ebp], 0

; 2759 : 		int type;
; 2760 : 		int index;
; 2761 : 
; 2762 : #ifdef DARKLORD_WORK
; 2763 : 		if( iSleeveOfLord )

  004c2	83 7d dc 00	 cmp	 DWORD PTR _iSleeveOfLord$[ebp], 0
  004c6	74 10		 je	 SHORT $LN38@WingChaosM

; 2764 : 		{	// 군주의 소매 생성
; 2765 : 			type = 13;

  004c8	c7 45 bc 0d 00
	00 00		 mov	 DWORD PTR _type$9[ebp], 13 ; 0000000dH

; 2766 : 			index = 30;

  004cf	c7 45 b8 1e 00
	00 00		 mov	 DWORD PTR _index$8[ebp], 30 ; 0000001eH

; 2767 : 		}

  004d6	eb 1e		 jmp	 SHORT $LN39@WingChaosM
$LN38@WingChaosM:

; 2768 : 		else
; 2769 : 		{	// 날개 생성
; 2770 : 			type = 12;

  004d8	c7 45 bc 0c 00
	00 00		 mov	 DWORD PTR _type$9[ebp], 12 ; 0000000cH

; 2771 : #ifdef ADD_SUMMONER_SECOND_THIRD_WING_20071130	// 절망의 날개 생성
; 2772 : 			int tmpIndex  = rand() % 5;
; 2773 : 
; 2774 : 			if(tmpIndex == 4)	// 절망의 날개
; 2775 : 			{
; 2776 : 				index = 42;
; 2777 : 			}
; 2778 : 			else
; 2779 : 			{
; 2780 : 				index = 3 + tmpIndex;
; 2781 : 			}
; 2782 : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 2783 : 			// 6차 과금 아이템 날개 조합 부적 ( 해당 클래스에 맞는 아이템이 나온다. )
; 2784 : 			if(iWingCharmItemNum > -1) {
; 2785 : 				// 날개 조합 부적의 인덱스를 추출해서 해당 날개의 index를 구하자.
; 2786 : 				int iWingCharmIndex = iWingCharmItemNum ^ (13 << ITEM_BITSHIFT);
; 2787 : 				switch( iWingCharmIndex )
; 2788 : 				{
; 2789 : 				case 88: // 드라곤날개 부적 
; 2790 : 					index = 5;
; 2791 : 					break;
; 2792 : 				case 89: // 영혼날개 부적
; 2793 : 					index = 4;
; 2794 : 					break;
; 2795 : 				case 90: // 정령날개 부적
; 2796 : 					index = 3;
; 2797 : 					break;
; 2798 : 				case 91: // 절망날개 부적
; 2799 : 					index = 42;
; 2800 : 					break;
; 2801 : 				case 92: // 암흑날개 부적
; 2802 : 					index = 6;
; 2803 : 					break;
; 2804 : 				default:
; 2805 : 					// 이건 아직 등록되지 않은 조합 부적이네.. (해당 부적이 없는지 확인하거나 type이 13이 맞는지 확인하라..
; 2806 : 					LogAddTD("[MixSystem][WingChaosMix] WingCharmItemNum => %d , WingCharmIndex => %d",iWingCharmItemNum ,iWingCharmIndex);
; 2807 : 					break;
; 2808 : 				}
; 2809 : 			}			
; 2810 : #endif //ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 2811 : #else	// ADD_SUMMONER_SECOND_THIRD_WING_20071130
; 2812 : 			index = 3+rand()%4;

  004df	e8 00 00 00 00	 call	 _rand
  004e4	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  004e9	79 05		 jns	 SHORT $LN53@WingChaosM
  004eb	48		 dec	 eax
  004ec	83 c8 fc	 or	 eax, -4			; fffffffcH
  004ef	40		 inc	 eax
$LN53@WingChaosM:
  004f0	83 c0 03	 add	 eax, 3
  004f3	89 45 b8	 mov	 DWORD PTR _index$8[ebp], eax
$LN39@WingChaosM:

; 2813 : #endif	// ADD_SUMMONER_SECOND_THIRD_WING_20071130
; 2814 : 		}
; 2815 : #else
; 2816 : 		type = 12;
; 2817 : 		index = 3+rand()%4;
; 2818 : #endif
; 2819 : 
; 2820 : 		int itemtype = MAKE_ITEMNUM(type, index);

  004f6	8b 45 b8	 mov	 eax, DWORD PTR _index$8[ebp]
  004f9	50		 push	 eax
  004fa	8b 4d bc	 mov	 ecx, DWORD PTR _type$9[ebp]
  004fd	51		 push	 ecx
  004fe	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00503	83 c4 08	 add	 esp, 8
  00506	89 45 b4	 mov	 DWORD PTR _itemtype$7[ebp], eax

; 2821 : 
; 2822 : 		int Option2 = 0;

  00509	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR _Option2$6[ebp], 0

; 2823 : 		int Option3 = 0;

  00510	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 0

; 2824 : 		int NOption = 0;

  00517	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR _NOption$4[ebp], 0

; 2825 : 
; 2826 : 		if( rand()%5 == 0 )

  0051e	e8 00 00 00 00	 call	 _rand
  00523	99		 cdq
  00524	b9 05 00 00 00	 mov	 ecx, 5
  00529	f7 f9		 idiv	 ecx
  0052b	85 d2		 test	 edx, edx
  0052d	75 07		 jne	 SHORT $LN40@WingChaosM

; 2827 : 		{	// 행운
; 2828 : 			Option2 = 1;

  0052f	c7 45 b0 01 00
	00 00		 mov	 DWORD PTR _Option2$6[ebp], 1
$LN40@WingChaosM:

; 2829 : 		}
; 2830 : 
; 2831 : 		int option3rand, optionc;
; 2832 : 
; 2833 : 		option3rand = (rand()%100);

  00536	e8 00 00 00 00	 call	 _rand
  0053b	99		 cdq
  0053c	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00541	f7 f9		 idiv	 ecx
  00543	89 55 a4	 mov	 DWORD PTR _option3rand$3[ebp], edx

; 2834 : 		optionc		= (rand()%3);

  00546	e8 00 00 00 00	 call	 _rand
  0054b	99		 cdq
  0054c	b9 03 00 00 00	 mov	 ecx, 3
  00551	f7 f9		 idiv	 ecx
  00553	89 55 a0	 mov	 DWORD PTR _optionc$2[ebp], edx

; 2835 : 
; 2836 : 		switch( optionc )

  00556	8b 45 a0	 mov	 eax, DWORD PTR _optionc$2[ebp]
  00559	89 85 58 ff ff
	ff		 mov	 DWORD PTR tv292[ebp], eax
  0055f	83 bd 58 ff ff
	ff 00		 cmp	 DWORD PTR tv292[ebp], 0
  00566	74 14		 je	 SHORT $LN41@WingChaosM
  00568	83 bd 58 ff ff
	ff 01		 cmp	 DWORD PTR tv292[ebp], 1
  0056f	74 1a		 je	 SHORT $LN43@WingChaosM
  00571	83 bd 58 ff ff
	ff 02		 cmp	 DWORD PTR tv292[ebp], 2
  00578	74 20		 je	 SHORT $LN45@WingChaosM
  0057a	eb 2b		 jmp	 SHORT $LN5@WingChaosM
$LN41@WingChaosM:

; 2837 : 		{	// 꽝 80%
; 2838 : 		case 0 :
; 2839 : 			if( option3rand < 4 ) Option3 = 3;	// 옵션

  0057c	83 7d a4 04	 cmp	 DWORD PTR _option3rand$3[ebp], 4
  00580	7d 07		 jge	 SHORT $LN42@WingChaosM
  00582	c7 45 ac 03 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 3
$LN42@WingChaosM:

; 2840 : 			break;

  00589	eb 1c		 jmp	 SHORT $LN5@WingChaosM
$LN43@WingChaosM:

; 2841 : 		case 1 :
; 2842 : 			if( option3rand < 10 ) Option3 = 2;	// 옵션

  0058b	83 7d a4 0a	 cmp	 DWORD PTR _option3rand$3[ebp], 10 ; 0000000aH
  0058f	7d 07		 jge	 SHORT $LN44@WingChaosM
  00591	c7 45 ac 02 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 2
$LN44@WingChaosM:

; 2843 : 			break;

  00598	eb 0d		 jmp	 SHORT $LN5@WingChaosM
$LN45@WingChaosM:

; 2844 : 		case 2 :
; 2845 : 			if( option3rand < 20 ) Option3 = 1;	// 옵션

  0059a	83 7d a4 14	 cmp	 DWORD PTR _option3rand$3[ebp], 20 ; 00000014H
  0059e	7d 07		 jge	 SHORT $LN5@WingChaosM
  005a0	c7 45 ac 01 00
	00 00		 mov	 DWORD PTR _Option3$5[ebp], 1
$LN5@WingChaosM:

; 2846 : 			break;
; 2847 : 		}
; 2848 : 		
; 2849 : #ifdef DARKLORD_WORK
; 2850 : 		if( iSleeveOfLord )

  005a7	83 7d dc 00	 cmp	 DWORD PTR _iSleeveOfLord$[ebp], 0
  005ab	74 39		 je	 SHORT $LN47@WingChaosM

; 2851 : 		{
; 2852 : 			if( rand()%5 == 0 )

  005ad	e8 00 00 00 00	 call	 _rand
  005b2	99		 cdq
  005b3	b9 05 00 00 00	 mov	 ecx, 5
  005b8	f7 f9		 idiv	 ecx
  005ba	85 d2		 test	 edx, edx
  005bc	75 1d		 jne	 SHORT $LN49@WingChaosM

; 2853 : 			{
; 2854 : 				NOption = 1<<(rand()%4);				

  005be	e8 00 00 00 00	 call	 _rand
  005c3	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  005c8	79 05		 jns	 SHORT $LN54@WingChaosM
  005ca	48		 dec	 eax
  005cb	83 c8 fc	 or	 eax, -4			; fffffffcH
  005ce	40		 inc	 eax
$LN54@WingChaosM:
  005cf	ba 01 00 00 00	 mov	 edx, 1
  005d4	8b c8		 mov	 ecx, eax
  005d6	d3 e2		 shl	 edx, cl
  005d8	89 55 a8	 mov	 DWORD PTR _NOption$4[ebp], edx
$LN49@WingChaosM:

; 2855 : 
; 2856 : #ifndef SLEEVEOFLORD_OPTION_BUG_PATCH
; 2857 : 				NOption |= PLUS_WING_OP1_TYPE;			
; 2858 : #endif
; 2859 : 			}	
; 2860 : 
; 2861 : #ifdef SLEEVEOFLORD_OPTION_BUG_PATCH
; 2862 : 			// 망토는 무조건 추가 공격력
; 2863 : 				NOption |= PLUS_WING_OP1_TYPE;			

  005db	8b 45 a8	 mov	 eax, DWORD PTR _NOption$4[ebp]
  005de	83 c8 20	 or	 eax, 32			; 00000020H
  005e1	89 45 a8	 mov	 DWORD PTR _NOption$4[ebp], eax

; 2864 : #endif
; 2865 : 			// 망토일때는 옵션2가 하나 더 들어 간다(통솔 추가)
; 2866 : 		} else

  005e4	eb 48		 jmp	 SHORT $LN48@WingChaosM
$LN47@WingChaosM:

; 2867 : #endif
; 2868 : 		{
; 2869 : 			if( rand()%5 == 0 )

  005e6	e8 00 00 00 00	 call	 _rand
  005eb	99		 cdq
  005ec	b9 05 00 00 00	 mov	 ecx, 5
  005f1	f7 f9		 idiv	 ecx
  005f3	85 d2		 test	 edx, edx
  005f5	75 19		 jne	 SHORT $LN50@WingChaosM

; 2870 : 			{
; 2871 : 				NOption = 1<<(rand()%3);

  005f7	e8 00 00 00 00	 call	 _rand
  005fc	99		 cdq
  005fd	b9 03 00 00 00	 mov	 ecx, 3
  00602	f7 f9		 idiv	 ecx
  00604	b8 01 00 00 00	 mov	 eax, 1
  00609	8b ca		 mov	 ecx, edx
  0060b	d3 e0		 shl	 eax, cl
  0060d	89 45 a8	 mov	 DWORD PTR _NOption$4[ebp], eax
$LN50@WingChaosM:

; 2872 : 			}
; 2873 : 			
; 2874 : 			if( rand()%2 )

  00610	e8 00 00 00 00	 call	 _rand
  00615	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0061a	79 05		 jns	 SHORT $LN55@WingChaosM
  0061c	48		 dec	 eax
  0061d	83 c8 fe	 or	 eax, -2			; fffffffeH
  00620	40		 inc	 eax
$LN55@WingChaosM:
  00621	85 c0		 test	 eax, eax
  00623	74 09		 je	 SHORT $LN48@WingChaosM

; 2875 : 			{
; 2876 : 				NOption |= PLUS_WING_OP1_TYPE;

  00625	8b 45 a8	 mov	 eax, DWORD PTR _NOption$4[ebp]
  00628	83 c8 20	 or	 eax, 32			; 00000020H
  0062b	89 45 a8	 mov	 DWORD PTR _NOption$4[ebp], eax
$LN48@WingChaosM:

; 2877 : 			}
; 2878 : 		}
; 2879 : 
; 2880 : 		ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, itemlevel, 0, 0, Option2, Option3, -1, NOption);			

  0062e	6a 00		 push	 0
  00630	6a 00		 push	 0
  00632	0f b6 45 a8	 movzx	 eax, BYTE PTR _NOption$4[ebp]
  00636	50		 push	 eax
  00637	6a ff		 push	 -1
  00639	0f b6 4d ac	 movzx	 ecx, BYTE PTR _Option3$5[ebp]
  0063d	51		 push	 ecx
  0063e	0f b6 55 b0	 movzx	 edx, BYTE PTR _Option2$6[ebp]
  00642	52		 push	 edx
  00643	6a 00		 push	 0
  00645	6a 00		 push	 0
  00647	0f b6 45 c0	 movzx	 eax, BYTE PTR _itemlevel$10[ebp]
  0064b	50		 push	 eax
  0064c	8b 4d b4	 mov	 ecx, DWORD PTR _itemtype$7[ebp]
  0064f	51		 push	 ecx
  00650	6a 00		 push	 0
  00652	6a 00		 push	 0
  00654	68 ff 00 00 00	 push	 255			; 000000ffH
  00659	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0065c	8b 02		 mov	 eax, DWORD PTR [edx]
  0065e	50		 push	 eax
  0065f	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  00664	83 c4 38	 add	 esp, 56			; 00000038H

; 2881 : 		gObjInventoryCommit(lpObj->m_Index);		

  00667	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0066a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0066c	51		 push	 ecx
  0066d	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  00672	83 c4 04	 add	 esp, 4

; 2882 : 
; 2883 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2884 : 	#ifdef EXTEND_LOG_SYSTEM_03_20060816
; 2885 : 			LogAddTD("[WingMix,2] [%s][%s] CBMix Success %d Money : %d-%d, CharmRate : %d", 
; 2886 : 				   lpObj->AccountID, lpObj->Name, 
; 2887 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);
; 2888 : 
; 2889 : 	#else
; 2890 : 			LogAddTD("[WingMix] [%s][%s] CBMix Success %d Money : %d-%d, CharmRate : %d", 
; 2891 : 				   lpObj->AccountID, lpObj->Name, 
; 2892 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);
; 2893 : 	#endif // EXTEND_LOG_SYSTEM_03_20060816
; 2894 : #else
; 2895 : 	#ifdef EXTEND_LOG_SYSTEM_03_20060816
; 2896 : 			LogAddTD("[WingMix,2] [%s][%s] CBMix Success %d Money : %d-%d", 
; 2897 : 				   lpObj->AccountID, lpObj->Name, 
; 2898 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);
; 2899 : 
; 2900 : 	#else
; 2901 : 			LogAddTD("[WingMix] [%s][%s] CBMix Success %d Money : %d-%d", 

  00675	8b 45 c8	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00678	50		 push	 eax
  00679	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0067c	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00682	52		 push	 edx
  00683	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00686	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  0068c	51		 push	 ecx
  0068d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00690	83 c2 73	 add	 edx, 115		; 00000073H
  00693	52		 push	 edx
  00694	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00697	83 c0 68	 add	 eax, 104		; 00000068H
  0069a	50		 push	 eax
  0069b	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@NHCJDPPL@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succes@
  006a0	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  006a6	83 c4 18	 add	 esp, 24			; 00000018H

; 2902 : 				   lpObj->AccountID, lpObj->Name, 
; 2903 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);
; 2904 : 	#endif // EXTEND_LOG_SYSTEM_03_20060816
; 2905 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2906 : 		return 1;

  006a9	b8 01 00 00 00	 mov	 eax, 1
  006ae	e9 9c 00 00 00	 jmp	 $LN1@WingChaosM

; 2907 : 	}

  006b3	e9 88 00 00 00	 jmp	 $LN37@WingChaosM
$LN36@WingChaosM:

; 2908 : 	else
; 2909 : 	{	// 조합실패	
; 2910 : 		//ChaosBoxInit(lpObj);
; 2911 : 		for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  006b8	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  006bf	eb 09		 jmp	 SHORT $LN9@WingChaosM
$LN7@WingChaosM:
  006c1	8b 45 9c	 mov	 eax, DWORD PTR _n$1[ebp]
  006c4	83 c0 01	 add	 eax, 1
  006c7	89 45 9c	 mov	 DWORD PTR _n$1[ebp], eax
$LN9@WingChaosM:
  006ca	83 7d 9c 20	 cmp	 DWORD PTR _n$1[ebp], 32	; 00000020H
  006ce	7d 17		 jge	 SHORT $LN8@WingChaosM

; 2912 : 		{
; 2913 : 			lpObj->pChaosBox[n].Clear();		

  006d0	69 4d 9c a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  006d7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006da	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  006e0	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear

; 2914 : 		}

  006e5	eb da		 jmp	 SHORT $LN7@WingChaosM
$LN8@WingChaosM:

; 2915 : 
; 2916 : 		GCUserChaosBoxSend(lpObj);

  006e7	6a 00		 push	 0
  006e9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006ec	50		 push	 eax
  006ed	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  006f2	83 c4 08	 add	 esp, 8

; 2917 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  006f5	0f b6 45 cd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  006f9	50		 push	 eax
  006fa	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  006fd	51		 push	 ecx
  006fe	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00701	8b 02		 mov	 eax, DWORD PTR [edx]
  00703	50		 push	 eax
  00704	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00709	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2918 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2919 : 	#ifdef EXTEND_LOG_SYSTEM_03_20060816
; 2920 : 			LogAddTD("[WingMix,2] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 2921 : 				   lpObj->AccountID, lpObj->Name, 
; 2922 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);	
; 2923 : 	#else
; 2924 : 			LogAddTD("[WingMix] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 2925 : 				   lpObj->AccountID, lpObj->Name, 
; 2926 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);	
; 2927 : 	#endif // EXTEND_LOG_SYSTEM_03_20060816
; 2928 : #else
; 2929 : 	#ifdef EXTEND_LOG_SYSTEM_03_20060816
; 2930 : 			LogAddTD("[WingMix,2] [%s][%s] CBMix Fail %d Money : %d-%d",  
; 2931 : 				   lpObj->AccountID, lpObj->Name, 
; 2932 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 2933 : 	#else
; 2934 : 			LogAddTD("[WingMix] [%s][%s] CBMix Fail %d Money : %d-%d",  

  0070c	8b 45 c8	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  0070f	50		 push	 eax
  00710	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00713	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00719	52		 push	 edx
  0071a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0071d	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00723	51		 push	 ecx
  00724	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00727	83 c2 73	 add	 edx, 115		; 00000073H
  0072a	52		 push	 edx
  0072b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0072e	83 c0 68	 add	 eax, 104		; 00000068H
  00731	50		 push	 eax
  00732	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@NJKJKFNH@?$FLWingMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CF@
  00737	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0073d	83 c4 18	 add	 esp, 24			; 00000018H
$LN37@WingChaosM:

; 2935 : 				   lpObj->AccountID, lpObj->Name, 
; 2936 : 				   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 2937 : 	#endif // EXTEND_LOG_SYSTEM_03_20060816
; 2938 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2939 : 	}	
; 2940 : 
; 2941 : 	lpObj->ChaosLock = FALSE;

  00740	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00743	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2942 : 	return 0;

  0074d	33 c0		 xor	 eax, eax
$LN1@WingChaosM:

; 2943 : }

  0074f	5f		 pop	 edi
  00750	5e		 pop	 esi
  00751	5b		 pop	 ebx
  00752	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00755	33 cd		 xor	 ecx, ebp
  00757	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0075c	8b e5		 mov	 esp, ebp
  0075e	5d		 pop	 ebp
  0075f	c2 04 00	 ret	 4
?WingChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ENDP	; CMixSystem::WingChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?CircleChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_iCircleRate$1 = -48					; size = 4
_itemlevel$2 = -44					; size = 4
_itemtype$3 = -40					; size = 4
_nChaosNeedMoney$ = -36					; size = 4
_pMsg$ = -32						; size = 9
_n$4 = -20						; size = 4
_ChoasGemCount$ = -16					; size = 4
_CreatureGemCount$ = -12				; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?CircleChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::CircleChaosMix, COMDAT
; _this$ = ecx

; 2293 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 70	 sub	 esp, 112		; 00000070H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 2294 : 	lpObj->ChaosLock = TRUE;

  00016	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00019	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 2295 : 
; 2296 : 	int CreatureGemCount = 0;

  00023	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _CreatureGemCount$[ebp], 0

; 2297 : 	int ChoasGemCount = 0;

  0002a	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _ChoasGemCount$[ebp], 0

; 2298 : 
; 2299 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2300 : 	int iCharmOfLuckCount = 0;
; 2301 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2302 : 
; 2303 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00031	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$4[ebp], 0
  00038	eb 09		 jmp	 SHORT $LN4@CircleChao
$LN2@CircleChao:
  0003a	8b 45 ec	 mov	 eax, DWORD PTR _n$4[ebp]
  0003d	83 c0 01	 add	 eax, 1
  00040	89 45 ec	 mov	 DWORD PTR _n$4[ebp], eax
$LN4@CircleChao:
  00043	83 7d ec 20	 cmp	 DWORD PTR _n$4[ebp], 32	; 00000020H
  00047	7d 7d		 jge	 SHORT $LN3@CircleChao

; 2304 : 	{
; 2305 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00049	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$4[ebp], 168
  00050	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00053	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00059	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0005e	83 f8 01	 cmp	 eax, 1
  00061	75 5e		 jne	 SHORT $LN5@CircleChao

; 2306 : 		{
; 2307 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 22) )

  00063	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  0006a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0006d	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00073	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00078	6a 16		 push	 22			; 00000016H
  0007a	6a 0e		 push	 14			; 0000000eH
  0007c	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00081	83 c4 08	 add	 esp, 8
  00084	3b f0		 cmp	 esi, eax
  00086	75 0b		 jne	 SHORT $LN6@CircleChao

; 2308 : 			{	// 창조의 보석
; 2309 : 				CreatureGemCount++;

  00088	8b 45 f4	 mov	 eax, DWORD PTR _CreatureGemCount$[ebp]
  0008b	83 c0 01	 add	 eax, 1
  0008e	89 45 f4	 mov	 DWORD PTR _CreatureGemCount$[ebp], eax

; 2310 : 			}

  00091	eb 2e		 jmp	 SHORT $LN5@CircleChao
$LN6@CircleChao:

; 2311 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  00093	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  0009a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0009d	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000a3	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000a8	6a 0f		 push	 15			; 0000000fH
  000aa	6a 0c		 push	 12			; 0000000cH
  000ac	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000b1	83 c4 08	 add	 esp, 8
  000b4	3b f0		 cmp	 esi, eax
  000b6	75 09		 jne	 SHORT $LN5@CircleChao

; 2312 : 			{	// 혼석
; 2313 : 				ChoasGemCount++;				

  000b8	8b 45 f0	 mov	 eax, DWORD PTR _ChoasGemCount$[ebp]
  000bb	83 c0 01	 add	 eax, 1
  000be	89 45 f0	 mov	 DWORD PTR _ChoasGemCount$[ebp], eax
$LN5@CircleChao:

; 2314 : 			}
; 2315 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2316 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 2317 : 			{
; 2318 : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 2319 : 			}
; 2320 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2321 : 		}
; 2322 : 	}

  000c1	e9 74 ff ff ff	 jmp	 $LN2@CircleChao
$LN3@CircleChao:

; 2323 : 
; 2324 : 	if( CreatureGemCount != 1 || ChoasGemCount != 1 )

  000c6	83 7d f4 01	 cmp	 DWORD PTR _CreatureGemCount$[ebp], 1
  000ca	75 06		 jne	 SHORT $LN10@CircleChao
  000cc	83 7d f0 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  000d0	74 07		 je	 SHORT $LN9@CircleChao
$LN10@CircleChao:

; 2325 : 	{	// 조합에 필요한 아이템이 없다
; 2326 : 		return FALSE;

  000d2	33 c0		 xor	 eax, eax
  000d4	e9 66 02 00 00	 jmp	 $LN1@CircleChao
$LN9@CircleChao:

; 2327 : 	}
; 2328 : 
; 2329 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 2330 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  000d9	6a 09		 push	 9
  000db	68 86 00 00 00	 push	 134			; 00000086H
  000e0	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  000e3	50		 push	 eax
  000e4	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  000e9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2331 : 	pMsg.Result		= 0x00;	

  000ec	c6 45 e3 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 2332 : 
; 2333 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2334 : 	if( iCharmOfLuckCount > 10 )
; 2335 : 	{
; 2336 : 		lpObj->ChaosLock = FALSE;
; 2337 : 
; 2338 : 		pMsg.Result = 0xF0;
; 2339 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2340 : 		return TRUE;
; 2341 : 	}
; 2342 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2343 : 
; 2344 : 	if( lpObj->Level < 10 )

  000f0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000f3	0f bf 88 a0 00
	00 00		 movsx	 ecx, WORD PTR [eax+160]
  000fa	83 f9 0a	 cmp	 ecx, 10			; 0000000aH
  000fd	7d 32		 jge	 SHORT $LN11@CircleChao

; 2345 : 	{
; 2346 : 		pMsg.Result		= 0x04;		// 레벨 10이상만 할수 있다

  000ff	c6 45 e3 04	 mov	 BYTE PTR _pMsg$[ebp+3], 4

; 2347 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00103	0f b6 45 e1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00107	50		 push	 eax
  00108	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0010b	51		 push	 ecx
  0010c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0010f	8b 02		 mov	 eax, DWORD PTR [edx]
  00111	50		 push	 eax
  00112	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00117	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2348 : 		lpObj->ChaosLock = FALSE;

  0011a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0011d	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2349 : 		return TRUE;

  00127	b8 01 00 00 00	 mov	 eax, 1
  0012c	e9 0e 02 00 00	 jmp	 $LN1@CircleChao
$LN11@CircleChao:

; 2350 : 	}
; 2351 : 
; 2352 : 	int nChaosNeedMoney = 3000000;

  00131	c7 45 dc c0 c6
	2d 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 3000000 ; 002dc6c0H

; 2353 : 
; 2354 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 스탯열매 조합
; 2355 : 	INT iChaosTaxMoney		= (INT)((INT64)nChaosNeedMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 2356 : 	if (iChaosTaxMoney < 0)
; 2357 : 		iChaosTaxMoney		= 0;
; 2358 : 
; 2359 : 	nChaosNeedMoney			= nChaosNeedMoney + iChaosTaxMoney;
; 2360 : 	if (nChaosNeedMoney < 0)
; 2361 : 		nChaosNeedMoney		= 0;
; 2362 : #endif
; 2363 : 
; 2364 : 	if( lpObj->Money < nChaosNeedMoney )

  00138	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0013b	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00141	3b 4d dc	 cmp	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00144	7d 3f		 jge	 SHORT $LN12@CircleChao

; 2365 : 	{
; 2366 : 		lpObj->ChaosLock = FALSE;

  00146	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00149	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2367 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  00153	c6 45 e3 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 2368 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00157	0f b6 45 e1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0015b	50		 push	 eax
  0015c	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0015f	51		 push	 ecx
  00160	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00163	8b 02		 mov	 eax, DWORD PTR [edx]
  00165	50		 push	 eax
  00166	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0016b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2369 : 		lpObj->ChaosLock = FALSE;

  0016e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00171	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2370 : 		return TRUE;

  0017b	b8 01 00 00 00	 mov	 eax, 1
  00180	e9 ba 01 00 00	 jmp	 $LN1@CircleChao
$LN12@CircleChao:

; 2371 : 	}
; 2372 : 
; 2373 : 	LogChaosItem(lpObj, "CircleMix");

  00185	68 00 00 00 00	 push	 OFFSET ??_C@_09CKGJGION@CircleMix@
  0018a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0018d	50		 push	 eax
  0018e	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00191	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 2374 : 	LogAddTD("[CircleMix] Chaos Mix Start");	

  00196	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@EFIHICLO@?$FLCircleMix?$FN?5Chaos?5Mix?5Start@
  0019b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  001a1	83 c4 04	 add	 esp, 4

; 2375 : 
; 2376 : 	lpObj->ChaosSuccessRate = 90;

  001a4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001a7	c7 80 b8 0c 00
	00 5a 00 00 00	 mov	 DWORD PTR [eax+3256], 90 ; 0000005aH

; 2377 : 
; 2378 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2379 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 2380 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2381 : 
; 2382 : 	lpObj->Money -= nChaosNeedMoney;

  001b1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001b4	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  001ba	2b 4d dc	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  001bd	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001c0	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 2383 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 스탯열매 조합
; 2384 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 2385 : #endif
; 2386 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);	

  001c6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001c9	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  001cf	51		 push	 ecx
  001d0	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001d3	8b 02		 mov	 eax, DWORD PTR [edx]
  001d5	50		 push	 eax
  001d6	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  001db	83 c4 08	 add	 esp, 8

; 2387 : 
; 2388 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  001de	e8 00 00 00 00	 call	 _rand
  001e3	99		 cdq
  001e4	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  001e9	f7 f9		 idiv	 ecx
  001eb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001ee	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  001f4	0f 8d d1 00 00
	00		 jge	 $LN13@CircleChao

; 2389 : 	{
; 2390 : 		int itemtype  = MAKE_ITEMNUM(13,15);

  001fa	6a 0f		 push	 15			; 0000000fH
  001fc	6a 0d		 push	 13			; 0000000dH
  001fe	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00203	83 c4 08	 add	 esp, 8
  00206	89 45 d8	 mov	 DWORD PTR _itemtype$3[ebp], eax

; 2391 : 		int itemlevel;		
; 2392 : 		int iCircleRate = rand()%100;

  00209	e8 00 00 00 00	 call	 _rand
  0020e	99		 cdq
  0020f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00214	f7 f9		 idiv	 ecx
  00216	89 55 d0	 mov	 DWORD PTR _iCircleRate$1[ebp], edx

; 2393 : 
; 2394 : #ifdef ADD_MINUS_STAT_SYSTEM_USING_FRUIT_20050712
; 2395 : 		if( iCircleRate < 30 )
; 2396 : 		{	
; 2397 : 			itemlevel = FRUIT_ENERGY;
; 2398 : 		}
; 2399 : 		else if( iCircleRate < 55 )
; 2400 : 		{	
; 2401 : 			itemlevel = FRUIT_VITALITY;
; 2402 : 		}
; 2403 : 		else if( iCircleRate < 75 )
; 2404 : 		{	
; 2405 : 			itemlevel = FRUIT_DEXTERITY;
; 2406 : 		}
; 2407 : 		else if( iCircleRate < 95 )
; 2408 : 		{	
; 2409 : 			itemlevel = FRUIT_STRENGTH;
; 2410 : 		}
; 2411 : 		else
; 2412 : 		{	
; 2413 : 			itemlevel = FRUIT_LEADERSHIP;
; 2414 : 		}
; 2415 : #else
; 2416 : 		if( iCircleRate < 30 )

  00219	83 7d d0 1e	 cmp	 DWORD PTR _iCircleRate$1[ebp], 30 ; 0000001eH
  0021d	7d 09		 jge	 SHORT $LN15@CircleChao

; 2417 : 		{	// 라이프 서클
; 2418 : 			itemlevel = 0;

  0021f	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _itemlevel$2[ebp], 0

; 2419 : 		}

  00226	eb 25		 jmp	 SHORT $LN16@CircleChao
$LN15@CircleChao:

; 2420 : 		else if( iCircleRate < 60 )

  00228	83 7d d0 3c	 cmp	 DWORD PTR _iCircleRate$1[ebp], 60 ; 0000003cH
  0022c	7d 09		 jge	 SHORT $LN17@CircleChao

; 2421 : 		{	// 파워 서클
; 2422 : 			itemlevel = 1;

  0022e	c7 45 d4 01 00
	00 00		 mov	 DWORD PTR _itemlevel$2[ebp], 1

; 2423 : 		}

  00235	eb 16		 jmp	 SHORT $LN16@CircleChao
$LN17@CircleChao:

; 2424 : 		else if( iCircleRate < 80 )

  00237	83 7d d0 50	 cmp	 DWORD PTR _iCircleRate$1[ebp], 80 ; 00000050H
  0023b	7d 09		 jge	 SHORT $LN19@CircleChao

; 2425 : 		{	// 에너지 서클
; 2426 : 			itemlevel = 2;

  0023d	c7 45 d4 02 00
	00 00		 mov	 DWORD PTR _itemlevel$2[ebp], 2

; 2427 : 		}

  00244	eb 07		 jmp	 SHORT $LN16@CircleChao
$LN19@CircleChao:

; 2428 : 		else
; 2429 : 		{	// 파워 서클
; 2430 : 			itemlevel = 3;

  00246	c7 45 d4 03 00
	00 00		 mov	 DWORD PTR _itemlevel$2[ebp], 3
$LN16@CircleChao:

; 2431 : 		}
; 2432 : #endif
; 2433 : 
; 2434 : 		ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, itemlevel, 255, 1, 0, 0);			

  0024d	6a 00		 push	 0
  0024f	6a 00		 push	 0
  00251	6a 00		 push	 0
  00253	6a ff		 push	 -1
  00255	6a 00		 push	 0
  00257	6a 00		 push	 0
  00259	6a 01		 push	 1
  0025b	68 ff 00 00 00	 push	 255			; 000000ffH
  00260	0f b6 45 d4	 movzx	 eax, BYTE PTR _itemlevel$2[ebp]
  00264	50		 push	 eax
  00265	8b 4d d8	 mov	 ecx, DWORD PTR _itemtype$3[ebp]
  00268	51		 push	 ecx
  00269	6a 00		 push	 0
  0026b	6a 00		 push	 0
  0026d	68 ff 00 00 00	 push	 255			; 000000ffH
  00272	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00275	8b 02		 mov	 eax, DWORD PTR [edx]
  00277	50		 push	 eax
  00278	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  0027d	83 c4 38	 add	 esp, 56			; 00000038H

; 2435 : 		gObjInventoryCommit(lpObj->m_Index);		

  00280	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00283	8b 08		 mov	 ecx, DWORD PTR [eax]
  00285	51		 push	 ecx
  00286	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  0028b	83 c4 04	 add	 esp, 4

; 2436 : 
; 2437 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2438 : 		LogAddTD("[CircleMix] [%s][%s] CBMix Success %d Money : %d-%d, CharmRate : %d", 
; 2439 : 			   lpObj->AccountID, lpObj->Name, 
; 2440 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);
; 2441 : #else
; 2442 : 		LogAddTD("[CircleMix] [%s][%s] CBMix Success %d Money : %d-%d", 

  0028e	8b 45 dc	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00291	50		 push	 eax
  00292	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00295	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  0029b	52		 push	 edx
  0029c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0029f	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  002a5	51		 push	 ecx
  002a6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002a9	83 c2 73	 add	 edx, 115		; 00000073H
  002ac	52		 push	 edx
  002ad	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002b0	83 c0 68	 add	 eax, 104		; 00000068H
  002b3	50		 push	 eax
  002b4	68 00 00 00 00	 push	 OFFSET ??_C@_0DE@ODBJEMOH@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Succ@
  002b9	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  002bf	83 c4 18	 add	 esp, 24			; 00000018H

; 2443 : 			   lpObj->AccountID, lpObj->Name, 
; 2444 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);
; 2445 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2446 : 		return 1;

  002c2	b8 01 00 00 00	 mov	 eax, 1
  002c7	eb 76		 jmp	 SHORT $LN1@CircleChao

; 2447 : 	}

  002c9	eb 65		 jmp	 SHORT $LN14@CircleChao
$LN13@CircleChao:

; 2448 : 	else
; 2449 : 	{	// 조합실패	
; 2450 : 
; 2451 : 		ChaosBoxInit(lpObj);

  002cb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002ce	50		 push	 eax
  002cf	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  002d2	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 2452 : 		GCUserChaosBoxSend(lpObj);

  002d7	6a 00		 push	 0
  002d9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002dc	50		 push	 eax
  002dd	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  002e2	83 c4 08	 add	 esp, 8

; 2453 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  002e5	0f b6 45 e1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  002e9	50		 push	 eax
  002ea	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  002ed	51		 push	 ecx
  002ee	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002f1	8b 02		 mov	 eax, DWORD PTR [edx]
  002f3	50		 push	 eax
  002f4	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  002f9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2454 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2455 : 		LogAddTD("[CircleMix] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 2456 : 			   lpObj->AccountID, lpObj->Name, 
; 2457 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);	
; 2458 : #else
; 2459 : 		LogAddTD("[CircleMix] [%s][%s] CBMix Fail %d Money : %d-%d",  

  002fc	8b 45 dc	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  002ff	50		 push	 eax
  00300	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00303	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00309	52		 push	 edx
  0030a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0030d	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00313	51		 push	 ecx
  00314	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00317	83 c2 73	 add	 edx, 115		; 00000073H
  0031a	52		 push	 edx
  0031b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0031e	83 c0 68	 add	 eax, 104		; 00000068H
  00321	50		 push	 eax
  00322	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@HBBMEHFE@?$FLCircleMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail@
  00327	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0032d	83 c4 18	 add	 esp, 24			; 00000018H
$LN14@CircleChao:

; 2460 : 			   lpObj->AccountID, lpObj->Name, 
; 2461 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 2462 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2463 : 	}	
; 2464 : 
; 2465 : 	lpObj->ChaosLock = FALSE;

  00330	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00333	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2466 : 	return 0;

  0033d	33 c0		 xor	 eax, eax
$LN1@CircleChao:

; 2467 : }

  0033f	5f		 pop	 edi
  00340	5e		 pop	 esi
  00341	5b		 pop	 ebx
  00342	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00345	33 cd		 xor	 ecx, ebp
  00347	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0034c	8b e5		 mov	 esp, ebp
  0034e	5d		 pop	 ebp
  0034f	c2 04 00	 ret	 4
?CircleChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::CircleChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?PegasiaChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_op3$1 = -44						; size = 4
_itemtype$2 = -40					; size = 4
_nChaosNeedMoney$ = -36					; size = 4
_pMsg$ = -32						; size = 9
_n$3 = -20						; size = 4
_ChoasGemCount$ = -16					; size = 4
_UniriaCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?PegasiaChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::PegasiaChaosMix, COMDAT
; _this$ = ecx

; 2142 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 6c	 sub	 esp, 108		; 0000006cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 2143 : 	lpObj->ChaosLock = TRUE;

  00016	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00019	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 2144 : 
; 2145 : 	int UniriaCount = 0;

  00023	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _UniriaCount$[ebp], 0

; 2146 : 	int ChoasGemCount = 0;

  0002a	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _ChoasGemCount$[ebp], 0

; 2147 : 
; 2148 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2149 : 	int iCharmOfLuckCount = 0;
; 2150 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2151 : 
; 2152 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00031	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$3[ebp], 0
  00038	eb 09		 jmp	 SHORT $LN4@PegasiaCha
$LN2@PegasiaCha:
  0003a	8b 45 ec	 mov	 eax, DWORD PTR _n$3[ebp]
  0003d	83 c0 01	 add	 eax, 1
  00040	89 45 ec	 mov	 DWORD PTR _n$3[ebp], eax
$LN4@PegasiaCha:
  00043	83 7d ec 20	 cmp	 DWORD PTR _n$3[ebp], 32	; 00000020H
  00047	0f 8d a4 00 00
	00		 jge	 $LN3@PegasiaCha

; 2153 : 	{
; 2154 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  0004d	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$3[ebp], 168
  00054	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00057	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  0005d	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00062	83 f8 01	 cmp	 eax, 1
  00065	0f 85 81 00 00
	00		 jne	 $LN8@PegasiaCha

; 2155 : 		{
; 2156 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13, 2) && lpObj->pChaosBox[n].m_Durability == 255 )

  0006b	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00072	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00075	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0007b	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00080	6a 02		 push	 2
  00082	6a 0d		 push	 13			; 0000000dH
  00084	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00089	83 c4 08	 add	 esp, 8
  0008c	3b f0		 cmp	 esi, eax
  0008e	75 2e		 jne	 SHORT $LN6@PegasiaCha
  00090	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  00097	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0009a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000a0	f3 0f 10 44 02
	24		 movss	 xmm0, DWORD PTR [edx+eax+36]
  000a6	0f 2e 05 00 00
	00 00		 ucomiss xmm0, DWORD PTR __real@437f0000
  000ad	9f		 lahf
  000ae	f6 c4 44	 test	 ah, 68			; 00000044H
  000b1	7a 0b		 jp	 SHORT $LN6@PegasiaCha

; 2157 : 			{	// 유니리아
; 2158 : 				UniriaCount++;

  000b3	8b 45 f4	 mov	 eax, DWORD PTR _UniriaCount$[ebp]
  000b6	83 c0 01	 add	 eax, 1
  000b9	89 45 f4	 mov	 DWORD PTR _UniriaCount$[ebp], eax

; 2159 : 			}

  000bc	eb 2e		 jmp	 SHORT $LN8@PegasiaCha
$LN6@PegasiaCha:

; 2160 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  000be	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 168
  000c5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000c8	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000ce	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000d3	6a 0f		 push	 15			; 0000000fH
  000d5	6a 0c		 push	 12			; 0000000cH
  000d7	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000dc	83 c4 08	 add	 esp, 8
  000df	3b f0		 cmp	 esi, eax
  000e1	75 09		 jne	 SHORT $LN8@PegasiaCha

; 2161 : 			{	// 혼석
; 2162 : 				ChoasGemCount++;				

  000e3	8b 45 f0	 mov	 eax, DWORD PTR _ChoasGemCount$[ebp]
  000e6	83 c0 01	 add	 eax, 1
  000e9	89 45 f0	 mov	 DWORD PTR _ChoasGemCount$[ebp], eax
$LN8@PegasiaCha:

; 2163 : 			}
; 2164 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2165 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 2166 : 			{
; 2167 : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 2168 : 			}
; 2169 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2170 : 		}
; 2171 : 	}

  000ec	e9 49 ff ff ff	 jmp	 $LN2@PegasiaCha
$LN3@PegasiaCha:

; 2172 : 
; 2173 : #ifdef NEW_FORSKYLAND2
; 2174 : 	if( UniriaCount != 10 || ChoasGemCount != 1 )

  000f1	83 7d f4 0a	 cmp	 DWORD PTR _UniriaCount$[ebp], 10 ; 0000000aH
  000f5	75 06		 jne	 SHORT $LN10@PegasiaCha
  000f7	83 7d f0 01	 cmp	 DWORD PTR _ChoasGemCount$[ebp], 1
  000fb	74 14		 je	 SHORT $LN9@PegasiaCha
$LN10@PegasiaCha:

; 2175 : #else
; 2176 : 	if( UniriaCount != 3 || ChoasGemCount != 1 )
; 2177 : #endif
; 2178 : 	{
; 2179 : 		lpObj->ChaosLock = FALSE;

  000fd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00100	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2180 : 		return FALSE;

  0010a	33 c0		 xor	 eax, eax
  0010c	e9 40 02 00 00	 jmp	 $LN1@PegasiaCha
$LN9@PegasiaCha:

; 2181 : 	}
; 2182 : 
; 2183 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 2184 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00111	6a 09		 push	 9
  00113	68 86 00 00 00	 push	 134			; 00000086H
  00118	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0011b	50		 push	 eax
  0011c	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00121	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2185 : 	pMsg.Result		= 0x00;	

  00124	c6 45 e3 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 2186 : 
; 2187 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2188 : 	if( iCharmOfLuckCount > 10 )
; 2189 : 	{
; 2190 : 		lpObj->ChaosLock = FALSE;
; 2191 : 
; 2192 : 		pMsg.Result = 0xF0;
; 2193 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2194 : 		return FALSE;
; 2195 : 	}
; 2196 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2197 : 
; 2198 : #ifdef NEW_FORSKYLAND2
; 2199 : 	int nChaosNeedMoney = 500000;

  00128	c7 45 dc 20 a1
	07 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 500000 ; 0007a120H

; 2200 : #else
; 2201 : 	int nChaosNeedMoney = 250000;
; 2202 : #endif
; 2203 : 
; 2204 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 디노란트 조합
; 2205 : 	INT iChaosTaxMoney		= (INT)((INT64)nChaosNeedMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 2206 : 	if (iChaosTaxMoney < 0)
; 2207 : 		iChaosTaxMoney		= 0;
; 2208 : 
; 2209 : 	nChaosNeedMoney			= nChaosNeedMoney + iChaosTaxMoney;
; 2210 : 	if (nChaosNeedMoney < 0)
; 2211 : 		nChaosNeedMoney		= 0;
; 2212 : #endif
; 2213 : 
; 2214 : 	if( lpObj->Money < nChaosNeedMoney )

  0012f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00132	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00138	3b 4d dc	 cmp	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  0013b	7d 3f		 jge	 SHORT $LN11@PegasiaCha

; 2215 : 	{
; 2216 : 		lpObj->ChaosLock = FALSE;

  0013d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00140	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2217 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  0014a	c6 45 e3 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 2218 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0014e	0f b6 45 e1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00152	50		 push	 eax
  00153	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00156	51		 push	 ecx
  00157	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0015a	8b 02		 mov	 eax, DWORD PTR [edx]
  0015c	50		 push	 eax
  0015d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00162	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2219 : 		lpObj->ChaosLock = FALSE;

  00165	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00168	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2220 : 		return TRUE;

  00172	b8 01 00 00 00	 mov	 eax, 1
  00177	e9 d5 01 00 00	 jmp	 $LN1@PegasiaCha
$LN11@PegasiaCha:

; 2221 : 	}
; 2222 : 
; 2223 : 	LogChaosItem(lpObj, "DinorantMix");

  0017c	68 00 00 00 00	 push	 OFFSET ??_C@_0M@OEKEBNDM@DinorantMix@
  00181	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00184	50		 push	 eax
  00185	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00188	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 2224 : 	LogAddTD("[DinorantMix] Chaos Mix Start");	

  0018d	68 00 00 00 00	 push	 OFFSET ??_C@_0BO@BKFHPCAO@?$FLDinorantMix?$FN?5Chaos?5Mix?5Start@
  00192	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00198	83 c4 04	 add	 esp, 4

; 2225 : 
; 2226 : 	lpObj->ChaosSuccessRate = 70;

  0019b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0019e	c7 80 b8 0c 00
	00 46 00 00 00	 mov	 DWORD PTR [eax+3256], 70 ; 00000046H

; 2227 : 
; 2228 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2229 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 2230 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2231 : 
; 2232 : 	lpObj->Money -= nChaosNeedMoney;

  001a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001ab	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  001b1	2b 4d dc	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  001b4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001b7	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 2233 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 디노란트 조합
; 2234 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 2235 : #endif
; 2236 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);

  001bd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001c0	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  001c6	51		 push	 ecx
  001c7	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001ca	8b 02		 mov	 eax, DWORD PTR [edx]
  001cc	50		 push	 eax
  001cd	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  001d2	83 c4 08	 add	 esp, 8

; 2237 : 
; 2238 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  001d5	e8 00 00 00 00	 call	 _rand
  001da	99		 cdq
  001db	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  001e0	f7 f9		 idiv	 ecx
  001e2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001e5	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  001eb	0f 8d ec 00 00
	00		 jge	 $LN12@PegasiaCha

; 2239 : 	{
; 2240 : 		int itemtype  = MAKE_ITEMNUM(13,3);

  001f1	6a 03		 push	 3
  001f3	6a 0d		 push	 13			; 0000000dH
  001f5	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001fa	83 c4 08	 add	 esp, 8
  001fd	89 45 d8	 mov	 DWORD PTR _itemtype$2[ebp], eax

; 2241 : 
; 2242 : 		int op3 = 0;

  00200	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _op3$1[ebp], 0

; 2243 : 
; 2244 : 
; 2245 : 		if( (rand()%100) < 30 )

  00207	e8 00 00 00 00	 call	 _rand
  0020c	99		 cdq
  0020d	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00212	f7 f9		 idiv	 ecx
  00214	83 fa 1e	 cmp	 edx, 30			; 0000001eH
  00217	7d 46		 jge	 SHORT $LN15@PegasiaCha

; 2246 : 		{	// 30%
; 2247 : 			op3 = 1<<(rand()%3);

  00219	e8 00 00 00 00	 call	 _rand
  0021e	99		 cdq
  0021f	b9 03 00 00 00	 mov	 ecx, 3
  00224	f7 f9		 idiv	 ecx
  00226	b8 01 00 00 00	 mov	 eax, 1
  0022b	8b ca		 mov	 ecx, edx
  0022d	d3 e0		 shl	 eax, cl
  0022f	89 45 d4	 mov	 DWORD PTR _op3$1[ebp], eax

; 2248 : 
; 2249 : 			if( rand()%5 == 0 )

  00232	e8 00 00 00 00	 call	 _rand
  00237	99		 cdq
  00238	b9 05 00 00 00	 mov	 ecx, 5
  0023d	f7 f9		 idiv	 ecx
  0023f	85 d2		 test	 edx, edx
  00241	75 1c		 jne	 SHORT $LN15@PegasiaCha

; 2250 : 			{	// 20%
; 2251 : 				op3 |= 1<<(rand()%3);

  00243	e8 00 00 00 00	 call	 _rand
  00248	99		 cdq
  00249	b9 03 00 00 00	 mov	 ecx, 3
  0024e	f7 f9		 idiv	 ecx
  00250	b8 01 00 00 00	 mov	 eax, 1
  00255	8b ca		 mov	 ecx, edx
  00257	d3 e0		 shl	 eax, cl
  00259	0b 45 d4	 or	 eax, DWORD PTR _op3$1[ebp]
  0025c	89 45 d4	 mov	 DWORD PTR _op3$1[ebp], eax
$LN15@PegasiaCha:

; 2252 : 			}
; 2253 : 		}
; 2254 : 
; 2255 : 		ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, 0, 255, 1, 0, op3);				

  0025f	6a 00		 push	 0
  00261	6a 00		 push	 0
  00263	6a 00		 push	 0
  00265	6a ff		 push	 -1
  00267	0f b6 45 d4	 movzx	 eax, BYTE PTR _op3$1[ebp]
  0026b	50		 push	 eax
  0026c	6a 00		 push	 0
  0026e	6a 01		 push	 1
  00270	68 ff 00 00 00	 push	 255			; 000000ffH
  00275	6a 00		 push	 0
  00277	8b 4d d8	 mov	 ecx, DWORD PTR _itemtype$2[ebp]
  0027a	51		 push	 ecx
  0027b	6a 00		 push	 0
  0027d	6a 00		 push	 0
  0027f	68 ff 00 00 00	 push	 255			; 000000ffH
  00284	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00287	8b 02		 mov	 eax, DWORD PTR [edx]
  00289	50		 push	 eax
  0028a	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  0028f	83 c4 38	 add	 esp, 56			; 00000038H

; 2256 : 		gObjInventoryCommit(lpObj->m_Index);		

  00292	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00295	8b 08		 mov	 ecx, DWORD PTR [eax]
  00297	51		 push	 ecx
  00298	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  0029d	83 c4 04	 add	 esp, 4

; 2257 : 
; 2258 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2259 : 		LogAddTD("[DinorantMix] [%s][%s] CBMix Success %d Money : %d-%d, CharmRate : %d", 
; 2260 : 			   lpObj->AccountID, lpObj->Name, 
; 2261 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);
; 2262 : #else
; 2263 : 		LogAddTD("[DinorantMix] [%s][%s] CBMix Success %d Money : %d-%d", 

  002a0	8b 45 dc	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  002a3	50		 push	 eax
  002a4	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002a7	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  002ad	52		 push	 edx
  002ae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002b1	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  002b7	51		 push	 ecx
  002b8	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002bb	83 c2 73	 add	 edx, 115		; 00000073H
  002be	52		 push	 edx
  002bf	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002c2	83 c0 68	 add	 eax, 104		; 00000068H
  002c5	50		 push	 eax
  002c6	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@PGAEFDFE@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@
  002cb	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  002d1	83 c4 18	 add	 esp, 24			; 00000018H

; 2264 : 			   lpObj->AccountID, lpObj->Name, 
; 2265 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);
; 2266 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2267 : 
; 2268 : 		return 1;

  002d4	b8 01 00 00 00	 mov	 eax, 1
  002d9	eb 76		 jmp	 SHORT $LN1@PegasiaCha

; 2269 : 	}

  002db	eb 65		 jmp	 SHORT $LN13@PegasiaCha
$LN12@PegasiaCha:

; 2270 : 	else
; 2271 : 	{	// 조합실패	
; 2272 : 
; 2273 : 		ChaosBoxInit(lpObj);

  002dd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002e0	50		 push	 eax
  002e1	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  002e4	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 2274 : 		GCUserChaosBoxSend(lpObj);

  002e9	6a 00		 push	 0
  002eb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002ee	50		 push	 eax
  002ef	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  002f4	83 c4 08	 add	 esp, 8

; 2275 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  002f7	0f b6 45 e1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  002fb	50		 push	 eax
  002fc	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  002ff	51		 push	 ecx
  00300	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00303	8b 02		 mov	 eax, DWORD PTR [edx]
  00305	50		 push	 eax
  00306	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0030b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2276 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2277 : 		LogAddTD("[DinorantMix] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 2278 : 			   lpObj->AccountID, lpObj->Name, 
; 2279 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney, iCharmOfLuckCount);	
; 2280 : #else
; 2281 : 		LogAddTD("[DinorantMix] [%s][%s] CBMix Fail %d Money : %d-%d",  

  0030e	8b 45 dc	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00311	50		 push	 eax
  00312	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00315	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  0031b	52		 push	 edx
  0031c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0031f	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00325	51		 push	 ecx
  00326	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00329	83 c2 73	 add	 edx, 115		; 00000073H
  0032c	52		 push	 edx
  0032d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00330	83 c0 68	 add	 eax, 104		; 00000068H
  00333	50		 push	 eax
  00334	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@PGELDBJJ@?$FLDinorantMix?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@
  00339	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0033f	83 c4 18	 add	 esp, 24			; 00000018H
$LN13@PegasiaCha:

; 2282 : 			   lpObj->AccountID, lpObj->Name, 
; 2283 : 			   lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney);	
; 2284 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2285 : 	}	
; 2286 : 
; 2287 : 	lpObj->ChaosLock = FALSE;

  00342	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00345	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2288 : 	return 0;

  0034f	33 c0		 xor	 eax, eax
$LN1@PegasiaCha:

; 2289 : }

  00351	5f		 pop	 edi
  00352	5e		 pop	 esi
  00353	5b		 pop	 ebx
  00354	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00357	33 cd		 xor	 ecx, ebp
  00359	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0035e	8b e5		 mov	 esp, ebp
  00360	5d		 pop	 ebp
  00361	c2 04 00	 ret	 4
?PegasiaChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::PegasiaChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?PlusItemLevelChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@H@Z
_TEXT	SEGMENT
__itemlebel$1 = -248					; size = 4
_levelitemdur$2 = -244					; size = 4
_NewItem$3 = -240					; size = 168
_pMsg$ = -72						; size = 9
_MixType$ = -60						; size = 4
_n$4 = -56						; size = 4
_ExtraSoulGemCount$ = -52				; size = 4
_ExtraBlessGemCount$ = -48				; size = 4
_Plus12ItemCount$ = -44					; size = 4
_Plus11ItemCount$ = -40					; size = 4
_OtherItemFound$ = -36					; size = 4
_PlusItemPos$ = -32					; size = 4
_Plus10ItemCount$ = -28					; size = 4
_Plus9ItemCount$ = -24					; size = 4
_SoulGemCount$ = -20					; size = 4
_BlessGemCount$ = -16					; size = 4
_ChaosGemCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
_mixType$ = 12						; size = 4
?PlusItemLevelChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@H@Z PROC ; CMixSystem::PlusItemLevelChaosMix, COMDAT
; _this$ = ecx

; 1381 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 38 01 00
	00		 sub	 esp, 312		; 00000138H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 1382 : 	int ChaosGemCount = 0;

  00019	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _ChaosGemCount$[ebp], 0

; 1383 : 	int BlessGemCount = 0;

  00020	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _BlessGemCount$[ebp], 0

; 1384 : 	int SoulGemCount = 0;	

  00027	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _SoulGemCount$[ebp], 0

; 1385 : 	int Plus9ItemCount = 0;

  0002e	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _Plus9ItemCount$[ebp], 0

; 1386 : 	int Plus10ItemCount = 0;	

  00035	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Plus10ItemCount$[ebp], 0

; 1387 : 	int PlusItemPos = -1;

  0003c	c7 45 e0 ff ff
	ff ff		 mov	 DWORD PTR _PlusItemPos$[ebp], -1

; 1388 : 	int OtherItemFound = 0;

  00043	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _OtherItemFound$[ebp], 0

; 1389 : 	
; 1390 : #ifdef ITEM_12_13_20040401
; 1391 : 	int Plus11ItemCount		= 0;

  0004a	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _Plus11ItemCount$[ebp], 0

; 1392 : 	int Plus12ItemCount		= 0;

  00051	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _Plus12ItemCount$[ebp], 0

; 1393 : 	int ExtraBlessGemCount	= 0;

  00058	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _ExtraBlessGemCount$[ebp], 0

; 1394 : 	int ExtraSoulGemCount	= 0;

  0005f	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _ExtraSoulGemCount$[ebp], 0

; 1395 : #endif
; 1396 : 
; 1397 : #ifdef ADD_CHAOSMIXCHARM_ITEM_20080702
; 1398 : 	//grooving ChaosMixCham
; 1399 : 	int iChaosMixCharmCnt	= 0;
; 1400 : #endif // ADD_CHAOSMIXCHARM_ITEM_20080702	
; 1401 : 
; 1402 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1403 : 	int iCharmOfLuckCount = 0;
; 1404 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1405 : 
; 1406 : #ifdef MODIFY_PLUSITEM_CHAOSMIX_LOG_BUGFIX_20070330
; 1407 : 	BYTE btItemLuckValue = 0;
; 1408 : #endif // MODIFY_PLUSITEM_CHAOSMIX_LOG_BUGFIX_20070330
; 1409 : 
; 1410 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00066	c7 45 c8 00 00
	00 00		 mov	 DWORD PTR _n$4[ebp], 0
  0006d	eb 09		 jmp	 SHORT $LN4@PlusItemLe
$LN2@PlusItemLe:
  0006f	8b 45 c8	 mov	 eax, DWORD PTR _n$4[ebp]
  00072	83 c0 01	 add	 eax, 1
  00075	89 45 c8	 mov	 DWORD PTR _n$4[ebp], eax
$LN4@PlusItemLe:
  00078	83 7d c8 20	 cmp	 DWORD PTR _n$4[ebp], 32	; 00000020H
  0007c	0f 8d 74 01 00
	00		 jge	 $LN3@PlusItemLe

; 1411 : 	{
; 1412 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00082	69 4d c8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$4[ebp], 168
  00089	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0008c	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00092	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00097	83 f8 01	 cmp	 eax, 1
  0009a	0f 85 51 01 00
	00		 jne	 $LN19@PlusItemLe

; 1413 : 		{
; 1414 : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  000a0	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  000a7	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000aa	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000b0	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000b5	6a 0f		 push	 15			; 0000000fH
  000b7	6a 0c		 push	 12			; 0000000cH
  000b9	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000be	83 c4 08	 add	 esp, 8
  000c1	3b f0		 cmp	 esi, eax
  000c3	75 0e		 jne	 SHORT $LN6@PlusItemLe

; 1415 : 			{	// 혼돈의 보석
; 1416 : 				ChaosGemCount++;

  000c5	8b 45 f4	 mov	 eax, DWORD PTR _ChaosGemCount$[ebp]
  000c8	83 c0 01	 add	 eax, 1
  000cb	89 45 f4	 mov	 DWORD PTR _ChaosGemCount$[ebp], eax

; 1417 : 			}

  000ce	e9 1e 01 00 00	 jmp	 $LN19@PlusItemLe
$LN6@PlusItemLe:

; 1418 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 13) )

  000d3	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  000da	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000dd	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000e3	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000e8	6a 0d		 push	 13			; 0000000dH
  000ea	6a 0e		 push	 14			; 0000000eH
  000ec	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000f1	83 c4 08	 add	 esp, 8
  000f4	3b f0		 cmp	 esi, eax
  000f6	75 0e		 jne	 SHORT $LN8@PlusItemLe

; 1419 : 			{	// 축석
; 1420 : 				BlessGemCount++;				

  000f8	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  000fb	83 c0 01	 add	 eax, 1
  000fe	89 45 f0	 mov	 DWORD PTR _BlessGemCount$[ebp], eax

; 1421 : 			}

  00101	e9 eb 00 00 00	 jmp	 $LN19@PlusItemLe
$LN8@PlusItemLe:

; 1422 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 14) )

  00106	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  0010d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00110	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00116	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0011b	6a 0e		 push	 14			; 0000000eH
  0011d	6a 0e		 push	 14			; 0000000eH
  0011f	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00124	83 c4 08	 add	 esp, 8
  00127	3b f0		 cmp	 esi, eax
  00129	75 0e		 jne	 SHORT $LN10@PlusItemLe

; 1423 : 			{	// 영석
; 1424 : 				SoulGemCount++;				

  0012b	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  0012e	83 c0 01	 add	 eax, 1
  00131	89 45 ec	 mov	 DWORD PTR _SoulGemCount$[ebp], eax

; 1425 : 			}

  00134	e9 b8 00 00 00	 jmp	 $LN19@PlusItemLe
$LN10@PlusItemLe:

; 1426 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1427 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 1428 : 			{
; 1429 : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 1430 : 			}
; 1431 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1432 : 
; 1433 : #ifdef ADD_CHAOSMIXCHARM_ITEM_20080702
; 1434 : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 96 ) )
; 1435 : 			{
; 1436 : 				iChaosMixCharmCnt++;
; 1437 : 			}
; 1438 : #endif //ADD_CHAOSMIXCHARM_ITEM_20080702
; 1439 : 			else
; 1440 : 			{
; 1441 : 				if( lpObj->pChaosBox[n].m_Level == 9 )

  00139	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  00140	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00143	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00149	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0014e	83 f8 09	 cmp	 eax, 9
  00151	75 14		 jne	 SHORT $LN12@PlusItemLe

; 1442 : 				{
; 1443 : 					Plus9ItemCount++;

  00153	8b 45 e8	 mov	 eax, DWORD PTR _Plus9ItemCount$[ebp]
  00156	83 c0 01	 add	 eax, 1
  00159	89 45 e8	 mov	 DWORD PTR _Plus9ItemCount$[ebp], eax

; 1444 : 					PlusItemPos = n;

  0015c	8b 45 c8	 mov	 eax, DWORD PTR _n$4[ebp]
  0015f	89 45 e0	 mov	 DWORD PTR _PlusItemPos$[ebp], eax

; 1445 : 				}

  00162	e9 8a 00 00 00	 jmp	 $LN19@PlusItemLe
$LN12@PlusItemLe:

; 1446 : 				else if( lpObj->pChaosBox[n].m_Level == 10 )

  00167	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  0016e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00171	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00177	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0017c	83 f8 0a	 cmp	 eax, 10			; 0000000aH
  0017f	75 11		 jne	 SHORT $LN14@PlusItemLe

; 1447 : 				{
; 1448 : 					Plus10ItemCount++;

  00181	8b 45 e4	 mov	 eax, DWORD PTR _Plus10ItemCount$[ebp]
  00184	83 c0 01	 add	 eax, 1
  00187	89 45 e4	 mov	 DWORD PTR _Plus10ItemCount$[ebp], eax

; 1449 : 					PlusItemPos = n;

  0018a	8b 45 c8	 mov	 eax, DWORD PTR _n$4[ebp]
  0018d	89 45 e0	 mov	 DWORD PTR _PlusItemPos$[ebp], eax

; 1450 : 				}

  00190	eb 5f		 jmp	 SHORT $LN19@PlusItemLe
$LN14@PlusItemLe:

; 1451 : #ifdef ITEM_12_13_20040401
; 1452 : 				else if( lpObj->pChaosBox[n].m_Level == 11 )

  00192	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  00199	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0019c	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001a2	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001a7	83 f8 0b	 cmp	 eax, 11			; 0000000bH
  001aa	75 11		 jne	 SHORT $LN16@PlusItemLe

; 1453 : 				{
; 1454 : 					Plus11ItemCount++;

  001ac	8b 45 d8	 mov	 eax, DWORD PTR _Plus11ItemCount$[ebp]
  001af	83 c0 01	 add	 eax, 1
  001b2	89 45 d8	 mov	 DWORD PTR _Plus11ItemCount$[ebp], eax

; 1455 : 					PlusItemPos = n;

  001b5	8b 45 c8	 mov	 eax, DWORD PTR _n$4[ebp]
  001b8	89 45 e0	 mov	 DWORD PTR _PlusItemPos$[ebp], eax

; 1456 : 				}

  001bb	eb 34		 jmp	 SHORT $LN19@PlusItemLe
$LN16@PlusItemLe:

; 1457 : 				else if( lpObj->pChaosBox[n].m_Level == 12 )

  001bd	69 45 c8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$4[ebp], 168
  001c4	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001c7	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001cd	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001d2	83 f8 0c	 cmp	 eax, 12			; 0000000cH
  001d5	75 11		 jne	 SHORT $LN18@PlusItemLe

; 1458 : 				{
; 1459 : 					Plus12ItemCount++;

  001d7	8b 45 d4	 mov	 eax, DWORD PTR _Plus12ItemCount$[ebp]
  001da	83 c0 01	 add	 eax, 1
  001dd	89 45 d4	 mov	 DWORD PTR _Plus12ItemCount$[ebp], eax

; 1460 : 					PlusItemPos = n;

  001e0	8b 45 c8	 mov	 eax, DWORD PTR _n$4[ebp]
  001e3	89 45 e0	 mov	 DWORD PTR _PlusItemPos$[ebp], eax

; 1461 : 				}

  001e6	eb 09		 jmp	 SHORT $LN19@PlusItemLe
$LN18@PlusItemLe:

; 1462 : #endif
; 1463 : 				else
; 1464 : 				{
; 1465 : 					OtherItemFound++;

  001e8	8b 45 dc	 mov	 eax, DWORD PTR _OtherItemFound$[ebp]
  001eb	83 c0 01	 add	 eax, 1
  001ee	89 45 dc	 mov	 DWORD PTR _OtherItemFound$[ebp], eax
$LN19@PlusItemLe:

; 1466 : 				}
; 1467 : 			}
; 1468 : 		}
; 1469 : 	}

  001f1	e9 79 fe ff ff	 jmp	 $LN2@PlusItemLe
$LN3@PlusItemLe:

; 1470 : 
; 1471 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1472 : 	if( iCharmOfLuckCount > 10 )
; 1473 : 	{
; 1474 : 		PMSG_CHAOSMIXRESULT	pMixResult;
; 1475 : 		PHeadSetB((LPBYTE)&pMixResult, 0x86, sizeof( pMixResult ));
; 1476 : 
; 1477 : 		LogAddTD("[PlusItemLevel] [%s][%s] CBMix Charm of luck over 10% (%d)", 
; 1478 : 			   lpObj->AccountID, lpObj->Name, iCharmOfLuckCount );
; 1479 : 		pMixResult.Result		= 0xF0;
; 1480 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMixResult, pMixResult.h.size);
; 1481 : 		lpObj->ChaosLock = FALSE;
; 1482 : 		return FALSE;
; 1483 : 	}
; 1484 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1485 : 
; 1486 : 	if( OtherItemFound )

  001f6	83 7d dc 00	 cmp	 DWORD PTR _OtherItemFound$[ebp], 0
  001fa	74 07		 je	 SHORT $LN20@PlusItemLe

; 1487 : 	{	// 조합할수 없다
; 1488 : 		return FALSE;

  001fc	33 c0		 xor	 eax, eax
  001fe	e9 94 06 00 00	 jmp	 $LN1@PlusItemLe
$LN20@PlusItemLe:

; 1489 : 	}
; 1490 : #ifdef ADD_CHAOSMIXCHARM_ITEM_20080702
; 1491 : 	// 카오스조합부적이 1개 이상이면 조합 할수 없다.
; 1492 : 	if( iChaosMixCharmCnt > 1 )
; 1493 : 	{
; 1494 : 	/*
; 1495 : 	LogAddTD("[PlusItemLevel] [%s][%s] CBMix Not Enough Money [%d] need zen [%d]", 
; 1496 : 	lpObj->AccountID, lpObj->Name, lpObj->Money, lpObj->ChaosMoney);
; 1497 : 		*/
; 1498 : 		PMSG_CHAOSMIXRESULT	pMsg;
; 1499 : 		PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));
; 1500 : 		pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다
; 1501 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 1502 : 		lpObj->ChaosLock = FALSE;
; 1503 : 		return FALSE;
; 1504 : 	}
; 1505 : #endif //ADD_CHAOSMIXCHARM_ITEM_20080702
; 1506 : 
; 1507 : 	int MixType = 0;

  00203	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _MixType$[ebp], 0

; 1508 : 
; 1509 : #ifdef ITEM_12_13_20040401 // 이상이상 아래 두줄..
; 1510 : 
; 1511 : 	lpObj->ChaosMoney = 0;	

  0020a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0020d	c7 80 b4 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3252], 0

; 1512 : 
; 1513 : 	if( Plus9ItemCount == 1 &&  ChaosGemCount == 1 && 
; 1514 : 		//BlessGemCount >= 1 && SoulGemCount >= 1 &&
; 1515 : 		BlessGemCount == 1 && SoulGemCount == 1 && 
; 1516 : 		Plus10ItemCount == 0 && Plus11ItemCount == 0 && Plus12ItemCount == 0 )

  00217	83 7d e8 01	 cmp	 DWORD PTR _Plus9ItemCount$[ebp], 1
  0021b	75 4f		 jne	 SHORT $LN21@PlusItemLe
  0021d	83 7d f4 01	 cmp	 DWORD PTR _ChaosGemCount$[ebp], 1
  00221	75 49		 jne	 SHORT $LN21@PlusItemLe
  00223	83 7d f0 01	 cmp	 DWORD PTR _BlessGemCount$[ebp], 1
  00227	75 43		 jne	 SHORT $LN21@PlusItemLe
  00229	83 7d ec 01	 cmp	 DWORD PTR _SoulGemCount$[ebp], 1
  0022d	75 3d		 jne	 SHORT $LN21@PlusItemLe
  0022f	83 7d e4 00	 cmp	 DWORD PTR _Plus10ItemCount$[ebp], 0
  00233	75 37		 jne	 SHORT $LN21@PlusItemLe
  00235	83 7d d8 00	 cmp	 DWORD PTR _Plus11ItemCount$[ebp], 0
  00239	75 31		 jne	 SHORT $LN21@PlusItemLe
  0023b	83 7d d4 00	 cmp	 DWORD PTR _Plus12ItemCount$[ebp], 0
  0023f	75 2b		 jne	 SHORT $LN21@PlusItemLe

; 1517 : 	{	// +10 조합
; 1518 : 		MixType = CHAOS_TYPE_UPGRADE_10;

  00241	c7 45 c4 03 00
	00 00		 mov	 DWORD PTR _MixType$[ebp], 3

; 1519 : 		lpObj->ChaosMoney = 2000000;

  00248	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0024b	c7 80 b4 0c 00
	00 80 84 1e 00	 mov	 DWORD PTR [eax+3252], 2000000 ; 001e8480H

; 1520 : 		ExtraBlessGemCount = BlessGemCount - 1;

  00255	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  00258	83 e8 01	 sub	 eax, 1
  0025b	89 45 d0	 mov	 DWORD PTR _ExtraBlessGemCount$[ebp], eax

; 1521 : 		ExtraSoulGemCount = SoulGemCount - 1;

  0025e	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  00261	83 e8 01	 sub	 eax, 1
  00264	89 45 cc	 mov	 DWORD PTR _ExtraSoulGemCount$[ebp], eax

; 1522 : 	}

  00267	e9 f7 00 00 00	 jmp	 $LN27@PlusItemLe
$LN21@PlusItemLe:

; 1523 : 	else if( Plus10ItemCount == 1 &&  ChaosGemCount == 1 && 
; 1524 : 			 //BlessGemCount >= 2 && SoulGemCount >= 2 && 
; 1525 : 			 BlessGemCount == 2 && SoulGemCount == 2 && 
; 1526 : 			 Plus9ItemCount == 0 && Plus11ItemCount == 0 && Plus12ItemCount == 0 )

  0026c	83 7d e4 01	 cmp	 DWORD PTR _Plus10ItemCount$[ebp], 1
  00270	75 4f		 jne	 SHORT $LN23@PlusItemLe
  00272	83 7d f4 01	 cmp	 DWORD PTR _ChaosGemCount$[ebp], 1
  00276	75 49		 jne	 SHORT $LN23@PlusItemLe
  00278	83 7d f0 02	 cmp	 DWORD PTR _BlessGemCount$[ebp], 2
  0027c	75 43		 jne	 SHORT $LN23@PlusItemLe
  0027e	83 7d ec 02	 cmp	 DWORD PTR _SoulGemCount$[ebp], 2
  00282	75 3d		 jne	 SHORT $LN23@PlusItemLe
  00284	83 7d e8 00	 cmp	 DWORD PTR _Plus9ItemCount$[ebp], 0
  00288	75 37		 jne	 SHORT $LN23@PlusItemLe
  0028a	83 7d d8 00	 cmp	 DWORD PTR _Plus11ItemCount$[ebp], 0
  0028e	75 31		 jne	 SHORT $LN23@PlusItemLe
  00290	83 7d d4 00	 cmp	 DWORD PTR _Plus12ItemCount$[ebp], 0
  00294	75 2b		 jne	 SHORT $LN23@PlusItemLe

; 1527 : 	{	// +11 조합
; 1528 : 		MixType = CHAOS_TYPE_UPGRADE_11;

  00296	c7 45 c4 04 00
	00 00		 mov	 DWORD PTR _MixType$[ebp], 4

; 1529 : 		lpObj->ChaosMoney = 4000000;

  0029d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002a0	c7 80 b4 0c 00
	00 00 09 3d 00	 mov	 DWORD PTR [eax+3252], 4000000 ; 003d0900H

; 1530 : 		ExtraBlessGemCount = BlessGemCount - 2;

  002aa	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  002ad	83 e8 02	 sub	 eax, 2
  002b0	89 45 d0	 mov	 DWORD PTR _ExtraBlessGemCount$[ebp], eax

; 1531 : 		ExtraSoulGemCount = SoulGemCount - 2;

  002b3	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  002b6	83 e8 02	 sub	 eax, 2
  002b9	89 45 cc	 mov	 DWORD PTR _ExtraSoulGemCount$[ebp], eax

; 1532 : 	}	

  002bc	e9 a2 00 00 00	 jmp	 $LN27@PlusItemLe
$LN23@PlusItemLe:

; 1533 : 	else if( Plus11ItemCount == 1 &&  ChaosGemCount == 1 && 
; 1534 : 			 //BlessGemCount >= 3 && SoulGemCount >= 3 && 
; 1535 : 			 BlessGemCount == 3 && SoulGemCount == 3 && 
; 1536 : 			 Plus9ItemCount == 0 && Plus10ItemCount == 0 && Plus12ItemCount == 0 )

  002c1	83 7d d8 01	 cmp	 DWORD PTR _Plus11ItemCount$[ebp], 1
  002c5	75 4c		 jne	 SHORT $LN25@PlusItemLe
  002c7	83 7d f4 01	 cmp	 DWORD PTR _ChaosGemCount$[ebp], 1
  002cb	75 46		 jne	 SHORT $LN25@PlusItemLe
  002cd	83 7d f0 03	 cmp	 DWORD PTR _BlessGemCount$[ebp], 3
  002d1	75 40		 jne	 SHORT $LN25@PlusItemLe
  002d3	83 7d ec 03	 cmp	 DWORD PTR _SoulGemCount$[ebp], 3
  002d7	75 3a		 jne	 SHORT $LN25@PlusItemLe
  002d9	83 7d e8 00	 cmp	 DWORD PTR _Plus9ItemCount$[ebp], 0
  002dd	75 34		 jne	 SHORT $LN25@PlusItemLe
  002df	83 7d e4 00	 cmp	 DWORD PTR _Plus10ItemCount$[ebp], 0
  002e3	75 2e		 jne	 SHORT $LN25@PlusItemLe
  002e5	83 7d d4 00	 cmp	 DWORD PTR _Plus12ItemCount$[ebp], 0
  002e9	75 28		 jne	 SHORT $LN25@PlusItemLe

; 1537 : 	{	// +12 조합
; 1538 : 		MixType = CHAOS_TYPE_UPGRADE_12;

  002eb	c7 45 c4 16 00
	00 00		 mov	 DWORD PTR _MixType$[ebp], 22 ; 00000016H

; 1539 : #ifdef FOR_CHINA	// 중국은 조합 비용 증가
; 1540 : 		lpObj->ChaosMoney = 8000000;
; 1541 : #else
; 1542 : 		lpObj->ChaosMoney = 6000000;

  002f2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002f5	c7 80 b4 0c 00
	00 80 8d 5b 00	 mov	 DWORD PTR [eax+3252], 6000000 ; 005b8d80H

; 1543 : #endif
; 1544 : 		ExtraBlessGemCount = BlessGemCount - 3;

  002ff	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  00302	83 e8 03	 sub	 eax, 3
  00305	89 45 d0	 mov	 DWORD PTR _ExtraBlessGemCount$[ebp], eax

; 1545 : 		ExtraSoulGemCount = SoulGemCount - 3;

  00308	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  0030b	83 e8 03	 sub	 eax, 3
  0030e	89 45 cc	 mov	 DWORD PTR _ExtraSoulGemCount$[ebp], eax

; 1546 : 	}

  00311	eb 50		 jmp	 SHORT $LN27@PlusItemLe
$LN25@PlusItemLe:

; 1547 : 	else if( Plus12ItemCount == 1 &&  ChaosGemCount == 1 && 
; 1548 : 			 //BlessGemCount >= 4 && SoulGemCount >= 4 && 
; 1549 : 			 BlessGemCount == 4 && SoulGemCount == 4 && 
; 1550 : 			 Plus9ItemCount == 0 && Plus10ItemCount == 0 && Plus11ItemCount == 0 )

  00313	83 7d d4 01	 cmp	 DWORD PTR _Plus12ItemCount$[ebp], 1
  00317	75 4a		 jne	 SHORT $LN27@PlusItemLe
  00319	83 7d f4 01	 cmp	 DWORD PTR _ChaosGemCount$[ebp], 1
  0031d	75 44		 jne	 SHORT $LN27@PlusItemLe
  0031f	83 7d f0 04	 cmp	 DWORD PTR _BlessGemCount$[ebp], 4
  00323	75 3e		 jne	 SHORT $LN27@PlusItemLe
  00325	83 7d ec 04	 cmp	 DWORD PTR _SoulGemCount$[ebp], 4
  00329	75 38		 jne	 SHORT $LN27@PlusItemLe
  0032b	83 7d e8 00	 cmp	 DWORD PTR _Plus9ItemCount$[ebp], 0
  0032f	75 32		 jne	 SHORT $LN27@PlusItemLe
  00331	83 7d e4 00	 cmp	 DWORD PTR _Plus10ItemCount$[ebp], 0
  00335	75 2c		 jne	 SHORT $LN27@PlusItemLe
  00337	83 7d d8 00	 cmp	 DWORD PTR _Plus11ItemCount$[ebp], 0
  0033b	75 26		 jne	 SHORT $LN27@PlusItemLe

; 1551 : 	{	// +13 조합
; 1552 : 		MixType = CHAOS_TYPE_UPGRADE_13;

  0033d	c7 45 c4 17 00
	00 00		 mov	 DWORD PTR _MixType$[ebp], 23 ; 00000017H

; 1553 : #ifdef FOR_CHINA	// 중국은 조합 비용 증가
; 1554 : 		lpObj->ChaosMoney = 16000000;
; 1555 : #else
; 1556 : 		lpObj->ChaosMoney = 8000000;

  00344	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00347	c7 80 b4 0c 00
	00 00 12 7a 00	 mov	 DWORD PTR [eax+3252], 8000000 ; 007a1200H

; 1557 : #endif
; 1558 : 		ExtraBlessGemCount = BlessGemCount - 4;

  00351	8b 45 f0	 mov	 eax, DWORD PTR _BlessGemCount$[ebp]
  00354	83 e8 04	 sub	 eax, 4
  00357	89 45 d0	 mov	 DWORD PTR _ExtraBlessGemCount$[ebp], eax

; 1559 : 		ExtraSoulGemCount = SoulGemCount - 4;

  0035a	8b 45 ec	 mov	 eax, DWORD PTR _SoulGemCount$[ebp]
  0035d	83 e8 04	 sub	 eax, 4
  00360	89 45 cc	 mov	 DWORD PTR _ExtraSoulGemCount$[ebp], eax
$LN27@PlusItemLe:

; 1560 : 	}
; 1561 : #else
; 1562 : 	if( Plus9ItemCount == 1 &&  ChaosGemCount == 1 && 
; 1563 : 		BlessGemCount == 1 && SoulGemCount == 1 && Plus10ItemCount == 0)
; 1564 : 	{	// +10조합
; 1565 : 		MixType = 1;
; 1566 : 		lpObj->ChaosMoney = 2000000;
; 1567 : 	}
; 1568 : 	else if( Plus10ItemCount == 1 &&  ChaosGemCount == 1 && 
; 1569 : 			 BlessGemCount == 2 && SoulGemCount == 2 && Plus9ItemCount == 0 )
; 1570 : 	{	// +11 조합
; 1571 : 		MixType = 2;
; 1572 : 		lpObj->ChaosMoney = 4000000;
; 1573 : 	}
; 1574 : 	else {
; 1575 : 		return FALSE;		//#BUGFIX_20040701	-> 일반조합이 아닌 카오스무기조합으로 +10, +11.. 무기들을 혼석만으로 그냥 만들 수 있었다.
; 1576 : 	}
; 1577 : #endif	
; 1578 : 
; 1579 : #ifdef CHAOS_MIX_UPGRADE
; 1580 : 	if( MixType != mixType )

  00363	8b 45 c4	 mov	 eax, DWORD PTR _MixType$[ebp]
  00366	3b 45 0c	 cmp	 eax, DWORD PTR _mixType$[ebp]
  00369	74 07		 je	 SHORT $LN28@PlusItemLe

; 1581 : 		MixType = 0;		// 해당 조합 타입이 아니다

  0036b	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _MixType$[ebp], 0
$LN28@PlusItemLe:

; 1582 : #endif
; 1583 : 
; 1584 : 	if( MixType == 0 )

  00372	83 7d c4 00	 cmp	 DWORD PTR _MixType$[ebp], 0
  00376	75 07		 jne	 SHORT $LN29@PlusItemLe

; 1585 : 	{
; 1586 : 		return FALSE;

  00378	33 c0		 xor	 eax, eax
  0037a	e9 18 05 00 00	 jmp	 $LN1@PlusItemLe
$LN29@PlusItemLe:

; 1587 : 	}
; 1588 : 
; 1589 : 	PMSG_CHAOSMIXRESULT	pMsg;
; 1590 : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  0037f	6a 09		 push	 9
  00381	68 86 00 00 00	 push	 134			; 00000086H
  00386	8d 45 b8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00389	50		 push	 eax
  0038a	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0038f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1591 : 	pMsg.Result		= 0x00;	

  00392	c6 45 bb 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 1592 : 	
; 1593 : 	lpObj->ChaosLock = TRUE;	

  00396	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00399	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 1594 : 
; 1595 : #ifdef EXTEND_LOG_SYSTEM_03_20060816
; 1596 : 	LogPlusItemLevelChaosItem(lpObj, MixType);
; 1597 : #else
; 1598 : 	LogPlusItemLevelChaosItem(lpObj);

  003a3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003a6	50		 push	 eax
  003a7	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  003aa	e8 00 00 00 00	 call	 ?LogPlusItemLevelChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::LogPlusItemLevelChaosItem

; 1599 : #endif // EXTEND_LOG_SYSTEM_03_20060816
; 1600 : 	LogAddTD("[PlusItemLevel] Chaos Mix Start");	

  003af	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@BGIGBHFB@?$FLPlusItemLevel?$FN?5Chaos?5Mix?5Start@
  003b4	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003ba	83 c4 04	 add	 esp, 4

; 1601 : 
; 1602 : 
; 1603 : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - +10, +11, +12, +13 아이템
; 1604 : 	INT iChaosTaxMoney		= (INT)((INT64)lpObj->ChaosMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 1605 : 	if (iChaosTaxMoney < 0)
; 1606 : 		iChaosTaxMoney		= 0;
; 1607 : 
; 1608 : 	lpObj->ChaosMoney		= lpObj->ChaosMoney + iChaosTaxMoney;
; 1609 : 	if (lpObj->ChaosMoney < 0)
; 1610 : 		lpObj->ChaosMoney	= 0;
; 1611 : #endif
; 1612 : 
; 1613 : 	if( lpObj->Money < lpObj->ChaosMoney )

  003bd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003c0	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003c3	8b 90 b0 00 00
	00		 mov	 edx, DWORD PTR [eax+176]
  003c9	3b 91 b4 0c 00
	00		 cmp	 edx, DWORD PTR [ecx+3252]
  003cf	7d 62		 jge	 SHORT $LN30@PlusItemLe

; 1614 : 	{			
; 1615 : 		LogAddTD("[PlusItemLevel] [%s][%s] CBMix Not Enough Money [%d] need zen [%d]", 

  003d1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003d4	8b 88 b4 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3252]
  003da	51		 push	 ecx
  003db	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003de	8b 82 b0 00 00
	00		 mov	 eax, DWORD PTR [edx+176]
  003e4	50		 push	 eax
  003e5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003e8	83 c1 73	 add	 ecx, 115		; 00000073H
  003eb	51		 push	 ecx
  003ec	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003ef	83 c2 68	 add	 edx, 104		; 00000068H
  003f2	52		 push	 edx
  003f3	68 00 00 00 00	 push	 OFFSET ??_C@_0ED@HJNGDDFB@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
  003f8	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003fe	83 c4 14	 add	 esp, 20			; 00000014H

; 1616 : 			   lpObj->AccountID, lpObj->Name, lpObj->Money, lpObj->ChaosMoney);
; 1617 : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  00401	c6 45 bb 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 1618 : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00405	0f b6 45 b9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00409	50		 push	 eax
  0040a	8d 4d b8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0040d	51		 push	 ecx
  0040e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00411	8b 02		 mov	 eax, DWORD PTR [edx]
  00413	50		 push	 eax
  00414	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00419	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1619 : 		lpObj->ChaosLock = FALSE;

  0041c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0041f	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1620 : 		return TRUE;

  00429	b8 01 00 00 00	 mov	 eax, 1
  0042e	e9 64 04 00 00	 jmp	 $LN1@PlusItemLe
$LN30@PlusItemLe:

; 1621 : 	}	
; 1622 : 
; 1623 : 	lpObj->Money -= lpObj->ChaosMoney;

  00433	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00436	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00439	8b 90 b0 00 00
	00		 mov	 edx, DWORD PTR [eax+176]
  0043f	2b 91 b4 0c 00
	00		 sub	 edx, DWORD PTR [ecx+3252]
  00445	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00448	89 90 b0 00 00
	00		 mov	 DWORD PTR [eax+176], edx

; 1624 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - +10, +11, +12, +13 아이템
; 1625 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 1626 : #endif
; 1627 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);

  0044e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00451	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00457	51		 push	 ecx
  00458	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0045b	8b 02		 mov	 eax, DWORD PTR [edx]
  0045d	50		 push	 eax
  0045e	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  00463	83 c4 08	 add	 esp, 8

; 1628 : 
; 1629 : #ifdef MODIFY_ITEM_UPGRADE_MIX_RATE_FIX_20080627
; 1630 : 	BYTE btItemGrade = 0;
; 1631 : 
; 1632 : 	if( lpObj->pChaosBox[PlusItemPos].IsExtItem() == TRUE 
; 1633 : 		|| lpObj->pChaosBox[PlusItemPos].IsSetItem() == TRUE
; 1634 : 		|| g_kItemSystemFor380.Is380Item( &lpObj->pChaosBox[PlusItemPos] ) == TRUE
; 1635 : 	  )
; 1636 : 	{
; 1637 : 		btItemGrade = 2;
; 1638 : 	}
; 1639 : #ifndef MODIFY_PLUSITEMMIX_SOCKET_ITEM_DIVISION_20080905				// !! NOT
; 1640 : 	#ifdef MODIFY_ITEM_SOCKET_OPTION_BUGFIX_02_20080630
; 1641 : 	else if( g_SocketOptionSystem.IsSocketItem( &lpObj->pChaosBox[PlusItemPos] ) == true )
; 1642 : 	#else
; 1643 : 	else if( g_SocketOptionSystem.IsEnableSocketItem( &lpObj->pChaosBox[PlusItemPos] ) == true )
; 1644 : 	#endif // MODIFY_ITEM_SOCKET_OPTION_BUGFIX_02_20080630
; 1645 : 	{
; 1646 : 		btItemGrade = 3;
; 1647 : 	}
; 1648 : #endif // MODIFY_PLUSITEMMIX_SOCKET_ITEM_DIVISION_20080905
; 1649 : 	else
; 1650 : 	{
; 1651 : 		btItemGrade = 1;
; 1652 : 	}
; 1653 : 	
; 1654 : #ifdef MODIFY_PLUSITEMMIX_SOCKET_ITEM_DIVISION_20080905
; 1655 : 	if( g_SocketOptionSystem.IsSocketItem( &lpObj->pChaosBox[PlusItemPos] ) == true )
; 1656 : 	{
; 1657 : 		btItemGrade = 3;
; 1658 : 	}
; 1659 : #endif // MODIFY_PLUSITEMMIX_SOCKET_ITEM_DIVISION_20080905
; 1660 : 	
; 1661 : #ifdef MODIFY_PLUS_ITEM_MIX_WING_SET_NORMAL_ITEM_20080916
; 1662 : 	if(	( ( lpObj->pChaosBox[PlusItemPos].m_Type >= MAKE_ITEMNUM( 12, 0 ) )
; 1663 : 		&& ( lpObj->pChaosBox[PlusItemPos].m_Type <= MAKE_ITEMNUM( 12, 6 ) ) )
; 1664 : #if GAME_VERSION >= G_V_S3_E2
; 1665 : 		|| ( ( lpObj->pChaosBox[PlusItemPos].m_Type >= MAKE_ITEMNUM( 12, 36 ) )
; 1666 : 		&& ( lpObj->pChaosBox[PlusItemPos].m_Type <= MAKE_ITEMNUM( 12, 43 ) ) )
; 1667 : #endif
; 1668 : #if GAME_VERSION >= G_V_99B
; 1669 : 		|| ( lpObj->pChaosBox[PlusItemPos].m_Type == MAKE_ITEMNUM( 13, 30 ) )
; 1670 : #endif
; 1671 : 	  )
; 1672 : 	{
; 1673 : 		btItemGrade = 1;
; 1674 : 	}
; 1675 : #endif // MODIFY_PLUS_ITEM_MIX_WING_SET_NORMAL_ITEM_20080916
; 1676 : 
; 1677 : 	// 10레벨 조합일 경우
; 1678 : 	if( lpObj->pChaosBox[PlusItemPos].m_Level == 9 )
; 1679 : 	{
; 1680 : 		// 일반 아이템의 경우 60% 확률 적용
; 1681 : 		if( btItemGrade == 1 )
; 1682 : 		{
; 1683 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination10Rate+20;
; 1684 : 		}
; 1685 : 		// 엑설런트, 세트, 380 아이템의 경우 50% 확률 적용
; 1686 : 		else if( btItemGrade == 2 )
; 1687 : 		{
; 1688 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination10Rate+10;
; 1689 : 		}
; 1690 : 		// 소켓 아이템의 경우 40% 확률 적용
; 1691 : 		else if( btItemGrade == 3 )
; 1692 : 		{
; 1693 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination10Rate;
; 1694 : 		}
; 1695 : 	}
; 1696 : #ifdef UPDATE_CHAOSMIX_LEVELUP_RATE_20080904
; 1697 : 	// 11레벨 조합일 경우
; 1698 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 10 )
; 1699 : 	{
; 1700 : 		if( btItemGrade == 1 )
; 1701 : 		{
; 1702 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate+20;
; 1703 : 		}
; 1704 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1705 : 		else if( btItemGrade == 2 )
; 1706 : 		{
; 1707 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate+10;
; 1708 : 		}
; 1709 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1710 : 		else if( btItemGrade == 3 )
; 1711 : 		{
; 1712 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate;
; 1713 : 		}
; 1714 : 	}
; 1715 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 11 )
; 1716 : 	{
; 1717 : 		// 일반 아이템의 경우 55% 확률 적용
; 1718 : 		if( btItemGrade == 1 )
; 1719 : 		{
; 1720 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate+20;
; 1721 : 		}
; 1722 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1723 : 		else if( btItemGrade == 2 )
; 1724 : 		{
; 1725 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate+10;
; 1726 : 		}
; 1727 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1728 : 		else if( btItemGrade == 3 )
; 1729 : 		{
; 1730 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate;
; 1731 : 		}
; 1732 : 	}
; 1733 : 	// 12~13레벨 조합일 경우
; 1734 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 12 )
; 1735 : 	{
; 1736 : 		// 일반 아이템의 경우 55% 확률 적용
; 1737 : 		if( btItemGrade == 1 )
; 1738 : 		{
; 1739 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate+20;
; 1740 : 		}
; 1741 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1742 : 		else if( btItemGrade == 2 )
; 1743 : 		{
; 1744 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate+10;
; 1745 : 		}
; 1746 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1747 : 		else if( btItemGrade == 3 )
; 1748 : 		{
; 1749 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate;
; 1750 : 		}
; 1751 : 	}
; 1752 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 13 )
; 1753 : 	{
; 1754 : 		// 일반 아이템의 경우 55% 확률 적용
; 1755 : 		if( btItemGrade == 1 )
; 1756 : 		{
; 1757 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate+20;
; 1758 : 		}
; 1759 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1760 : 		else if( btItemGrade == 2 )
; 1761 : 		{
; 1762 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate+10;
; 1763 : 		}
; 1764 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1765 : 		else if( btItemGrade == 3 )
; 1766 : 		{
; 1767 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate;
; 1768 : 		}
; 1769 : 	}
; 1770 : #else	// UPDATE_CHAOSMIX_LEVELUP_RATE_20080904	
; 1771 : 	// 11~13레벨 조합일 경우
; 1772 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 10 )
; 1773 : 	{
; 1774 : 		if( btItemGrade == 1 )
; 1775 : 		{
; 1776 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate+20;
; 1777 : 		}
; 1778 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1779 : 		else if( btItemGrade == 2 )
; 1780 : 		{
; 1781 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate+10;
; 1782 : 		}
; 1783 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1784 : 		else if( btItemGrade == 3 )
; 1785 : 		{
; 1786 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate;
; 1787 : 		}
; 1788 : 	}
; 1789 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 11 )
; 1790 : 	{
; 1791 : 		// 일반 아이템의 경우 55% 확률 적용
; 1792 : 		if( btItemGrade == 1 )
; 1793 : 		{
; 1794 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate+20;
; 1795 : 		}
; 1796 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1797 : 		else if( btItemGrade == 2 )
; 1798 : 		{
; 1799 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate+10;
; 1800 : 		}
; 1801 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1802 : 		else if( btItemGrade == 3 )
; 1803 : 		{
; 1804 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate;
; 1805 : 		}
; 1806 : 	}
; 1807 : 	// 12~13레벨 조합일 경우
; 1808 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 12 )
; 1809 : 	{
; 1810 : 		// 일반 아이템의 경우 55% 확률 적용
; 1811 : 		if( btItemGrade == 1 )
; 1812 : 		{
; 1813 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate+20;
; 1814 : 		}
; 1815 : 		// 엑설런트, 세트, 380 아이템의 경우 45% 확률 적용
; 1816 : 		else if( btItemGrade == 2 )
; 1817 : 		{
; 1818 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate+10;
; 1819 : 		}
; 1820 : 		// 소켓 아이템의 경우 35% 확률 적용
; 1821 : 		else if( btItemGrade == 3 )
; 1822 : 		{
; 1823 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate;
; 1824 : 		}
; 1825 : 	}
; 1826 : #endif	// UPDATE_CHAOSMIX_LEVELUP_RATE_20080904
; 1827 : 	else
; 1828 : 	{
; 1829 : 		lpObj->ChaosSuccessRate = 45;
; 1830 : 	}
; 1831 : #else
; 1832 : 
; 1833 : 	if( lpObj->pChaosBox[PlusItemPos].m_Level == 9 )

  00466	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  0046d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00470	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00476	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0047b	83 f8 09	 cmp	 eax, 9
  0047e	75 11		 jne	 SHORT $LN31@PlusItemLe

; 1834 : 	{
; 1835 : 		lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination10Rate;

  00480	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00483	8b 0d 7c 00 00
	00		 mov	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+124
  00489	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 1836 : 	}

  0048f	eb 7f		 jmp	 SHORT $LN37@PlusItemLe
$LN31@PlusItemLe:

; 1837 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 10)

  00491	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00498	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0049b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  004a1	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  004a6	83 f8 0a	 cmp	 eax, 10			; 0000000aH
  004a9	75 11		 jne	 SHORT $LN33@PlusItemLe

; 1838 : 	{
; 1839 : 		lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination11Rate;

  004ab	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ae	8b 0d 80 00 00
	00		 mov	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+128
  004b4	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 1840 : 	}

  004ba	eb 54		 jmp	 SHORT $LN37@PlusItemLe
$LN33@PlusItemLe:

; 1841 : #ifdef ITEM_12_13_20040401
; 1842 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 11)

  004bc	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  004c3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  004c6	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  004cc	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  004d1	83 f8 0b	 cmp	 eax, 11			; 0000000bH
  004d4	75 11		 jne	 SHORT $LN35@PlusItemLe

; 1843 : 	{
; 1844 : 		lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination12Rate;

  004d6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004d9	8b 0d 84 00 00
	00		 mov	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+132
  004df	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 1845 : 	}

  004e5	eb 29		 jmp	 SHORT $LN37@PlusItemLe
$LN35@PlusItemLe:

; 1846 : 	else if( lpObj->pChaosBox[PlusItemPos].m_Level == 12)

  004e7	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  004ee	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  004f1	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  004f7	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  004fc	83 f8 0c	 cmp	 eax, 12			; 0000000cH
  004ff	75 0f		 jne	 SHORT $LN37@PlusItemLe

; 1847 : 	{
; 1848 : 		lpObj->ChaosSuccessRate = g_GlobalConfig.m_iCombination13Rate;

  00501	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00504	8b 0d 88 00 00
	00		 mov	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+136
  0050a	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx
$LN37@PlusItemLe:

; 1849 : 	}
; 1850 : #else
; 1851 : 	else
; 1852 : 	{
; 1853 : 		lpObj->ChaosSuccessRate = 45;
; 1854 : 	}
; 1855 : #endif
; 1856 : 
; 1857 : #endif // MODIFY_ITEM_UPGRADE_MIX_RATE_FIX_20080627
; 1858 : 
; 1859 : 	if( lpObj->pChaosBox[PlusItemPos].m_Option2 != 0 )

  00510	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00517	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0051a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00520	0f b6 44 02 79	 movzx	 eax, BYTE PTR [edx+eax+121]
  00525	85 c0		 test	 eax, eax
  00527	74 15		 je	 SHORT $LN38@PlusItemLe

; 1860 : 	{
; 1861 : 		//lpObj->ChaosSuccessRate += 25;		
; 1862 : 		lpObj->ChaosSuccessRate += 20;		

  00529	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0052c	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00532	83 c1 14	 add	 ecx, 20			; 00000014H
  00535	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00538	89 8a b8 0c 00
	00		 mov	 DWORD PTR [edx+3256], ecx
$LN38@PlusItemLe:

; 1863 : 	}
; 1864 : 
; 1865 : #ifdef ITEM_12_13_20040401
; 1866 : 	// 12, 13 엑설런트 아이템 증가에 대한 우려로 주석처리
; 1867 : 	/*
; 1868 : 	if( ExtraBlessGemCount >= 1 && ExtraBlessGemCount <= MAX_CHAOSBOXITEMS )
; 1869 : 	{
; 1870 : 		// 축석의 OldValue = 100000
; 1871 : 		lpObj->ChaosSuccessRate += ExtraBlessGemCount * 100000 / 20000;
; 1872 : 	}
; 1873 : 
; 1874 : 	if( ExtraSoulGemCount >= 1 && ExtraSoulGemCount <= MAX_CHAOSBOXITEMS)
; 1875 : 	{
; 1876 : 		// 영석의 OldValue = 70000
; 1877 : 		lpObj->ChaosSuccessRate += ExtraSoulGemCount * 70000 / 20000; 
; 1878 : 	}
; 1879 : 	*/
; 1880 : 
; 1881 : 	if( lpObj->ChaosSuccessRate > g_GlobalConfig.m_iMaxCombinationRate )

  0053e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00541	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00547	3b 0d 8c 00 00
	00		 cmp	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+140
  0054d	7e 0f		 jle	 SHORT $LN39@PlusItemLe

; 1882 : 			lpObj->ChaosSuccessRate = g_GlobalConfig.m_iMaxCombinationRate;	// +10, +11, +12 아이템 최대 성공률은 75%

  0054f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00552	8b 0d 8c 00 00
	00		 mov	 ecx, DWORD PTR ?g_GlobalConfig@@3VCGlobalConfig@@A+140
  00558	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx
$LN39@PlusItemLe:

; 1883 : #endif 
; 1884 : 
; 1885 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1886 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 1887 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1888 : 
; 1889 : 	if( (rand()%100) < lpObj->ChaosSuccessRate )

  0055e	e8 00 00 00 00	 call	 _rand
  00563	99		 cdq
  00564	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00569	f7 f9		 idiv	 ecx
  0056b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0056e	3b 90 b8 0c 00
	00		 cmp	 edx, DWORD PTR [eax+3256]
  00574	0f 8d 7b 02 00
	00		 jge	 $LN40@PlusItemLe

; 1890 : 	{	// 50%확률로 조합성공
; 1891 : 		lpObj->pChaosBox[PlusItemPos].m_Level++;	// 레벨업				

  0057a	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00581	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00584	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0058a	66 8b 44 02 08	 mov	 ax, WORD PTR [edx+eax+8]
  0058f	66 83 c0 01	 add	 ax, 1
  00593	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _PlusItemPos$[ebp], 168
  0059a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0059d	8b 92 ac 0c 00
	00		 mov	 edx, DWORD PTR [edx+3244]
  005a3	66 89 44 0a 08	 mov	 WORD PTR [edx+ecx+8], ax

; 1892 : 		pMsg.Result  = 1;

  005a8	c6 45 bb 01	 mov	 BYTE PTR _pMsg$[ebp+3], 1

; 1893 : 
; 1894 : 		CItem NewItem;

  005ac	8d 8d 10 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$3[ebp]
  005b2	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1895 : 
; 1896 : 		float levelitemdur =  (float)ItemGetDurability(lpObj->pChaosBox[PlusItemPos].m_Type, 

  005b7	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _PlusItemPos$[ebp], 168
  005be	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  005c1	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  005c7	e8 00 00 00 00	 call	 ?IsSetItem@CItem@@QAEHXZ ; CItem::IsSetItem
  005cc	50		 push	 eax
  005cd	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _PlusItemPos$[ebp], 168
  005d4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  005d7	03 8a ac 0c 00
	00		 add	 ecx, DWORD PTR [edx+3244]
  005dd	e8 00 00 00 00	 call	 ?IsExtItem@CItem@@QAEHXZ ; CItem::IsExtItem
  005e2	50		 push	 eax
  005e3	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  005ea	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  005ed	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  005f3	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  005f8	50		 push	 eax
  005f9	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _PlusItemPos$[ebp], 168
  00600	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00603	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00609	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  0060e	51		 push	 ecx
  0060f	e8 00 00 00 00	 call	 ?ItemGetDurability@@YAHHHHH@Z ; ItemGetDurability
  00614	83 c4 10	 add	 esp, 16			; 00000010H
  00617	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0061b	f3 0f 11 85 0c
	ff ff ff	 movss	 DWORD PTR _levelitemdur$2[ebp], xmm0

; 1897 : 													   lpObj->pChaosBox[PlusItemPos].m_Level, 
; 1898 : 												       lpObj->pChaosBox[PlusItemPos].IsExtItem(),
; 1899 : 													   lpObj->pChaosBox[PlusItemPos].IsSetItem());
; 1900 : 		
; 1901 : 		NewItem.m_Level      = lpObj->pChaosBox[PlusItemPos].m_Level;

  00623	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  0062a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0062d	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00633	66 8b 44 02 08	 mov	 ax, WORD PTR [edx+eax+8]
  00638	66 89 85 18 ff
	ff ff		 mov	 WORD PTR _NewItem$3[ebp+8], ax

; 1902 : 		NewItem.m_Durability = levelitemdur*lpObj->pChaosBox[PlusItemPos].m_Durability/lpObj->pChaosBox[PlusItemPos].m_BaseDurability;

  0063f	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00646	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00649	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0064f	f3 0f 10 85 0c
	ff ff ff	 movss	 xmm0, DWORD PTR _levelitemdur$2[ebp]
  00657	f3 0f 59 44 02
	24		 mulss	 xmm0, DWORD PTR [edx+eax+36]
  0065d	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00664	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00667	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0066d	f3 0f 5e 44 02
	2c		 divss	 xmm0, DWORD PTR [edx+eax+44]
  00673	f3 0f 11 85 34
	ff ff ff	 movss	 DWORD PTR _NewItem$3[ebp+36], xmm0

; 1903 : 		
; 1904 : #ifdef ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 1905 : 		// 강화옵션은 그대로 가야한다. 시리얼 발급 아님.
; 1906 : 		NewItem.m_JewelOfHarmonyOption = lpObj->pChaosBox[PlusItemPos].m_JewelOfHarmonyOption;
; 1907 : #endif // ADD_JEWEL_OF_HARMONY_SYSTEM_20060530
; 1908 : 
; 1909 : 
; 1910 : #ifdef ADD_ITEM_SOCKET_OPTION_EXTEND_20080422
; 1911 : 		BYTE SocketOption[MAX_SOCKET_SLOT];
; 1912 : 		BYTE SocketBonusOption;
; 1913 : 
; 1914 : 		g_SocketOptionSystem.GetSocketOption( &lpObj->pChaosBox[PlusItemPos], SocketOption, SocketBonusOption );
; 1915 : 
; 1916 : 		NewItem.Convert(lpObj->pChaosBox[PlusItemPos].m_Type, 
; 1917 : 			            lpObj->pChaosBox[PlusItemPos].m_Option1, 
; 1918 : 						lpObj->pChaosBox[PlusItemPos].m_Option2, 
; 1919 : 						lpObj->pChaosBox[PlusItemPos].m_Option3, 
; 1920 : 						lpObj->pChaosBox[PlusItemPos].m_NewOption,
; 1921 : 						lpObj->pChaosBox[PlusItemPos].m_SetOption,
; 1922 : 						lpObj->pChaosBox[PlusItemPos].m_ItemOptionEx,
; 1923 : 						SocketOption,
; 1924 : 						SocketBonusOption);
; 1925 : #else
; 1926 : 	#ifdef ADD_380ITEM_NEWOPTION_20060711
; 1927 : 		NewItem.Convert(lpObj->pChaosBox[PlusItemPos].m_Type, 
; 1928 : 			            lpObj->pChaosBox[PlusItemPos].m_Option1, 
; 1929 : 						lpObj->pChaosBox[PlusItemPos].m_Option2, 
; 1930 : 						lpObj->pChaosBox[PlusItemPos].m_Option3, 
; 1931 : 						lpObj->pChaosBox[PlusItemPos].m_NewOption,
; 1932 : 						lpObj->pChaosBox[PlusItemPos].m_SetOption,
; 1933 : 						lpObj->pChaosBox[PlusItemPos].m_ItemOptionEx);
; 1934 : 	#else
; 1935 : 		NewItem.Convert(lpObj->pChaosBox[PlusItemPos].m_Type, 

  0067b	6a 01		 push	 1
  0067d	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00684	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00687	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0068d	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  00695	50		 push	 eax
  00696	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _PlusItemPos$[ebp], 168
  0069d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  006a0	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  006a6	0f b6 4c 08 7b	 movzx	 ecx, BYTE PTR [eax+ecx+123]
  006ab	51		 push	 ecx
  006ac	69 55 e0 a8 00
	00 00		 imul	 edx, DWORD PTR _PlusItemPos$[ebp], 168
  006b3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006b6	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  006bc	0f b6 54 11 7a	 movzx	 edx, BYTE PTR [ecx+edx+122]
  006c1	52		 push	 edx
  006c2	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  006c9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  006cc	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  006d2	0f b6 44 02 79	 movzx	 eax, BYTE PTR [edx+eax+121]
  006d7	50		 push	 eax
  006d8	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _PlusItemPos$[ebp], 168
  006df	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  006e2	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  006e8	0f b6 4c 08 78	 movzx	 ecx, BYTE PTR [eax+ecx+120]
  006ed	51		 push	 ecx
  006ee	69 55 e0 a8 00
	00 00		 imul	 edx, DWORD PTR _PlusItemPos$[ebp], 168
  006f5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006f8	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  006fe	0f bf 54 11 06	 movsx	 edx, WORD PTR [ecx+edx+6]
  00703	52		 push	 edx
  00704	8d 8d 10 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$3[ebp]
  0070a	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEE@Z ; CItem::Convert

; 1936 : 			            lpObj->pChaosBox[PlusItemPos].m_Option1, 
; 1937 : 						lpObj->pChaosBox[PlusItemPos].m_Option2, 
; 1938 : 						lpObj->pChaosBox[PlusItemPos].m_Option3, 
; 1939 : 						lpObj->pChaosBox[PlusItemPos].m_NewOption,
; 1940 : 						lpObj->pChaosBox[PlusItemPos].m_SetOption);	
; 1941 : 	#endif // ADD_380ITEM_NEWOPTION_20060711
; 1942 : #endif // ADD_ITEM_SOCKET_OPTION_EXTEND_20080422
; 1943 : 		
; 1944 : 		NewItem.m_Number = lpObj->pChaosBox[PlusItemPos].m_Number;

  0070f	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  00716	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00719	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0071f	8b 04 02	 mov	 eax, DWORD PTR [edx+eax]
  00722	89 85 10 ff ff
	ff		 mov	 DWORD PTR _NewItem$3[ebp], eax

; 1945 : 
; 1946 : 		ItemByteConvert(pMsg.ItemInfo, NewItem);

  00728	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  0072e	b9 2a 00 00 00	 mov	 ecx, 42			; 0000002aH
  00733	8d b5 10 ff ff
	ff		 lea	 esi, DWORD PTR _NewItem$3[ebp]
  00739	8b fc		 mov	 edi, esp
  0073b	f3 a5		 rep movsd
  0073d	8d 45 bc	 lea	 eax, DWORD PTR _pMsg$[ebp+4]
  00740	50		 push	 eax
  00741	e8 00 00 00 00	 call	 ?ItemByteConvert@@YAXPAEVCItem@@@Z ; ItemByteConvert
  00746	81 c4 ac 00 00
	00		 add	 esp, 172		; 000000acH

; 1947 : 		
; 1948 : 		ChaosBoxInit(lpObj);

  0074c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0074f	50		 push	 eax
  00750	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00753	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 1949 : 		gObjChaosBoxInsertItemPos(lpObj->m_Index, NewItem, 0, -1);

  00758	6a ff		 push	 -1
  0075a	6a 00		 push	 0
  0075c	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  00762	b9 2a 00 00 00	 mov	 ecx, 42			; 0000002aH
  00767	8d b5 10 ff ff
	ff		 lea	 esi, DWORD PTR _NewItem$3[ebp]
  0076d	8b fc		 mov	 edi, esp
  0076f	f3 a5		 rep movsd
  00771	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00774	8b 08		 mov	 ecx, DWORD PTR [eax]
  00776	51		 push	 ecx
  00777	e8 00 00 00 00	 call	 ?gObjChaosBoxInsertItemPos@@YAEHVCItem@@HH@Z ; gObjChaosBoxInsertItemPos
  0077c	81 c4 b4 00 00
	00		 add	 esp, 180		; 000000b4H

; 1950 : 		gObjChaosItemSet(lpObj->m_Index, 0, 1);		

  00782	6a 01		 push	 1
  00784	6a 00		 push	 0
  00786	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00789	8b 08		 mov	 ecx, DWORD PTR [eax]
  0078b	51		 push	 ecx
  0078c	e8 00 00 00 00	 call	 ?gObjChaosItemSet@@YAXHHE@Z ; gObjChaosItemSet
  00791	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1951 : 
; 1952 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00794	0f b6 45 b9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00798	50		 push	 eax
  00799	8d 4d b8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0079c	51		 push	 ecx
  0079d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  007a0	8b 02		 mov	 eax, DWORD PTR [edx]
  007a2	50		 push	 eax
  007a3	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  007a8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1953 : 
; 1954 : 		//GCUserChaosBoxSend(lpObj);
; 1955 : 		
; 1956 : #ifdef MODIFY_PLUSITEM_CHAOSMIX_LOG_BUGFIX_20070330
; 1957 : 	#ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1958 : 		if( btItemLuckValue != 0 )
; 1959 : 		{
; 1960 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d], CharmRate : %d", 
; 1961 : 					   lpObj->AccountID, lpObj->Name, 
; 1962 : 					   lpObj->ChaosSuccessRate+5, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level, iCharmOfLuckCount);
; 1963 : 		}
; 1964 : 		else
; 1965 : 		{
; 1966 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d], CharmRate : %d", 
; 1967 : 					   lpObj->AccountID, lpObj->Name, 
; 1968 : 					   lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level, iCharmOfLuckCount);
; 1969 : 		}
; 1970 : 	#else
; 1971 : 		if( btItemLuckValue != 0 )
; 1972 : 		{
; 1973 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d]", 
; 1974 : 					   lpObj->AccountID, lpObj->Name, 
; 1975 : 					   lpObj->ChaosSuccessRate+5, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level);
; 1976 : 		}
; 1977 : 		else
; 1978 : 		{
; 1979 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d]", 
; 1980 : 					   lpObj->AccountID, lpObj->Name, 
; 1981 : 					   lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level);
; 1982 : 		}
; 1983 : 	#endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1984 : #else
; 1985 : 	#ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1986 : 		#ifdef ITEM_12_13_20040401
; 1987 : 			// 행운에 대한 내부적 카오스 성공조합률 조정에 따라 +5 로그 추가됨..(비밀누설 가능성 방지)
; 1988 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d], CharmRate : %d", 
; 1989 : 				   lpObj->AccountID, lpObj->Name, 
; 1990 : 				   lpObj->ChaosSuccessRate+5, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level, iCharmOfLuckCount);
; 1991 : 
; 1992 : 		#else
; 1993 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d], CharmRate : %d",
; 1994 : 				lpObj->AccountID, lpObj->Name, 
; 1995 : 				lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level, iCharmOfLuckCount);
; 1996 : 		#endif
; 1997 : 	#else
; 1998 : 		#ifdef ITEM_12_13_20040401
; 1999 : 			// 행운에 대한 내부적 카오스 성공조합률 조정에 따라 +5 로그 추가됨..(비밀누설 가능성 방지)
; 2000 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d]", 

  007ab	0f bf 85 18 ff
	ff ff		 movsx	 eax, WORD PTR _NewItem$3[ebp+8]
  007b2	50		 push	 eax
  007b3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  007b6	8b 91 b4 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3252]
  007bc	52		 push	 edx
  007bd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007c0	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  007c6	51		 push	 ecx
  007c7	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  007ca	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  007d0	83 c0 05	 add	 eax, 5
  007d3	50		 push	 eax
  007d4	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  007d7	83 c1 73	 add	 ecx, 115		; 00000073H
  007da	51		 push	 ecx
  007db	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  007de	83 c2 68	 add	 edx, 104		; 00000068H
  007e1	52		 push	 edx
  007e2	68 00 00 00 00	 push	 OFFSET ??_C@_0DN@JHMDCPGJ@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
  007e7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  007ed	83 c4 1c	 add	 esp, 28			; 0000001cH

; 2001 : 				   lpObj->AccountID, lpObj->Name, 
; 2002 : 				   lpObj->ChaosSuccessRate+5, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level);
; 2003 : 
; 2004 : 		#else
; 2005 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Success %d Money : %d-%d [%d]", 
; 2006 : 				lpObj->AccountID, lpObj->Name, 
; 2007 : 				lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, NewItem.m_Level);
; 2008 : 		#endif
; 2009 : 	#endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2010 : #endif // MODIFY_PLUSITEM_CHAOSMIX_LOG_BUGFIX_20070330
; 2011 : 
; 2012 : 	}

  007f0	e9 90 00 00 00	 jmp	 $LN41@PlusItemLe
$LN40@PlusItemLe:

; 2013 : 	else
; 2014 : 	{	// 50%확률로 조합실패
; 2015 : #ifdef ITEM_12_13_20040401
; 2016 : 		int _itemlebel = lpObj->pChaosBox[PlusItemPos].m_Level+1;

  007f5	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _PlusItemPos$[ebp], 168
  007fc	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  007ff	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00805	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0080a	83 c0 01	 add	 eax, 1
  0080d	89 85 08 ff ff
	ff		 mov	 DWORD PTR __itemlebel$1[ebp], eax

; 2017 : #endif
; 2018 : 
; 2019 : #ifdef ADD_CHAOSMIXCHARM_ITEM_20080702
; 2020 : 		if( iChaosMixCharmCnt )// 카오스조합 부적 사용시
; 2021 : 		{
; 2022 : 			ChaosMixCharmItemUsed( lpObj );
; 2023 : 			//ChaosBoxInit(lpObj);
; 2024 : 			GCUserChaosBoxSend(lpObj);
; 2025 : 			DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2026 : 		}
; 2027 : 		else
; 2028 : 		{
; 2029 : 			ChaosBoxInit(lpObj);
; 2030 : 			GCUserChaosBoxSend(lpObj);
; 2031 : 			DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);
; 2032 : 		}
; 2033 : #else
; 2034 : 		ChaosBoxInit(lpObj);

  00813	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00816	50		 push	 eax
  00817	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0081a	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 2035 : 		GCUserChaosBoxSend(lpObj);

  0081f	6a 00		 push	 0
  00821	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00824	50		 push	 eax
  00825	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  0082a	83 c4 08	 add	 esp, 8

; 2036 : 		DataSend( lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  0082d	0f b6 45 b9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00831	50		 push	 eax
  00832	8d 4d b8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00835	51		 push	 ecx
  00836	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00839	8b 02		 mov	 eax, DWORD PTR [edx]
  0083b	50		 push	 eax
  0083c	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00841	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2037 : #endif // ADD_CHAOSMIXCHARM_ITEM_20080702
; 2038 : 
; 2039 : #ifdef MODIFY_PLUSITEM_CHAOSMIX_LOG_BUGFIX_20070330
; 2040 : 	#ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2041 : 		if( btItemLuckValue != 0 )
; 2042 : 		{
; 2043 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d], CharmRate : %d",  
; 2044 : 					lpObj->AccountID, lpObj->Name, 
; 2045 : 					lpObj->ChaosSuccessRate+5, lpObj->Money, lpObj->ChaosMoney, _itemlebel, iCharmOfLuckCount);
; 2046 : 		}
; 2047 : 		else
; 2048 : 		{
; 2049 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d], CharmRate : %d",  
; 2050 : 					lpObj->AccountID, lpObj->Name, 
; 2051 : 					lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, _itemlebel, iCharmOfLuckCount);
; 2052 : 		}
; 2053 : 	#else
; 2054 : 		if( btItemLuckValue != 0 )
; 2055 : 		{
; 2056 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d]",  
; 2057 : 					lpObj->AccountID, lpObj->Name, 
; 2058 : 					lpObj->ChaosSuccessRate+5, lpObj->Money, lpObj->ChaosMoney, _itemlebel);
; 2059 : 		}
; 2060 : 		else
; 2061 : 		{
; 2062 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d]",  
; 2063 : 					lpObj->AccountID, lpObj->Name, 
; 2064 : 					lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, _itemlebel);
; 2065 : 		}
; 2066 : 	#endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2067 : #else
; 2068 : 	#ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2069 : 		#ifdef ITEM_12_13_20040401
; 2070 : 			// 카오스조합 실패시 어떤 레벨의 아이템 조합에 실패했는지 추가됨.
; 2071 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d], CharmRate : %d",  
; 2072 : 				lpObj->AccountID, lpObj->Name, 
; 2073 : 				lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, _itemlebel, iCharmOfLuckCount);
; 2074 : 			
; 2075 : 		#else
; 2076 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d, CharmRate : %d",  
; 2077 : 				lpObj->AccountID, lpObj->Name, 
; 2078 : 				lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, iCharmOfLuckCount);
; 2079 : 		#endif
; 2080 : 	#else
; 2081 : 		#ifdef ITEM_12_13_20040401
; 2082 : 			// 카오스조합 실패시 어떤 레벨의 아이템 조합에 실패했는지 추가됨.
; 2083 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d [%d]",  

  00844	8b 85 08 ff ff
	ff		 mov	 eax, DWORD PTR __itemlebel$1[ebp]
  0084a	50		 push	 eax
  0084b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0084e	8b 91 b4 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3252]
  00854	52		 push	 edx
  00855	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00858	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  0085e	51		 push	 ecx
  0085f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00862	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  00868	50		 push	 eax
  00869	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0086c	83 c1 73	 add	 ecx, 115		; 00000073H
  0086f	51		 push	 ecx
  00870	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00873	83 c2 68	 add	 edx, 104		; 00000068H
  00876	52		 push	 edx
  00877	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@LLFDLJGI@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
  0087c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00882	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN41@PlusItemLe:

; 2084 : 				   lpObj->AccountID, lpObj->Name, 
; 2085 : 				   lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney, _itemlebel);
; 2086 : 
; 2087 : 		#else
; 2088 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix Fail %d Money : %d-%d",  
; 2089 : 				lpObj->AccountID, lpObj->Name, 
; 2090 : 				lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney);
; 2091 : 		#endif
; 2092 : 	#endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 2093 : #endif // MODIFY_PLUSITEM_CHAOSMIX_LOG_BUGFIX_20070330
; 2094 : 		
; 2095 : 	}	
; 2096 : 
; 2097 : 	lpObj->ChaosLock = FALSE;

  00885	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00888	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 2098 : 	return TRUE;

  00892	b8 01 00 00 00	 mov	 eax, 1
$LN1@PlusItemLe:

; 2099 : }

  00897	5f		 pop	 edi
  00898	5e		 pop	 esi
  00899	5b		 pop	 ebx
  0089a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0089d	33 cd		 xor	 ecx, ebp
  0089f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  008a4	8b e5		 mov	 esp, ebp
  008a6	5d		 pop	 ebp
  008a7	c2 08 00	 ret	 8
?PlusItemLevelChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@H@Z ENDP ; CMixSystem::PlusItemLevelChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?LogPlusItemLevelChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -20						; size = 4
_ExOption$ = -16					; size = 8
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?LogPlusItemLevelChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::LogPlusItemLevelChaosItem, COMDAT
; _this$ = ecx

; 1138 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 1139 : #ifdef EXTEND_LOG_SYSTEM_03_20060816
; 1140 : 	int iMixLevel = 0;
; 1141 : #endif
; 1142 : 	BYTE ExOption[8];
; 1143 : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  00016	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  0001d	eb 09		 jmp	 SHORT $LN4@LogPlusIte
$LN2@LogPlusIte:
  0001f	8b 45 ec	 mov	 eax, DWORD PTR _n$1[ebp]
  00022	83 c0 01	 add	 eax, 1
  00025	89 45 ec	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@LogPlusIte:
  00028	83 7d ec 20	 cmp	 DWORD PTR _n$1[ebp], 32	; 00000020H
  0002c	0f 8d 73 01 00
	00		 jge	 $LN3@LogPlusIte

; 1144 : 	{
; 1145 : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00032	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00039	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003c	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00042	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00047	83 f8 01	 cmp	 eax, 1
  0004a	0f 85 50 01 00
	00		 jne	 $LN5@LogPlusIte

; 1146 : 		{
; 1147 : 			ItemIsBufExOption(ExOption, &lpObj->pChaosBox[n]);

  00050	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00057	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0005a	03 81 ac 0c 00
	00		 add	 eax, DWORD PTR [ecx+3244]
  00060	50		 push	 eax
  00061	8d 55 f0	 lea	 edx, DWORD PTR _ExOption$[ebp]
  00064	52		 push	 edx
  00065	e8 00 00 00 00	 call	 ?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z ; ItemIsBufExOption
  0006a	83 c4 08	 add	 esp, 8

; 1148 : 
; 1149 : #ifdef EXTEND_LOG_SYSTEM_03_20060816
; 1150 : 			if( iPlusMixLevel == CHAOS_TYPE_UPGRADE_10 )
; 1151 : 			{
; 1152 : 				iMixLevel = 1;
; 1153 : 			}
; 1154 : 			else if( iPlusMixLevel == CHAOS_TYPE_UPGRADE_11 )
; 1155 : 			{
; 1156 : 				iMixLevel = 2;
; 1157 : 			}
; 1158 : 			else if( iPlusMixLevel == CHAOS_TYPE_UPGRADE_12 )
; 1159 : 			{
; 1160 : 				iMixLevel = 3;
; 1161 : 			}
; 1162 : 			else if( iPlusMixLevel == CHAOS_TYPE_UPGRADE_13 )
; 1163 : 			{
; 1164 : 				iMixLevel = 4;
; 1165 : 			}
; 1166 : 
; 1167 : 	#ifdef ADD_380ITEM_NEWOPTION_20060711
; 1168 : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1169 : 			LogAddTD("[PlusItemLevel,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex:[%d] HO:[%d,%d]", 
; 1170 : 		#else
; 1171 : 			LogAddTD("[PlusItemLevel,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex:[%d] HO:[%d,%d]", 
; 1172 : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1173 : 					iMixLevel,
; 1174 : 					lpObj->AccountID, lpObj->Name, 
; 1175 : 					n, 
; 1176 : 					lpObj->pChaosBox[n].GetName(),
; 1177 : 					lpObj->pChaosBox[n].m_Level,
; 1178 : 					lpObj->pChaosBox[n].m_Option1,
; 1179 : 					lpObj->pChaosBox[n].m_Option2,
; 1180 : 					lpObj->pChaosBox[n].m_Option3, 
; 1181 : 					lpObj->pChaosBox[n].m_Number, 
; 1182 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1183 : 					ExOption[0],
; 1184 : 					ExOption[1],
; 1185 : 					ExOption[2],
; 1186 : 					ExOption[3],
; 1187 : 					ExOption[4],
; 1188 : 					ExOption[5],
; 1189 : 					ExOption[6],
; 1190 : 					lpObj->pChaosBox[n].m_SetOption,
; 1191 : 					lpObj->pChaosBox[n].m_ItemOptionEx >> 7,
; 1192 : 		#ifdef EXTEND_LOG_SYSTEM_07_20070320
; 1193 : 					g_kJewelOfHarmonySystem.GetItemStrengthenOption( &lpObj->pChaosBox[n] ),
; 1194 : 					g_kJewelOfHarmonySystem.GetItemOptionLevel( &lpObj->pChaosBox[n] )
; 1195 : 		#else
; 1196 : 					g_kJewelOfHarmonySystem.GetItemOptionLevel( &lpObj->pChaosBox[n] ),
; 1197 : 					g_kJewelOfHarmonySystem.GetItemStrengthenOption( &lpObj->pChaosBox[n] )
; 1198 : 		#endif // EXTEND_LOG_SYSTEM_07_20070320
; 1199 : 					);
; 1200 : 	#else
; 1201 : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1202 : 			LogAddTD("[PlusIte mLevel,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d]", 
; 1203 : 		#else
; 1204 : 			LogAddTD("[PlusIte mLevel,%d] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d]", 
; 1205 : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1206 : 					iMixLevel,
; 1207 : 					lpObj->AccountID, lpObj->Name, 
; 1208 : 					n, 
; 1209 : 					lpObj->pChaosBox[n].GetName(),
; 1210 : 					lpObj->pChaosBox[n].m_Level,
; 1211 : 					lpObj->pChaosBox[n].m_Option1,
; 1212 : 					lpObj->pChaosBox[n].m_Option2,
; 1213 : 					lpObj->pChaosBox[n].m_Option3, 
; 1214 : 					lpObj->pChaosBox[n].m_Number, 
; 1215 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1216 : 					ExOption[0],
; 1217 : 					ExOption[1],
; 1218 : 					ExOption[2],
; 1219 : 					ExOption[3],
; 1220 : 					ExOption[4],
; 1221 : 					ExOption[5],
; 1222 : 					ExOption[6],
; 1223 : 					lpObj->pChaosBox[n].m_SetOption
; 1224 : 					);
; 1225 : 	#endif // ADD_380ITEM_NEWOPTION_20060711
; 1226 : #else
; 1227 : 	#ifdef ADD_380ITEM_NEWOPTION_20060711
; 1228 : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1229 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex:[%d]", 
; 1230 : 		#else
; 1231 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d] 380Ex:[%d]", 
; 1232 : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1233 : 					lpObj->AccountID, lpObj->Name, 
; 1234 : 					n, 
; 1235 : 					lpObj->pChaosBox[n].GetName(),
; 1236 : 					lpObj->pChaosBox[n].m_Level,
; 1237 : 					lpObj->pChaosBox[n].m_Option1,
; 1238 : 					lpObj->pChaosBox[n].m_Option2,
; 1239 : 					lpObj->pChaosBox[n].m_Option3, 
; 1240 : 					lpObj->pChaosBox[n].m_Number, 
; 1241 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1242 : 					ExOption[0],
; 1243 : 					ExOption[1],
; 1244 : 					ExOption[2],
; 1245 : 					ExOption[3],
; 1246 : 					ExOption[4],
; 1247 : 					ExOption[5],
; 1248 : 					ExOption[6],
; 1249 : 					lpObj->pChaosBox[n].m_SetOption,
; 1250 : 					lpObj->pChaosBox[n].m_ItemOptionEx >> 7
; 1251 : 					);
; 1252 : 	#else
; 1253 : 		#ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1254 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d]", 
; 1255 : 		#else
; 1256 : 			LogAddTD("[PlusItemLevel] [%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d] Set:[%d]", 

  0006d	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00074	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00077	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0007d	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  00085	50		 push	 eax
  00086	b9 01 00 00 00	 mov	 ecx, 1
  0008b	6b d1 06	 imul	 edx, ecx, 6
  0008e	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  00093	50		 push	 eax
  00094	b9 01 00 00 00	 mov	 ecx, 1
  00099	6b d1 05	 imul	 edx, ecx, 5
  0009c	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  000a1	50		 push	 eax
  000a2	b9 01 00 00 00	 mov	 ecx, 1
  000a7	c1 e1 02	 shl	 ecx, 2
  000aa	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  000af	52		 push	 edx
  000b0	b8 01 00 00 00	 mov	 eax, 1
  000b5	6b c8 03	 imul	 ecx, eax, 3
  000b8	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  000bd	52		 push	 edx
  000be	b8 01 00 00 00	 mov	 eax, 1
  000c3	d1 e0		 shl	 eax, 1
  000c5	0f b6 4c 05 f0	 movzx	 ecx, BYTE PTR _ExOption$[ebp+eax]
  000ca	51		 push	 ecx
  000cb	ba 01 00 00 00	 mov	 edx, 1
  000d0	c1 e2 00	 shl	 edx, 0
  000d3	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  000d8	50		 push	 eax
  000d9	b9 01 00 00 00	 mov	 ecx, 1
  000de	6b d1 00	 imul	 edx, ecx, 0
  000e1	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  000e6	50		 push	 eax
  000e7	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  000ee	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000f1	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  000f7	f3 0f 2c 4c 08
	24		 cvttss2si ecx, DWORD PTR [eax+ecx+36]
  000fd	51		 push	 ecx
  000fe	69 55 ec a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00105	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00108	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  0010e	8b 14 11	 mov	 edx, DWORD PTR [ecx+edx]
  00111	52		 push	 edx
  00112	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00119	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0011c	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00122	0f b6 44 02 7a	 movzx	 eax, BYTE PTR [edx+eax+122]
  00127	50		 push	 eax
  00128	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  0012f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00132	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00138	0f b6 4c 08 79	 movzx	 ecx, BYTE PTR [eax+ecx+121]
  0013d	51		 push	 ecx
  0013e	69 55 ec a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00145	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00148	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  0014e	0f b6 54 11 78	 movzx	 edx, BYTE PTR [ecx+edx+120]
  00153	52		 push	 edx
  00154	69 45 ec a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  0015b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0015e	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00164	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  00169	50		 push	 eax
  0016a	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00171	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00174	03 8a ac 0c 00
	00		 add	 ecx, DWORD PTR [edx+3244]
  0017a	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  0017f	50		 push	 eax
  00180	8b 45 ec	 mov	 eax, DWORD PTR _n$1[ebp]
  00183	50		 push	 eax
  00184	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00187	83 c1 73	 add	 ecx, 115		; 00000073H
  0018a	51		 push	 ecx
  0018b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0018e	83 c2 68	 add	 edx, 104		; 00000068H
  00191	52		 push	 edx
  00192	68 00 00 00 00	 push	 OFFSET ??_C@_0GF@PODFFLNF@?$FLPlusItemLevel?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5@
  00197	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0019d	83 c4 4c	 add	 esp, 76			; 0000004cH
$LN5@LogPlusIte:

; 1257 : 		#endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 1258 : 					lpObj->AccountID, lpObj->Name, 
; 1259 : 					n, 
; 1260 : 					lpObj->pChaosBox[n].GetName(),
; 1261 : 					lpObj->pChaosBox[n].m_Level,
; 1262 : 					lpObj->pChaosBox[n].m_Option1,
; 1263 : 					lpObj->pChaosBox[n].m_Option2,
; 1264 : 					lpObj->pChaosBox[n].m_Option3, 
; 1265 : 					lpObj->pChaosBox[n].m_Number, 
; 1266 : 					(int)lpObj->pChaosBox[n].m_Durability,				
; 1267 : 					ExOption[0],
; 1268 : 					ExOption[1],
; 1269 : 					ExOption[2],
; 1270 : 					ExOption[3],
; 1271 : 					ExOption[4],
; 1272 : 					ExOption[5],
; 1273 : 					ExOption[6],
; 1274 : 					lpObj->pChaosBox[n].m_SetOption
; 1275 : 					);
; 1276 : 	#endif // ADD_380ITEM_NEWOPTION_20060711
; 1277 : #endif // EXTEND_LOG_SYSTEM_03_20060816
; 1278 : 			
; 1279 : 		}		
; 1280 : 	}

  001a0	e9 7a fe ff ff	 jmp	 $LN2@LogPlusIte
$LN3@LogPlusIte:

; 1281 : }

  001a5	5f		 pop	 edi
  001a6	5e		 pop	 esi
  001a7	5b		 pop	 ebx
  001a8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001ab	33 cd		 xor	 ecx, ebp
  001ad	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001b2	8b e5		 mov	 esp, ebp
  001b4	5d		 pop	 ebp
  001b5	c2 04 00	 ret	 4
?LogPlusItemLevelChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::LogPlusItemLevelChaosItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?DevilSquareItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_bret$1 = -36						; size = 4
_iItemLevel$2 = -32					; size = 4
_iEventItemCount$3 = -28				; size = 4
_aIndex$4 = -24						; size = 4
_pMsg$5 = -20						; size = 9
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?DevilSquareItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::DevilSquareItemChaosMix, COMDAT
; _this$ = ecx

; 1052 : {	

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 1053 : 	lpObj->ChaosLock = TRUE;

  00016	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00019	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 1054 : 	
; 1055 : #ifndef GAMESERVER_TO_CASTLESIEGESERVER
; 1056 : 	if( gDevilSquareEvent )

  00023	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gDevilSquareEvent@@3HA, 0 ; gDevilSquareEvent
  0002a	0f 84 86 01 00
	00		 je	 $LN2@DevilSquar

; 1057 : #endif
; 1058 : 	{	// 악마의 광장 이벤트가 진행 중이면, 초대권 체크
; 1059 : 		PMSG_CHAOSMIXRESULT	pMsg;
; 1060 : 		PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00030	6a 09		 push	 9
  00032	68 86 00 00 00	 push	 134			; 00000086H
  00037	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$5[ebp]
  0003a	50		 push	 eax
  0003b	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00040	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1061 : 		pMsg.Result		= 0x00;	

  00043	c6 45 ef 00	 mov	 BYTE PTR _pMsg$5[ebp+3], 0

; 1062 : 
; 1063 : 		int aIndex = lpObj->m_Index;

  00047	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0004a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0004c	89 4d e8	 mov	 DWORD PTR _aIndex$4[ebp], ecx

; 1064 : 
; 1065 : 		int	iEventItemCount;
; 1066 : 		int iItemLevel;
; 1067 : 
; 1068 : 		BOOL bret =CheckDevilSquareItem(lpObj, iEventItemCount, iItemLevel);

  0004f	8d 45 e0	 lea	 eax, DWORD PTR _iItemLevel$2[ebp]
  00052	50		 push	 eax
  00053	8d 4d e4	 lea	 ecx, DWORD PTR _iEventItemCount$3[ebp]
  00056	51		 push	 ecx
  00057	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0005a	52		 push	 edx
  0005b	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0005e	e8 00 00 00 00	 call	 ?CheckDevilSquareItem@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH1@Z ; CMixSystem::CheckDevilSquareItem
  00063	89 45 dc	 mov	 DWORD PTR _bret$1[ebp], eax

; 1069 : 
; 1070 : 		if( bret )

  00066	83 7d dc 00	 cmp	 DWORD PTR _bret$1[ebp], 0
  0006a	0f 84 18 01 00
	00		 je	 $LN3@DevilSquar

; 1071 : 		{
; 1072 : 			if( bret == 3 )

  00070	83 7d dc 03	 cmp	 DWORD PTR _bret$1[ebp], 3
  00074	75 3d		 jne	 SHORT $LN5@DevilSquar

; 1073 : 			{	// 레벨이 다른 DQ 아이템이 있다
; 1074 : 				pMsg.Result		= 0x07;		

  00076	c6 45 ef 07	 mov	 BYTE PTR _pMsg$5[ebp+3], 7

; 1075 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0007a	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$5[ebp+1]
  0007e	50		 push	 eax
  0007f	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$5[ebp]
  00082	51		 push	 ecx
  00083	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$4[ebp]
  00086	52		 push	 edx
  00087	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0008c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1076 : 				LogAdd("[DevilSquare] DiffLevel Devil's Key or Eyes [%d]", iEventItemCount);

  0008f	8b 45 e4	 mov	 eax, DWORD PTR _iEventItemCount$3[ebp]
  00092	50		 push	 eax
  00093	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@DMIHKADD@?$FLDevilSquare?$FN?5DiffLevel?5Devil?8s@
  00098	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0009e	83 c4 08	 add	 esp, 8

; 1077 : 				lpObj->ChaosLock = FALSE;

  000a1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a4	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1078 : 				return;

  000ae	e9 10 01 00 00	 jmp	 $LN1@DevilSquar
$LN5@DevilSquar:

; 1079 : 			}
; 1080 : 
; 1081 : 			if( bret == 2 )

  000b3	83 7d dc 02	 cmp	 DWORD PTR _bret$1[ebp], 2
  000b7	75 3d		 jne	 SHORT $LN6@DevilSquar

; 1082 : 			{	// 혼석이 없다
; 1083 : 				pMsg.Result		= 0x07;		

  000b9	c6 45 ef 07	 mov	 BYTE PTR _pMsg$5[ebp+3], 7

; 1084 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  000bd	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$5[ebp+1]
  000c1	50		 push	 eax
  000c2	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$5[ebp]
  000c5	51		 push	 ecx
  000c6	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$4[ebp]
  000c9	52		 push	 edx
  000ca	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000cf	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1085 : 				LogAdd("[DevilSquare] Not Found Chaos Gem [%d]", iEventItemCount);

  000d2	8b 45 e4	 mov	 eax, DWORD PTR _iEventItemCount$3[ebp]
  000d5	50		 push	 eax
  000d6	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@NMBMOEEC@?$FLDevilSquare?$FN?5Not?5Found?5Chaos?5G@
  000db	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000e1	83 c4 08	 add	 esp, 8

; 1086 : 				lpObj->ChaosLock = FALSE;

  000e4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e7	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1087 : 				return;

  000f1	e9 cd 00 00 00	 jmp	 $LN1@DevilSquar
$LN6@DevilSquar:

; 1088 : 			}
; 1089 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1090 : 			if( bret == 4 )
; 1091 : 			{
; 1092 : 				pMsg.Result		= 0xF0;
; 1093 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 1094 : 				LogAdd("[DevilSquare] Charm Of Luck Over 10% [%d]", iEventItemCount);
; 1095 : 				lpObj->ChaosLock = FALSE;
; 1096 : 				return;
; 1097 : 			}
; 1098 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1099 : 			if( iEventItemCount > 2 )

  000f6	83 7d e4 02	 cmp	 DWORD PTR _iEventItemCount$3[ebp], 2
  000fa	7e 3d		 jle	 SHORT $LN7@DevilSquar

; 1100 : 			{
; 1101 : 				pMsg.Result		= 0x03;		// 열쇠또는 눈의 수가 너무 많다

  000fc	c6 45 ef 03	 mov	 BYTE PTR _pMsg$5[ebp+3], 3

; 1102 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00100	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$5[ebp+1]
  00104	50		 push	 eax
  00105	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$5[ebp]
  00108	51		 push	 ecx
  00109	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$4[ebp]
  0010c	52		 push	 edx
  0010d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00112	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1103 : 				LogAdd("[DevilSquare] Too many Devil's Key or Eyes [%d]", iEventItemCount);

  00115	8b 45 e4	 mov	 eax, DWORD PTR _iEventItemCount$3[ebp]
  00118	50		 push	 eax
  00119	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@FMJGNMLI@?$FLDevilSquare?$FN?5Too?5many?5Devil?8s?5@
  0011e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00124	83 c4 08	 add	 esp, 8

; 1104 : 				lpObj->ChaosLock = FALSE;

  00127	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0012a	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1105 : 				return;

  00134	e9 8a 00 00 00	 jmp	 $LN1@DevilSquar
$LN7@DevilSquar:

; 1106 : 			}
; 1107 : 
; 1108 : 			if( lpObj->Level < 10 )

  00139	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0013c	0f bf 88 a0 00
	00 00		 movsx	 ecx, WORD PTR [eax+160]
  00143	83 f9 0a	 cmp	 ecx, 10			; 0000000aH
  00146	7d 28		 jge	 SHORT $LN8@DevilSquar

; 1109 : 			{
; 1110 : 				pMsg.Result		= 0x04;		// 악마의 광장 초대권 조합은 레벨 10이상만 할수 있다

  00148	c6 45 ef 04	 mov	 BYTE PTR _pMsg$5[ebp+3], 4

; 1111 : 				DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0014c	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$5[ebp+1]
  00150	50		 push	 eax
  00151	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$5[ebp]
  00154	51		 push	 ecx
  00155	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$4[ebp]
  00158	52		 push	 edx
  00159	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0015e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1112 : 				lpObj->ChaosLock = FALSE;

  00161	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00164	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1113 : 				return;

  0016e	eb 53		 jmp	 SHORT $LN1@DevilSquar
$LN8@DevilSquar:

; 1114 : 			}
; 1115 : 
; 1116 : 			DevilSquareEventChaosMix(lpObj, bret, iItemLevel);

  00170	8b 45 e0	 mov	 eax, DWORD PTR _iItemLevel$2[ebp]
  00173	50		 push	 eax
  00174	8b 4d dc	 mov	 ecx, DWORD PTR _bret$1[ebp]
  00177	51		 push	 ecx
  00178	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0017b	52		 push	 edx
  0017c	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0017f	e8 00 00 00 00	 call	 ?DevilSquareEventChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@HH@Z ; CMixSystem::DevilSquareEventChaosMix

; 1117 : 			return;

  00184	eb 3d		 jmp	 SHORT $LN1@DevilSquar

; 1118 : 		}

  00186	eb 2e		 jmp	 SHORT $LN2@DevilSquar
$LN3@DevilSquar:

; 1119 : 		else if( iEventItemCount > 1 )

  00188	83 7d e4 01	 cmp	 DWORD PTR _iEventItemCount$3[ebp], 1
  0018c	7e 28		 jle	 SHORT $LN2@DevilSquar

; 1120 : 		{	
; 1121 : 			pMsg.Result		= 0x06;		// 조합조건에 맞지 않는데, 열쇠또는 눈이 하나라도 포함되어 있다

  0018e	c6 45 ef 06	 mov	 BYTE PTR _pMsg$5[ebp+3], 6

; 1122 : 			DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00192	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$5[ebp+1]
  00196	50		 push	 eax
  00197	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$5[ebp]
  0019a	51		 push	 ecx
  0019b	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$4[ebp]
  0019e	52		 push	 edx
  0019f	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  001a4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1123 : 			lpObj->ChaosLock = FALSE;

  001a7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001aa	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1124 : 			return;

  001b4	eb 0d		 jmp	 SHORT $LN1@DevilSquar
$LN2@DevilSquar:

; 1125 : 		}
; 1126 : 	}	
; 1127 : 	
; 1128 : 	lpObj->ChaosLock = FALSE;

  001b6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001b9	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0
$LN1@DevilSquar:

; 1129 : 	return;
; 1130 : }

  001c3	5f		 pop	 edi
  001c4	5e		 pop	 esi
  001c5	5b		 pop	 ebx
  001c6	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001c9	33 cd		 xor	 ecx, ebp
  001cb	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001d0	8b e5		 mov	 esp, ebp
  001d2	5d		 pop	 ebp
  001d3	c2 04 00	 ret	 4
?DevilSquareItemChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::DevilSquareItemChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?DevilSquareEventChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@HH@Z
_TEXT	SEGMENT
tv70 = -108						; size = 4
_itemtype$1 = -40					; size = 4
_iRate$ = -36						; size = 4
_nChaosNeedMoney$ = -32					; size = 4
_pMsg$ = -28						; size = 9
_aIndex$ = -16						; size = 4
_fail$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
_bCheckType$ = 12					; size = 4
_iItemLevel$ = 16					; size = 4
?DevilSquareEventChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@HH@Z PROC ; CMixSystem::DevilSquareEventChaosMix, COMDAT
; _this$ = ecx

; 863  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 6c	 sub	 esp, 108		; 0000006cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 864  : 	BOOL fail=TRUE;

  00016	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _fail$[ebp], 1

; 865  : 
; 866  : 	int aIndex = lpObj->m_Index;

  0001d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00020	8b 08		 mov	 ecx, DWORD PTR [eax]
  00022	89 4d f0	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 867  : 
; 868  : 	PMSG_CHAOSMIXRESULT	pMsg;
; 869  : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof( pMsg ));

  00025	6a 09		 push	 9
  00027	68 86 00 00 00	 push	 134			; 00000086H
  0002c	8d 45 e4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0002f	50		 push	 eax
  00030	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00035	83 c4 0c	 add	 esp, 12			; 0000000cH

; 870  : 	pMsg.Result		= 0x00;	

  00038	c6 45 e7 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 871  : 	
; 872  : 	lpObj->ChaosLock = TRUE;	

  0003c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003f	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 873  : 	LogAddTD("[DevilSquare] Chaos Mix Start");

  00049	68 00 00 00 00	 push	 OFFSET ??_C@_0BO@MDACFBLC@?$FLDevilSquare?$FN?5Chaos?5Mix?5Start@
  0004e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00054	83 c4 04	 add	 esp, 4

; 874  : 
; 875  : 	int nChaosNeedMoney = 0;

  00057	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 0

; 876  : 
; 877  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 878  : 	int iCharmOfLuckCount = 0;
; 879  : 	iCharmOfLuckCount = lpObj->ChaosSuccessRate;
; 880  : 
; 881  : 	if( iCharmOfLuckCount > 10 )
; 882  : 	{
; 883  : 		pMsg.Result = 0xF0;
; 884  : 		lpObj->ChaosLock = FALSE;
; 885  : 
; 886  : 		DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 887  : 	}
; 888  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 889  : 
; 890  : 	switch(iItemLevel)

  0005e	8b 45 10	 mov	 eax, DWORD PTR _iItemLevel$[ebp]
  00061	89 45 94	 mov	 DWORD PTR tv70[ebp], eax
  00064	83 7d 94 04	 cmp	 DWORD PTR tv70[ebp], 4
  00068	0f 87 89 00 00
	00		 ja	 $LN9@DevilSquar
  0006e	8b 4d 94	 mov	 ecx, DWORD PTR tv70[ebp]
  00071	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN16@DevilSquar[ecx*4]
$LN4@DevilSquar:

; 891  : 	{
; 892  : #ifdef DEVILSQUARE_EXTEND_20050221		// !!! . 임시 -> 카오스 조합 추가
; 893  : 		case 0:
; 894  : 			lpObj->ChaosSuccessRate = 60;			
; 895  : 			nChaosNeedMoney = 100000;
; 896  : 		break;
; 897  : 
; 898  : 		case 1:
; 899  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel1;
; 900  : 			nChaosNeedMoney = 100000;
; 901  : 		break;
; 902  : 
; 903  : 		case 2:
; 904  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel2;
; 905  : 			nChaosNeedMoney = 200000;
; 906  : 		break;
; 907  : 
; 908  : 		case 3:
; 909  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel3;
; 910  : 			nChaosNeedMoney = 400000;
; 911  : 		break;
; 912  : 
; 913  : 		case 4:
; 914  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel4;
; 915  : 			nChaosNeedMoney = 700000;
; 916  : 		break;
; 917  : 
; 918  : 		case 5:
; 919  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel5;
; 920  : 			nChaosNeedMoney = 1100000;
; 921  : 		break;
; 922  : 		
; 923  : 		case 6:
; 924  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel6;
; 925  : 			nChaosNeedMoney = 1600000;
; 926  : 		break;
; 927  : #ifdef ADD_DEVILSQURE_FOR_MASTER_LEVEL_20071010		// 광장7 카오스조합
; 928  : 		case 7:
; 929  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel7;
; 930  : 			nChaosNeedMoney = 2000000;
; 931  : 		break;
; 932  : #endif
; 933  : #else
; 934  : 		case 0:
; 935  : 			lpObj->ChaosSuccessRate = 60;			

  00078	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007b	c7 80 b8 0c 00
	00 3c 00 00 00	 mov	 DWORD PTR [eax+3256], 60 ; 0000003cH

; 936  : 			nChaosNeedMoney = 40000;

  00085	c7 45 e0 40 9c
	00 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 40000 ; 00009c40H

; 937  : 		break;

  0008c	e9 b6 00 00 00	 jmp	 $LN2@DevilSquar
$LN5@DevilSquar:

; 938  : 
; 939  : 		case 1:
; 940  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel1;

  00091	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00094	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gDQChaosSuccessRateLevel1@@3HA ; gDQChaosSuccessRateLevel1
  0009a	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 941  : 			nChaosNeedMoney = 40000;

  000a0	c7 45 e0 40 9c
	00 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 40000 ; 00009c40H

; 942  : 		break;

  000a7	e9 9b 00 00 00	 jmp	 $LN2@DevilSquar
$LN6@DevilSquar:

; 943  : 
; 944  : 		case 2:
; 945  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel2;

  000ac	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000af	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gDQChaosSuccessRateLevel2@@3HA ; gDQChaosSuccessRateLevel2
  000b5	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 946  : 			nChaosNeedMoney = 80000;

  000bb	c7 45 e0 80 38
	01 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 80000 ; 00013880H

; 947  : 		break;

  000c2	e9 80 00 00 00	 jmp	 $LN2@DevilSquar
$LN7@DevilSquar:

; 948  : 
; 949  : 		case 3:
; 950  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel3;

  000c7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000ca	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gDQChaosSuccessRateLevel3@@3HA ; gDQChaosSuccessRateLevel3
  000d0	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 951  : 			nChaosNeedMoney = 160000;

  000d6	c7 45 e0 00 71
	02 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 160000 ; 00027100H

; 952  : 		break;

  000dd	eb 68		 jmp	 SHORT $LN2@DevilSquar
$LN8@DevilSquar:

; 953  : 
; 954  : 		case 4:
; 955  : 			lpObj->ChaosSuccessRate = gDQChaosSuccessRateLevel4;

  000df	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gDQChaosSuccessRateLevel4@@3HA ; gDQChaosSuccessRateLevel4
  000e8	89 88 b8 0c 00
	00		 mov	 DWORD PTR [eax+3256], ecx

; 956  : 			nChaosNeedMoney = 300000;

  000ee	c7 45 e0 e0 93
	04 00		 mov	 DWORD PTR _nChaosNeedMoney$[ebp], 300000 ; 000493e0H

; 957  : 		break;

  000f5	eb 50		 jmp	 SHORT $LN2@DevilSquar
$LN9@DevilSquar:

; 958  : #endif
; 959  : 
; 960  : 		default:			
; 961  : 			LogAdd("[DevilSquare] [%s][%s] Invalid DQItem Level [%d]", 

  000f7	8b 45 10	 mov	 eax, DWORD PTR _iItemLevel$[ebp]
  000fa	50		 push	 eax
  000fb	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000fe	83 c1 73	 add	 ecx, 115		; 00000073H
  00101	51		 push	 ecx
  00102	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00105	83 c2 68	 add	 edx, 104		; 00000068H
  00108	52		 push	 edx
  00109	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@BMAIOAHL@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Invalid?5@
  0010e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00114	83 c4 10	 add	 esp, 16			; 00000010H

; 962  : 					lpObj->AccountID, lpObj->Name, iItemLevel);
; 963  : 			pMsg.Result		= 0x08;		// 정해진 아이템 레벨이 아니다

  00117	c6 45 e7 08	 mov	 BYTE PTR _pMsg$[ebp+3], 8

; 964  : 			DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0011b	0f b6 45 e5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0011f	50		 push	 eax
  00120	8d 4d e4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00123	51		 push	 ecx
  00124	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00127	52		 push	 edx
  00128	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0012d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 965  : 			lpObj->ChaosLock = FALSE;

  00130	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00133	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 966  : 			return TRUE;

  0013d	b8 01 00 00 00	 mov	 eax, 1
  00142	e9 b4 01 00 00	 jmp	 $LN1@DevilSquar
$LN2@DevilSquar:

; 967  : 		break;
; 968  : 	}
; 969  : 	
; 970  : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 데빌스퀘어 입장권
; 971  : 	INT iChaosTaxMoney		= (INT)((INT64)nChaosNeedMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 972  : 	if (iChaosTaxMoney < 0)
; 973  : 		iChaosTaxMoney		= 0;
; 974  : 
; 975  : 	nChaosNeedMoney			= nChaosNeedMoney + iChaosTaxMoney;
; 976  : 	if (nChaosNeedMoney < 0)
; 977  : 		nChaosNeedMoney		= 0;
; 978  : #endif
; 979  : 
; 980  : 	if( (lpObj->Money-nChaosNeedMoney) < 0 )

  00147	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0014a	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00150	2b 4d e0	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00153	79 5a		 jns	 SHORT $LN10@DevilSquar

; 981  : 	{			
; 982  : 		LogAddTD("[DevilSquare] [%s][%s] CBMix Not Enough Money [%d] need zen [%d]", 

  00155	8b 45 e0	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  00158	50		 push	 eax
  00159	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0015c	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00162	52		 push	 edx
  00163	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00166	83 c0 73	 add	 eax, 115		; 00000073H
  00169	50		 push	 eax
  0016a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0016d	83 c1 68	 add	 ecx, 104		; 00000068H
  00170	51		 push	 ecx
  00171	68 00 00 00 00	 push	 OFFSET ??_C@_0EB@HHHNMGIM@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5No@
  00176	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0017c	83 c4 14	 add	 esp, 20			; 00000014H

; 983  : 			   lpObj->AccountID, lpObj->Name, lpObj->Money, nChaosNeedMoney);
; 984  : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  0017f	c6 45 e7 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 985  : 		DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00183	0f b6 45 e5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00187	50		 push	 eax
  00188	8d 4d e4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0018b	51		 push	 ecx
  0018c	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  0018f	52		 push	 edx
  00190	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00195	83 c4 0c	 add	 esp, 12			; 0000000cH

; 986  : 		lpObj->ChaosLock = FALSE;

  00198	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0019b	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 987  : 		return TRUE;

  001a5	b8 01 00 00 00	 mov	 eax, 1
  001aa	e9 4c 01 00 00	 jmp	 $LN1@DevilSquar
$LN10@DevilSquar:

; 988  : 	}	
; 989  : 	
; 990  : #ifdef MU_CRYWOLF_BENEFIT_20051215
; 991  : 	// MVP 성공 : 카오스 조합 성공률 증가 ( 데빌스퀘어 입장권)	
; 992  : 	if( g_CrywolfSync.GetOccupationState() == CRYWOLF_OCCUPATION_STATE_PEACE 
; 993  : 		&& g_iCrywolfApplyMvpBenefit	
; 994  : 	  )
; 995  : 	{
; 996  : 		lpObj->ChaosSuccessRate += g_CrywolfSync.GetPlusChaosRate();
; 997  : 	}
; 998  : #endif
; 999  : 
; 1000 : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1001 : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 1002 : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 1003 : 
; 1004 : 	int iRate = rand() % 100;

  001af	e8 00 00 00 00	 call	 _rand
  001b4	99		 cdq
  001b5	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  001ba	f7 f9		 idiv	 ecx
  001bc	89 55 dc	 mov	 DWORD PTR _iRate$[ebp], edx

; 1005 : 	if( bCheckType == 1 )

  001bf	83 7d 0c 01	 cmp	 DWORD PTR _bCheckType$[ebp], 1
  001c3	75 54		 jne	 SHORT $LN11@DevilSquar

; 1006 : 	{	
; 1007 : 		if( iRate < lpObj->ChaosSuccessRate )

  001c5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001c8	8b 4d dc	 mov	 ecx, DWORD PTR _iRate$[ebp]
  001cb	3b 88 b8 0c 00
	00		 cmp	 ecx, DWORD PTR [eax+3256]
  001d1	7d 46		 jge	 SHORT $LN11@DevilSquar

; 1008 : 		{	// 초대권만 나온다
; 1009 : 			int itemtype  = MAKE_ITEMNUM(14,19);

  001d3	6a 13		 push	 19			; 00000013H
  001d5	6a 0e		 push	 14			; 0000000eH
  001d7	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001dc	83 c4 08	 add	 esp, 8
  001df	89 45 d8	 mov	 DWORD PTR _itemtype$1[ebp], eax

; 1010 : 			ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, iItemLevel, 0, 0, 0, 0);				

  001e2	6a 00		 push	 0
  001e4	6a 00		 push	 0
  001e6	6a 00		 push	 0
  001e8	6a ff		 push	 -1
  001ea	6a 00		 push	 0
  001ec	6a 00		 push	 0
  001ee	6a 00		 push	 0
  001f0	6a 00		 push	 0
  001f2	0f b6 45 10	 movzx	 eax, BYTE PTR _iItemLevel$[ebp]
  001f6	50		 push	 eax
  001f7	8b 4d d8	 mov	 ecx, DWORD PTR _itemtype$1[ebp]
  001fa	51		 push	 ecx
  001fb	6a 00		 push	 0
  001fd	6a 00		 push	 0
  001ff	68 ff 00 00 00	 push	 255			; 000000ffH
  00204	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00207	8b 02		 mov	 eax, DWORD PTR [edx]
  00209	50		 push	 eax
  0020a	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  0020f	83 c4 38	 add	 esp, 56			; 00000038H

; 1011 : 			fail = FALSE;

  00212	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _fail$[ebp], 0
$LN11@DevilSquar:

; 1012 : 		}		
; 1013 : 	}
; 1014 : 	
; 1015 : 	lpObj->Money -= nChaosNeedMoney;

  00219	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0021c	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00222	2b 4d e0	 sub	 ecx, DWORD PTR _nChaosNeedMoney$[ebp]
  00225	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00228	89 8a b0 00 00
	00		 mov	 DWORD PTR [edx+176], ecx

; 1016 : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 데빌스퀘어 입장권
; 1017 : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 1018 : #endif
; 1019 : 	GCMoneySend(lpObj->m_Index, lpObj->Money);

  0022e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00231	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00237	51		 push	 ecx
  00238	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0023b	8b 02		 mov	 eax, DWORD PTR [edx]
  0023d	50		 push	 eax
  0023e	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  00243	83 c4 08	 add	 esp, 8

; 1020 : 	
; 1021 : #ifdef AUTH_GAMESERVER_CHECKKEY
; 1022 : 	if( szAuthKey[17] != AUTH_CHECK_17 )
; 1023 : 		DestroyGIocp();
; 1024 : #endif
; 1025 : 
; 1026 : 	if( fail == TRUE )

  00246	83 7d f4 01	 cmp	 DWORD PTR _fail$[ebp], 1
  0024a	75 72		 jne	 SHORT $LN13@DevilSquar

; 1027 : 	{
; 1028 : 		ChaosBoxInit(lpObj);

  0024c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0024f	50		 push	 eax
  00250	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00253	e8 00 00 00 00	 call	 ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxInit

; 1029 : 		GCUserChaosBoxSend(lpObj);

  00258	6a 00		 push	 0
  0025a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0025d	50		 push	 eax
  0025e	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  00263	83 c4 08	 add	 esp, 8

; 1030 : 		DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00266	0f b6 45 e5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0026a	50		 push	 eax
  0026b	8d 4d e4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0026e	51		 push	 ecx
  0026f	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00272	52		 push	 edx
  00273	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00278	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1031 : #ifdef EXTEND_LOG_SYSTEM_03_20060816
; 1032 : 		LogAddTD("[DevilSquare,%d] [%s][%s] CBMix Fail %d Money : %d-%d",
; 1033 : 			iItemLevel, lpObj->AccountID, lpObj->Name, lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney );
; 1034 : #else
; 1035 : 		LogAddTD("[DevilSquare] [%s][%s] CBMix Fail %d Money : %d-%d", lpObj->AccountID, lpObj->Name, lpObj->ChaosSuccessRate, lpObj->Money, nChaosNeedMoney );

  0027b	8b 45 e0	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  0027e	50		 push	 eax
  0027f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00282	8b 91 b0 00 00
	00		 mov	 edx, DWORD PTR [ecx+176]
  00288	52		 push	 edx
  00289	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0028c	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00292	51		 push	 ecx
  00293	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00296	83 c2 73	 add	 edx, 115		; 00000073H
  00299	52		 push	 edx
  0029a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0029d	83 c0 68	 add	 eax, 104		; 00000068H
  002a0	50		 push	 eax
  002a1	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@FDPNEDKC@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fa@
  002a6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  002ac	83 c4 18	 add	 esp, 24			; 00000018H

; 1036 : #endif // EXTEND_LOG_SYSTEM_03_20060816
; 1037 : 		lpObj->ChaosLock = FALSE;

  002af	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002b2	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 1038 : 	}

  002bc	eb 2a		 jmp	 SHORT $LN14@DevilSquar
$LN13@DevilSquar:

; 1039 : 	else 
; 1040 : 	{
; 1041 : #ifdef EXTEND_LOG_SYSTEM_03_20060816
; 1042 : 		LogAddTD("[DevilSquare,%d] [%s][%s] CBMix Success Rate:%d Money : %d",
; 1043 : 			iItemLevel, lpObj->AccountID, lpObj->Name, lpObj->ChaosSuccessRate, nChaosNeedMoney);
; 1044 : #else
; 1045 : 		LogAddTD("[DevilSquare] [%s][%s] CBMix Success Rate:%d Money : %d", lpObj->AccountID, lpObj->Name, lpObj->ChaosSuccessRate, nChaosNeedMoney);

  002be	8b 45 e0	 mov	 eax, DWORD PTR _nChaosNeedMoney$[ebp]
  002c1	50		 push	 eax
  002c2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002c5	8b 91 b8 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3256]
  002cb	52		 push	 edx
  002cc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002cf	83 c0 73	 add	 eax, 115		; 00000073H
  002d2	50		 push	 eax
  002d3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002d6	83 c1 68	 add	 ecx, 104		; 00000068H
  002d9	51		 push	 ecx
  002da	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@OFMFJJMN@?$FLDevilSquare?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Su@
  002df	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  002e5	83 c4 14	 add	 esp, 20			; 00000014H
$LN14@DevilSquar:

; 1046 : #endif // EXTEND_LOG_SYSTEM_03_20060816
; 1047 : 	}	
; 1048 : 	gObjInventoryCommit(lpObj->m_Index);

  002e8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002eb	8b 08		 mov	 ecx, DWORD PTR [eax]
  002ed	51		 push	 ecx
  002ee	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  002f3	83 c4 04	 add	 esp, 4

; 1049 : 	return TRUE;

  002f6	b8 01 00 00 00	 mov	 eax, 1
$LN1@DevilSquar:

; 1050 : }

  002fb	5f		 pop	 edi
  002fc	5e		 pop	 esi
  002fd	5b		 pop	 ebx
  002fe	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00301	33 cd		 xor	 ecx, ebp
  00303	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00308	8b e5		 mov	 esp, ebp
  0030a	5d		 pop	 ebp
  0030b	c2 0c 00	 ret	 12			; 0000000cH
  0030e	66 90		 npad	 2
$LN16@DevilSquar:
  00310	00 00 00 00	 DD	 $LN4@DevilSquar
  00314	00 00 00 00	 DD	 $LN5@DevilSquar
  00318	00 00 00 00	 DD	 $LN6@DevilSquar
  0031c	00 00 00 00	 DD	 $LN7@DevilSquar
  00320	00 00 00 00	 DD	 $LN8@DevilSquar
?DevilSquareEventChaosMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@HH@Z ENDP ; CMixSystem::DevilSquareEventChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?CheckDevilSquareItem@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH1@Z
_TEXT	SEGMENT
_n$1 = -32						; size = 4
_bLevelCheck$ = -28					; size = 4
_level$ = -24						; size = 4
_FoundOtherItem$ = -20					; size = 4
_bKeyOfDevil$ = -16					; size = 4
_bEyeOfDevil$ = -12					; size = 4
_bChaoseGem$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_eventitemcount$ = 12					; size = 4
_itemlevel$ = 16					; size = 4
?CheckDevilSquareItem@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH1@Z PROC ; CMixSystem::CheckDevilSquareItem, COMDAT
; _this$ = ecx

; 743  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 60	 sub	 esp, 96			; 00000060H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 744  : 	BOOL bChaoseGem = FALSE;

  0000c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _bChaoseGem$[ebp], 0

; 745  : 	BOOL bEyeOfDevil = FALSE;

  00013	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _bEyeOfDevil$[ebp], 0

; 746  : 	BOOL bKeyOfDevil = FALSE;

  0001a	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _bKeyOfDevil$[ebp], 0

; 747  : 
; 748  : 	eventitemcount = 0;

  00021	8b 45 0c	 mov	 eax, DWORD PTR _eventitemcount$[ebp]
  00024	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], 0

; 749  : 	BOOL FoundOtherItem = FALSE;

  0002a	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _FoundOtherItem$[ebp], 0

; 750  : 
; 751  : 	int	 level = -1;

  00031	c7 45 e8 ff ff
	ff ff		 mov	 DWORD PTR _level$[ebp], -1

; 752  : 	BOOL bLevelCheck = FALSE;

  00038	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _bLevelCheck$[ebp], 0

; 753  : 
; 754  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 755  : 	int iCharmOfLuckCount = 0;
; 756  : 	BOOL bCharmOfLuckOver = FALSE;
; 757  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 758  : 
; 759  : 	LogAdd("[DevilSquare] Search DevilSquareItem");	

  0003f	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@MGDMILOL@?$FLDevilSquare?$FN?5Search?5DevilSquar@
  00044	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0004a	83 c4 04	 add	 esp, 4

; 760  : 
; 761  : 	for( int n=0; n<MAX_CHAOSBOXITEMS; n++)

  0004d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  00054	eb 09		 jmp	 SHORT $LN4@CheckDevil
$LN2@CheckDevil:
  00056	8b 45 e0	 mov	 eax, DWORD PTR _n$1[ebp]
  00059	83 c0 01	 add	 eax, 1
  0005c	89 45 e0	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@CheckDevil:
  0005f	83 7d e0 20	 cmp	 DWORD PTR _n$1[ebp], 32	; 00000020H
  00063	0f 8d 56 01 00
	00		 jge	 $LN3@CheckDevil

; 762  : 	{
; 763  : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  00069	69 4d e0 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00070	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00073	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  00079	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0007e	83 f8 01	 cmp	 eax, 1
  00081	0f 85 33 01 00
	00		 jne	 $LN5@CheckDevil

; 764  : 		{
; 765  : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12, 15) )

  00087	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  0008e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00091	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00097	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0009c	6a 0f		 push	 15			; 0000000fH
  0009e	6a 0c		 push	 12			; 0000000cH
  000a0	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000a5	83 c4 08	 add	 esp, 8
  000a8	3b f0		 cmp	 esi, eax
  000aa	75 0c		 jne	 SHORT $LN6@CheckDevil

; 766  : 			{	// 혼돈의 보석
; 767  : 				bChaoseGem = TRUE;

  000ac	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _bChaoseGem$[ebp], 1

; 768  : 			}

  000b3	e9 02 01 00 00	 jmp	 $LN5@CheckDevil
$LN6@CheckDevil:

; 769  : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 17) )

  000b8	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  000bf	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000c2	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000c8	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  000cd	6a 11		 push	 17			; 00000011H
  000cf	6a 0e		 push	 14			; 0000000eH
  000d1	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000d6	83 c4 08	 add	 esp, 8
  000d9	3b f0		 cmp	 esi, eax
  000db	75 5a		 jne	 SHORT $LN8@CheckDevil

; 770  : 			{	// 악마의 눈
; 771  : 				eventitemcount++;

  000dd	8b 45 0c	 mov	 eax, DWORD PTR _eventitemcount$[ebp]
  000e0	8b 08		 mov	 ecx, DWORD PTR [eax]
  000e2	83 c1 01	 add	 ecx, 1
  000e5	8b 55 0c	 mov	 edx, DWORD PTR _eventitemcount$[ebp]
  000e8	89 0a		 mov	 DWORD PTR [edx], ecx

; 772  : 				bEyeOfDevil = TRUE;

  000ea	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _bEyeOfDevil$[ebp], 1

; 773  : 
; 774  : 				if( level !=  lpObj->pChaosBox[n].m_Level )

  000f1	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  000f8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000fb	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00101	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  00106	39 45 e8	 cmp	 DWORD PTR _level$[ebp], eax
  00109	74 27		 je	 SHORT $LN10@CheckDevil

; 775  : 				{
; 776  : 					if( level == -1 )

  0010b	83 7d e8 ff	 cmp	 DWORD PTR _level$[ebp], -1
  0010f	75 1a		 jne	 SHORT $LN11@CheckDevil

; 777  : 					{						
; 778  : 						level = lpObj->pChaosBox[n].m_Level;

  00111	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00118	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0011b	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00121	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  00126	89 45 e8	 mov	 DWORD PTR _level$[ebp], eax

; 779  : 					}

  00129	eb 07		 jmp	 SHORT $LN10@CheckDevil
$LN11@CheckDevil:

; 780  : 					else
; 781  : 					{
; 782  : 						bLevelCheck = TRUE;

  0012b	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _bLevelCheck$[ebp], 1
$LN10@CheckDevil:

; 783  : 					}
; 784  : 				}				
; 785  : 			}

  00132	e9 83 00 00 00	 jmp	 $LN5@CheckDevil
$LN8@CheckDevil:

; 786  : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14, 18) )

  00137	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  0013e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00141	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00147	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0014c	6a 12		 push	 18			; 00000012H
  0014e	6a 0e		 push	 14			; 0000000eH
  00150	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00155	83 c4 08	 add	 esp, 8
  00158	3b f0		 cmp	 esi, eax
  0015a	75 57		 jne	 SHORT $LN13@CheckDevil

; 787  : 			{	// 악마의 열쇠
; 788  : 				eventitemcount++;

  0015c	8b 45 0c	 mov	 eax, DWORD PTR _eventitemcount$[ebp]
  0015f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00161	83 c1 01	 add	 ecx, 1
  00164	8b 55 0c	 mov	 edx, DWORD PTR _eventitemcount$[ebp]
  00167	89 0a		 mov	 DWORD PTR [edx], ecx

; 789  : 				bKeyOfDevil = TRUE;

  00169	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _bKeyOfDevil$[ebp], 1

; 790  : 
; 791  : 				if( level != lpObj->pChaosBox[n].m_Level )

  00170	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00177	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0017a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00180	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  00185	39 45 e8	 cmp	 DWORD PTR _level$[ebp], eax
  00188	74 27		 je	 SHORT $LN15@CheckDevil

; 792  : 				{
; 793  : 					if( level == -1 )

  0018a	83 7d e8 ff	 cmp	 DWORD PTR _level$[ebp], -1
  0018e	75 1a		 jne	 SHORT $LN16@CheckDevil

; 794  : 					{						
; 795  : 						level = lpObj->pChaosBox[n].m_Level;

  00190	69 45 e0 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00197	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0019a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001a0	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001a5	89 45 e8	 mov	 DWORD PTR _level$[ebp], eax

; 796  : 					}

  001a8	eb 07		 jmp	 SHORT $LN15@CheckDevil
$LN16@CheckDevil:

; 797  : 					else
; 798  : 					{
; 799  : 						bLevelCheck = TRUE;

  001aa	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _bLevelCheck$[ebp], 1
$LN15@CheckDevil:

; 800  : 					}
; 801  : 				}				
; 802  : 			}

  001b1	eb 07		 jmp	 SHORT $LN5@CheckDevil
$LN13@CheckDevil:

; 803  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 804  : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 805  : 			{
; 806  : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 807  : 				if( iCharmOfLuckCount > 10 )
; 808  : 				{
; 809  : 					bCharmOfLuckOver = TRUE;
; 810  : 				}
; 811  : 			}
; 812  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 813  : 			else
; 814  : 			{	// 이외의 아이템이 올려져 있다
; 815  : 				FoundOtherItem = TRUE;

  001b3	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _FoundOtherItem$[ebp], 1
$LN5@CheckDevil:

; 816  : 			}
; 817  : 		}		
; 818  : 	}

  001ba	e9 97 fe ff ff	 jmp	 $LN2@CheckDevil
$LN3@CheckDevil:

; 819  : 
; 820  : 	itemlevel = level;

  001bf	8b 45 10	 mov	 eax, DWORD PTR _itemlevel$[ebp]
  001c2	8b 4d e8	 mov	 ecx, DWORD PTR _level$[ebp]
  001c5	89 08		 mov	 DWORD PTR [eax], ecx

; 821  : 
; 822  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 823  : 	lpObj->ChaosSuccessRate = iCharmOfLuckCount;
; 824  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 825  : 
; 826  : 	if( FoundOtherItem )

  001c7	83 7d ec 00	 cmp	 DWORD PTR _FoundOtherItem$[ebp], 0
  001cb	74 12		 je	 SHORT $LN18@CheckDevil

; 827  : 	{	// 다른 아이템이 포함되어 있으므로 기존의 카오스 시스템으로 넘어감
; 828  : 		LogAdd("[DevilSquare] Other DQItems Found");

  001cd	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@LINAPAPC@?$FLDevilSquare?$FN?5Other?5DQItems?5Fou@
  001d2	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  001d8	83 c4 04	 add	 esp, 4

; 829  : 		return FALSE;

  001db	33 c0		 xor	 eax, eax
  001dd	eb 6f		 jmp	 SHORT $LN1@CheckDevil
$LN18@CheckDevil:

; 830  : 	}
; 831  : 
; 832  : 	if( bLevelCheck )

  001df	83 7d e4 00	 cmp	 DWORD PTR _bLevelCheck$[ebp], 0
  001e3	74 15		 je	 SHORT $LN19@CheckDevil

; 833  : 	{	// 레벨이 다른 아이템이 있으므로 조합되지 않는다
; 834  : 		LogAdd("[DevilSquare] DiffLevel DQItems Found");

  001e5	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@FFFDDFEO@?$FLDevilSquare?$FN?5DiffLevel?5DQItems@
  001ea	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  001f0	83 c4 04	 add	 esp, 4

; 835  : 		return 3;	// 레벨이 다른 아이템이 있다

  001f3	b8 03 00 00 00	 mov	 eax, 3
  001f8	eb 54		 jmp	 SHORT $LN1@CheckDevil
$LN19@CheckDevil:

; 836  : 	}
; 837  : 
; 838  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 839  : 	if( bCharmOfLuckOver == TRUE )
; 840  : 	{
; 841  : 		LogAdd("[DevilSquare] Charm Of Luck Count Over");
; 842  : 		return 4;
; 843  : 	}
; 844  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 845  : 
; 846  : 	if( bChaoseGem && bEyeOfDevil && bKeyOfDevil )

  001fa	83 7d f8 00	 cmp	 DWORD PTR _bChaoseGem$[ebp], 0
  001fe	74 1f		 je	 SHORT $LN20@CheckDevil
  00200	83 7d f4 00	 cmp	 DWORD PTR _bEyeOfDevil$[ebp], 0
  00204	74 19		 je	 SHORT $LN20@CheckDevil
  00206	83 7d f0 00	 cmp	 DWORD PTR _bKeyOfDevil$[ebp], 0
  0020a	74 13		 je	 SHORT $LN20@CheckDevil

; 847  : 	{
; 848  : 		LogDQChaosItem(lpObj);

  0020c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0020f	50		 push	 eax
  00210	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00213	e8 00 00 00 00	 call	 ?LogDQChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::LogDQChaosItem

; 849  : 		return 1;	// 혼석까지 있을경우

  00218	b8 01 00 00 00	 mov	 eax, 1
  0021d	eb 2f		 jmp	 SHORT $LN1@CheckDevil
$LN20@CheckDevil:

; 850  : 	}	
; 851  : 
; 852  : 	if( bEyeOfDevil && bKeyOfDevil)

  0021f	83 7d f4 00	 cmp	 DWORD PTR _bEyeOfDevil$[ebp], 0
  00223	74 19		 je	 SHORT $LN21@CheckDevil
  00225	83 7d f0 00	 cmp	 DWORD PTR _bKeyOfDevil$[ebp], 0
  00229	74 13		 je	 SHORT $LN21@CheckDevil

; 853  : 	{
; 854  : 		LogDQChaosItem(lpObj);

  0022b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0022e	50		 push	 eax
  0022f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00232	e8 00 00 00 00	 call	 ?LogDQChaosItem@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ; CMixSystem::LogDQChaosItem

; 855  : 		return 2;	// 혼석은 없고, 이벤트 아이템만 있을경우

  00237	b8 02 00 00 00	 mov	 eax, 2
  0023c	eb 10		 jmp	 SHORT $LN1@CheckDevil
$LN21@CheckDevil:

; 856  : 	}
; 857  : 
; 858  : 	LogAdd("[DevilSquare] DQItems Not Found");

  0023e	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@IANBADIL@?$FLDevilSquare?$FN?5DQItems?5Not?5Found@
  00243	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00249	83 c4 04	 add	 esp, 4

; 859  : 	return FALSE;

  0024c	33 c0		 xor	 eax, eax
$LN1@CheckDevil:

; 860  : }

  0024e	5f		 pop	 edi
  0024f	5e		 pop	 esi
  00250	5b		 pop	 ebx
  00251	8b e5		 mov	 esp, ebp
  00253	5d		 pop	 ebp
  00254	c2 0c 00	 ret	 12			; 0000000cH
?CheckDevilSquareItem@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH1@Z ENDP ; CMixSystem::CheckDevilSquareItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?DefaultChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
tv147 = -140						; size = 4
_itemtype$1 = -72					; size = 4
_itemindex$2 = -68					; size = 4
_itemtype$3 = -64					; size = 4
_itemindex$4 = -60					; size = 4
_optionc$5 = -56					; size = 4
_optionrand$6 = -52					; size = 4
_Option3$7 = -48					; size = 4
_Option2$8 = -44					; size = 4
_Option1$9 = -40					; size = 4
_level$10 = -36						; size = 4
_MixResult2$ = -32					; size = 4
_fail$ = -28						; size = 4
_aIndex$ = -24						; size = 4
_pMsg$ = -20						; size = 9
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?DefaultChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::DefaultChaosMix, COMDAT
; _this$ = ecx

; 463  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 8c 00 00
	00		 sub	 esp, 140		; 0000008cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 464  : 	PMSG_CHAOSMIXRESULT	pMsg;
; 465  : 	PHeadSetB( ( LPBYTE )&pMsg, 0x86, sizeof( pMsg ) );

  00019	6a 09		 push	 9
  0001b	68 86 00 00 00	 push	 134			; 00000086H
  00020	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00023	50		 push	 eax
  00024	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00029	83 c4 0c	 add	 esp, 12			; 0000000cH

; 466  : 	pMsg.Result		= 0x00;	

  0002c	c6 45 ef 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 467  : 
; 468  : 	int	 aIndex = lpObj->m_Index;

  00030	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00033	8b 08		 mov	 ecx, DWORD PTR [eax]
  00035	89 4d e8	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 469  : 	BOOL fail=TRUE;

  00038	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _fail$[ebp], 1

; 470  : 	BOOL MixResult2;
; 471  : 
; 472  : 	lpObj->ChaosLock = TRUE;

  0003f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00042	c7 80 bc 0c 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3260], 1

; 473  : 
; 474  : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 475  : 	int iWingIndex = -1;
; 476  : 	
; 477  : 	if( ChaosBoxMix(lpObj, MixResult2, iWingIndex) == 0 )
; 478  : #else
; 479  : 	if( ChaosBoxMix(lpObj, MixResult2) == 0 )

  0004c	8d 45 e0	 lea	 eax, DWORD PTR _MixResult2$[ebp]
  0004f	50		 push	 eax
  00050	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00053	51		 push	 ecx
  00054	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00057	e8 00 00 00 00	 call	 ?ChaosBoxMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH@Z ; CMixSystem::ChaosBoxMix
  0005c	85 c0		 test	 eax, eax
  0005e	75 2b		 jne	 SHORT $LN4@DefaultCha

; 480  : #endif //ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 481  : 	{	// 조합할 아이템이 잘못되었다
; 482  : 		pMsg.Result		= 0x07;		// 조합할 아이템이 잘못되었다

  00060	c6 45 ef 07	 mov	 BYTE PTR _pMsg$[ebp+3], 7

; 483  : 		DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00064	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00068	50		 push	 eax
  00069	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0006c	51		 push	 ecx
  0006d	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00070	52		 push	 edx
  00071	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00076	83 c4 0c	 add	 esp, 12			; 0000000cH

; 484  : 		lpObj->ChaosLock = FALSE;

  00079	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007c	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 485  : 		return;

  00086	e9 0b 04 00 00	 jmp	 $LN1@DefaultCha
$LN4@DefaultCha:

; 486  : 	}
; 487  : 
; 488  : #ifdef MU_CASTLESIEGE_TAX_SYSTEM_20041219	// 카오스 시스템 세율적용 - 카오스 일반 조합
; 489  : 	INT iChaosTaxMoney		= (INT)((INT64)lpObj->ChaosMoney * (INT64)g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / (INT64)100);
; 490  : 	if (iChaosTaxMoney < 0)
; 491  : 		iChaosTaxMoney		= 0;
; 492  : 
; 493  : 	lpObj->ChaosMoney		= lpObj->ChaosMoney + iChaosTaxMoney;
; 494  : 	if (lpObj->ChaosMoney < 0)
; 495  : 		lpObj->ChaosMoney	= 0;
; 496  : #endif
; 497  : 
; 498  : 	if( lpObj->Money < lpObj->ChaosMoney )

  0008b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0008e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00091	8b 90 b0 00 00
	00		 mov	 edx, DWORD PTR [eax+176]
  00097	3b 91 b4 0c 00
	00		 cmp	 edx, DWORD PTR [ecx+3252]
  0009d	7d 2b		 jge	 SHORT $LN5@DefaultCha

; 499  : 	{
; 500  : 		pMsg.Result		= 0x02;		// 돈이 모자르다.

  0009f	c6 45 ef 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 501  : 		DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  000a3	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  000a7	50		 push	 eax
  000a8	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000ab	51		 push	 ecx
  000ac	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  000af	52		 push	 edx
  000b0	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000b5	83 c4 0c	 add	 esp, 12			; 0000000cH

; 502  : 		lpObj->ChaosLock = FALSE;

  000b8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000bb	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 503  : 	}

  000c5	e9 be 03 00 00	 jmp	 $LN6@DefaultCha
$LN5@DefaultCha:

; 504  : 	else 
; 505  : 	{
; 506  : 		if( lpObj->ChaosSuccessRate> 0 ) 

  000ca	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000cd	83 b8 b8 0c 00
	00 00		 cmp	 DWORD PTR [eax+3256], 0
  000d4	0f 8e a8 02 00
	00		 jle	 $LN7@DefaultCha

; 507  : 		{
; 508  : 			if( lpObj->ChaosSuccessRate >= 100 ) lpObj->ChaosSuccessRate = 100;

  000da	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000dd	83 b8 b8 0c 00
	00 64		 cmp	 DWORD PTR [eax+3256], 100 ; 00000064H
  000e4	7c 0d		 jl	 SHORT $LN8@DefaultCha
  000e6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e9	c7 80 b8 0c 00
	00 64 00 00 00	 mov	 DWORD PTR [eax+3256], 100 ; 00000064H
$LN8@DefaultCha:

; 509  : 			if( (rand()%100) <= (lpObj->ChaosSuccessRate-1) )

  000f3	e8 00 00 00 00	 call	 _rand
  000f8	99		 cdq
  000f9	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000fe	f7 f9		 idiv	 ecx
  00100	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00103	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00109	83 e9 01	 sub	 ecx, 1
  0010c	3b d1		 cmp	 edx, ecx
  0010e	0f 8f 6e 02 00
	00		 jg	 $LN7@DefaultCha

; 510  : 			{
; 511  : 				fail			= FALSE;

  00114	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _fail$[ebp], 0

; 512  : 
; 513  : 				pMsg.Result		= 0x01;

  0011b	c6 45 ef 01	 mov	 BYTE PTR _pMsg$[ebp+3], 1

; 514  : 				
; 515  : 				int level = rand()%5;

  0011f	e8 00 00 00 00	 call	 _rand
  00124	99		 cdq
  00125	b9 05 00 00 00	 mov	 ecx, 5
  0012a	f7 f9		 idiv	 ecx
  0012c	89 55 dc	 mov	 DWORD PTR _level$10[ebp], edx

; 516  : 				int Option1=0, Option2=0, Option3=0;

  0012f	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _Option1$9[ebp], 0
  00136	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _Option2$8[ebp], 0
  0013d	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _Option3$7[ebp], 0

; 517  : 
; 518  : 				if((rand()%100) < (6+(lpObj->ChaosSuccessRate/5)) ) Option1 = 1;

  00144	e8 00 00 00 00	 call	 _rand
  00149	99		 cdq
  0014a	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0014f	f7 f9		 idiv	 ecx
  00151	8b ca		 mov	 ecx, edx
  00153	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00156	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  0015c	99		 cdq
  0015d	be 05 00 00 00	 mov	 esi, 5
  00162	f7 fe		 idiv	 esi
  00164	83 c0 06	 add	 eax, 6
  00167	3b c8		 cmp	 ecx, eax
  00169	7d 07		 jge	 SHORT $LN10@DefaultCha
  0016b	c7 45 d8 01 00
	00 00		 mov	 DWORD PTR _Option1$9[ebp], 1
$LN10@DefaultCha:

; 519  : 				if((rand()%100) < (4+(lpObj->ChaosSuccessRate/5)) ) Option2 = 1;	// 영석 바를때 행운 

  00172	e8 00 00 00 00	 call	 _rand
  00177	99		 cdq
  00178	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0017d	f7 f9		 idiv	 ecx
  0017f	8b ca		 mov	 ecx, edx
  00181	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00184	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  0018a	99		 cdq
  0018b	be 05 00 00 00	 mov	 esi, 5
  00190	f7 fe		 idiv	 esi
  00192	83 c0 04	 add	 eax, 4
  00195	3b c8		 cmp	 ecx, eax
  00197	7d 07		 jge	 SHORT $LN11@DefaultCha
  00199	c7 45 d4 01 00
	00 00		 mov	 DWORD PTR _Option2$8[ebp], 1
$LN11@DefaultCha:

; 520  : 
; 521  : 				int optionrand, optionc;
; 522  : 
; 523  : 				optionc = (rand()%3);

  001a0	e8 00 00 00 00	 call	 _rand
  001a5	99		 cdq
  001a6	b9 03 00 00 00	 mov	 ecx, 3
  001ab	f7 f9		 idiv	 ecx
  001ad	89 55 c8	 mov	 DWORD PTR _optionc$5[ebp], edx

; 524  : 				optionrand = (rand()%100);

  001b0	e8 00 00 00 00	 call	 _rand
  001b5	99		 cdq
  001b6	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  001bb	f7 f9		 idiv	 ecx
  001bd	89 55 cc	 mov	 DWORD PTR _optionrand$6[ebp], edx

; 525  : 
; 526  : 				switch( optionc )

  001c0	8b 45 c8	 mov	 eax, DWORD PTR _optionc$5[ebp]
  001c3	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv147[ebp], eax
  001c9	83 bd 74 ff ff
	ff 00		 cmp	 DWORD PTR tv147[ebp], 0
  001d0	74 14		 je	 SHORT $LN12@DefaultCha
  001d2	83 bd 74 ff ff
	ff 01		 cmp	 DWORD PTR tv147[ebp], 1
  001d9	74 2d		 je	 SHORT $LN14@DefaultCha
  001db	83 bd 74 ff ff
	ff 02		 cmp	 DWORD PTR tv147[ebp], 2
  001e2	74 46		 je	 SHORT $LN16@DefaultCha
  001e4	eb 64		 jmp	 SHORT $LN2@DefaultCha
$LN12@DefaultCha:

; 527  : 				{
; 528  : 				case 0 :
; 529  : 					if( optionrand < (4+(lpObj->ChaosSuccessRate/5)) ) Option3 = 3;	// 옵션

  001e6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001e9	8b 80 b8 0c 00
	00		 mov	 eax, DWORD PTR [eax+3256]
  001ef	99		 cdq
  001f0	b9 05 00 00 00	 mov	 ecx, 5
  001f5	f7 f9		 idiv	 ecx
  001f7	83 c0 04	 add	 eax, 4
  001fa	39 45 cc	 cmp	 DWORD PTR _optionrand$6[ebp], eax
  001fd	7d 07		 jge	 SHORT $LN13@DefaultCha
  001ff	c7 45 d0 03 00
	00 00		 mov	 DWORD PTR _Option3$7[ebp], 3
$LN13@DefaultCha:

; 530  : 					break;

  00206	eb 42		 jmp	 SHORT $LN2@DefaultCha
$LN14@DefaultCha:

; 531  : 				case 1 :
; 532  : 					if( optionrand < (8+(lpObj->ChaosSuccessRate/5)) ) Option3 = 2;	// 옵션

  00208	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0020b	8b 80 b8 0c 00
	00		 mov	 eax, DWORD PTR [eax+3256]
  00211	99		 cdq
  00212	b9 05 00 00 00	 mov	 ecx, 5
  00217	f7 f9		 idiv	 ecx
  00219	83 c0 08	 add	 eax, 8
  0021c	39 45 cc	 cmp	 DWORD PTR _optionrand$6[ebp], eax
  0021f	7d 07		 jge	 SHORT $LN15@DefaultCha
  00221	c7 45 d0 02 00
	00 00		 mov	 DWORD PTR _Option3$7[ebp], 2
$LN15@DefaultCha:

; 533  : 					break;

  00228	eb 20		 jmp	 SHORT $LN2@DefaultCha
$LN16@DefaultCha:

; 534  : 				case 2 :
; 535  : 					if( optionrand < (12+(lpObj->ChaosSuccessRate/5)) ) Option3 = 1;	// 옵션

  0022a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0022d	8b 80 b8 0c 00
	00		 mov	 eax, DWORD PTR [eax+3256]
  00233	99		 cdq
  00234	b9 05 00 00 00	 mov	 ecx, 5
  00239	f7 f9		 idiv	 ecx
  0023b	83 c0 0c	 add	 eax, 12			; 0000000cH
  0023e	39 45 cc	 cmp	 DWORD PTR _optionrand$6[ebp], eax
  00241	7d 07		 jge	 SHORT $LN2@DefaultCha
  00243	c7 45 d0 01 00
	00 00		 mov	 DWORD PTR _Option3$7[ebp], 1
$LN2@DefaultCha:

; 536  : 					break;
; 537  : 				}
; 538  : 				if( MixResult2 == TRUE )

  0024a	83 7d e0 01	 cmp	 DWORD PTR _MixResult2$[ebp], 1
  0024e	0f 85 98 00 00
	00		 jne	 $LN18@DefaultCha

; 539  : 				{
; 540  : #ifdef ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912	// 신규캐릭터 1차날개(재앙의 날개) 생성(추가)
; 541  : 					int itemindex = rand()%4;
; 542  : 					int itemtype  = 0;
; 543  : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 544  : 					if(iWingIndex > -1) {
; 545  : 						// 날개 조합 부적을 사용하면 해당 날개가 100% 나온다.
; 546  : #ifdef MODIFY_WINGCHAM_DARKLOAD3RD_WING_20090914
; 547  : 						if(30 == iWingIndex)	// 군주의 망토 (군주의 망토만 index가 13, 나머지 날개 및 제왕의 망토는 12)
; 548  : 							itemtype = MAKE_ITEMNUM(13, iWingIndex);
; 549  : 						else
; 550  : 							itemtype = MAKE_ITEMNUM(12, iWingIndex);
; 551  : #else
; 552  : 						itemtype = MAKE_ITEMNUM(12, iWingIndex);
; 553  : #endif	//MODIFY_WINGCHAM_DARKLOAD3RD_WING_20090914
; 554  : 					} else {
; 555  : 						if( itemindex == 0 ) itemtype = MAKE_ITEMNUM(12,0);
; 556  : 						else if( itemindex == 1 ) itemtype = MAKE_ITEMNUM(12,1);
; 557  : 						else if( itemindex == 2 ) itemtype = MAKE_ITEMNUM(12,2);
; 558  : 						else if( itemindex == 3 ) itemtype = MAKE_ITEMNUM(12,41);	// 신규캐릭터 1차날개(재앙의 날개)
; 559  : 					}
; 560  : 					
; 561  : #else
; 562  : 					if( itemindex == 0 ) itemtype = MAKE_ITEMNUM(12,0);
; 563  : 					else if( itemindex == 1 ) itemtype = MAKE_ITEMNUM(12,1);
; 564  : 					else if( itemindex == 2 ) itemtype = MAKE_ITEMNUM(12,2);
; 565  : 					else if( itemindex == 3 ) itemtype = MAKE_ITEMNUM(12,41);	// 신규캐릭터 1차날개(재앙의 날개)
; 566  : #endif // ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 567  : #else	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 568  : 					int itemindex = rand()%3;

  00254	e8 00 00 00 00	 call	 _rand
  00259	99		 cdq
  0025a	b9 03 00 00 00	 mov	 ecx, 3
  0025f	f7 f9		 idiv	 ecx
  00261	89 55 c4	 mov	 DWORD PTR _itemindex$4[ebp], edx

; 569  : 					int itemtype  = 0;

  00264	c7 45 c0 00 00
	00 00		 mov	 DWORD PTR _itemtype$3[ebp], 0

; 570  : 					if( itemindex == 0 ) itemtype = MAKE_ITEMNUM(12,0);

  0026b	83 7d c4 00	 cmp	 DWORD PTR _itemindex$4[ebp], 0
  0026f	75 11		 jne	 SHORT $LN20@DefaultCha
  00271	6a 00		 push	 0
  00273	6a 0c		 push	 12			; 0000000cH
  00275	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0027a	83 c4 08	 add	 esp, 8
  0027d	89 45 c0	 mov	 DWORD PTR _itemtype$3[ebp], eax
  00280	eb 2c		 jmp	 SHORT $LN21@DefaultCha
$LN20@DefaultCha:

; 571  : 					else if( itemindex == 1 ) itemtype = MAKE_ITEMNUM(12,1);

  00282	83 7d c4 01	 cmp	 DWORD PTR _itemindex$4[ebp], 1
  00286	75 11		 jne	 SHORT $LN22@DefaultCha
  00288	6a 01		 push	 1
  0028a	6a 0c		 push	 12			; 0000000cH
  0028c	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00291	83 c4 08	 add	 esp, 8
  00294	89 45 c0	 mov	 DWORD PTR _itemtype$3[ebp], eax
  00297	eb 15		 jmp	 SHORT $LN21@DefaultCha
$LN22@DefaultCha:

; 572  : 					else if( itemindex == 2 ) itemtype = MAKE_ITEMNUM(12,2);

  00299	83 7d c4 02	 cmp	 DWORD PTR _itemindex$4[ebp], 2
  0029d	75 0f		 jne	 SHORT $LN21@DefaultCha
  0029f	6a 02		 push	 2
  002a1	6a 0c		 push	 12			; 0000000cH
  002a3	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  002a8	83 c4 08	 add	 esp, 8
  002ab	89 45 c0	 mov	 DWORD PTR _itemtype$3[ebp], eax
$LN21@DefaultCha:

; 573  : #endif	// ADD_SEASON_3_NEW_CHARACTER_SUMMONER_20070912
; 574  : 
; 575  : #ifdef CHAOS_MIX_WING_ITEMLEVEL_FIX
; 576  : 					ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, 0, 255, Option1, Option2, Option3);

  002ae	6a 00		 push	 0
  002b0	6a 00		 push	 0
  002b2	6a 00		 push	 0
  002b4	6a ff		 push	 -1
  002b6	0f b6 45 d0	 movzx	 eax, BYTE PTR _Option3$7[ebp]
  002ba	50		 push	 eax
  002bb	0f b6 4d d4	 movzx	 ecx, BYTE PTR _Option2$8[ebp]
  002bf	51		 push	 ecx
  002c0	0f b6 55 d8	 movzx	 edx, BYTE PTR _Option1$9[ebp]
  002c4	52		 push	 edx
  002c5	68 ff 00 00 00	 push	 255			; 000000ffH
  002ca	6a 00		 push	 0
  002cc	8b 45 c0	 mov	 eax, DWORD PTR _itemtype$3[ebp]
  002cf	50		 push	 eax
  002d0	6a 00		 push	 0
  002d2	6a 00		 push	 0
  002d4	68 ff 00 00 00	 push	 255			; 000000ffH
  002d9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002dc	8b 11		 mov	 edx, DWORD PTR [ecx]
  002de	52		 push	 edx
  002df	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  002e4	83 c4 38	 add	 esp, 56			; 00000038H

; 577  : #else
; 578  : 					ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, level, 255, Option1, Option2, Option3);
; 579  : #endif
; 580  : 				}

  002e7	e9 96 00 00 00	 jmp	 $LN7@DefaultCha
$LN18@DefaultCha:

; 581  : 				else
; 582  : 				{
; 583  : 					int itemindex = rand()%3;

  002ec	e8 00 00 00 00	 call	 _rand
  002f1	99		 cdq
  002f2	b9 03 00 00 00	 mov	 ecx, 3
  002f7	f7 f9		 idiv	 ecx
  002f9	89 55 bc	 mov	 DWORD PTR _itemindex$2[ebp], edx

; 584  : 					int itemtype  = 0;

  002fc	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR _itemtype$1[ebp], 0

; 585  : 
; 586  : 					if( itemindex == 0 )      itemtype = MAKE_ITEMNUM(2,6);

  00303	83 7d bc 00	 cmp	 DWORD PTR _itemindex$2[ebp], 0
  00307	75 11		 jne	 SHORT $LN25@DefaultCha
  00309	6a 06		 push	 6
  0030b	6a 02		 push	 2
  0030d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00312	83 c4 08	 add	 esp, 8
  00315	89 45 b8	 mov	 DWORD PTR _itemtype$1[ebp], eax
  00318	eb 2c		 jmp	 SHORT $LN26@DefaultCha
$LN25@DefaultCha:

; 587  : 					else if( itemindex == 1 ) itemtype = MAKE_ITEMNUM(4,6);

  0031a	83 7d bc 01	 cmp	 DWORD PTR _itemindex$2[ebp], 1
  0031e	75 11		 jne	 SHORT $LN27@DefaultCha
  00320	6a 06		 push	 6
  00322	6a 04		 push	 4
  00324	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00329	83 c4 08	 add	 esp, 8
  0032c	89 45 b8	 mov	 DWORD PTR _itemtype$1[ebp], eax
  0032f	eb 15		 jmp	 SHORT $LN26@DefaultCha
$LN27@DefaultCha:

; 588  : 					else if( itemindex == 2 ) itemtype = MAKE_ITEMNUM(5,7);

  00331	83 7d bc 02	 cmp	 DWORD PTR _itemindex$2[ebp], 2
  00335	75 0f		 jne	 SHORT $LN26@DefaultCha
  00337	6a 07		 push	 7
  00339	6a 05		 push	 5
  0033b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00340	83 c4 08	 add	 esp, 8
  00343	89 45 b8	 mov	 DWORD PTR _itemtype$1[ebp], eax
$LN26@DefaultCha:

; 589  : 					ItemSerialCreateSend(lpObj->m_Index, 255, 0, 0, itemtype, level, 255, Option1, Option2, Option3);

  00346	6a 00		 push	 0
  00348	6a 00		 push	 0
  0034a	6a 00		 push	 0
  0034c	6a ff		 push	 -1
  0034e	0f b6 45 d0	 movzx	 eax, BYTE PTR _Option3$7[ebp]
  00352	50		 push	 eax
  00353	0f b6 4d d4	 movzx	 ecx, BYTE PTR _Option2$8[ebp]
  00357	51		 push	 ecx
  00358	0f b6 55 d8	 movzx	 edx, BYTE PTR _Option1$9[ebp]
  0035c	52		 push	 edx
  0035d	68 ff 00 00 00	 push	 255			; 000000ffH
  00362	0f b6 45 dc	 movzx	 eax, BYTE PTR _level$10[ebp]
  00366	50		 push	 eax
  00367	8b 4d b8	 mov	 ecx, DWORD PTR _itemtype$1[ebp]
  0036a	51		 push	 ecx
  0036b	6a 00		 push	 0
  0036d	6a 00		 push	 0
  0036f	68 ff 00 00 00	 push	 255			; 000000ffH
  00374	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00377	8b 02		 mov	 eax, DWORD PTR [edx]
  00379	50		 push	 eax
  0037a	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  0037f	83 c4 38	 add	 esp, 56			; 00000038H
$LN7@DefaultCha:

; 590  : 				}
; 591  : 			}
; 592  : 		}
; 593  : 		
; 594  : 		lpObj->Money -= lpObj->ChaosMoney;

  00382	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00385	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00388	8b 90 b0 00 00
	00		 mov	 edx, DWORD PTR [eax+176]
  0038e	2b 91 b4 0c 00
	00		 sub	 edx, DWORD PTR [ecx+3252]
  00394	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00397	89 90 b0 00 00
	00		 mov	 DWORD PTR [eax+176], edx

; 595  : #ifdef MU_CASTLESIEGE_SERVER_SYNC_20041130		// 카오스 조합 세금을 저장 - 카오스 일반 조합
; 596  : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);
; 597  : #endif
; 598  : 		GCMoneySend(lpObj->m_Index, lpObj->Money);							

  0039d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003a0	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  003a6	51		 push	 ecx
  003a7	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003aa	8b 02		 mov	 eax, DWORD PTR [edx]
  003ac	50		 push	 eax
  003ad	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  003b2	83 c4 08	 add	 esp, 8

; 599  : 
; 600  : 		if( fail == TRUE )

  003b5	83 7d e4 01	 cmp	 DWORD PTR _fail$[ebp], 1
  003b9	75 78		 jne	 SHORT $LN30@DefaultCha

; 601  : 		{
; 602  : 			ChaosBoxItemDown(lpObj);

  003bb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003be	50		 push	 eax
  003bf	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  003c2	e8 00 00 00 00	 call	 ?ChaosBoxItemDown@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ; CMixSystem::ChaosBoxItemDown

; 603  : 			GCUserChaosBoxSend(lpObj);

  003c7	6a 00		 push	 0
  003c9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003cc	50		 push	 eax
  003cd	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAVOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  003d2	83 c4 08	 add	 esp, 8

; 604  : 			DataSend( aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  003d5	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  003d9	50		 push	 eax
  003da	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  003dd	51		 push	 ecx
  003de	8b 55 e8	 mov	 edx, DWORD PTR _aIndex$[ebp]
  003e1	52		 push	 edx
  003e2	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  003e7	83 c4 0c	 add	 esp, 12			; 0000000cH

; 605  : 			LogAddTD("[%s][%s] CBMix Fail %d Money : %d-%d", lpObj->AccountID, lpObj->Name, lpObj->ChaosSuccessRate, lpObj->Money, lpObj->ChaosMoney );		

  003ea	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003ed	8b 88 b4 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3252]
  003f3	51		 push	 ecx
  003f4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003f7	8b 82 b0 00 00
	00		 mov	 eax, DWORD PTR [edx+176]
  003fd	50		 push	 eax
  003fe	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00401	8b 91 b8 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3256]
  00407	52		 push	 edx
  00408	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0040b	83 c0 73	 add	 eax, 115		; 00000073H
  0040e	50		 push	 eax
  0040f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00412	83 c1 68	 add	 ecx, 104		; 00000068H
  00415	51		 push	 ecx
  00416	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@NPEOFJKC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Fail?5?$CFd?5Money?5?3?5@
  0041b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00421	83 c4 18	 add	 esp, 24			; 00000018H

; 606  : 			lpObj->ChaosLock = FALSE;

  00424	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00427	c7 80 bc 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3260], 0

; 607  : 		}

  00431	eb 30		 jmp	 SHORT $LN31@DefaultCha
$LN30@DefaultCha:

; 608  : 		else 
; 609  : 		{
; 610  : 			LogAddTD("[%s][%s] CBMix Success Rate:%d Money : %d", lpObj->AccountID, lpObj->Name, lpObj->ChaosSuccessRate, lpObj->ChaosMoney);

  00433	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00436	8b 88 b4 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3252]
  0043c	51		 push	 ecx
  0043d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00440	8b 82 b8 0c 00
	00		 mov	 eax, DWORD PTR [edx+3256]
  00446	50		 push	 eax
  00447	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0044a	83 c1 73	 add	 ecx, 115		; 00000073H
  0044d	51		 push	 ecx
  0044e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00451	83 c2 68	 add	 edx, 104		; 00000068H
  00454	52		 push	 edx
  00455	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@IKEPLJDI@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5Success?5Rate?3?$CFd?5@
  0045a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00460	83 c4 14	 add	 esp, 20			; 00000014H
$LN31@DefaultCha:

; 611  : 		}
; 612  : 		if( gChaosEvent )

  00463	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gChaosEvent@@3HA, 0 ; gChaosEvent
  0046a	74 1c		 je	 SHORT $LN6@DefaultCha

; 613  : 			CBUPS_ItemRequest(lpObj->m_Index, lpObj->AccountID, lpObj->Name);

  0046c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0046f	83 c0 73	 add	 eax, 115		; 00000073H
  00472	50		 push	 eax
  00473	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00476	83 c1 68	 add	 ecx, 104		; 00000068H
  00479	51		 push	 ecx
  0047a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0047d	8b 02		 mov	 eax, DWORD PTR [edx]
  0047f	50		 push	 eax
  00480	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00483	e8 00 00 00 00	 call	 ?CBUPS_ItemRequest@CMixSystem@@QAEXHPAD0@Z ; CMixSystem::CBUPS_ItemRequest
$LN6@DefaultCha:

; 614  : 	}	
; 615  : 	gObjInventoryCommit(lpObj->m_Index);

  00488	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0048b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0048d	51		 push	 ecx
  0048e	e8 00 00 00 00	 call	 ?gObjInventoryCommit@@YAHH@Z ; gObjInventoryCommit
  00493	83 c4 04	 add	 esp, 4
$LN1@DefaultCha:

; 616  : }

  00496	5f		 pop	 edi
  00497	5e		 pop	 esi
  00498	5b		 pop	 ebx
  00499	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0049c	33 cd		 xor	 ecx, ebp
  0049e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004a3	8b e5		 mov	 esp, ebp
  004a5	5d		 pop	 ebp
  004a6	c2 04 00	 ret	 4
?DefaultChaosMix@CMixSystem@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::DefaultChaosMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?ChaosBoxMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH@Z
_TEXT	SEGMENT
_n$1 = -40						; size = 4
_nv$ = -36						; size = 4
_add$ = -32						; size = 4
_value$ = -28						; size = 4
_ChaosItems$ = -24					; size = 4
_ChaosDiamond$ = -20					; size = 4
_ExOption$ = -16					; size = 8
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
_Result2$ = 12						; size = 4
?ChaosBoxMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH@Z PROC ; CMixSystem::ChaosBoxMix, COMDAT
; _this$ = ecx

; 244  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 68	 sub	 esp, 104		; 00000068H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 245  : 	BYTE ExOption[8];
; 246  : 
; 247  : 	int ChaosDiamond = 0;	// 혼돈의 보석 카운트

  00016	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _ChaosDiamond$[ebp], 0

; 248  : 	int ChaosItems = 0;		// 카오스박스 안에 있는 유효한 아이템 

  0001d	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _ChaosItems$[ebp], 0

; 249  : 
; 250  : 	if( lpObj->pChaosBox == NULL ) 

  00024	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00027	83 b8 ac 0c 00
	00 00		 cmp	 DWORD PTR [eax+3244], 0
  0002e	75 07		 jne	 SHORT $LN5@ChaosBoxMi

; 251  : 	{
; 252  : 		return 0;

  00030	33 c0		 xor	 eax, eax
  00032	e9 69 04 00 00	 jmp	 $LN1@ChaosBoxMi
$LN5@ChaosBoxMi:

; 253  : 	}
; 254  : 
; 255  : 	int value = 0;	// 조합 확률에 쓰이는 수치

  00037	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _value$[ebp], 0

; 256  : 	int add = 0;

  0003e	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _add$[ebp], 0

; 257  : 	int nv = 0;	

  00045	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _nv$[ebp], 0

; 258  : 	
; 259  : 	Result2 = FALSE;

  0004c	8b 45 0c	 mov	 eax, DWORD PTR _Result2$[ebp]
  0004f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], 0

; 260  : 
; 261  : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 262  : 	iWingIndex = -1;
; 263  : 	int iWingCharmItemNum = -1;
; 264  : #endif
; 265  : 
; 266  : 	lpObj->ChaosSuccessRate = 0;

  00055	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00058	c7 80 b8 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3256], 0

; 267  : 	lpObj->ChaosMoney		= 0;

  00062	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00065	c7 80 b4 0c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3252], 0

; 268  : 
; 269  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 270  : 	int iCharmOfLuckCount = 0;
; 271  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 272  : 
; 273  : 	for( int n = 0; n < MAX_CHAOSBOXITEMS; n++ )

  0006f	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  00076	eb 09		 jmp	 SHORT $LN4@ChaosBoxMi
$LN2@ChaosBoxMi:
  00078	8b 45 d8	 mov	 eax, DWORD PTR _n$1[ebp]
  0007b	83 c0 01	 add	 eax, 1
  0007e	89 45 d8	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@ChaosBoxMi:
  00081	83 7d d8 20	 cmp	 DWORD PTR _n$1[ebp], 32	; 00000020H
  00085	0f 8d 85 03 00
	00		 jge	 $LN3@ChaosBoxMi

; 274  : 	{
; 275  : 		if( lpObj->pChaosBox[n].IsItem() == TRUE )

  0008b	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00092	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00095	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  0009b	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  000a0	83 f8 01	 cmp	 eax, 1
  000a3	0f 85 62 03 00
	00		 jne	 $LN6@ChaosBoxMi

; 276  : 		{
; 277  : #ifdef NEW_FORSKYLAND3
; 278  : 			lpObj->pChaosBox[n].OldValue();

  000a9	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  000b0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b3	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  000b9	e8 00 00 00 00	 call	 ?OldValue@CItem@@QAEXXZ	; CItem::OldValue

; 279  : #endif
; 280  : 
; 281  : 			add = 0;

  000be	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _add$[ebp], 0

; 282  : 			nv  = 0;

  000c5	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _nv$[ebp], 0

; 283  : 
; 284  : 			if( lpObj->pChaosBox[n].m_Level >= 4 && ( lpObj->pChaosBox[n].m_Option3 * 4 ) >= 4 )

  000cc	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  000d3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000d6	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000dc	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  000e1	83 f8 04	 cmp	 eax, 4
  000e4	0f 8c d1 00 00
	00		 jl	 $LN8@ChaosBoxMi
  000ea	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  000f1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000f4	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000fa	0f b6 44 02 7a	 movzx	 eax, BYTE PTR [edx+eax+122]
  000ff	c1 e0 02	 shl	 eax, 2
  00102	83 f8 04	 cmp	 eax, 4
  00105	0f 8c b0 00 00
	00		 jl	 $LN8@ChaosBoxMi

; 285  : 			{	
; 286  : #ifdef NEW_FORSKYLAND3
; 287  : 				nv     = lpObj->pChaosBox[n].m_OldBuyMoney;

  0010b	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00112	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00115	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0011b	8b 44 02 74	 mov	 eax, DWORD PTR [edx+eax+116]
  0011f	89 45 dc	 mov	 DWORD PTR _nv$[ebp], eax

; 288  : 				value += lpObj->pChaosBox[n].m_OldBuyMoney;

  00122	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00129	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0012c	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00132	8b 4d e4	 mov	 ecx, DWORD PTR _value$[ebp]
  00135	03 4c 02 74	 add	 ecx, DWORD PTR [edx+eax+116]
  00139	89 4d e4	 mov	 DWORD PTR _value$[ebp], ecx

; 289  : #else
; 290  : 				nv     = lpObj->pChaosBox[n].m_BuyMoney;
; 291  : 				value += lpObj->pChaosBox[n].m_BuyMoney;
; 292  : #endif
; 293  : 				add = 1;

  0013c	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _add$[ebp], 1

; 294  : 				if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(2,6) ||	// 카오스드라곤도끼
; 295  : 					lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(4,6) ||	// 카오스네이쳐보우

  00143	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  0014a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0014d	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00153	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00158	6a 06		 push	 6
  0015a	6a 02		 push	 2
  0015c	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00161	83 c4 08	 add	 esp, 8
  00164	3b f0		 cmp	 esi, eax
  00166	74 4a		 je	 SHORT $LN9@ChaosBoxMi
  00168	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  0016f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00172	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00178	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0017d	6a 06		 push	 6
  0017f	6a 04		 push	 4
  00181	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00186	83 c4 08	 add	 esp, 8
  00189	3b f0		 cmp	 esi, eax
  0018b	74 25		 je	 SHORT $LN9@ChaosBoxMi
  0018d	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00194	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00197	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0019d	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  001a2	6a 07		 push	 7
  001a4	6a 05		 push	 5
  001a6	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001ab	83 c4 08	 add	 esp, 8
  001ae	3b f0		 cmp	 esi, eax
  001b0	75 09		 jne	 SHORT $LN8@ChaosBoxMi
$LN9@ChaosBoxMi:

; 296  : 					lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(5,7) )	// 카오스번개지팡이
; 297  : 				{
; 298  : 					Result2 = TRUE;

  001b2	8b 45 0c	 mov	 eax, DWORD PTR _Result2$[ebp]
  001b5	c7 00 01 00 00
	00		 mov	 DWORD PTR [eax], 1
$LN8@ChaosBoxMi:

; 299  : 				}
; 300  : 			}
; 301  : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12,15) )		// 혼돈의 보석

  001bb	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  001c2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001c5	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001cb	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  001d0	6a 0f		 push	 15			; 0000000fH
  001d2	6a 0c		 push	 12			; 0000000cH
  001d4	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001d9	83 c4 08	 add	 esp, 8
  001dc	3b f0		 cmp	 esi, eax
  001de	75 46		 jne	 SHORT $LN10@ChaosBoxMi

; 302  : 			{
; 303  : #ifdef NEW_FORSKYLAND3
; 304  : 				value += lpObj->pChaosBox[n].m_OldBuyMoney;

  001e0	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  001e7	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001ea	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001f0	8b 4d e4	 mov	 ecx, DWORD PTR _value$[ebp]
  001f3	03 4c 02 74	 add	 ecx, DWORD PTR [edx+eax+116]
  001f7	89 4d e4	 mov	 DWORD PTR _value$[ebp], ecx

; 305  : 				nv     = lpObj->pChaosBox[n].m_OldBuyMoney;

  001fa	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00201	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00204	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0020a	8b 44 02 74	 mov	 eax, DWORD PTR [edx+eax+116]
  0020e	89 45 dc	 mov	 DWORD PTR _nv$[ebp], eax

; 306  : #else
; 307  : 				value += lpObj->pChaosBox[n].m_BuyMoney;
; 308  : 				nv     = lpObj->pChaosBox[n].m_BuyMoney;
; 309  : #endif
; 310  : 				ChaosDiamond++;

  00211	8b 45 ec	 mov	 eax, DWORD PTR _ChaosDiamond$[ebp]
  00214	83 c0 01	 add	 eax, 1
  00217	89 45 ec	 mov	 DWORD PTR _ChaosDiamond$[ebp], eax

; 311  : 				add = 1;				

  0021a	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _add$[ebp], 1

; 312  : 			}			

  00221	e9 82 00 00 00	 jmp	 $LN12@ChaosBoxMi
$LN10@ChaosBoxMi:

; 313  : 			else if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,13) ||	// 축복의 보석

  00226	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  0022d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00230	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00236	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0023b	6a 0d		 push	 13			; 0000000dH
  0023d	6a 0e		 push	 14			; 0000000eH
  0023f	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00244	83 c4 08	 add	 esp, 8
  00247	3b f0		 cmp	 esi, eax
  00249	74 25		 je	 SHORT $LN13@ChaosBoxMi
  0024b	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00252	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00255	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0025b	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00260	6a 0e		 push	 14			; 0000000eH
  00262	6a 0e		 push	 14			; 0000000eH
  00264	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00269	83 c4 08	 add	 esp, 8
  0026c	3b f0		 cmp	 esi, eax
  0026e	75 38		 jne	 SHORT $LN12@ChaosBoxMi
$LN13@ChaosBoxMi:

; 314  : 			         lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,14) )	// 영혼의 보석
; 315  : 			{
; 316  : #ifdef NEW_FORSKYLAND3
; 317  : 				value += lpObj->pChaosBox[n].m_OldBuyMoney;

  00270	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00277	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0027a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00280	8b 4d e4	 mov	 ecx, DWORD PTR _value$[ebp]
  00283	03 4c 02 74	 add	 ecx, DWORD PTR [edx+eax+116]
  00287	89 4d e4	 mov	 DWORD PTR _value$[ebp], ecx

; 318  : 				nv     = lpObj->pChaosBox[n].m_OldBuyMoney;

  0028a	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00291	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00294	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0029a	8b 44 02 74	 mov	 eax, DWORD PTR [edx+eax+116]
  0029e	89 45 dc	 mov	 DWORD PTR _nv$[ebp], eax

; 319  : #else
; 320  : 				value += lpObj->pChaosBox[n].m_BuyMoney;
; 321  : 				nv     = lpObj->pChaosBox[n].m_BuyMoney;
; 322  : #endif
; 323  : 				add = 1;

  002a1	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _add$[ebp], 1
$LN12@ChaosBoxMi:

; 324  : 			}
; 325  : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 326  : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 83) || lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 84)
; 327  : 				|| lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 85) || lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 86)
; 328  : 				|| lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13, 87)) 
; 329  : 			{
; 330  : 				iWingCharmItemNum = lpObj->pChaosBox[n].m_Type;
; 331  : 			}
; 332  : #endif
; 333  : #ifdef JAPAN_ROCFEATHER_CBMIX_BLOCK_20040303	// 일본 로크의 깃털이 일반 조합이 들어가면 무조건 조합실패 되도록
; 334  : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 13,14 ) ) 
; 335  : 			{
; 336  : 				return 0;
; 337  : 			}
; 338  : #endif
; 339  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 340  : 			// 행운의 부적 아이템 추가
; 341  : 			if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM( 14, 53 ) )
; 342  : 			{
; 343  : 				iCharmOfLuckCount += lpObj->pChaosBox[n].m_Durability;
; 344  : 			}
; 345  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 346  : 			if( add ) 

  002a8	83 7d e0 00	 cmp	 DWORD PTR _add$[ebp], 0
  002ac	74 09		 je	 SHORT $LN14@ChaosBoxMi

; 347  : 			{
; 348  : 				ChaosItems++;

  002ae	8b 45 e8	 mov	 eax, DWORD PTR _ChaosItems$[ebp]
  002b1	83 c0 01	 add	 eax, 1
  002b4	89 45 e8	 mov	 DWORD PTR _ChaosItems$[ebp], eax
$LN14@ChaosBoxMi:

; 349  : 			}
; 350  : 			ItemIsBufExOption( ExOption, &lpObj->pChaosBox[n] );

  002b7	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  002be	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002c1	03 81 ac 0c 00
	00		 add	 eax, DWORD PTR [ecx+3244]
  002c7	50		 push	 eax
  002c8	8d 55 f0	 lea	 edx, DWORD PTR _ExOption$[ebp]
  002cb	52		 push	 edx
  002cc	e8 00 00 00 00	 call	 ?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z ; ItemIsBufExOption
  002d1	83 c4 08	 add	 esp, 8

; 351  : 
; 352  : #ifdef MODIFY_ITEM_SERIAL_EXPAND_20080227
; 353  : 			LogAdd( "[%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%u][%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 
; 354  : #else
; 355  : 			LogAdd( "[%s][%s] CBMix [%d,%s,%d,%d,%d,%d]serial:[%d][%d][%d] Ex:[%d,%d,%d,%d,%d,%d,%d]", 

  002d4	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  002db	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002de	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  002e4	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  002ec	50		 push	 eax
  002ed	b9 01 00 00 00	 mov	 ecx, 1
  002f2	6b d1 06	 imul	 edx, ecx, 6
  002f5	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  002fa	50		 push	 eax
  002fb	b9 01 00 00 00	 mov	 ecx, 1
  00300	6b d1 05	 imul	 edx, ecx, 5
  00303	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  00308	50		 push	 eax
  00309	b9 01 00 00 00	 mov	 ecx, 1
  0030e	c1 e1 02	 shl	 ecx, 2
  00311	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  00316	52		 push	 edx
  00317	b8 01 00 00 00	 mov	 eax, 1
  0031c	6b c8 03	 imul	 ecx, eax, 3
  0031f	0f b6 54 0d f0	 movzx	 edx, BYTE PTR _ExOption$[ebp+ecx]
  00324	52		 push	 edx
  00325	b8 01 00 00 00	 mov	 eax, 1
  0032a	d1 e0		 shl	 eax, 1
  0032c	0f b6 4c 05 f0	 movzx	 ecx, BYTE PTR _ExOption$[ebp+eax]
  00331	51		 push	 ecx
  00332	ba 01 00 00 00	 mov	 edx, 1
  00337	c1 e2 00	 shl	 edx, 0
  0033a	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  0033f	50		 push	 eax
  00340	b9 01 00 00 00	 mov	 ecx, 1
  00345	6b d1 00	 imul	 edx, ecx, 0
  00348	0f b6 44 15 f0	 movzx	 eax, BYTE PTR _ExOption$[ebp+edx]
  0034d	50		 push	 eax
  0034e	8b 4d dc	 mov	 ecx, DWORD PTR _nv$[ebp]
  00351	51		 push	 ecx
  00352	69 55 d8 a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  00359	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0035c	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  00362	f3 0f 2c 54 11
	24		 cvttss2si edx, DWORD PTR [ecx+edx+36]
  00368	52		 push	 edx
  00369	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  00370	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00373	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00379	8b 04 02	 mov	 eax, DWORD PTR [edx+eax]
  0037c	50		 push	 eax
  0037d	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  00384	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00387	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  0038d	0f b6 4c 08 7a	 movzx	 ecx, BYTE PTR [eax+ecx+122]
  00392	51		 push	 ecx
  00393	69 55 d8 a8 00
	00 00		 imul	 edx, DWORD PTR _n$1[ebp], 168
  0039a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0039d	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  003a3	0f b6 54 11 79	 movzx	 edx, BYTE PTR [ecx+edx+121]
  003a8	52		 push	 edx
  003a9	69 45 d8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$1[ebp], 168
  003b0	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003b3	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  003b9	0f b6 44 02 78	 movzx	 eax, BYTE PTR [edx+eax+120]
  003be	50		 push	 eax
  003bf	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  003c6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003c9	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  003cf	0f bf 4c 08 08	 movsx	 ecx, WORD PTR [eax+ecx+8]
  003d4	51		 push	 ecx
  003d5	69 4d d8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$1[ebp], 168
  003dc	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003df	03 8a ac 0c 00
	00		 add	 ecx, DWORD PTR [edx+3244]
  003e5	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  003ea	50		 push	 eax
  003eb	8b 45 d8	 mov	 eax, DWORD PTR _n$1[ebp]
  003ee	50		 push	 eax
  003ef	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003f2	83 c1 73	 add	 ecx, 115		; 00000073H
  003f5	51		 push	 ecx
  003f6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  003f9	83 c2 68	 add	 edx, 104		; 00000068H
  003fc	52		 push	 edx
  003fd	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@LILHPMOA@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5?$FL?$CFd?0?$CFs?0?$CFd?0?$CFd?0?$CFd?0@
  00402	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00408	83 c4 50	 add	 esp, 80			; 00000050H
$LN6@ChaosBoxMi:

; 356  : #endif // MODIFY_ITEM_SERIAL_EXPAND_20080227
; 357  : 				lpObj->AccountID, lpObj->Name, n, lpObj->pChaosBox[n].GetName(),
; 358  : 				lpObj->pChaosBox[n].m_Level,
; 359  : 				lpObj->pChaosBox[n].m_Option1,
; 360  : 				lpObj->pChaosBox[n].m_Option2,
; 361  : 				lpObj->pChaosBox[n].m_Option3, 
; 362  : 				lpObj->pChaosBox[n].m_Number, 
; 363  : 				(int)lpObj->pChaosBox[n].m_Durability, nv,
; 364  : 				ExOption[0],
; 365  : 				ExOption[1],
; 366  : 				ExOption[2],
; 367  : 				ExOption[3],
; 368  : 				ExOption[4],
; 369  : 				ExOption[5],
; 370  : 				ExOption[6],
; 371  : 				lpObj->pChaosBox[n].m_SetOption				
; 372  : 				);
; 373  : 		}		
; 374  : 	}

  0040b	e9 68 fc ff ff	 jmp	 $LN2@ChaosBoxMi
$LN3@ChaosBoxMi:

; 375  : /*	
; 376  : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 377  : 	if(iCharmOfLuckCount > 0 && iWingCharmItemNum > -1 ){
; 378  : 		// 행운의 부적과 날개 부적은 조합될 수 없다.(같이 사용할 수 없다)
; 379  : 		return 0;
; 380  : 	}
; 381  : #endif //ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 382  : */
; 383  : 	if( ChaosDiamond == 0 ) 

  00410	83 7d ec 00	 cmp	 DWORD PTR _ChaosDiamond$[ebp], 0
  00414	75 07		 jne	 SHORT $LN15@ChaosBoxMi

; 384  : 	{
; 385  : 		value = 0;

  00416	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _value$[ebp], 0
$LN15@ChaosBoxMi:

; 386  : 	}
; 387  : 	if( ChaosItems < 2 ) 

  0041d	83 7d e8 02	 cmp	 DWORD PTR _ChaosItems$[ebp], 2
  00421	7d 07		 jge	 SHORT $LN16@ChaosBoxMi

; 388  : 	{
; 389  : 		value = 0;

  00423	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _value$[ebp], 0
$LN16@ChaosBoxMi:

; 390  : 	}
; 391  : 
; 392  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 393  : 	if( iCharmOfLuckCount > 10 )
; 394  : 	{
; 395  : 		return 0;
; 396  : 	}
; 397  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 398  : 
; 399  : 	lpObj->ChaosSuccessRate = value / 20000;

  0042a	8b 45 e4	 mov	 eax, DWORD PTR _value$[ebp]
  0042d	99		 cdq
  0042e	b9 20 4e 00 00	 mov	 ecx, 20000		; 00004e20H
  00433	f7 f9		 idiv	 ecx
  00435	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00438	89 82 b8 0c 00
	00		 mov	 DWORD PTR [edx+3256], eax

; 400  : 
; 401  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 402  : 	lpObj->ChaosSuccessRate += iCharmOfLuckCount;
; 403  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 404  : 
; 405  : 	if( lpObj->ChaosSuccessRate > 100 )

  0043e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00441	83 b8 b8 0c 00
	00 64		 cmp	 DWORD PTR [eax+3256], 100 ; 00000064H
  00448	7e 0d		 jle	 SHORT $LN17@ChaosBoxMi

; 406  : 	{
; 407  : 		lpObj->ChaosSuccessRate = 100;

  0044a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0044d	c7 80 b8 0c 00
	00 64 00 00 00	 mov	 DWORD PTR [eax+3256], 100 ; 00000064H
$LN17@ChaosBoxMi:

; 408  : 	}
; 409  : 	lpObj->ChaosMoney = lpObj->ChaosSuccessRate*10000;

  00457	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0045a	69 88 b8 0c 00
	00 10 27 00 00	 imul	 ecx, DWORD PTR [eax+3256], 10000
  00464	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00467	89 8a b4 0c 00
	00		 mov	 DWORD PTR [edx+3252], ecx

; 410  : 	
; 411  : #if TESTSERVER == 1
; 412  : 	char msg[255];
; 413  : 	wsprintf(msg, "카오스조합확률=%d", lpObj->ChaosSuccessRate);
; 414  : 	GCServerMsgStringSend(msg, lpObj->m_Index, 1);	
; 415  : #endif
; 416  : 
; 417  : 	// 레벨 4 에 +4 옵 이상만 value 더해줌
; 418  : #ifdef MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 419  : 	LogAddTD("[%s][%s] CBMix need Zen : %d SuccessRate : %d, CharmRate : %d",lpObj->AccountID, lpObj->Name, lpObj->ChaosMoney, lpObj->ChaosSuccessRate, iCharmOfLuckCount);
; 420  : #else
; 421  : 	LogAddTD("[%s][%s] CBMix need Zen : %d SuccessRate : %d",lpObj->AccountID, lpObj->Name, lpObj->ChaosMoney, lpObj->ChaosSuccessRate);

  0046d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00470	8b 88 b8 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3256]
  00476	51		 push	 ecx
  00477	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0047a	8b 82 b4 0c 00
	00		 mov	 eax, DWORD PTR [edx+3252]
  00480	50		 push	 eax
  00481	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00484	83 c1 73	 add	 ecx, 115		; 00000073H
  00487	51		 push	 ecx
  00488	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0048b	83 c2 68	 add	 edx, 104		; 00000068H
  0048e	52		 push	 edx
  0048f	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@OHEDNMHC@?$FL?$CFs?$FN?$FL?$CFs?$FN?5CBMix?5need?5Zen?5?3?5?$CFd?5Su@
  00494	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0049a	83 c4 14	 add	 esp, 20			; 00000014H

; 422  : #endif // MODIFY_PCS_CHAOSMIX_REFACTORING_20070903
; 423  : 
; 424  : #ifdef ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 425  : 	// 6차 과금 아이템 날개 조합 부적 ( 해당 클래스에 맞는 아이템이 나온다. )
; 426  : 	if(iWingCharmItemNum > -1) {
; 427  : 		// 날개 조합 부적의 인덱스를 추출해서 해당 날개의 index를 구하자.
; 428  : 		int iWingCharmIndex = iWingCharmItemNum ^ (13 << ITEM_BITSHIFT);
; 429  : 		switch( iWingCharmIndex )
; 430  : 		{
; 431  : 		case 83: //사탄날개 부적
; 432  : 			iWingIndex = 2;
; 433  : 			break;
; 434  : 		case 84: // 천공날개 부적
; 435  : 			iWingIndex = 1;
; 436  : 			break;
; 437  : 		case 85: // 요정날개 부적
; 438  : 			iWingIndex = 0;
; 439  : 			break;
; 440  : 		case 86: // 재앙날개 부적
; 441  : 			iWingIndex = 41;
; 442  : 			break;
; 443  : 		case 87: // 망토조합 부적 
; 444  : #ifdef MODIFY_WINGCHAM_DARKLOAD3RD_WING_20090914
; 445  : 			iWingIndex = 30;
; 446  : #else
; 447  : 			iWingIndex = 40;
; 448  : #endif //MODIFY_WINGCHAM_DARKLOAD3RD_WING_20090914
; 449  : 			break;
; 450  : 		default:
; 451  : 			// 이건 아직 등록되지 않은 조합 부적이네.. (해당 부적이 없는지 확인하거나 type이 13이 맞는지 확인하라..
; 452  : 			LogAddTD("[MixSystem] WingCharmItemNum => %d , WingCharmIndex => %d",iWingCharmItemNum ,iWingCharmIndex);
; 453  : 			break;
; 454  : 		}
; 455  : 	}
; 456  : 	
; 457  : #endif //ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 458  : 
; 459  : 	return value;

  0049d	8b 45 e4	 mov	 eax, DWORD PTR _value$[ebp]
$LN1@ChaosBoxMi:

; 460  : }

  004a0	5f		 pop	 edi
  004a1	5e		 pop	 esi
  004a2	5b		 pop	 ebx
  004a3	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004a6	33 cd		 xor	 ecx, ebp
  004a8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004ad	8b e5		 mov	 esp, ebp
  004af	5d		 pop	 ebp
  004b0	c2 08 00	 ret	 8
?ChaosBoxMix@CMixSystem@@QAEHPAVOBJECTSTRUCT@@AAH@Z ENDP ; CMixSystem::ChaosBoxMix
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?ChaosBoxItemDown@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_levelitemdur$1 = -16					; size = 4
_op$2 = -12						; size = 4
_n$ = -8						; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?ChaosBoxItemDown@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z PROC ; CMixSystem::ChaosBoxItemDown, COMDAT
; _this$ = ecx

; 150  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 151  : 	int n;
; 152  : 
; 153  : 	if( lpObj->pChaosBox == NULL ) 

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000f	83 b8 ac 0c 00
	00 00		 cmp	 DWORD PTR [eax+3244], 0
  00016	75 07		 jne	 SHORT $LN5@ChaosBoxIt

; 154  : 	{
; 155  : 		return FALSE;

  00018	33 c0		 xor	 eax, eax
  0001a	e9 ee 02 00 00	 jmp	 $LN1@ChaosBoxIt
$LN5@ChaosBoxIt:

; 156  : 	}
; 157  : 
; 158  : 	for( n = 0; n < MAX_CHAOSBOXITEMS; n++ )

  0001f	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _n$[ebp], 0
  00026	eb 09		 jmp	 SHORT $LN4@ChaosBoxIt
$LN2@ChaosBoxIt:
  00028	8b 45 f8	 mov	 eax, DWORD PTR _n$[ebp]
  0002b	83 c0 01	 add	 eax, 1
  0002e	89 45 f8	 mov	 DWORD PTR _n$[ebp], eax
$LN4@ChaosBoxIt:
  00031	83 7d f8 20	 cmp	 DWORD PTR _n$[ebp], 32	; 00000020H
  00035	0f 8d cd 02 00
	00		 jge	 $LN3@ChaosBoxIt

; 159  : 	{
; 160  : 		if( lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(12,15) ||	// 혼돈의 보석
; 161  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,13) ||	// 축복의 보석

  0003b	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00042	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00045	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0004b	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00050	6a 0f		 push	 15			; 0000000fH
  00052	6a 0c		 push	 12			; 0000000cH
  00054	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00059	83 c4 08	 add	 esp, 8
  0005c	3b f0		 cmp	 esi, eax
  0005e	74 4a		 je	 SHORT $LN8@ChaosBoxIt
  00060	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00067	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0006a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00070	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  00075	6a 0d		 push	 13			; 0000000dH
  00077	6a 0e		 push	 14			; 0000000eH
  00079	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0007e	83 c4 08	 add	 esp, 8
  00081	3b f0		 cmp	 esi, eax
  00083	74 25		 je	 SHORT $LN8@ChaosBoxIt
  00085	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  0008c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0008f	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00095	0f bf 74 02 06	 movsx	 esi, WORD PTR [edx+eax+6]
  0009a	6a 0e		 push	 14			; 0000000eH
  0009c	6a 0e		 push	 14			; 0000000eH
  0009e	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000a3	83 c4 08	 add	 esp, 8
  000a6	3b f0		 cmp	 esi, eax
  000a8	75 1a		 jne	 SHORT $LN6@ChaosBoxIt
$LN8@ChaosBoxIt:

; 162  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,14)		// 영혼의 보석
; 163  : #ifdef	ADD_PARTIALY_CHARGE_SYSTEM_06_20090129
; 164  : 			|| lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,83) ||
; 165  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,84) ||
; 166  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,85) ||
; 167  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,86) ||
; 168  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,87) ||
; 169  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,88) ||
; 170  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,89) ||
; 171  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,90) ||
; 172  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,91) ||
; 173  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(13,92) ||
; 174  : 			lpObj->pChaosBox[n].m_Type == MAKE_ITEMNUM(14,53)		
; 175  : #endif
; 176  : 			)
; 177  : 		{
; 178  : 			lpObj->pChaosBox[n].Clear();

  000aa	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  000b1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b4	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  000ba	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear

; 179  : 		}

  000bf	e9 3f 02 00 00	 jmp	 $LN7@ChaosBoxIt
$LN6@ChaosBoxIt:

; 180  : 		else 
; 181  : 		{
; 182  : 			int op;
; 183  : 			
; 184  : 			op = lpObj->pChaosBox[n].m_Option1;

  000c4	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  000cb	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000ce	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  000d4	0f b6 44 02 78	 movzx	 eax, BYTE PTR [edx+eax+120]
  000d9	89 45 f4	 mov	 DWORD PTR _op$2[ebp], eax

; 185  : 			if( op > 0 ) 

  000dc	83 7d f4 00	 cmp	 DWORD PTR _op$2[ebp], 0
  000e0	7e 1e		 jle	 SHORT $LN10@ChaosBoxIt

; 186  : 			{
; 187  : 				if( rand()%2 == 0 ) 

  000e2	e8 00 00 00 00	 call	 _rand
  000e7	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000ec	79 05		 jns	 SHORT $LN15@ChaosBoxIt
  000ee	48		 dec	 eax
  000ef	83 c8 fe	 or	 eax, -2			; fffffffeH
  000f2	40		 inc	 eax
$LN15@ChaosBoxIt:
  000f3	85 c0		 test	 eax, eax
  000f5	75 09		 jne	 SHORT $LN10@ChaosBoxIt

; 188  : 				{
; 189  : 					op--;

  000f7	8b 45 f4	 mov	 eax, DWORD PTR _op$2[ebp]
  000fa	83 e8 01	 sub	 eax, 1
  000fd	89 45 f4	 mov	 DWORD PTR _op$2[ebp], eax
$LN10@ChaosBoxIt:

; 190  : 				}
; 191  : 			}
; 192  : 			lpObj->pChaosBox[n].m_Option1 = op;

  00100	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00107	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0010a	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00110	8a 4d f4	 mov	 cl, BYTE PTR _op$2[ebp]
  00113	88 4c 02 78	 mov	 BYTE PTR [edx+eax+120], cl

; 193  : 
; 194  : 			op = lpObj->pChaosBox[n].m_Option3;

  00117	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  0011e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00121	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00127	0f b6 44 02 7a	 movzx	 eax, BYTE PTR [edx+eax+122]
  0012c	89 45 f4	 mov	 DWORD PTR _op$2[ebp], eax

; 195  : 			if( op > 0 ) 

  0012f	83 7d f4 00	 cmp	 DWORD PTR _op$2[ebp], 0
  00133	7e 1e		 jle	 SHORT $LN12@ChaosBoxIt

; 196  : 			{
; 197  : 				if( rand()%2 == 0 ) 

  00135	e8 00 00 00 00	 call	 _rand
  0013a	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0013f	79 05		 jns	 SHORT $LN16@ChaosBoxIt
  00141	48		 dec	 eax
  00142	83 c8 fe	 or	 eax, -2			; fffffffeH
  00145	40		 inc	 eax
$LN16@ChaosBoxIt:
  00146	85 c0		 test	 eax, eax
  00148	75 09		 jne	 SHORT $LN12@ChaosBoxIt

; 198  : 				{
; 199  : 					op--;	

  0014a	8b 45 f4	 mov	 eax, DWORD PTR _op$2[ebp]
  0014d	83 e8 01	 sub	 eax, 1
  00150	89 45 f4	 mov	 DWORD PTR _op$2[ebp], eax
$LN12@ChaosBoxIt:

; 200  : 				}
; 201  : 			}
; 202  : 			lpObj->pChaosBox[n].m_Option3 = op;

  00153	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  0015a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0015d	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00163	8a 4d f4	 mov	 cl, BYTE PTR _op$2[ebp]
  00166	88 4c 02 7a	 mov	 BYTE PTR [edx+eax+122], cl

; 203  : 
; 204  : 			if( lpObj->pChaosBox[n].m_Level > 0 )

  0016a	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00171	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00174	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0017a	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  0017f	85 c0		 test	 eax, eax
  00181	7e 32		 jle	 SHORT $LN13@ChaosBoxIt

; 205  : 			{
; 206  : 				lpObj->pChaosBox[n].m_Level = rand() % ( lpObj->pChaosBox[n].m_Level );

  00183	e8 00 00 00 00	 call	 _rand
  00188	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  0018f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00192	8b 92 ac 0c 00
	00		 mov	 edx, DWORD PTR [edx+3244]
  00198	0f bf 4c 0a 08	 movsx	 ecx, WORD PTR [edx+ecx+8]
  0019d	99		 cdq
  0019e	f7 f9		 idiv	 ecx
  001a0	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  001a7	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001aa	8b 89 ac 0c 00
	00		 mov	 ecx, DWORD PTR [ecx+3244]
  001b0	66 89 54 01 08	 mov	 WORD PTR [ecx+eax+8], dx
$LN13@ChaosBoxIt:

; 207  : 			}
; 208  : 
; 209  : 			float levelitemdur =  (float)ItemGetDurability(lpObj->pChaosBox[n].m_Type, 

  001b5	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  001bc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001bf	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  001c5	e8 00 00 00 00	 call	 ?IsSetItem@CItem@@QAEHXZ ; CItem::IsSetItem
  001ca	50		 push	 eax
  001cb	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  001d2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001d5	03 8a ac 0c 00
	00		 add	 ecx, DWORD PTR [edx+3244]
  001db	e8 00 00 00 00	 call	 ?IsExtItem@CItem@@QAEHXZ ; CItem::IsExtItem
  001e0	50		 push	 eax
  001e1	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  001e8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001eb	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  001f1	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  001f6	50		 push	 eax
  001f7	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  001fe	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00201	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00207	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  0020c	51		 push	 ecx
  0020d	e8 00 00 00 00	 call	 ?ItemGetDurability@@YAHHHHH@Z ; ItemGetDurability
  00212	83 c4 10	 add	 esp, 16			; 00000010H
  00215	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00219	f3 0f 11 45 f0	 movss	 DWORD PTR _levelitemdur$1[ebp], xmm0

; 210  : 														   lpObj->pChaosBox[n].m_Level, 
; 211  : 														   lpObj->pChaosBox[n].IsExtItem(),
; 212  : 														   lpObj->pChaosBox[n].IsSetItem());
; 213  : 			
; 214  : 			lpObj->pChaosBox[n].m_Durability = levelitemdur*lpObj->pChaosBox[n].m_Durability/lpObj->pChaosBox[n].m_BaseDurability;

  0021e	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00225	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00228	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0022e	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _levelitemdur$1[ebp]
  00233	f3 0f 59 44 02
	24		 mulss	 xmm0, DWORD PTR [edx+eax+36]
  00239	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00240	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00243	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00249	f3 0f 5e 44 02
	2c		 divss	 xmm0, DWORD PTR [edx+eax+44]
  0024f	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  00256	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00259	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  0025f	f3 0f 11 44 02
	24		 movss	 DWORD PTR [edx+eax+36], xmm0

; 215  : 
; 216  : #ifdef ADD_380ITEM_NEWOPTION_20060711
; 217  : 			lpObj->pChaosBox[n].Convert(lpObj->pChaosBox[n].m_Type, 
; 218  : 										lpObj->pChaosBox[n].m_Option1, 
; 219  : 										lpObj->pChaosBox[n].m_Option2, 
; 220  : 										lpObj->pChaosBox[n].m_Option3, 
; 221  : 										lpObj->pChaosBox[n].m_NewOption,
; 222  : 										lpObj->pChaosBox[n].m_SetOption,
; 223  : 										lpObj->pChaosBox[n].m_ItemOptionEx);
; 224  : #else
; 225  : 			lpObj->pChaosBox[n].Convert(lpObj->pChaosBox[n].m_Type, 

  00265	6a 01		 push	 1
  00267	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  0026e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00271	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  00277	0f b6 84 02 92
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+146]
  0027f	50		 push	 eax
  00280	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  00287	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0028a	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  00290	0f b6 4c 08 7b	 movzx	 ecx, BYTE PTR [eax+ecx+123]
  00295	51		 push	 ecx
  00296	69 55 f8 a8 00
	00 00		 imul	 edx, DWORD PTR _n$[ebp], 168
  0029d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002a0	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  002a6	0f b6 54 11 7a	 movzx	 edx, BYTE PTR [ecx+edx+122]
  002ab	52		 push	 edx
  002ac	69 45 f8 a8 00
	00 00		 imul	 eax, DWORD PTR _n$[ebp], 168
  002b3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002b6	8b 91 ac 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3244]
  002bc	0f b6 44 02 79	 movzx	 eax, BYTE PTR [edx+eax+121]
  002c1	50		 push	 eax
  002c2	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  002c9	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002cc	8b 82 ac 0c 00
	00		 mov	 eax, DWORD PTR [edx+3244]
  002d2	0f b6 4c 08 78	 movzx	 ecx, BYTE PTR [eax+ecx+120]
  002d7	51		 push	 ecx
  002d8	69 55 f8 a8 00
	00 00		 imul	 edx, DWORD PTR _n$[ebp], 168
  002df	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002e2	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  002e8	0f bf 54 11 06	 movsx	 edx, WORD PTR [ecx+edx+6]
  002ed	52		 push	 edx
  002ee	69 4d f8 a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  002f5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002f8	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  002fe	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEE@Z ; CItem::Convert
$LN7@ChaosBoxIt:

; 226  : 										lpObj->pChaosBox[n].m_Option1, 
; 227  : 										lpObj->pChaosBox[n].m_Option2, 
; 228  : 										lpObj->pChaosBox[n].m_Option3, 
; 229  : 										lpObj->pChaosBox[n].m_NewOption,
; 230  : 										lpObj->pChaosBox[n].m_SetOption);
; 231  : #endif // ADD_380ITEM_NEWOPTION_20060711
; 232  : 
; 233  : 		}
; 234  : 	}

  00303	e9 20 fd ff ff	 jmp	 $LN2@ChaosBoxIt
$LN3@ChaosBoxIt:

; 235  : 	return TRUE;

  00308	b8 01 00 00 00	 mov	 eax, 1
$LN1@ChaosBoxIt:

; 236  : }

  0030d	5f		 pop	 edi
  0030e	5e		 pop	 esi
  0030f	5b		 pop	 ebx
  00310	8b e5		 mov	 esp, ebp
  00312	5d		 pop	 ebp
  00313	c2 04 00	 ret	 4
?ChaosBoxItemDown@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ENDP ; CMixSystem::ChaosBoxItemDown
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
tv91 = -104						; size = 4
$T2 = -100						; size = 4
$T3 = -96						; size = 4
$T4 = -92						; size = 4
$T5 = -88						; size = 4
_n$ = -20						; size = 4
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
_lpObj$ = 8						; size = 4
?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z PROC	; CMixSystem::ChaosBoxInit, COMDAT
; _this$ = ecx

; 113  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00014	53		 push	 ebx
  00015	56		 push	 esi
  00016	57		 push	 edi
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	50		 push	 eax
  0001f	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00022	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00028	89 4d f0	 mov	 DWORD PTR _this$[ebp], ecx

; 114  : 	int n;
; 115  : 
; 116  : 	if( lpObj->pChaosBox != NULL ) 

  0002b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0002e	83 b8 ac 0c 00
	00 00		 cmp	 DWORD PTR [eax+3244], 0
  00035	74 63		 je	 SHORT $LN11@ChaosBoxIn

; 117  : 	{
; 118  : 		for( n=0; n<MAX_CHAOSBOXITEMS; n++)

  00037	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$[ebp], 0
  0003e	eb 09		 jmp	 SHORT $LN4@ChaosBoxIn
$LN2@ChaosBoxIn:
  00040	8b 45 ec	 mov	 eax, DWORD PTR _n$[ebp]
  00043	83 c0 01	 add	 eax, 1
  00046	89 45 ec	 mov	 DWORD PTR _n$[ebp], eax
$LN4@ChaosBoxIn:
  00049	83 7d ec 20	 cmp	 DWORD PTR _n$[ebp], 32	; 00000020H
  0004d	7d 17		 jge	 SHORT $LN3@ChaosBoxIn

; 119  : 		{
; 120  : 			lpObj->pChaosBox[n].Clear();

  0004f	69 4d ec a8 00
	00 00		 imul	 ecx, DWORD PTR _n$[ebp], 168
  00056	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00059	03 88 ac 0c 00
	00		 add	 ecx, DWORD PTR [eax+3244]
  0005f	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear

; 121  : 		}

  00064	eb da		 jmp	 SHORT $LN2@ChaosBoxIn
$LN3@ChaosBoxIn:

; 122  : 		for( n=0; n<MAX_CHAOSBOXSIZE; n++)

  00066	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$[ebp], 0
  0006d	eb 09		 jmp	 SHORT $LN7@ChaosBoxIn
$LN5@ChaosBoxIn:
  0006f	8b 45 ec	 mov	 eax, DWORD PTR _n$[ebp]
  00072	83 c0 01	 add	 eax, 1
  00075	89 45 ec	 mov	 DWORD PTR _n$[ebp], eax
$LN7@ChaosBoxIn:
  00078	83 7d ec 20	 cmp	 DWORD PTR _n$[ebp], 32	; 00000020H
  0007c	7d 12		 jge	 SHORT $LN6@ChaosBoxIn

; 123  : 		{
; 124  : 			lpObj->pChaosBoxMap[n] = 0xFF;

  0007e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00081	8b 88 b0 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3248]
  00087	8b 55 ec	 mov	 edx, DWORD PTR _n$[ebp]
  0008a	c6 04 11 ff	 mov	 BYTE PTR [ecx+edx], 255	; 000000ffH

; 125  : 		}

  0008e	eb df		 jmp	 SHORT $LN5@ChaosBoxIn
$LN6@ChaosBoxIn:

; 126  : 		return TRUE;

  00090	b8 01 00 00 00	 mov	 eax, 1
  00095	e9 df 00 00 00	 jmp	 $LN1@ChaosBoxIn
$LN11@ChaosBoxIn:

; 127  : 	}
; 128  : 	
; 129  : 	lpObj->pChaosBox = new CItem [MAX_CHAOSBOXSIZE];

  0009a	68 00 15 00 00	 push	 5376			; 00001500H
  0009f	e8 00 00 00 00	 call	 ??_U@YAPAXI@Z		; operator new[]
  000a4	83 c4 04	 add	 esp, 4
  000a7	89 45 a4	 mov	 DWORD PTR $T4[ebp], eax
  000aa	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  000b1	83 7d a4 00	 cmp	 DWORD PTR $T4[ebp], 0
  000b5	74 1d		 je	 SHORT $LN15@ChaosBoxIn
  000b7	68 00 00 00 00	 push	 OFFSET ??0CItem@@QAE@XZ	; CItem::CItem
  000bc	6a 20		 push	 32			; 00000020H
  000be	68 a8 00 00 00	 push	 168			; 000000a8H
  000c3	8b 45 a4	 mov	 eax, DWORD PTR $T4[ebp]
  000c6	50		 push	 eax
  000c7	e8 00 00 00 00	 call	 ??_H@YGXPAXIIP6EPAX0@Z@Z
  000cc	8b 4d a4	 mov	 ecx, DWORD PTR $T4[ebp]
  000cf	89 4d 98	 mov	 DWORD PTR tv91[ebp], ecx
  000d2	eb 07		 jmp	 SHORT $LN16@ChaosBoxIn
$LN15@ChaosBoxIn:
  000d4	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv91[ebp], 0
$LN16@ChaosBoxIn:
  000db	8b 55 98	 mov	 edx, DWORD PTR tv91[ebp]
  000de	89 55 a8	 mov	 DWORD PTR $T5[ebp], edx
  000e1	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  000e8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000eb	8b 4d a8	 mov	 ecx, DWORD PTR $T5[ebp]
  000ee	89 88 ac 0c 00
	00		 mov	 DWORD PTR [eax+3244], ecx

; 130  : 	if( lpObj->pChaosBox == NULL )

  000f4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000f7	83 b8 ac 0c 00
	00 00		 cmp	 DWORD PTR [eax+3244], 0
  000fe	75 04		 jne	 SHORT $LN12@ChaosBoxIn

; 131  : 	{
; 132  : 		return FALSE;

  00100	33 c0		 xor	 eax, eax
  00102	eb 75		 jmp	 SHORT $LN1@ChaosBoxIn
$LN12@ChaosBoxIn:

; 133  : 	}
; 134  : 
; 135  : 	lpObj->pChaosBoxMap = new BYTE [MAX_CHAOSBOXSIZE];

  00104	6a 20		 push	 32			; 00000020H
  00106	e8 00 00 00 00	 call	 ??_U@YAPAXI@Z		; operator new[]
  0010b	83 c4 04	 add	 esp, 4
  0010e	89 45 a0	 mov	 DWORD PTR $T3[ebp], eax
  00111	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00114	8b 4d a0	 mov	 ecx, DWORD PTR $T3[ebp]
  00117	89 88 b0 0c 00
	00		 mov	 DWORD PTR [eax+3248], ecx

; 136  : 	if( lpObj->pChaosBoxMap == NULL )

  0011d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00120	83 b8 b0 0c 00
	00 00		 cmp	 DWORD PTR [eax+3248], 0
  00127	75 21		 jne	 SHORT $LN13@ChaosBoxIn

; 137  : 	{
; 138  : 		delete lpObj->pChaosBox;

  00129	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0012c	8b 88 ac 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3244]
  00132	89 4d 9c	 mov	 DWORD PTR $T2[ebp], ecx
  00135	68 a8 00 00 00	 push	 168			; 000000a8H
  0013a	8b 55 9c	 mov	 edx, DWORD PTR $T2[ebp]
  0013d	52		 push	 edx
  0013e	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00143	83 c4 08	 add	 esp, 8

; 139  : 		return FALSE;

  00146	33 c0		 xor	 eax, eax
  00148	eb 2f		 jmp	 SHORT $LN1@ChaosBoxIn
$LN13@ChaosBoxIn:

; 140  : 	}
; 141  : 	for( n=0; n<MAX_CHAOSBOXSIZE; n++)

  0014a	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$[ebp], 0
  00151	eb 09		 jmp	 SHORT $LN10@ChaosBoxIn
$LN8@ChaosBoxIn:
  00153	8b 45 ec	 mov	 eax, DWORD PTR _n$[ebp]
  00156	83 c0 01	 add	 eax, 1
  00159	89 45 ec	 mov	 DWORD PTR _n$[ebp], eax
$LN10@ChaosBoxIn:
  0015c	83 7d ec 20	 cmp	 DWORD PTR _n$[ebp], 32	; 00000020H
  00160	7d 12		 jge	 SHORT $LN9@ChaosBoxIn

; 142  : 	{
; 143  : 		lpObj->pChaosBoxMap[n] = 0xFF;

  00162	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00165	8b 88 b0 0c 00
	00		 mov	 ecx, DWORD PTR [eax+3248]
  0016b	8b 55 ec	 mov	 edx, DWORD PTR _n$[ebp]
  0016e	c6 04 11 ff	 mov	 BYTE PTR [ecx+edx], 255	; 000000ffH

; 144  : 	}

  00172	eb df		 jmp	 SHORT $LN8@ChaosBoxIn
$LN9@ChaosBoxIn:

; 145  : 	return TRUE;

  00174	b8 01 00 00 00	 mov	 eax, 1
$LN1@ChaosBoxIn:

; 146  : }

  00179	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  0017c	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00183	59		 pop	 ecx
  00184	5f		 pop	 edi
  00185	5e		 pop	 esi
  00186	5b		 pop	 ebx
  00187	8b e5		 mov	 esp, ebp
  00189	5d		 pop	 ebp
  0018a	c2 04 00	 ret	 4
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z$0:
  00000	68 00 15 00 00	 push	 5376			; 00001500H
  00005	8b 45 a4	 mov	 eax, DWORD PTR $T4[ebp]
  00008	50		 push	 eax
  00009	e8 00 00 00 00	 call	 ??_V@YAXPAXI@Z		; operator delete[]
  0000e	83 c4 08	 add	 esp, 8
  00011	c3		 ret	 0
  00012	cc		 int	 3
  00013	cc		 int	 3
  00014	cc		 int	 3
  00015	cc		 int	 3
  00016	cc		 int	 3
__ehhandler$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z:
  00017	90		 npad	 1
  00018	90		 npad	 1
  00019	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  0001d	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00020	8b 4a 94	 mov	 ecx, DWORD PTR [edx-108]
  00023	33 c8		 xor	 ecx, eax
  00025	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0002a	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
  0002f	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?ChaosBoxInit@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ENDP	; CMixSystem::ChaosBoxInit
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?ChaosBoxCheck@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?ChaosBoxCheck@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z PROC	; CMixSystem::ChaosBoxCheck, COMDAT
; _this$ = ecx

; 103  : {	

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 104  : 	if( lpObj->pChaosBox == NULL ) 

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000f	83 b8 ac 0c 00
	00 00		 cmp	 DWORD PTR [eax+3244], 0
  00016	75 04		 jne	 SHORT $LN2@ChaosBoxCh

; 105  : 	{
; 106  : 		return FALSE;

  00018	33 c0		 xor	 eax, eax
  0001a	eb 05		 jmp	 SHORT $LN1@ChaosBoxCh
$LN2@ChaosBoxCh:

; 107  : 	}
; 108  : 	return TRUE;

  0001c	b8 01 00 00 00	 mov	 eax, 1
$LN1@ChaosBoxCh:

; 109  : }

  00021	5f		 pop	 edi
  00022	5e		 pop	 esi
  00023	5b		 pop	 ebx
  00024	8b e5		 mov	 esp, ebp
  00026	5d		 pop	 ebp
  00027	c2 04 00	 ret	 4
?ChaosBoxCheck@CMixSystem@@QAEHPAVOBJECTSTRUCT@@@Z ENDP	; CMixSystem::ChaosBoxCheck
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ??1CMixSystem@@UAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CMixSystem@@UAE@XZ PROC				; CMixSystem::~CMixSystem, COMDAT
; _this$ = ecx

; 98   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CMixSystem@@6B@

; 99   : 
; 100  : }

  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
??1CMixSystem@@UAE@XZ ENDP				; CMixSystem::~CMixSystem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ??0CMixSystem@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CMixSystem@@QAE@XZ PROC				; CMixSystem::CMixSystem, COMDAT
; _this$ = ecx

; 69   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CMixSystem@@6B@

; 70   : 	CHAOS_GEM_ITEMINDEX			= MAKE_ITEMNUM( 12, 15 );	// 혼돈의보석

  00015	6a 0f		 push	 15			; 0000000fH
  00017	6a 0c		 push	 12			; 0000000cH
  00019	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0001e	83 c4 08	 add	 esp, 8
  00021	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00024	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 71   : 	BLESS_GEM_ITEMINDEX			= MAKE_ITEMNUM( 14, 13 );	// 축복의보석

  00027	6a 0d		 push	 13			; 0000000dH
  00029	6a 0e		 push	 14			; 0000000eH
  0002b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00030	83 c4 08	 add	 esp, 8
  00033	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00036	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 72   : 	SOUL_GEM_ITEMINDEX			= MAKE_ITEMNUM( 14, 14 );	// 영혼의보석

  00039	6a 0e		 push	 14			; 0000000eH
  0003b	6a 0e		 push	 14			; 0000000eH
  0003d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00042	83 c4 08	 add	 esp, 8
  00045	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00048	89 41 0c	 mov	 DWORD PTR [ecx+12], eax

; 73   : 	CREATURE_GEM_ITEMINDEX		= MAKE_ITEMNUM( 14, 22 );	// 창조의보석

  0004b	6a 16		 push	 22			; 00000016H
  0004d	6a 0e		 push	 14			; 0000000eH
  0004f	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00054	83 c4 08	 add	 esp, 8
  00057	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0005a	89 41 10	 mov	 DWORD PTR [ecx+16], eax

; 74   : 
; 75   : 	BLESS_GEM_BUNDLE_ITEMINDEX	= MAKE_ITEMNUM( 12, 30 );	// 축복의보석 묶음

  0005d	6a 1e		 push	 30			; 0000001eH
  0005f	6a 0c		 push	 12			; 0000000cH
  00061	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00066	83 c4 08	 add	 esp, 8
  00069	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0006c	89 41 14	 mov	 DWORD PTR [ecx+20], eax

; 76   : 	SOUL_GEM_BULDLE_ITEMINDEX	= MAKE_ITEMNUM( 12, 31 );	// 영혼의보석 묶음

  0006f	6a 1f		 push	 31			; 0000001fH
  00071	6a 0c		 push	 12			; 0000000cH
  00073	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00078	83 c4 08	 add	 esp, 8
  0007b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0007e	89 41 18	 mov	 DWORD PTR [ecx+24], eax

; 77   : 
; 78   : 	CONDOR_FEATHER_ITEMINDEX	= MAKE_ITEMNUM( 13, 53 );	// 콘도르의깃털

  00081	6a 35		 push	 53			; 00000035H
  00083	6a 0d		 push	 13			; 0000000dH
  00085	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0008a	83 c4 08	 add	 esp, 8
  0008d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00090	89 41 1c	 mov	 DWORD PTR [ecx+28], eax

; 79   : 	CONDOR_FLAME_ITEMINDEX		= MAKE_ITEMNUM( 13, 52 );	// 콘도르의불꽃

  00093	6a 34		 push	 52			; 00000034H
  00095	6a 0d		 push	 13			; 0000000dH
  00097	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0009c	83 c4 08	 add	 esp, 8
  0009f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000a2	89 41 20	 mov	 DWORD PTR [ecx+32], eax

; 80   : 
; 81   : 	WING_OF_STORM_ITEMINDEX		= MAKE_ITEMNUM( 12, 36 );	// 폭풍의날개

  000a5	6a 24		 push	 36			; 00000024H
  000a7	6a 0c		 push	 12			; 0000000cH
  000a9	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000ae	83 c4 08	 add	 esp, 8
  000b1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000b4	89 41 24	 mov	 DWORD PTR [ecx+36], eax

; 82   : 	WING_OF_ETERNAL_ITEMINDEX	= MAKE_ITEMNUM( 12, 37 );	// 시공의날개

  000b7	6a 25		 push	 37			; 00000025H
  000b9	6a 0c		 push	 12			; 0000000cH
  000bb	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000c0	83 c4 08	 add	 esp, 8
  000c3	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c6	89 41 28	 mov	 DWORD PTR [ecx+40], eax

; 83   : 	WING_OF_ILLUSION_ITEMINDEX	= MAKE_ITEMNUM( 12, 38 );	// 환영의날개

  000c9	6a 26		 push	 38			; 00000026H
  000cb	6a 0c		 push	 12			; 0000000cH
  000cd	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000d2	83 c4 08	 add	 esp, 8
  000d5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000d8	89 41 2c	 mov	 DWORD PTR [ecx+44], eax

; 84   : 	WING_OF_RUIN_ITEMINDEX		= MAKE_ITEMNUM( 12, 39 );	// 파멸의날개

  000db	6a 27		 push	 39			; 00000027H
  000dd	6a 0c		 push	 12			; 0000000cH
  000df	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000e4	83 c4 08	 add	 esp, 8
  000e7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000ea	89 41 30	 mov	 DWORD PTR [ecx+48], eax

; 85   : 	CAPE_OF_EMPEROR_ITEMINDEX	= MAKE_ITEMNUM( 12, 40 );	// 제왕의망토

  000ed	6a 28		 push	 40			; 00000028H
  000ef	6a 0c		 push	 12			; 0000000cH
  000f1	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  000f6	83 c4 08	 add	 esp, 8
  000f9	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000fc	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 86   : #ifdef ADD_SUMMONER_THIRD_WING_MIX_20071203
; 87   : 	WING_OF_DIMENSION_ITEMINDEX = MAKE_ITEMNUM( 12, 43 );	// 차원의 날개
; 88   : #endif
; 89   : 
; 90   : 	m_i3rdWingOpt_LuckRate		= 50;	// (1/1000)

  000ff	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00102	c7 40 38 32 00
	00 00		 mov	 DWORD PTR [eax+56], 50	; 00000032H

; 91   : 
; 92   : #ifdef TEST_3RD_20070622
; 93   : 	m_i3rdWingOpt_LuckRate		= 500;	// (1/1000)
; 94   : #endif
; 95   : }

  00109	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0010c	5f		 pop	 edi
  0010d	5e		 pop	 esi
  0010e	5b		 pop	 ebx
  0010f	8b e5		 mov	 esp, ebp
  00111	5d		 pop	 ebp
  00112	c3		 ret	 0
??0CMixSystem@@QAE@XZ ENDP				; CMixSystem::CMixSystem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?__empty_global_delete@@YAXPAXI@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
___formal$ = 12						; size = 4
?__empty_global_delete@@YAXPAXI@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAXI@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\MixSystem.cpp
;	COMDAT ?__empty_global_delete@@YAXPAX@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
?__empty_global_delete@@YAXPAX@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAX@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIIP6EPAX0@Z@Z
_TEXT	SEGMENT
tv66 = -68						; size = 4
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIIP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	89 45 bc	 mov	 DWORD PTR tv66[ebp], eax
  0000f	8b 4d 10	 mov	 ecx, DWORD PTR ___n$[ebp]
  00012	83 e9 01	 sub	 ecx, 1
  00015	89 4d 10	 mov	 DWORD PTR ___n$[ebp], ecx
  00018	83 7d bc 00	 cmp	 DWORD PTR tv66[ebp], 0
  0001c	76 11		 jbe	 SHORT $LN1@vector
  0001e	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00021	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  00024	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  00027	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  0002a	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  0002d	eb da		 jmp	 SHORT $LN2@vector
$LN1@vector:
  0002f	5f		 pop	 edi
  00030	5e		 pop	 esi
  00031	5b		 pop	 ebx
  00032	8b e5		 mov	 esp, ebp
  00034	5d		 pop	 ebp
  00035	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIIP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
END
