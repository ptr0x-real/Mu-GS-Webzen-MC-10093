; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29111.0 

	TITLE	C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?OffExp@@3VcOffExp@@A				; OffExp
_BSS	SEGMENT
?OffExp@@3VcOffExp@@A DB 030H DUP (?)			; OffExp
_BSS	ENDS
PUBLIC	?__empty_global_delete@@YAXPAX@Z		; __empty_global_delete
PUBLIC	?__empty_global_delete@@YAXPAXI@Z		; __empty_global_delete
PUBLIC	?LoadConfig@cOffExp@@QAEXXZ			; cOffExp::LoadConfig
PUBLIC	?OffExpStart@cOffExp@@QAEXH@Z			; cOffExp::OffExpStart
PUBLIC	?OffExpStart2@cOffExp@@QAEXH@Z			; cOffExp::OffExpStart2
PUBLIC	?OffExpStart3@cOffExp@@QAEXH@Z			; cOffExp::OffExpStart3
PUBLIC	?MainFunction@cOffExp@@QAEXXZ			; cOffExp::MainFunction
PUBLIC	?DarkKnightOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z	; cOffExp::DarkKnightOff
PUBLIC	?DarkWizardOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z	; cOffExp::DarkWizardOff
PUBLIC	?FairyElfOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z	; cOffExp::FairyElfOff
PUBLIC	?MagicGladiatorOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ; cOffExp::MagicGladiatorOff
PUBLIC	?DarkLordOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z	; cOffExp::DarkLordOff
PUBLIC	?UseMana@cOffExp@@QAEXH@Z			; cOffExp::UseMana
PUBLIC	?SearchTarget@cOffExp@@QAEHPAVOBJECTSTRUCT@@@Z	; cOffExp::SearchTarget
PUBLIC	?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z	; cOffExp::CheckTerrain
PUBLIC	?Close@cOffExp@@QAEXPAD@Z			; cOffExp::Close
PUBLIC	?Update@cOffExp@@QAE_NHE@Z			; cOffExp::Update
PUBLIC	?TickTimes@cOffExp@@QAEXH@Z			; cOffExp::TickTimes
PUBLIC	?SetBuffPartyUser@@YA_NHPAVCMagicInf@@@Z	; SetBuffPartyUser
PUBLIC	??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@ ; `string'
PUBLIC	??_C@_06CKGENIKG@Enable@			; `string'
PUBLIC	??_C@_06POMJKEPM@Common@			; `string'
PUBLIC	??_C@_0L@NIKPPPCH@KickFallen@			; `string'
PUBLIC	??_C@_0L@OCIIFDDH@EnableTime@			; `string'
PUBLIC	??_C@_04OKOFBOPB@Time@				; `string'
PUBLIC	??_C@_0DI@EKHEINLH@?$FLAtaque?5Automatico?$FN?5No?5puedes?5u@ ; `string'
PUBLIC	??_C@_0DH@NGFECFAC@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PJ?5Descoencta@ ; `string'
PUBLIC	??_C@_0DI@BKOIEPMA@?$FLAtaque?5Autom?atico?$FN?5No?5puedes?5u@ ; `string'
PUBLIC	??_C@_0CL@DPNGCPEP@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Cierre?5porque@ ; `string'
PUBLIC	__real@3f800000
PUBLIC	__real@42c80000
EXTRN	_strcmp:PROC
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	_rand:PROC
EXTRN	?Clear@CItem@@QAEXXZ:PROC			; CItem::Clear
EXTRN	?CloseClientEx@@YAXH@Z:PROC			; CloseClientEx
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
EXTRN	?gObjSearchItemMinus@@YAHPAVOBJECTSTRUCT@@HH@Z:PROC ; gObjSearchItemMinus
EXTRN	?gObjInventoryItemSet@@YAXHHE@Z:PROC		; gObjInventoryItemSet
EXTRN	?gObjAttack@@YAHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z:PROC ; gObjAttack
EXTRN	?gObjCalDistance@@YAHPAVOBJECTSTRUCT@@0@Z:PROC	; gObjCalDistance
EXTRN	?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z:PROC ; gObjGetMagicSearch
EXTRN	?gObjGetManaItemPos@@YAHH@Z:PROC		; gObjGetManaItemPos
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?GCManaSend@@YAXHFEEG@Z:PROC			; GCManaSend
EXTRN	?GCInventoryItemDeleteSend@@YAXHEE@Z:PROC	; GCInventoryItemDeleteSend
EXTRN	?GetAttr@MapClass@@QAEEHH@Z:PROC		; MapClass::GetAttr
EXTRN	?UseSkill@CObjUseSkill@@QAEXHPAVCMagicInf@@EEEEH@Z:PROC ; CObjUseSkill::UseSkill
EXTRN	?UseSkill@CObjUseSkill@@QAEXHHPAVCMagicInf@@@Z:PROC ; CObjUseSkill::UseSkill
EXTRN	?RunningSkill@CObjUseSkill@@QAEHHHPAVCMagicInf@@H@Z:PROC ; CObjUseSkill::RunningSkill
EXTRN	?GetPartyCount@PartyClass@@QAEHH@Z:PROC		; PartyClass::GetPartyCount
EXTRN	?GJPUserClose2@@YAXPAD@Z:PROC			; GJPUserClose2
EXTRN	@__security_check_cookie@4:PROC
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObj@@3PAVOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?MapC@@3PAVMapClass@@A:DWORD			; MapC
EXTRN	?gObjUseSkill@@3VCObjUseSkill@@A:DWORD		; gObjUseSkill
EXTRN	?gParty@@3VPartyClass@@A:BYTE			; gParty
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
;	COMDAT __real@42c80000
CONST	SEGMENT
__real@42c80000 DD 042c80000r			; 100
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT ??_C@_0CL@DPNGCPEP@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Cierre?5porque@
CONST	SEGMENT
??_C@_0CL@DPNGCPEP@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Cierre?5porque@ DB '['
	DB	'OffExp] [%s][%s] Cierre porque mato: [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@BKOIEPMA@?$FLAtaque?5Autom?atico?$FN?5No?5puedes?5u@
CONST	SEGMENT
??_C@_0DI@BKOIEPMA@?$FLAtaque?5Autom?atico?$FN?5No?5puedes?5u@ DB '[Ataqu'
	DB	'e Autom', 0e1H, 'tico] No puedes utilizarlo en la ciudad. ', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DH@NGFECFAC@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PJ?5Descoencta@
CONST	SEGMENT
??_C@_0DH@NGFECFAC@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PJ?5Descoencta@ DB '['
	DB	'OffExp] [%s][%s] PJ Descoenctado Tiempo agotado: [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@EKHEINLH@?$FLAtaque?5Automatico?$FN?5No?5puedes?5u@
CONST	SEGMENT
??_C@_0DI@EKHEINLH@?$FLAtaque?5Automatico?$FN?5No?5puedes?5u@ DB '[Ataque'
	DB	' Automatico] No puedes utilizarlo en la ciudad. ', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_04OKOFBOPB@Time@
CONST	SEGMENT
??_C@_04OKOFBOPB@Time@ DB 'Time', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@OCIIFDDH@EnableTime@
CONST	SEGMENT
??_C@_0L@OCIIFDDH@EnableTime@ DB 'EnableTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@NIKPPPCH@KickFallen@
CONST	SEGMENT
??_C@_0L@NIKPPPCH@KickFallen@ DB 'KickFallen', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_06POMJKEPM@Common@
CONST	SEGMENT
??_C@_06POMJKEPM@Common@ DB 'Common', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@
CONST	SEGMENT
??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@ DB '..\data\OfflineAtt'
	DB	'ack.txt', 00H				; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?SetBuffPartyUser@@YA_NHPAVCMagicInf@@@Z
_TEXT	SEGMENT
_PartyNumIndex$1 = -8					; size = 4
_i$2 = -4						; size = 4
_UserIndex$ = 8						; size = 4
_lpMagic$ = 12						; size = 4
?SetBuffPartyUser@@YA_NHPAVCMagicInf@@@Z PROC		; SetBuffPartyUser, COMDAT

; 316  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 317  : 	if( gParty.GetPartyCount(gObj[UserIndex].PartyNumber) < 0 ) 

  00009	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _UserIndex$[ebp], 7072
  00010	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00016	8b 94 01 88 02
	00 00		 mov	 edx, DWORD PTR [ecx+eax+648]
  0001d	52		 push	 edx
  0001e	b9 00 00 00 00	 mov	 ecx, OFFSET ?gParty@@3VPartyClass@@A ; gParty
  00023	e8 00 00 00 00	 call	 ?GetPartyCount@PartyClass@@QAEHH@Z ; PartyClass::GetPartyCount
  00028	85 c0		 test	 eax, eax
  0002a	7d 04		 jge	 SHORT $LN5@SetBuffPar

; 318  : 	{
; 319  : 		return false;

  0002c	32 c0		 xor	 al, al
  0002e	eb 5c		 jmp	 SHORT $LN1@SetBuffPar
$LN5@SetBuffPar:

; 320  : 	}
; 321  : 	// ----
; 322  : 	for(int i = 0; i < MAX_PARTYUSER; i++)

  00030	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _i$2[ebp], 0
  00037	eb 09		 jmp	 SHORT $LN4@SetBuffPar
$LN2@SetBuffPar:
  00039	8b 45 fc	 mov	 eax, DWORD PTR _i$2[ebp]
  0003c	83 c0 01	 add	 eax, 1
  0003f	89 45 fc	 mov	 DWORD PTR _i$2[ebp], eax
$LN4@SetBuffPar:
  00042	83 7d fc 05	 cmp	 DWORD PTR _i$2[ebp], 5
  00046	7d 42		 jge	 SHORT $LN3@SetBuffPar

; 323  : 	{
; 324  : 		int PartyNumIndex = gParty.m_PartyS[gObj[i].PartyNumber].Number[i];

  00048	69 45 fc a0 1b
	00 00		 imul	 eax, DWORD PTR _i$2[ebp], 7072
  0004f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00055	6b 94 01 88 02
	00 00 30	 imul	 edx, DWORD PTR [ecx+eax+648], 48
  0005d	8b 45 fc	 mov	 eax, DWORD PTR _i$2[ebp]
  00060	8b 8c 82 0c 00
	00 00		 mov	 ecx, DWORD PTR ?gParty@@3VPartyClass@@A[edx+eax*4+12]
  00067	89 4d f8	 mov	 DWORD PTR _PartyNumIndex$1[ebp], ecx

; 325  : 		// ----
; 326  : 		if( PartyNumIndex >= 0 )

  0006a	83 7d f8 00	 cmp	 DWORD PTR _PartyNumIndex$1[ebp], 0
  0006e	7c 18		 jl	 SHORT $LN6@SetBuffPar

; 327  : 		{
; 328  : 			gObjUseSkill.RunningSkill(PartyNumIndex, PartyNumIndex, lpMagic, 0);		

  00070	6a 00		 push	 0
  00072	8b 45 0c	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00075	50		 push	 eax
  00076	8b 4d f8	 mov	 ecx, DWORD PTR _PartyNumIndex$1[ebp]
  00079	51		 push	 ecx
  0007a	8b 55 f8	 mov	 edx, DWORD PTR _PartyNumIndex$1[ebp]
  0007d	52		 push	 edx
  0007e	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  00083	e8 00 00 00 00	 call	 ?RunningSkill@CObjUseSkill@@QAEHHHPAVCMagicInf@@H@Z ; CObjUseSkill::RunningSkill
$LN6@SetBuffPar:

; 329  : 		}
; 330  : 	}

  00088	eb af		 jmp	 SHORT $LN2@SetBuffPar
$LN3@SetBuffPar:

; 331  : 	// ----
; 332  : 	return true;

  0008a	b0 01		 mov	 al, 1
$LN1@SetBuffPar:

; 333  : }

  0008c	5f		 pop	 edi
  0008d	5e		 pop	 esi
  0008e	5b		 pop	 ebx
  0008f	8b e5		 mov	 esp, ebp
  00091	5d		 pop	 ebp
  00092	c3		 ret	 0
?SetBuffPartyUser@@YA_NHPAVCMagicInf@@@Z ENDP		; SetBuffPartyUser
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?TickTimes@cOffExp@@QAEXH@Z
_TEXT	SEGMENT
_lpObj$1 = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?TickTimes@cOffExp@@QAEXH@Z PROC			; cOffExp::TickTimes, COMDAT
; _this$ = ecx

; 54   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 55   : 	if (!this->Enable) return;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 38 00	 cmp	 DWORD PTR [eax], 0
  00012	75 05		 jne	 SHORT $LN2@TickTimes
  00014	e9 86 00 00 00	 jmp	 $LN1@TickTimes
$LN2@TickTimes:

; 56   : 
; 57   : 	if (this->EnableTime)

  00019	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001c	83 78 08 00	 cmp	 DWORD PTR [eax+8], 0
  00020	74 7d		 je	 SHORT $LN1@TickTimes

; 58   : 	{
; 59   : 		LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  00022	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00029	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0002f	89 45 f8	 mov	 DWORD PTR _lpObj$1[ebp], eax

; 60   : 		lpObj->OffExpTick++;

  00032	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$1[ebp]
  00035	8b 88 90 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6800]
  0003b	83 c1 01	 add	 ecx, 1
  0003e	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$1[ebp]
  00041	89 8a 90 1a 00
	00		 mov	 DWORD PTR [edx+6800], ecx

; 61   : 		if (lpObj->OffExpTick >= this->TimeEnd)

  00047	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$1[ebp]
  0004a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0004d	8b 90 90 1a 00
	00		 mov	 edx, DWORD PTR [eax+6800]
  00053	3b 51 0c	 cmp	 edx, DWORD PTR [ecx+12]
  00056	7c 47		 jl	 SHORT $LN1@TickTimes

; 62   : 		{
; 63   : 			LogAddTD("[OffExp] [%s][%s] PJ Descoenctado Tiempo agotado: [%d]", lpObj->AccountID, lpObj->Name, lpObj->m_Index);

  00058	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$1[ebp]
  0005b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005d	51		 push	 ecx
  0005e	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$1[ebp]
  00061	83 c2 73	 add	 edx, 115		; 00000073H
  00064	52		 push	 edx
  00065	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$1[ebp]
  00068	83 c0 68	 add	 eax, 104		; 00000068H
  0006b	50		 push	 eax
  0006c	68 00 00 00 00	 push	 OFFSET ??_C@_0DH@NGFECFAC@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PJ?5Descoencta@
  00071	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00077	83 c4 10	 add	 esp, 16			; 00000010H

; 64   : 			lpObj->OffExp = false;

  0007a	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$1[ebp]
  0007d	c6 80 8c 1a 00
	00 00		 mov	 BYTE PTR [eax+6796], 0

; 65   : 			GJPUserClose2(lpObj->AccountID);

  00084	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$1[ebp]
  00087	83 c0 68	 add	 eax, 104		; 00000068H
  0008a	50		 push	 eax
  0008b	e8 00 00 00 00	 call	 ?GJPUserClose2@@YAXPAD@Z ; GJPUserClose2
  00090	83 c4 04	 add	 esp, 4

; 66   : 			gObjDel(aIndex);

  00093	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00096	50		 push	 eax
  00097	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  0009c	83 c4 04	 add	 esp, 4
$LN1@TickTimes:

; 67   : 			return;
; 68   : 		}
; 69   : 	}
; 70   : }

  0009f	5f		 pop	 edi
  000a0	5e		 pop	 esi
  000a1	5b		 pop	 ebx
  000a2	8b e5		 mov	 esp, ebp
  000a4	5d		 pop	 ebp
  000a5	c2 04 00	 ret	 4
?TickTimes@cOffExp@@QAEXH@Z ENDP			; cOffExp::TickTimes
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?Update@cOffExp@@QAE_NHE@Z
_TEXT	SEGMENT
_lpUser$ = -8						; size = 4
_this$ = -4						; size = 4
_UserIndex$ = 8						; size = 4
_Type$ = 12						; size = 1
?Update@cOffExp@@QAE_NHE@Z PROC				; cOffExp::Update, COMDAT
; _this$ = ecx

; 608  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 609  : 	LPOBJECTSTRUCT lpUser = &gObj[UserIndex];

  0000c	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _UserIndex$[ebp], 7072
  00013	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00019	89 45 f8	 mov	 DWORD PTR _lpUser$[ebp], eax

; 610  : 	// ----
; 611  : 	if (!lpUser->OffExp)

  0001c	8b 45 f8	 mov	 eax, DWORD PTR _lpUser$[ebp]
  0001f	0f b6 88 8c 1a
	00 00		 movzx	 ecx, BYTE PTR [eax+6796]
  00026	85 c9		 test	 ecx, ecx
  00028	75 04		 jne	 SHORT $LN2@Update

; 612  : 	{
; 613  : 		return false;

  0002a	32 c0		 xor	 al, al
  0002c	eb 2d		 jmp	 SHORT $LN1@Update
$LN2@Update:

; 614  : 	}
; 615  : 	// ----
; 616  : 	if (Type == 0)

  0002e	0f b6 45 0c	 movzx	 eax, BYTE PTR _Type$[ebp]
  00032	85 c0		 test	 eax, eax
  00034	75 0e		 jne	 SHORT $LN3@Update

; 617  : 	{
; 618  : 		lpUser->CheckTick = GetTickCount();

  00036	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0003c	8b 4d f8	 mov	 ecx, DWORD PTR _lpUser$[ebp]
  0003f	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 619  : 	}

  00042	eb 15		 jmp	 SHORT $LN4@Update
$LN3@Update:

; 620  : 	else if (Type == 1)

  00044	0f b6 45 0c	 movzx	 eax, BYTE PTR _Type$[ebp]
  00048	83 f8 01	 cmp	 eax, 1
  0004b	75 0c		 jne	 SHORT $LN4@Update

; 621  : 	{
; 622  : 		lpUser->ConnectCheckTime = GetTickCount();

  0004d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00053	8b 4d f8	 mov	 ecx, DWORD PTR _lpUser$[ebp]
  00056	89 41 38	 mov	 DWORD PTR [ecx+56], eax
$LN4@Update:

; 623  : 	}
; 624  : 	// ----
; 625  : 	return true;

  00059	b0 01		 mov	 al, 1
$LN1@Update:

; 626  : }

  0005b	5f		 pop	 edi
  0005c	5e		 pop	 esi
  0005d	5b		 pop	 ebx
  0005e	8b e5		 mov	 esp, ebp
  00060	5d		 pop	 ebp
  00061	c2 08 00	 ret	 8
?Update@cOffExp@@QAE_NHE@Z ENDP				; cOffExp::Update
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?Close@cOffExp@@QAEXPAD@Z
_TEXT	SEGMENT
_lpUser$1 = -12						; size = 4
_i$2 = -8						; size = 4
_this$ = -4						; size = 4
_AccountID$ = 8						; size = 4
?Close@cOffExp@@QAEXPAD@Z PROC				; cOffExp::Close, COMDAT
; _this$ = ecx

; 591  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 592  : 	for (int i = OBJ_STARTUSERINDEX; i < MAX_OBJECT; i++)

  0000c	c7 45 f8 00 19
	00 00		 mov	 DWORD PTR _i$2[ebp], 6400 ; 00001900H
  00013	eb 09		 jmp	 SHORT $LN4@Close
$LN2@Close:
  00015	8b 45 f8	 mov	 eax, DWORD PTR _i$2[ebp]
  00018	83 c0 01	 add	 eax, 1
  0001b	89 45 f8	 mov	 DWORD PTR _i$2[ebp], eax
$LN4@Close:
  0001e	81 7d f8 e8 1c
	00 00		 cmp	 DWORD PTR _i$2[ebp], 7400 ; 00001ce8H
  00025	7d 67		 jge	 SHORT $LN1@Close

; 593  : 	{
; 594  : 		LPOBJECTSTRUCT lpUser = &gObj[i];

  00027	69 45 f8 a0 1b
	00 00		 imul	 eax, DWORD PTR _i$2[ebp], 7072
  0002e	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00034	89 45 f4	 mov	 DWORD PTR _lpUser$1[ebp], eax

; 595  : 		// ----
; 596  : 		if (lpUser->Connected != PLAYER_PLAYING || !lpUser->OffExp || strcmp(AccountID, lpUser->AccountID))

  00037	8b 45 f4	 mov	 eax, DWORD PTR _lpUser$1[ebp]
  0003a	83 78 04 03	 cmp	 DWORD PTR [eax+4], 3
  0003e	75 25		 jne	 SHORT $LN6@Close
  00040	8b 45 f4	 mov	 eax, DWORD PTR _lpUser$1[ebp]
  00043	0f b6 88 8c 1a
	00 00		 movzx	 ecx, BYTE PTR [eax+6796]
  0004a	85 c9		 test	 ecx, ecx
  0004c	74 17		 je	 SHORT $LN6@Close
  0004e	8b 45 f4	 mov	 eax, DWORD PTR _lpUser$1[ebp]
  00051	83 c0 68	 add	 eax, 104		; 00000068H
  00054	50		 push	 eax
  00055	8b 4d 08	 mov	 ecx, DWORD PTR _AccountID$[ebp]
  00058	51		 push	 ecx
  00059	e8 00 00 00 00	 call	 _strcmp
  0005e	83 c4 08	 add	 esp, 8
  00061	85 c0		 test	 eax, eax
  00063	74 02		 je	 SHORT $LN5@Close
$LN6@Close:

; 597  : 		{
; 598  : 			continue;

  00065	eb ae		 jmp	 SHORT $LN2@Close
$LN5@Close:

; 599  : 		}
; 600  : 		// ----
; 601  : 		GJPUserClose2(lpUser->AccountID);

  00067	8b 45 f4	 mov	 eax, DWORD PTR _lpUser$1[ebp]
  0006a	83 c0 68	 add	 eax, 104		; 00000068H
  0006d	50		 push	 eax
  0006e	e8 00 00 00 00	 call	 ?GJPUserClose2@@YAXPAD@Z ; GJPUserClose2
  00073	83 c4 04	 add	 esp, 4

; 602  : 		gObjDel(i);

  00076	8b 45 f8	 mov	 eax, DWORD PTR _i$2[ebp]
  00079	50		 push	 eax
  0007a	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  0007f	83 c4 04	 add	 esp, 4

; 603  : 		lpUser->OffExp = false;

  00082	8b 45 f4	 mov	 eax, DWORD PTR _lpUser$1[ebp]
  00085	c6 80 8c 1a 00
	00 00		 mov	 BYTE PTR [eax+6796], 0

; 604  : 	}

  0008c	eb 87		 jmp	 SHORT $LN2@Close
$LN1@Close:

; 605  : }

  0008e	5f		 pop	 edi
  0008f	5e		 pop	 esi
  00090	5b		 pop	 ebx
  00091	8b e5		 mov	 esp, ebp
  00093	5d		 pop	 ebp
  00094	c2 04 00	 ret	 4
?Close@cOffExp@@QAEXPAD@Z ENDP				; cOffExp::Close
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_attr$ = -5						; size = 1
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z PROC	; cOffExp::CheckTerrain, COMDAT
; _this$ = ecx

; 576  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 577  : 	BYTE attr;
; 578  : 	attr = MapC[lpObj->MapNumber].GetAttr(lpObj->X, lpObj->Y);

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000f	0f bf 88 06 01
	00 00		 movsx	 ecx, WORD PTR [eax+262]
  00016	51		 push	 ecx
  00017	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0001a	0f bf 82 04 01
	00 00		 movsx	 eax, WORD PTR [edx+260]
  00021	50		 push	 eax
  00022	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00025	0f b6 91 09 01
	00 00		 movzx	 edx, BYTE PTR [ecx+265]
  0002c	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  00032	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  00038	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  0003d	88 45 fb	 mov	 BYTE PTR _attr$[ebp], al

; 579  : 
; 580  : 	if ((attr & 1) != 1)

  00040	0f b6 45 fb	 movzx	 eax, BYTE PTR _attr$[ebp]
  00044	83 e0 01	 and	 eax, 1
  00047	75 06		 jne	 SHORT $LN2@CheckTerra

; 581  : 	{
; 582  : 		return true;

  00049	b0 01		 mov	 al, 1
  0004b	eb 04		 jmp	 SHORT $LN1@CheckTerra

; 583  : 	}

  0004d	eb 02		 jmp	 SHORT $LN1@CheckTerra
$LN2@CheckTerra:

; 584  : 	else
; 585  : 	{
; 586  : 		return false;

  0004f	32 c0		 xor	 al, al
$LN1@CheckTerra:

; 587  : 	}
; 588  : }

  00051	5f		 pop	 edi
  00052	5e		 pop	 esi
  00053	5b		 pop	 ebx
  00054	8b e5		 mov	 esp, ebp
  00056	5d		 pop	 ebp
  00057	c2 04 00	 ret	 4
?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z ENDP	; cOffExp::CheckTerrain
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?SearchTarget@cOffExp@@QAEHPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -116						; size = 4
_IndexNumber$ = -112					; size = 4
_TargetCount$ = -108					; size = 4
_TargetIndex$ = -104					; size = 80
_attr$ = -21						; size = 1
_tObjNum$ = -20						; size = 4
_searchtarget$ = -16					; size = 4
_dis$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?SearchTarget@cOffExp@@QAEHPAVOBJECTSTRUCT@@@Z PROC	; cOffExp::SearchTarget, COMDAT
; _this$ = ecx

; 482  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b4 00 00
	00		 sub	 esp, 180		; 000000b4H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 483  : 	int dis;
; 484  : 	int searchtarget = -1;

  00019	c7 45 f0 ff ff
	ff ff		 mov	 DWORD PTR _searchtarget$[ebp], -1

; 485  : 	int tObjNum;
; 486  : 	BYTE attr;
; 487  : 	int TargetIndex[MAX_VIEWPORT_MONSTER];
; 488  : 	int TargetCount = 0;

  00020	c7 45 94 00 00
	00 00		 mov	 DWORD PTR _TargetCount$[ebp], 0

; 489  : 	int IndexNumber;
; 490  : 	for (int n = 0; n<MAX_VIEWPORT_MONSTER; n++)

  00027	c7 45 8c 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  0002e	eb 09		 jmp	 SHORT $LN4@SearchTarg
$LN2@SearchTarg:
  00030	8b 45 8c	 mov	 eax, DWORD PTR _n$1[ebp]
  00033	83 c0 01	 add	 eax, 1
  00036	89 45 8c	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@SearchTarg:
  00039	83 7d 8c 14	 cmp	 DWORD PTR _n$1[ebp], 20	; 00000014H
  0003d	0f 8d e5 00 00
	00		 jge	 $LN3@SearchTarg

; 491  : 	{
; 492  : 		tObjNum = lpObj->VpPlayer2[n].number;

  00043	6b 45 8c 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  00047	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0004a	0f bf 94 01 ea
	06 00 00	 movsx	 edx, WORD PTR [ecx+eax+1770]
  00052	89 55 ec	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 493  : 		if (lpObj->VpPlayer2[n].state == 0) continue;

  00055	6b 45 8c 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  00059	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0005c	0f be 94 01 e8
	06 00 00	 movsx	 edx, BYTE PTR [ecx+eax+1768]
  00064	85 d2		 test	 edx, edx
  00066	75 02		 jne	 SHORT $LN5@SearchTarg
  00068	eb c6		 jmp	 SHORT $LN2@SearchTarg
$LN5@SearchTarg:

; 494  : 		if (tObjNum >= 0)

  0006a	83 7d ec 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  0006e	0f 8c af 00 00
	00		 jl	 $LN6@SearchTarg

; 495  : 		{
; 496  : 			if (gObj[tObjNum].Type == OBJTYPE_MONSTER)

  00074	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0007b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00081	0f b7 54 01 64	 movzx	 edx, WORD PTR [ecx+eax+100]
  00086	83 fa 02	 cmp	 edx, 2
  00089	0f 85 94 00 00
	00		 jne	 $LN6@SearchTarg

; 497  : 			{
; 498  : 				attr = MapC[gObj[tObjNum].MapNumber].GetAttr(gObj[tObjNum].X, gObj[tObjNum].Y);

  0008f	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  00096	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0009c	0f bf 94 01 06
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+262]
  000a4	52		 push	 edx
  000a5	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  000ac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  000b2	0f bf 94 01 04
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+260]
  000ba	52		 push	 edx
  000bb	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  000c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  000c8	0f b6 94 01 09
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+265]
  000d0	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  000d6	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  000dc	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  000e1	88 45 eb	 mov	 BYTE PTR _attr$[ebp], al

; 499  : 				if ((attr & 1) != 1)

  000e4	0f b6 45 eb	 movzx	 eax, BYTE PTR _attr$[ebp]
  000e8	83 e0 01	 and	 eax, 1
  000eb	75 36		 jne	 SHORT $LN6@SearchTarg

; 500  : 				{
; 501  : 					dis = gObjCalDistance(lpObj, &gObj[tObjNum]);

  000ed	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  000f4	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  000fa	50		 push	 eax
  000fb	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000fe	51		 push	 ecx
  000ff	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjCalDistance
  00104	83 c4 08	 add	 esp, 8
  00107	89 45 f4	 mov	 DWORD PTR _dis$[ebp], eax

; 502  : 					if (6 >= dis)

  0010a	83 7d f4 06	 cmp	 DWORD PTR _dis$[ebp], 6
  0010e	7f 13		 jg	 SHORT $LN6@SearchTarg

; 503  : 					{
; 504  : 						TargetIndex[TargetCount] = tObjNum;

  00110	8b 45 94	 mov	 eax, DWORD PTR _TargetCount$[ebp]
  00113	8b 4d ec	 mov	 ecx, DWORD PTR _tObjNum$[ebp]
  00116	89 4c 85 98	 mov	 DWORD PTR _TargetIndex$[ebp+eax*4], ecx

; 505  : 						TargetCount++;

  0011a	8b 45 94	 mov	 eax, DWORD PTR _TargetCount$[ebp]
  0011d	83 c0 01	 add	 eax, 1
  00120	89 45 94	 mov	 DWORD PTR _TargetCount$[ebp], eax
$LN6@SearchTarg:

; 506  : 					}
; 507  : 				}
; 508  : 			}
; 509  : 		}
; 510  : 	}

  00123	e9 08 ff ff ff	 jmp	 $LN2@SearchTarg
$LN3@SearchTarg:

; 511  : 
; 512  : 	if (TargetCount == 0)	return -1;

  00128	83 7d 94 00	 cmp	 DWORD PTR _TargetCount$[ebp], 0
  0012c	75 05		 jne	 SHORT $LN10@SearchTarg
  0012e	83 c8 ff	 or	 eax, -1
  00131	eb 19		 jmp	 SHORT $LN1@SearchTarg
$LN10@SearchTarg:

; 513  : 
; 514  : 	IndexNumber = rand() % TargetCount;

  00133	e8 00 00 00 00	 call	 _rand
  00138	99		 cdq
  00139	f7 7d 94	 idiv	 DWORD PTR _TargetCount$[ebp]
  0013c	89 55 90	 mov	 DWORD PTR _IndexNumber$[ebp], edx

; 515  : 
; 516  : 	searchtarget = TargetIndex[IndexNumber];

  0013f	8b 45 90	 mov	 eax, DWORD PTR _IndexNumber$[ebp]
  00142	8b 4c 85 98	 mov	 ecx, DWORD PTR _TargetIndex$[ebp+eax*4]
  00146	89 4d f0	 mov	 DWORD PTR _searchtarget$[ebp], ecx

; 517  : 
; 518  : 	return searchtarget;

  00149	8b 45 f0	 mov	 eax, DWORD PTR _searchtarget$[ebp]
$LN1@SearchTarg:

; 519  : }

  0014c	5f		 pop	 edi
  0014d	5e		 pop	 esi
  0014e	5b		 pop	 ebx
  0014f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00152	33 cd		 xor	 ecx, ebp
  00154	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00159	8b e5		 mov	 esp, ebp
  0015b	5d		 pop	 ebp
  0015c	c2 04 00	 ret	 4
?SearchTarget@cOffExp@@QAEHPAVOBJECTSTRUCT@@@Z ENDP	; cOffExp::SearchTarget
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?UseMana@cOffExp@@QAEXH@Z
_TEXT	SEGMENT
tv137 = -84						; size = 4
_tMana$1 = -16						; size = 4
_pos$ = -12						; size = 4
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?UseMana@cOffExp@@QAEXH@Z PROC				; cOffExp::UseMana, COMDAT
; _this$ = ecx

; 522  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 523  : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  0000c	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00013	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00019	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 524  : 
; 525  : 	if (lpObj->Mana > 100) return;

  0001c	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001f	f3 0f 10 80 d0
	00 00 00	 movss	 xmm0, DWORD PTR [eax+208]
  00027	0f 2f 05 00 00
	00 00		 comiss	 xmm0, DWORD PTR __real@42c80000
  0002e	76 05		 jbe	 SHORT $LN4@UseMana
  00030	e9 18 03 00 00	 jmp	 $LN1@UseMana
$LN4@UseMana:

; 526  : 
; 527  : 	int pos;
; 528  : 
; 529  : 	pos = gObjGetManaItemPos(aIndex);

  00035	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00038	50		 push	 eax
  00039	e8 00 00 00 00	 call	 ?gObjGetManaItemPos@@YAHH@Z ; gObjGetManaItemPos
  0003e	83 c4 04	 add	 esp, 4
  00041	89 45 f4	 mov	 DWORD PTR _pos$[ebp], eax

; 530  : 
; 531  : 	if (pos == -1) return;

  00044	83 7d f4 ff	 cmp	 DWORD PTR _pos$[ebp], -1
  00048	75 05		 jne	 SHORT $LN5@UseMana
  0004a	e9 fe 02 00 00	 jmp	 $LN1@UseMana
$LN5@UseMana:

; 532  : 
; 533  : 	if (lpObj->pInventory[pos].m_Type == ITEMGET(14, 4) ||
; 534  : 		lpObj->pInventory[pos].m_Type == ITEMGET(14, 5) ||

  0004f	69 45 f4 a8 00
	00 00		 imul	 eax, DWORD PTR _pos$[ebp], 168
  00056	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00059	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  0005f	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  00064	3d 04 1c 00 00	 cmp	 eax, 7172		; 00001c04H
  00069	74 3c		 je	 SHORT $LN7@UseMana
  0006b	69 45 f4 a8 00
	00 00		 imul	 eax, DWORD PTR _pos$[ebp], 168
  00072	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00075	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  0007b	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  00080	3d 05 1c 00 00	 cmp	 eax, 7173		; 00001c05H
  00085	74 20		 je	 SHORT $LN7@UseMana
  00087	69 45 f4 a8 00
	00 00		 imul	 eax, DWORD PTR _pos$[ebp], 168
  0008e	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00091	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  00097	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  0009c	3d 06 1c 00 00	 cmp	 eax, 7174		; 00001c06H
  000a1	0f 85 a6 02 00
	00		 jne	 $LN13@UseMana
$LN7@UseMana:

; 535  : 		lpObj->pInventory[pos].m_Type == ITEMGET(14, 6))
; 536  : 	{
; 537  : 		int tMana = (lpObj->pInventory[pos].m_Value * 10) - (gObj[aIndex].Level);

  000a7	69 45 f4 a8 00
	00 00		 imul	 eax, DWORD PTR _pos$[ebp], 168
  000ae	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000b1	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  000b7	6b 44 02 5c 0a	 imul	 eax, DWORD PTR [edx+eax+92], 10
  000bc	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  000c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  000c9	0f bf 8c 0a a0
	00 00 00	 movsx	 ecx, WORD PTR [edx+ecx+160]
  000d1	2b c1		 sub	 eax, ecx
  000d3	89 45 f0	 mov	 DWORD PTR _tMana$1[ebp], eax

; 538  : 
; 539  : 		if (tMana < 0)

  000d6	79 07		 jns	 SHORT $LN8@UseMana

; 540  : 		{
; 541  : 			tMana = 0;

  000d8	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _tMana$1[ebp], 0
$LN8@UseMana:

; 542  : 		}
; 543  : 
; 544  : 		switch (lpObj->pInventory[pos].m_Type)

  000df	69 45 f4 a8 00
	00 00		 imul	 eax, DWORD PTR _pos$[ebp], 168
  000e6	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000e9	8b 91 5c 0c 00
	00		 mov	 edx, DWORD PTR [ecx+3164]
  000ef	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  000f4	89 45 ac	 mov	 DWORD PTR tv137[ebp], eax
  000f7	81 7d ac 04 1c
	00 00		 cmp	 DWORD PTR tv137[ebp], 7172 ; 00001c04H
  000fe	74 1b		 je	 SHORT $LN9@UseMana
  00100	81 7d ac 05 1c
	00 00		 cmp	 DWORD PTR tv137[ebp], 7173 ; 00001c05H
  00107	74 58		 je	 SHORT $LN10@UseMana
  00109	81 7d ac 06 1c
	00 00		 cmp	 DWORD PTR tv137[ebp], 7174 ; 00001c06H
  00110	0f 84 8e 00 00
	00		 je	 $LN11@UseMana
  00116	e9 ca 00 00 00	 jmp	 $LN2@UseMana
$LN9@UseMana:

; 545  : 		{
; 546  : 		case ITEMGET(14, 4):
; 547  : 			tMana += ((int)(gObj[aIndex].MaxMana + gObj[aIndex].AddMana)) * 20 / 100;

  0011b	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00122	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  00129	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0012f	f3 0f 2a 84 0a
	10 01 00 00	 cvtsi2ss xmm0, DWORD PTR [edx+ecx+272]
  00138	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0013e	f3 0f 58 84 01
	d4 00 00 00	 addss	 xmm0, DWORD PTR [ecx+eax+212]
  00147	f3 0f 2c d0	 cvttss2si edx, xmm0
  0014b	6b c2 14	 imul	 eax, edx, 20
  0014e	99		 cdq
  0014f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00154	f7 f9		 idiv	 ecx
  00156	03 45 f0	 add	 eax, DWORD PTR _tMana$1[ebp]
  00159	89 45 f0	 mov	 DWORD PTR _tMana$1[ebp], eax

; 548  : 			break;

  0015c	e9 84 00 00 00	 jmp	 $LN2@UseMana
$LN10@UseMana:

; 549  : 		case ITEMGET(14, 5):
; 550  : 			tMana += ((int)(gObj[aIndex].MaxMana + gObj[aIndex].AddMana)) * 30 / 100;

  00161	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00168	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  0016f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00175	f3 0f 2a 84 0a
	10 01 00 00	 cvtsi2ss xmm0, DWORD PTR [edx+ecx+272]
  0017e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00184	f3 0f 58 84 01
	d4 00 00 00	 addss	 xmm0, DWORD PTR [ecx+eax+212]
  0018d	f3 0f 2c d0	 cvttss2si edx, xmm0
  00191	6b c2 1e	 imul	 eax, edx, 30
  00194	99		 cdq
  00195	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0019a	f7 f9		 idiv	 ecx
  0019c	03 45 f0	 add	 eax, DWORD PTR _tMana$1[ebp]
  0019f	89 45 f0	 mov	 DWORD PTR _tMana$1[ebp], eax

; 551  : 			break;

  001a2	eb 41		 jmp	 SHORT $LN2@UseMana
$LN11@UseMana:

; 552  : 		case ITEMGET(14, 6):
; 553  : 			tMana += ((int)(gObj[aIndex].MaxMana + gObj[aIndex].AddMana)) * 40 / 100;

  001a4	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  001ab	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  001b2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001b8	f3 0f 2a 84 0a
	10 01 00 00	 cvtsi2ss xmm0, DWORD PTR [edx+ecx+272]
  001c1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001c7	f3 0f 58 84 01
	d4 00 00 00	 addss	 xmm0, DWORD PTR [ecx+eax+212]
  001d0	f3 0f 2c d0	 cvttss2si edx, xmm0
  001d4	6b c2 28	 imul	 eax, edx, 40
  001d7	99		 cdq
  001d8	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  001dd	f7 f9		 idiv	 ecx
  001df	03 45 f0	 add	 eax, DWORD PTR _tMana$1[ebp]
  001e2	89 45 f0	 mov	 DWORD PTR _tMana$1[ebp], eax
$LN2@UseMana:

; 554  : 			break;
; 555  : 		}
; 556  : 
; 557  : 		gObj[aIndex].Mana += tMana;

  001e5	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  001ec	f3 0f 2a 45 f0	 cvtsi2ss xmm0, DWORD PTR _tMana$1[ebp]
  001f1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001f7	f3 0f 58 84 01
	d0 00 00 00	 addss	 xmm0, DWORD PTR [ecx+eax+208]
  00200	69 55 08 a0 1b
	00 00		 imul	 edx, DWORD PTR _aIndex$[ebp], 7072
  00207	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0020c	f3 0f 11 84 10
	d0 00 00 00	 movss	 DWORD PTR [eax+edx+208], xmm0

; 558  : 
; 559  : 		if (gObj[aIndex].Mana > (gObj[aIndex].MaxMana + gObj[aIndex].AddMana - 1.0f))

  00215	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  0021c	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  00223	69 55 08 a0 1b
	00 00		 imul	 edx, DWORD PTR _aIndex$[ebp], 7072
  0022a	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00230	f3 0f 2a 84 16
	10 01 00 00	 cvtsi2ss xmm0, DWORD PTR [esi+edx+272]
  00239	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0023f	f3 0f 58 84 0a
	d4 00 00 00	 addss	 xmm0, DWORD PTR [edx+ecx+212]
  00248	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@3f800000
  00250	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00256	f3 0f 10 8c 01
	d0 00 00 00	 movss	 xmm1, DWORD PTR [ecx+eax+208]
  0025f	0f 2f c8	 comiss	 xmm1, xmm0
  00262	76 41		 jbe	 SHORT $LN12@UseMana

; 560  : 		{
; 561  : 			gObj[aIndex].Mana = gObj[aIndex].MaxMana + gObj[aIndex].AddMana;

  00264	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  0026b	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  00272	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00278	f3 0f 2a 84 0a
	10 01 00 00	 cvtsi2ss xmm0, DWORD PTR [edx+ecx+272]
  00281	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00287	f3 0f 58 84 01
	d4 00 00 00	 addss	 xmm0, DWORD PTR [ecx+eax+212]
  00290	69 55 08 a0 1b
	00 00		 imul	 edx, DWORD PTR _aIndex$[ebp], 7072
  00297	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0029c	f3 0f 11 84 10
	d0 00 00 00	 movss	 DWORD PTR [eax+edx+208], xmm0
$LN12@UseMana:

; 562  : 		}
; 563  : 
; 564  : 		GCManaSend(aIndex, (int)gObj[aIndex].Mana, 0xFF, 0, (int)gObj[aIndex].BP);

  002a5	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  002ac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  002b2	0f b7 94 01 e8
	00 00 00	 movzx	 edx, WORD PTR [ecx+eax+232]
  002ba	52		 push	 edx
  002bb	6a 00		 push	 0
  002bd	68 ff 00 00 00	 push	 255			; 000000ffH
  002c2	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  002c9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  002cf	f3 0f 2c 94 01
	d0 00 00 00	 cvttss2si edx, DWORD PTR [ecx+eax+208]
  002d8	52		 push	 edx
  002d9	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  002dc	50		 push	 eax
  002dd	e8 00 00 00 00	 call	 ?GCManaSend@@YAXHFEEG@Z	; GCManaSend
  002e2	83 c4 14	 add	 esp, 20			; 00000014H

; 565  : 
; 566  : 		if (!gObjSearchItemMinus(&gObj[aIndex], pos, 1))

  002e5	6a 01		 push	 1
  002e7	8b 45 f4	 mov	 eax, DWORD PTR _pos$[ebp]
  002ea	50		 push	 eax
  002eb	69 4d 08 a0 1b
	00 00		 imul	 ecx, DWORD PTR _aIndex$[ebp], 7072
  002f2	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  002f8	51		 push	 ecx
  002f9	e8 00 00 00 00	 call	 ?gObjSearchItemMinus@@YAHPAVOBJECTSTRUCT@@HH@Z ; gObjSearchItemMinus
  002fe	83 c4 0c	 add	 esp, 12			; 0000000cH
  00301	85 c0		 test	 eax, eax
  00303	75 48		 jne	 SHORT $LN13@UseMana

; 567  : 		{
; 568  : 			gObjInventoryItemSet(aIndex, pos, -1);

  00305	68 ff 00 00 00	 push	 255			; 000000ffH
  0030a	8b 45 f4	 mov	 eax, DWORD PTR _pos$[ebp]
  0030d	50		 push	 eax
  0030e	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  00311	51		 push	 ecx
  00312	e8 00 00 00 00	 call	 ?gObjInventoryItemSet@@YAXHHE@Z ; gObjInventoryItemSet
  00317	83 c4 0c	 add	 esp, 12			; 0000000cH

; 569  : 			gObj[aIndex].pInventory[pos].Clear();

  0031a	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00321	69 4d f4 a8 00
	00 00		 imul	 ecx, DWORD PTR _pos$[ebp], 168
  00328	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0032e	03 8c 02 5c 0c
	00 00		 add	 ecx, DWORD PTR [edx+eax+3164]
  00335	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear

; 570  : 			GCInventoryItemDeleteSend(aIndex, pos, 1);

  0033a	6a 01		 push	 1
  0033c	0f b6 45 f4	 movzx	 eax, BYTE PTR _pos$[ebp]
  00340	50		 push	 eax
  00341	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  00344	51		 push	 ecx
  00345	e8 00 00 00 00	 call	 ?GCInventoryItemDeleteSend@@YAXHEE@Z ; GCInventoryItemDeleteSend
  0034a	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN13@UseMana:
$LN1@UseMana:

; 571  : 		}
; 572  : 	}
; 573  : }

  0034d	5f		 pop	 edi
  0034e	5e		 pop	 esi
  0034f	5b		 pop	 ebx
  00350	8b e5		 mov	 esp, ebp
  00352	5d		 pop	 ebp
  00353	c2 04 00	 ret	 4
?UseMana@cOffExp@@QAEXH@Z ENDP				; cOffExp::UseMana
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?DarkLordOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpMagic$ = -16						; size = 4
_SearchSkill$ = -12					; size = 4
_Target$ = -8						; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?DarkLordOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z PROC	; cOffExp::DarkLordOff, COMDAT
; _this$ = ecx

; 456  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 457  : 	int Target = this->SearchTarget(lpObj);

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0000f	50		 push	 eax
  00010	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00013	e8 00 00 00 00	 call	 ?SearchTarget@cOffExp@@QAEHPAVOBJECTSTRUCT@@@Z ; cOffExp::SearchTarget
  00018	89 45 f8	 mov	 DWORD PTR _Target$[ebp], eax

; 458  : 
; 459  : 	if (Target == -1) return;

  0001b	83 7d f8 ff	 cmp	 DWORD PTR _Target$[ebp], -1
  0001f	75 05		 jne	 SHORT $LN2@DarkLordOf
  00021	e9 f0 00 00 00	 jmp	 $LN1@DarkLordOf
$LN2@DarkLordOf:

; 460  : 
; 461  : 	int SearchSkill = 0;

  00026	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 0

; 462  : 	CMagicInf * lpMagic;
; 463  : 
; 464  : 	if (gObjGetMagicSearch(lpObj, 61) != NULL) SearchSkill = 61;

  0002d	6a 3d		 push	 61			; 0000003dH
  0002f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00032	50		 push	 eax
  00033	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00038	83 c4 08	 add	 esp, 8
  0003b	85 c0		 test	 eax, eax
  0003d	74 0c		 je	 SHORT $LN3@DarkLordOf
  0003f	c7 45 f4 3d 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 61 ; 0000003dH
  00046	e9 89 00 00 00	 jmp	 $LN4@DarkLordOf
$LN3@DarkLordOf:

; 465  : 	else if (gObjGetMagicSearch(lpObj, 520) != NULL) SearchSkill = 520;

  0004b	6a 08		 push	 8
  0004d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00050	50		 push	 eax
  00051	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00056	83 c4 08	 add	 esp, 8
  00059	85 c0		 test	 eax, eax
  0005b	74 09		 je	 SHORT $LN5@DarkLordOf
  0005d	c7 45 f4 08 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 520 ; 00000208H
  00064	eb 6e		 jmp	 SHORT $LN4@DarkLordOf
$LN5@DarkLordOf:

; 466  : 	else if (gObjGetMagicSearch(lpObj, 521) != NULL) SearchSkill = 521;

  00066	6a 09		 push	 9
  00068	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0006b	50		 push	 eax
  0006c	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00071	83 c4 08	 add	 esp, 8
  00074	85 c0		 test	 eax, eax
  00076	74 09		 je	 SHORT $LN7@DarkLordOf
  00078	c7 45 f4 09 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 521 ; 00000209H
  0007f	eb 53		 jmp	 SHORT $LN4@DarkLordOf
$LN7@DarkLordOf:

; 467  : 	else if (gObjGetMagicSearch(lpObj, 522) != NULL) SearchSkill = 522;

  00081	6a 0a		 push	 10			; 0000000aH
  00083	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00086	50		 push	 eax
  00087	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0008c	83 c4 08	 add	 esp, 8
  0008f	85 c0		 test	 eax, eax
  00091	74 09		 je	 SHORT $LN9@DarkLordOf
  00093	c7 45 f4 0a 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 522 ; 0000020aH
  0009a	eb 38		 jmp	 SHORT $LN4@DarkLordOf
$LN9@DarkLordOf:

; 468  : 	else if (gObjGetMagicSearch(lpObj, 523) != NULL) SearchSkill = 523;

  0009c	6a 0b		 push	 11			; 0000000bH
  0009e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a1	50		 push	 eax
  000a2	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000a7	83 c4 08	 add	 esp, 8
  000aa	85 c0		 test	 eax, eax
  000ac	74 09		 je	 SHORT $LN11@DarkLordOf
  000ae	c7 45 f4 0b 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 523 ; 0000020bH
  000b5	eb 1d		 jmp	 SHORT $LN4@DarkLordOf
$LN11@DarkLordOf:

; 469  : 	else if (gObjGetMagicSearch(lpObj, 524) != NULL) SearchSkill = 524;

  000b7	6a 0c		 push	 12			; 0000000cH
  000b9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000bc	50		 push	 eax
  000bd	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000c2	83 c4 08	 add	 esp, 8
  000c5	85 c0		 test	 eax, eax
  000c7	74 09		 je	 SHORT $LN13@DarkLordOf
  000c9	c7 45 f4 0c 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 524 ; 0000020cH
  000d0	eb 02		 jmp	 SHORT $LN4@DarkLordOf
$LN13@DarkLordOf:

; 470  : 	else return;

  000d2	eb 42		 jmp	 SHORT $LN1@DarkLordOf
$LN4@DarkLordOf:

; 471  : 
; 472  : 	lpMagic = gObjGetMagicSearch(lpObj, SearchSkill);

  000d4	0f b6 45 f4	 movzx	 eax, BYTE PTR _SearchSkill$[ebp]
  000d8	50		 push	 eax
  000d9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000dc	51		 push	 ecx
  000dd	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000e2	83 c4 08	 add	 esp, 8
  000e5	89 45 f0	 mov	 DWORD PTR _lpMagic$[ebp], eax

; 473  : 	if (lpMagic == NULL) return;

  000e8	83 7d f0 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  000ec	75 02		 jne	 SHORT $LN15@DarkLordOf
  000ee	eb 26		 jmp	 SHORT $LN1@DarkLordOf
$LN15@DarkLordOf:

; 474  : 
; 475  : 	gObjUseSkill.UseSkill(lpObj->m_Index, Target, lpMagic); //

  000f0	8b 45 f0	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  000f3	50		 push	 eax
  000f4	8b 4d f8	 mov	 ecx, DWORD PTR _Target$[ebp]
  000f7	51		 push	 ecx
  000f8	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000fb	8b 02		 mov	 eax, DWORD PTR [edx]
  000fd	50		 push	 eax
  000fe	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  00103	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHHPAVCMagicInf@@@Z ; CObjUseSkill::UseSkill

; 476  : 
; 477  : 	this->UseMana(lpObj->m_Index);

  00108	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0010b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0010d	51		 push	 ecx
  0010e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00111	e8 00 00 00 00	 call	 ?UseMana@cOffExp@@QAEXH@Z ; cOffExp::UseMana
$LN1@DarkLordOf:

; 478  : }

  00116	5f		 pop	 edi
  00117	5e		 pop	 esi
  00118	5b		 pop	 ebx
  00119	8b e5		 mov	 esp, ebp
  0011b	5d		 pop	 ebp
  0011c	c2 04 00	 ret	 4
?DarkLordOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ENDP	; cOffExp::DarkLordOff
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?MagicGladiatorOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -36						; size = 4
_attr$ = -29						; size = 1
_tObjNum$ = -28						; size = 4
_dis$ = -24						; size = 4
_SearchSkill$ = -20					; size = 4
_lpMagic$ = -16						; size = 4
_NormDis$ = -12						; size = 4
_skill$ = -8						; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?MagicGladiatorOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z PROC ; cOffExp::MagicGladiatorOff, COMDAT
; _this$ = ecx

; 390  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 391  : 	int skill;
; 392  : 	int NormDis;
; 393  : 	CMagicInf * lpMagic;
; 394  : 	int SearchSkill = 0;

  0000c	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 0

; 395  : 
; 396  : 	if (lpObj->pInventory[0].m_Type >= ITEMGET(5, 0) && lpObj->pInventory[0].m_Type < ITEMGET(6, 0))

  00013	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  00018	6b c8 00	 imul	 ecx, eax, 0
  0001b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0001e	8b 82 5c 0c 00
	00		 mov	 eax, DWORD PTR [edx+3164]
  00024	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  00029	81 f9 00 0a 00
	00		 cmp	 ecx, 2560		; 00000a00H
  0002f	0f 8c de 00 00
	00		 jl	 $LN5@MagicGladi
  00035	b8 a8 00 00 00	 mov	 eax, 168		; 000000a8H
  0003a	6b c8 00	 imul	 ecx, eax, 0
  0003d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00040	8b 82 5c 0c 00
	00		 mov	 eax, DWORD PTR [edx+3164]
  00046	0f bf 4c 08 06	 movsx	 ecx, WORD PTR [eax+ecx+6]
  0004b	81 f9 00 0c 00
	00		 cmp	 ecx, 3072		; 00000c00H
  00051	0f 8d bc 00 00
	00		 jge	 $LN5@MagicGladi

; 397  : 	{
; 398  : 		if (gObjGetMagicSearch(lpObj, 9) != NULL) SearchSkill = 9;

  00057	6a 09		 push	 9
  00059	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0005c	50		 push	 eax
  0005d	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00062	83 c4 08	 add	 esp, 8
  00065	85 c0		 test	 eax, eax
  00067	74 0c		 je	 SHORT $LN7@MagicGladi
  00069	c7 45 ec 09 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 9
  00070	e9 8c 00 00 00	 jmp	 $LN8@MagicGladi
$LN7@MagicGladi:

; 399  : 		else if (gObjGetMagicSearch(lpObj, 530) != NULL) SearchSkill = 530;

  00075	6a 12		 push	 18			; 00000012H
  00077	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0007a	50		 push	 eax
  0007b	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00080	83 c4 08	 add	 esp, 8
  00083	85 c0		 test	 eax, eax
  00085	74 09		 je	 SHORT $LN9@MagicGladi
  00087	c7 45 ec 12 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 530 ; 00000212H
  0008e	eb 71		 jmp	 SHORT $LN8@MagicGladi
$LN9@MagicGladi:

; 400  : 		else if (gObjGetMagicSearch(lpObj, 531) != NULL) SearchSkill = 531;

  00090	6a 13		 push	 19			; 00000013H
  00092	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00095	50		 push	 eax
  00096	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0009b	83 c4 08	 add	 esp, 8
  0009e	85 c0		 test	 eax, eax
  000a0	74 09		 je	 SHORT $LN11@MagicGladi
  000a2	c7 45 ec 13 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 531 ; 00000213H
  000a9	eb 56		 jmp	 SHORT $LN8@MagicGladi
$LN11@MagicGladi:

; 401  : 		else if (gObjGetMagicSearch(lpObj, 532) != NULL) SearchSkill = 532;

  000ab	6a 14		 push	 20			; 00000014H
  000ad	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b0	50		 push	 eax
  000b1	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000b6	83 c4 08	 add	 esp, 8
  000b9	85 c0		 test	 eax, eax
  000bb	74 09		 je	 SHORT $LN13@MagicGladi
  000bd	c7 45 ec 14 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 532 ; 00000214H
  000c4	eb 3b		 jmp	 SHORT $LN8@MagicGladi
$LN13@MagicGladi:

; 402  : 		else if (gObjGetMagicSearch(lpObj, 533) != NULL) SearchSkill = 533;

  000c6	6a 15		 push	 21			; 00000015H
  000c8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000cb	50		 push	 eax
  000cc	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000d1	83 c4 08	 add	 esp, 8
  000d4	85 c0		 test	 eax, eax
  000d6	74 09		 je	 SHORT $LN15@MagicGladi
  000d8	c7 45 ec 15 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 533 ; 00000215H
  000df	eb 20		 jmp	 SHORT $LN8@MagicGladi
$LN15@MagicGladi:

; 403  : 		else if (gObjGetMagicSearch(lpObj, 534) != NULL) SearchSkill = 534;

  000e1	6a 16		 push	 22			; 00000016H
  000e3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000e6	50		 push	 eax
  000e7	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000ec	83 c4 08	 add	 esp, 8
  000ef	85 c0		 test	 eax, eax
  000f1	74 09		 je	 SHORT $LN17@MagicGladi
  000f3	c7 45 ec 16 02
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 534 ; 00000216H
  000fa	eb 05		 jmp	 SHORT $LN8@MagicGladi
$LN17@MagicGladi:

; 404  : 		else return;

  000fc	e9 4b 02 00 00	 jmp	 $LN1@MagicGladi
$LN8@MagicGladi:

; 405  : 		skill = SearchSkill;

  00101	8b 45 ec	 mov	 eax, DWORD PTR _SearchSkill$[ebp]
  00104	89 45 f8	 mov	 DWORD PTR _skill$[ebp], eax

; 406  : 		NormDis = 6;

  00107	c7 45 f4 06 00
	00 00		 mov	 DWORD PTR _NormDis$[ebp], 6

; 407  : 	}

  0010e	e9 c6 00 00 00	 jmp	 $LN6@MagicGladi
$LN5@MagicGladi:

; 408  : 	else
; 409  : 	{
; 410  : 		if (gObjGetMagicSearch(lpObj, 41) != NULL) SearchSkill = 41;

  00113	6a 29		 push	 41			; 00000029H
  00115	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00118	50		 push	 eax
  00119	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0011e	83 c4 08	 add	 esp, 8
  00121	85 c0		 test	 eax, eax
  00123	74 0c		 je	 SHORT $LN19@MagicGladi
  00125	c7 45 ec 29 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 41 ; 00000029H
  0012c	e9 9b 00 00 00	 jmp	 $LN20@MagicGladi
$LN19@MagicGladi:

; 411  : 		else if (gObjGetMagicSearch(lpObj, 495) != NULL) SearchSkill = 495;

  00131	68 ef 00 00 00	 push	 239			; 000000efH
  00136	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00139	50		 push	 eax
  0013a	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0013f	83 c4 08	 add	 esp, 8
  00142	85 c0		 test	 eax, eax
  00144	74 09		 je	 SHORT $LN21@MagicGladi
  00146	c7 45 ec ef 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 495 ; 000001efH
  0014d	eb 7d		 jmp	 SHORT $LN20@MagicGladi
$LN21@MagicGladi:

; 412  : 		else if (gObjGetMagicSearch(lpObj, 496) != NULL) SearchSkill = 496;

  0014f	68 f0 00 00 00	 push	 240			; 000000f0H
  00154	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00157	50		 push	 eax
  00158	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0015d	83 c4 08	 add	 esp, 8
  00160	85 c0		 test	 eax, eax
  00162	74 09		 je	 SHORT $LN23@MagicGladi
  00164	c7 45 ec f0 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 496 ; 000001f0H
  0016b	eb 5f		 jmp	 SHORT $LN20@MagicGladi
$LN23@MagicGladi:

; 413  : 		else if (gObjGetMagicSearch(lpObj, 497) != NULL) SearchSkill = 497;

  0016d	68 f1 00 00 00	 push	 241			; 000000f1H
  00172	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00175	50		 push	 eax
  00176	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0017b	83 c4 08	 add	 esp, 8
  0017e	85 c0		 test	 eax, eax
  00180	74 09		 je	 SHORT $LN25@MagicGladi
  00182	c7 45 ec f1 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 497 ; 000001f1H
  00189	eb 41		 jmp	 SHORT $LN20@MagicGladi
$LN25@MagicGladi:

; 414  : 		else if (gObjGetMagicSearch(lpObj, 498) != NULL) SearchSkill = 498;

  0018b	68 f2 00 00 00	 push	 242			; 000000f2H
  00190	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00193	50		 push	 eax
  00194	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00199	83 c4 08	 add	 esp, 8
  0019c	85 c0		 test	 eax, eax
  0019e	74 09		 je	 SHORT $LN27@MagicGladi
  001a0	c7 45 ec f2 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 498 ; 000001f2H
  001a7	eb 23		 jmp	 SHORT $LN20@MagicGladi
$LN27@MagicGladi:

; 415  : 		else if (gObjGetMagicSearch(lpObj, 499) != NULL) SearchSkill = 499;

  001a9	68 f3 00 00 00	 push	 243			; 000000f3H
  001ae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001b1	50		 push	 eax
  001b2	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  001b7	83 c4 08	 add	 esp, 8
  001ba	85 c0		 test	 eax, eax
  001bc	74 09		 je	 SHORT $LN29@MagicGladi
  001be	c7 45 ec f3 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 499 ; 000001f3H
  001c5	eb 05		 jmp	 SHORT $LN20@MagicGladi
$LN29@MagicGladi:

; 416  : 		else return;

  001c7	e9 80 01 00 00	 jmp	 $LN1@MagicGladi
$LN20@MagicGladi:

; 417  : 		skill = SearchSkill;

  001cc	8b 45 ec	 mov	 eax, DWORD PTR _SearchSkill$[ebp]
  001cf	89 45 f8	 mov	 DWORD PTR _skill$[ebp], eax

; 418  : 		NormDis = 2;

  001d2	c7 45 f4 02 00
	00 00		 mov	 DWORD PTR _NormDis$[ebp], 2
$LN6@MagicGladi:

; 419  : 	}
; 420  : 
; 421  : 	lpMagic = gObjGetMagicSearch(lpObj, skill);	//Twisting Slash 41

  001d9	0f b6 45 f8	 movzx	 eax, BYTE PTR _skill$[ebp]
  001dd	50		 push	 eax
  001de	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001e1	51		 push	 ecx
  001e2	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  001e7	83 c4 08	 add	 esp, 8
  001ea	89 45 f0	 mov	 DWORD PTR _lpMagic$[ebp], eax

; 422  : 	if (lpMagic == NULL) return;

  001ed	83 7d f0 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  001f1	75 05		 jne	 SHORT $LN31@MagicGladi
  001f3	e9 54 01 00 00	 jmp	 $LN1@MagicGladi
$LN31@MagicGladi:

; 423  : 
; 424  : 	gObjUseSkill.UseSkill(lpObj->m_Index, lpMagic, lpObj->X, lpObj->Y, 0, 0, -1);

  001f8	6a ff		 push	 -1
  001fa	6a 00		 push	 0
  001fc	6a 00		 push	 0
  001fe	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00201	0f b6 88 06 01
	00 00		 movzx	 ecx, BYTE PTR [eax+262]
  00208	51		 push	 ecx
  00209	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0020c	0f b6 82 04 01
	00 00		 movzx	 eax, BYTE PTR [edx+260]
  00213	50		 push	 eax
  00214	8b 4d f0	 mov	 ecx, DWORD PTR _lpMagic$[ebp]
  00217	51		 push	 ecx
  00218	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0021b	8b 02		 mov	 eax, DWORD PTR [edx]
  0021d	50		 push	 eax
  0021e	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  00223	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHPAVCMagicInf@@EEEEH@Z ; CObjUseSkill::UseSkill

; 425  : 
; 426  : 	int dis;
; 427  : 	int tObjNum;
; 428  : 	BYTE attr;
; 429  : 	for (int n = 0; n<MAX_VIEWPORT_MONSTER; n++)

  00228	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  0022f	eb 09		 jmp	 SHORT $LN4@MagicGladi
$LN2@MagicGladi:
  00231	8b 45 dc	 mov	 eax, DWORD PTR _n$1[ebp]
  00234	83 c0 01	 add	 eax, 1
  00237	89 45 dc	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@MagicGladi:
  0023a	83 7d dc 14	 cmp	 DWORD PTR _n$1[ebp], 20	; 00000014H
  0023e	0f 8d fa 00 00
	00		 jge	 $LN3@MagicGladi

; 430  : 	{
; 431  : 		tObjNum = lpObj->VpPlayer2[n].number;

  00244	6b 45 dc 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  00248	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0024b	0f bf 94 01 ea
	06 00 00	 movsx	 edx, WORD PTR [ecx+eax+1770]
  00253	89 55 e4	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 432  : 		if (lpObj->VpPlayer2[n].state == 0) continue;

  00256	6b 45 dc 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  0025a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0025d	0f be 94 01 e8
	06 00 00	 movsx	 edx, BYTE PTR [ecx+eax+1768]
  00265	85 d2		 test	 edx, edx
  00267	75 02		 jne	 SHORT $LN32@MagicGladi
  00269	eb c6		 jmp	 SHORT $LN2@MagicGladi
$LN32@MagicGladi:

; 433  : 		if (tObjNum >= 0)

  0026b	83 7d e4 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  0026f	0f 8c c4 00 00
	00		 jl	 $LN33@MagicGladi

; 434  : 		{
; 435  : 			if (gObj[tObjNum].Type == OBJTYPE_MONSTER)

  00275	69 45 e4 a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0027c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00282	0f b7 54 01 64	 movzx	 edx, WORD PTR [ecx+eax+100]
  00287	83 fa 02	 cmp	 edx, 2
  0028a	0f 85 a9 00 00
	00		 jne	 $LN33@MagicGladi

; 436  : 			{
; 437  : 				attr = MapC[gObj[tObjNum].MapNumber].GetAttr(gObj[tObjNum].X, gObj[tObjNum].Y);

  00290	69 45 e4 a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  00297	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0029d	0f bf 94 01 06
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+262]
  002a5	52		 push	 edx
  002a6	69 45 e4 a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  002ad	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  002b3	0f bf 94 01 04
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+260]
  002bb	52		 push	 edx
  002bc	69 45 e4 a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  002c3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  002c9	0f b6 94 01 09
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+265]
  002d1	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  002d7	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  002dd	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  002e2	88 45 e3	 mov	 BYTE PTR _attr$[ebp], al

; 438  : 				if ((attr & 1) != 1)

  002e5	0f b6 45 e3	 movzx	 eax, BYTE PTR _attr$[ebp]
  002e9	83 e0 01	 and	 eax, 1
  002ec	75 4b		 jne	 SHORT $LN33@MagicGladi

; 439  : 				{
; 440  : 					dis = gObjCalDistance(lpObj, &gObj[tObjNum]);

  002ee	69 45 e4 a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  002f5	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  002fb	50		 push	 eax
  002fc	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002ff	51		 push	 ecx
  00300	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjCalDistance
  00305	83 c4 08	 add	 esp, 8
  00308	89 45 e8	 mov	 DWORD PTR _dis$[ebp], eax

; 441  : 					if (NormDis >= dis)

  0030b	8b 45 f4	 mov	 eax, DWORD PTR _NormDis$[ebp]
  0030e	3b 45 e8	 cmp	 eax, DWORD PTR _dis$[ebp]
  00311	7c 26		 jl	 SHORT $LN33@MagicGladi

; 442  : 					{
; 443  : 						gObjAttack(lpObj, &gObj[tObjNum], lpMagic, 0, 1, 0, 0);

  00313	6a 00		 push	 0
  00315	6a 00		 push	 0
  00317	6a 01		 push	 1
  00319	6a 00		 push	 0
  0031b	8b 45 f0	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  0031e	50		 push	 eax
  0031f	69 4d e4 a0 1b
	00 00		 imul	 ecx, DWORD PTR _tObjNum$[ebp], 7072
  00326	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0032c	51		 push	 ecx
  0032d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00330	52		 push	 edx
  00331	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z ; gObjAttack
  00336	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN33@MagicGladi:

; 444  : 					}
; 445  : 				}
; 446  : 			}
; 447  : 		}
; 448  : 	}

  00339	e9 f3 fe ff ff	 jmp	 $LN2@MagicGladi
$LN3@MagicGladi:

; 449  : 
; 450  : 	this->UseMana(lpObj->m_Index);

  0033e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00341	8b 08		 mov	 ecx, DWORD PTR [eax]
  00343	51		 push	 ecx
  00344	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00347	e8 00 00 00 00	 call	 ?UseMana@cOffExp@@QAEXH@Z ; cOffExp::UseMana
$LN1@MagicGladi:

; 451  : }

  0034c	5f		 pop	 edi
  0034d	5e		 pop	 esi
  0034e	5b		 pop	 ebx
  0034f	8b e5		 mov	 esp, ebp
  00351	5d		 pop	 ebp
  00352	c2 04 00	 ret	 4
?MagicGladiatorOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ENDP ; cOffExp::MagicGladiatorOff
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?FairyElfOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -60						; size = 4
_attr$ = -53						; size = 1
_tObjNum$ = -52						; size = 4
_dis$ = -48						; size = 4
_StartDir$ = -44					; size = 4
_NumDir$ = -40						; size = 24
_lpMagic$ = -16						; size = 4
_SearchSkill$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?FairyElfOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z PROC	; cOffExp::FairyElfOff, COMDAT
; _this$ = ecx

; 339  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 7c	 sub	 esp, 124		; 0000007cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 340  : 	int SearchSkill = 0;

  00016	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 0

; 341  : 	CMagicInf * lpMagic;
; 342  : 
; 343  : 	lpMagic = gObjGetMagicSearch( lpObj, 24);	//Multi-Shot 235

  0001d	6a 18		 push	 24			; 00000018H
  0001f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00022	50		 push	 eax
  00023	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00028	83 c4 08	 add	 esp, 8
  0002b	89 45 f0	 mov	 DWORD PTR _lpMagic$[ebp], eax

; 344  : 	if(lpMagic==NULL) gObjUseSkill.UseSkill(lpObj->m_Index, lpObj->m_Index, lpMagic);

  0002e	83 7d f0 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  00032	75 1a		 jne	 SHORT $LN5@FairyElfOf
  00034	8b 45 f0	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00037	50		 push	 eax
  00038	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0003b	8b 11		 mov	 edx, DWORD PTR [ecx]
  0003d	52		 push	 edx
  0003e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00041	8b 08		 mov	 ecx, DWORD PTR [eax]
  00043	51		 push	 ecx
  00044	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  00049	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHHPAVCMagicInf@@@Z ; CObjUseSkill::UseSkill
$LN5@FairyElfOf:

; 345  : 
; 346  : 	if(gObjGetMagicSearch( lpObj, 24) != NULL) SearchSkill = 24;

  0004e	6a 18		 push	 24			; 00000018H
  00050	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00053	50		 push	 eax
  00054	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00059	83 c4 08	 add	 esp, 8
  0005c	85 c0		 test	 eax, eax
  0005e	74 09		 je	 SHORT $LN6@FairyElfOf
  00060	c7 45 f4 18 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 24 ; 00000018H
  00067	eb 41		 jmp	 SHORT $LN7@FairyElfOf
$LN6@FairyElfOf:

; 347  : 	else if(gObjGetMagicSearch( lpObj, 414) != NULL) SearchSkill = 414;

  00069	68 9e 00 00 00	 push	 158			; 0000009eH
  0006e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00071	50		 push	 eax
  00072	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00077	83 c4 08	 add	 esp, 8
  0007a	85 c0		 test	 eax, eax
  0007c	74 09		 je	 SHORT $LN8@FairyElfOf
  0007e	c7 45 f4 9e 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 414 ; 0000019eH
  00085	eb 23		 jmp	 SHORT $LN7@FairyElfOf
$LN8@FairyElfOf:

; 348  : 	else if(gObjGetMagicSearch( lpObj, 418) != NULL) SearchSkill = 418;

  00087	68 a2 00 00 00	 push	 162			; 000000a2H
  0008c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0008f	50		 push	 eax
  00090	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00095	83 c4 08	 add	 esp, 8
  00098	85 c0		 test	 eax, eax
  0009a	74 09		 je	 SHORT $LN10@FairyElfOf
  0009c	c7 45 f4 a2 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 418 ; 000001a2H
  000a3	eb 05		 jmp	 SHORT $LN7@FairyElfOf
$LN10@FairyElfOf:

; 349  : 	else return;

  000a5	e9 c7 01 00 00	 jmp	 $LN1@FairyElfOf
$LN7@FairyElfOf:

; 350  : 
; 351  : 	lpMagic = gObjGetMagicSearch( lpObj, SearchSkill);

  000aa	0f b6 45 f4	 movzx	 eax, BYTE PTR _SearchSkill$[ebp]
  000ae	50		 push	 eax
  000af	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000b2	51		 push	 ecx
  000b3	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000b8	83 c4 08	 add	 esp, 8
  000bb	89 45 f0	 mov	 DWORD PTR _lpMagic$[ebp], eax

; 352  : 	if(lpMagic==NULL) gObjUseSkill.UseSkill(lpObj->m_Index, lpObj->m_Index, lpMagic);

  000be	83 7d f0 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  000c2	75 1a		 jne	 SHORT $LN12@FairyElfOf
  000c4	8b 45 f0	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  000c7	50		 push	 eax
  000c8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000cb	8b 11		 mov	 edx, DWORD PTR [ecx]
  000cd	52		 push	 edx
  000ce	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000d3	51		 push	 ecx
  000d4	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  000d9	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHHPAVCMagicInf@@@Z ; CObjUseSkill::UseSkill
$LN12@FairyElfOf:

; 353  : 
; 354  : 	int NumDir[6] = {0, 50, 100, 150, 200, 250 };

  000de	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _NumDir$[ebp], 0
  000e5	c7 45 dc 32 00
	00 00		 mov	 DWORD PTR _NumDir$[ebp+4], 50 ; 00000032H
  000ec	c7 45 e0 64 00
	00 00		 mov	 DWORD PTR _NumDir$[ebp+8], 100 ; 00000064H
  000f3	c7 45 e4 96 00
	00 00		 mov	 DWORD PTR _NumDir$[ebp+12], 150 ; 00000096H
  000fa	c7 45 e8 c8 00
	00 00		 mov	 DWORD PTR _NumDir$[ebp+16], 200 ; 000000c8H
  00101	c7 45 ec fa 00
	00 00		 mov	 DWORD PTR _NumDir$[ebp+20], 250 ; 000000faH

; 355  : 	int StartDir = NumDir[rand()%6];

  00108	e8 00 00 00 00	 call	 _rand
  0010d	99		 cdq
  0010e	b9 06 00 00 00	 mov	 ecx, 6
  00113	f7 f9		 idiv	 ecx
  00115	8b 54 95 d8	 mov	 edx, DWORD PTR _NumDir$[ebp+edx*4]
  00119	89 55 d4	 mov	 DWORD PTR _StartDir$[ebp], edx

; 356  : 	gObjUseSkill.UseSkill(lpObj->m_Index, lpMagic,lpObj->X, lpObj->Y,StartDir,0,-1);

  0011c	6a ff		 push	 -1
  0011e	6a 00		 push	 0
  00120	0f b6 45 d4	 movzx	 eax, BYTE PTR _StartDir$[ebp]
  00124	50		 push	 eax
  00125	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00128	0f b6 91 06 01
	00 00		 movzx	 edx, BYTE PTR [ecx+262]
  0012f	52		 push	 edx
  00130	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00133	0f b6 88 04 01
	00 00		 movzx	 ecx, BYTE PTR [eax+260]
  0013a	51		 push	 ecx
  0013b	8b 55 f0	 mov	 edx, DWORD PTR _lpMagic$[ebp]
  0013e	52		 push	 edx
  0013f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00142	8b 08		 mov	 ecx, DWORD PTR [eax]
  00144	51		 push	 ecx
  00145	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  0014a	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHPAVCMagicInf@@EEEEH@Z ; CObjUseSkill::UseSkill

; 357  : 	
; 358  : 
; 359  : 	int dis;
; 360  : 	int tObjNum;
; 361  : 	BYTE attr;
; 362  : 	for (int n = 0; n<MAX_VIEWPORT_MONSTER; n++)

  0014f	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  00156	eb 09		 jmp	 SHORT $LN4@FairyElfOf
$LN2@FairyElfOf:
  00158	8b 45 c4	 mov	 eax, DWORD PTR _n$1[ebp]
  0015b	83 c0 01	 add	 eax, 1
  0015e	89 45 c4	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@FairyElfOf:
  00161	83 7d c4 14	 cmp	 DWORD PTR _n$1[ebp], 20	; 00000014H
  00165	0f 8d f8 00 00
	00		 jge	 $LN3@FairyElfOf

; 363  : 	{
; 364  : 		tObjNum = lpObj->VpPlayer2[n].number;

  0016b	6b 45 c4 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  0016f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00172	0f bf 94 01 ea
	06 00 00	 movsx	 edx, WORD PTR [ecx+eax+1770]
  0017a	89 55 cc	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 365  : 		if (lpObj->VpPlayer2[n].state == 0) continue;

  0017d	6b 45 c4 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  00181	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00184	0f be 94 01 e8
	06 00 00	 movsx	 edx, BYTE PTR [ecx+eax+1768]
  0018c	85 d2		 test	 edx, edx
  0018e	75 02		 jne	 SHORT $LN13@FairyElfOf
  00190	eb c6		 jmp	 SHORT $LN2@FairyElfOf
$LN13@FairyElfOf:

; 366  : 		if (tObjNum >= 0)

  00192	83 7d cc 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  00196	0f 8c c2 00 00
	00		 jl	 $LN14@FairyElfOf

; 367  : 		{
; 368  : 			if (gObj[tObjNum].Type == OBJTYPE_MONSTER)

  0019c	69 45 cc a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001a3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001a9	0f b7 54 01 64	 movzx	 edx, WORD PTR [ecx+eax+100]
  001ae	83 fa 02	 cmp	 edx, 2
  001b1	0f 85 a7 00 00
	00		 jne	 $LN14@FairyElfOf

; 369  : 			{
; 370  : 				attr = MapC[gObj[tObjNum].MapNumber].GetAttr(gObj[tObjNum].X, gObj[tObjNum].Y);

  001b7	69 45 cc a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001be	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001c4	0f bf 94 01 06
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+262]
  001cc	52		 push	 edx
  001cd	69 45 cc a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001d4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001da	0f bf 94 01 04
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+260]
  001e2	52		 push	 edx
  001e3	69 45 cc a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001ea	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001f0	0f b6 94 01 09
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+265]
  001f8	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  001fe	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  00204	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  00209	88 45 cb	 mov	 BYTE PTR _attr$[ebp], al

; 371  : 				if ((attr & 1) != 1)

  0020c	0f b6 45 cb	 movzx	 eax, BYTE PTR _attr$[ebp]
  00210	83 e0 01	 and	 eax, 1
  00213	75 49		 jne	 SHORT $LN14@FairyElfOf

; 372  : 				{
; 373  : 					dis = gObjCalDistance(lpObj, &gObj[tObjNum]);

  00215	69 45 cc a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0021c	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00222	50		 push	 eax
  00223	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00226	51		 push	 ecx
  00227	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjCalDistance
  0022c	83 c4 08	 add	 esp, 8
  0022f	89 45 d0	 mov	 DWORD PTR _dis$[ebp], eax

; 374  : 					if (5 >= dis)

  00232	83 7d d0 05	 cmp	 DWORD PTR _dis$[ebp], 5
  00236	7f 26		 jg	 SHORT $LN14@FairyElfOf

; 375  : 					{
; 376  : 						gObjAttack(lpObj, &gObj[tObjNum], lpMagic, 0, 1, 0, 0);

  00238	6a 00		 push	 0
  0023a	6a 00		 push	 0
  0023c	6a 01		 push	 1
  0023e	6a 00		 push	 0
  00240	8b 45 f0	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  00243	50		 push	 eax
  00244	69 4d cc a0 1b
	00 00		 imul	 ecx, DWORD PTR _tObjNum$[ebp], 7072
  0024b	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00251	51		 push	 ecx
  00252	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00255	52		 push	 edx
  00256	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z ; gObjAttack
  0025b	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN14@FairyElfOf:

; 377  : 					}
; 378  : 				}
; 379  : 			}
; 380  : 		}
; 381  : 	}

  0025e	e9 f5 fe ff ff	 jmp	 $LN2@FairyElfOf
$LN3@FairyElfOf:

; 382  : 	
; 383  : 	this->UseMana(lpObj->m_Index);

  00263	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00266	8b 08		 mov	 ecx, DWORD PTR [eax]
  00268	51		 push	 ecx
  00269	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0026c	e8 00 00 00 00	 call	 ?UseMana@cOffExp@@QAEXH@Z ; cOffExp::UseMana
$LN1@FairyElfOf:

; 384  : }

  00271	5f		 pop	 edi
  00272	5e		 pop	 esi
  00273	5b		 pop	 ebx
  00274	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00277	33 cd		 xor	 ecx, ebp
  00279	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0027e	8b e5		 mov	 esp, ebp
  00280	5d		 pop	 ebp
  00281	c2 04 00	 ret	 4
?FairyElfOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ENDP	; cOffExp::FairyElfOff
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?DarkWizardOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -28						; size = 4
_attr$ = -21						; size = 1
_tObjNum$ = -20						; size = 4
_dis$ = -16						; size = 4
_lpMagic$ = -12						; size = 4
_SearchSkill$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?DarkWizardOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z PROC	; cOffExp::DarkWizardOff, COMDAT
; _this$ = ecx

; 224  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 225  : 	int SearchSkill = 0;

  0000c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 0

; 226  : 	CMagicInf * lpMagic;
; 227  : 
; 228  : 	if (gObjGetMagicSearch(lpObj, 9) != NULL) SearchSkill = 9;

  00013	6a 09		 push	 9
  00015	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00018	50		 push	 eax
  00019	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0001e	83 c4 08	 add	 esp, 8
  00021	85 c0		 test	 eax, eax
  00023	74 0c		 je	 SHORT $LN5@DarkWizard
  00025	c7 45 f8 09 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 9
  0002c	e9 9b 00 00 00	 jmp	 $LN6@DarkWizard
$LN5@DarkWizard:

; 229  : 	else if (gObjGetMagicSearch(lpObj, 445) != NULL) SearchSkill = 445;

  00031	68 bd 00 00 00	 push	 189			; 000000bdH
  00036	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00039	50		 push	 eax
  0003a	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0003f	83 c4 08	 add	 esp, 8
  00042	85 c0		 test	 eax, eax
  00044	74 09		 je	 SHORT $LN7@DarkWizard
  00046	c7 45 f8 bd 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 445 ; 000001bdH
  0004d	eb 7d		 jmp	 SHORT $LN6@DarkWizard
$LN7@DarkWizard:

; 230  : 	else if (gObjGetMagicSearch(lpObj, 446) != NULL) SearchSkill = 446;

  0004f	68 be 00 00 00	 push	 190			; 000000beH
  00054	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00057	50		 push	 eax
  00058	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0005d	83 c4 08	 add	 esp, 8
  00060	85 c0		 test	 eax, eax
  00062	74 09		 je	 SHORT $LN9@DarkWizard
  00064	c7 45 f8 be 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 446 ; 000001beH
  0006b	eb 5f		 jmp	 SHORT $LN6@DarkWizard
$LN9@DarkWizard:

; 231  : 	else if (gObjGetMagicSearch(lpObj, 447) != NULL) SearchSkill = 447;

  0006d	68 bf 00 00 00	 push	 191			; 000000bfH
  00072	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00075	50		 push	 eax
  00076	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0007b	83 c4 08	 add	 esp, 8
  0007e	85 c0		 test	 eax, eax
  00080	74 09		 je	 SHORT $LN11@DarkWizard
  00082	c7 45 f8 bf 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 447 ; 000001bfH
  00089	eb 41		 jmp	 SHORT $LN6@DarkWizard
$LN11@DarkWizard:

; 232  : 	else if (gObjGetMagicSearch(lpObj, 448) != NULL) SearchSkill = 448;

  0008b	68 c0 00 00 00	 push	 192			; 000000c0H
  00090	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00093	50		 push	 eax
  00094	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00099	83 c4 08	 add	 esp, 8
  0009c	85 c0		 test	 eax, eax
  0009e	74 09		 je	 SHORT $LN13@DarkWizard
  000a0	c7 45 f8 c0 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 448 ; 000001c0H
  000a7	eb 23		 jmp	 SHORT $LN6@DarkWizard
$LN13@DarkWizard:

; 233  : 	else if (gObjGetMagicSearch(lpObj, 449) != NULL) SearchSkill = 449;

  000a9	68 c1 00 00 00	 push	 193			; 000000c1H
  000ae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b1	50		 push	 eax
  000b2	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000b7	83 c4 08	 add	 esp, 8
  000ba	85 c0		 test	 eax, eax
  000bc	74 09		 je	 SHORT $LN15@DarkWizard
  000be	c7 45 f8 c1 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 449 ; 000001c1H
  000c5	eb 05		 jmp	 SHORT $LN6@DarkWizard
$LN15@DarkWizard:

; 234  : 	else return;

  000c7	e9 71 01 00 00	 jmp	 $LN1@DarkWizard
$LN6@DarkWizard:

; 235  : 
; 236  : 	lpMagic = gObjGetMagicSearch(lpObj, SearchSkill);

  000cc	0f b6 45 f8	 movzx	 eax, BYTE PTR _SearchSkill$[ebp]
  000d0	50		 push	 eax
  000d1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000d4	51		 push	 ecx
  000d5	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000da	83 c4 08	 add	 esp, 8
  000dd	89 45 f4	 mov	 DWORD PTR _lpMagic$[ebp], eax

; 237  : 	if (lpMagic == NULL) return;

  000e0	83 7d f4 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  000e4	75 05		 jne	 SHORT $LN17@DarkWizard
  000e6	e9 52 01 00 00	 jmp	 $LN1@DarkWizard
$LN17@DarkWizard:

; 238  : 
; 239  : 	gObjUseSkill.UseSkill(lpObj->m_Index, lpMagic, lpObj->X, lpObj->Y, 0, 0, -1);

  000eb	6a ff		 push	 -1
  000ed	6a 00		 push	 0
  000ef	6a 00		 push	 0
  000f1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000f4	0f b6 88 06 01
	00 00		 movzx	 ecx, BYTE PTR [eax+262]
  000fb	51		 push	 ecx
  000fc	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000ff	0f b6 82 04 01
	00 00		 movzx	 eax, BYTE PTR [edx+260]
  00106	50		 push	 eax
  00107	8b 4d f4	 mov	 ecx, DWORD PTR _lpMagic$[ebp]
  0010a	51		 push	 ecx
  0010b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0010e	8b 02		 mov	 eax, DWORD PTR [edx]
  00110	50		 push	 eax
  00111	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  00116	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHPAVCMagicInf@@EEEEH@Z ; CObjUseSkill::UseSkill

; 240  : 
; 241  : 	int dis;
; 242  : 	int tObjNum;
; 243  : 	BYTE attr;
; 244  : 	for (int n = 0; n<MAX_VIEWPORT_MONSTER; n++)

  0011b	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  00122	eb 09		 jmp	 SHORT $LN4@DarkWizard
$LN2@DarkWizard:
  00124	8b 45 e4	 mov	 eax, DWORD PTR _n$1[ebp]
  00127	83 c0 01	 add	 eax, 1
  0012a	89 45 e4	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@DarkWizard:
  0012d	83 7d e4 14	 cmp	 DWORD PTR _n$1[ebp], 20	; 00000014H
  00131	0f 8d f8 00 00
	00		 jge	 $LN3@DarkWizard

; 245  : 	{
; 246  : 		tObjNum = lpObj->VpPlayer2[n].number;

  00137	6b 45 e4 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  0013b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0013e	0f bf 94 01 ea
	06 00 00	 movsx	 edx, WORD PTR [ecx+eax+1770]
  00146	89 55 ec	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 247  : 		if (lpObj->VpPlayer2[n].state == 0) continue;

  00149	6b 45 e4 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  0014d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00150	0f be 94 01 e8
	06 00 00	 movsx	 edx, BYTE PTR [ecx+eax+1768]
  00158	85 d2		 test	 edx, edx
  0015a	75 02		 jne	 SHORT $LN18@DarkWizard
  0015c	eb c6		 jmp	 SHORT $LN2@DarkWizard
$LN18@DarkWizard:

; 248  : 		if (tObjNum >= 0)

  0015e	83 7d ec 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  00162	0f 8c c2 00 00
	00		 jl	 $LN19@DarkWizard

; 249  : 		{
; 250  : 			if (gObj[tObjNum].Type == OBJTYPE_MONSTER)

  00168	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0016f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00175	0f b7 54 01 64	 movzx	 edx, WORD PTR [ecx+eax+100]
  0017a	83 fa 02	 cmp	 edx, 2
  0017d	0f 85 a7 00 00
	00		 jne	 $LN19@DarkWizard

; 251  : 			{
; 252  : 				attr = MapC[gObj[tObjNum].MapNumber].GetAttr(gObj[tObjNum].X, gObj[tObjNum].Y);

  00183	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0018a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00190	0f bf 94 01 06
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+262]
  00198	52		 push	 edx
  00199	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001a0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001a6	0f bf 94 01 04
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+260]
  001ae	52		 push	 edx
  001af	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001b6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001bc	0f b6 94 01 09
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+265]
  001c4	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  001ca	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  001d0	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  001d5	88 45 eb	 mov	 BYTE PTR _attr$[ebp], al

; 253  : 				if ((attr & 1) != 1)

  001d8	0f b6 45 eb	 movzx	 eax, BYTE PTR _attr$[ebp]
  001dc	83 e0 01	 and	 eax, 1
  001df	75 49		 jne	 SHORT $LN19@DarkWizard

; 254  : 				{
; 255  : 					dis = gObjCalDistance(lpObj, &gObj[tObjNum]);

  001e1	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001e8	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001ee	50		 push	 eax
  001ef	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001f2	51		 push	 ecx
  001f3	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjCalDistance
  001f8	83 c4 08	 add	 esp, 8
  001fb	89 45 f0	 mov	 DWORD PTR _dis$[ebp], eax

; 256  : 					if (6 >= dis)

  001fe	83 7d f0 06	 cmp	 DWORD PTR _dis$[ebp], 6
  00202	7f 26		 jg	 SHORT $LN19@DarkWizard

; 257  : 					{
; 258  : 						gObjAttack(lpObj, &gObj[tObjNum], lpMagic, 0, 1, 0, 0);

  00204	6a 00		 push	 0
  00206	6a 00		 push	 0
  00208	6a 01		 push	 1
  0020a	6a 00		 push	 0
  0020c	8b 45 f4	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  0020f	50		 push	 eax
  00210	69 4d ec a0 1b
	00 00		 imul	 ecx, DWORD PTR _tObjNum$[ebp], 7072
  00217	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0021d	51		 push	 ecx
  0021e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00221	52		 push	 edx
  00222	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z ; gObjAttack
  00227	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN19@DarkWizard:

; 259  : 					}
; 260  : 				}
; 261  : 			}
; 262  : 		}
; 263  : 	}

  0022a	e9 f5 fe ff ff	 jmp	 $LN2@DarkWizard
$LN3@DarkWizard:

; 264  : 
; 265  : 	this->UseMana(lpObj->m_Index);

  0022f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00232	8b 08		 mov	 ecx, DWORD PTR [eax]
  00234	51		 push	 ecx
  00235	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00238	e8 00 00 00 00	 call	 ?UseMana@cOffExp@@QAEXH@Z ; cOffExp::UseMana
$LN1@DarkWizard:

; 266  : }

  0023d	5f		 pop	 edi
  0023e	5e		 pop	 esi
  0023f	5b		 pop	 ebx
  00240	8b e5		 mov	 esp, ebp
  00242	5d		 pop	 ebp
  00243	c2 04 00	 ret	 4
?DarkWizardOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ENDP	; cOffExp::DarkWizardOff
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?DarkKnightOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_n$1 = -28						; size = 4
_attr$ = -21						; size = 1
_tObjNum$ = -20						; size = 4
_dis$ = -16						; size = 4
_lpMagic$ = -12						; size = 4
_SearchSkill$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?DarkKnightOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z PROC	; cOffExp::DarkKnightOff, COMDAT
; _this$ = ecx

; 271  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 272  : 	int SearchSkill = 0;

  0000c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 0

; 273  : 	CMagicInf * lpMagic;
; 274  : 
; 275  : 	if (gObjGetMagicSearch(lpObj, 41) != NULL) SearchSkill = 41;

  00013	6a 29		 push	 41			; 00000029H
  00015	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00018	50		 push	 eax
  00019	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0001e	83 c4 08	 add	 esp, 8
  00021	85 c0		 test	 eax, eax
  00023	74 0c		 je	 SHORT $LN5@DarkKnight
  00025	c7 45 f8 29 00
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 41 ; 00000029H
  0002c	e9 9b 00 00 00	 jmp	 $LN6@DarkKnight
$LN5@DarkKnight:

; 276  : 	else if (gObjGetMagicSearch(lpObj, 455) != NULL) SearchSkill = 455;

  00031	68 c7 00 00 00	 push	 199			; 000000c7H
  00036	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00039	50		 push	 eax
  0003a	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0003f	83 c4 08	 add	 esp, 8
  00042	85 c0		 test	 eax, eax
  00044	74 09		 je	 SHORT $LN7@DarkKnight
  00046	c7 45 f8 c7 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 455 ; 000001c7H
  0004d	eb 7d		 jmp	 SHORT $LN6@DarkKnight
$LN7@DarkKnight:

; 277  : 	else if (gObjGetMagicSearch(lpObj, 456) != NULL) SearchSkill = 456;

  0004f	68 c8 00 00 00	 push	 200			; 000000c8H
  00054	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00057	50		 push	 eax
  00058	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0005d	83 c4 08	 add	 esp, 8
  00060	85 c0		 test	 eax, eax
  00062	74 09		 je	 SHORT $LN9@DarkKnight
  00064	c7 45 f8 c8 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 456 ; 000001c8H
  0006b	eb 5f		 jmp	 SHORT $LN6@DarkKnight
$LN9@DarkKnight:

; 278  : 	else if (gObjGetMagicSearch(lpObj, 457) != NULL) SearchSkill = 457;

  0006d	68 c9 00 00 00	 push	 201			; 000000c9H
  00072	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00075	50		 push	 eax
  00076	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  0007b	83 c4 08	 add	 esp, 8
  0007e	85 c0		 test	 eax, eax
  00080	74 09		 je	 SHORT $LN11@DarkKnight
  00082	c7 45 f8 c9 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 457 ; 000001c9H
  00089	eb 41		 jmp	 SHORT $LN6@DarkKnight
$LN11@DarkKnight:

; 279  : 	else if (gObjGetMagicSearch(lpObj, 458) != NULL) SearchSkill = 458;

  0008b	68 ca 00 00 00	 push	 202			; 000000caH
  00090	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00093	50		 push	 eax
  00094	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  00099	83 c4 08	 add	 esp, 8
  0009c	85 c0		 test	 eax, eax
  0009e	74 09		 je	 SHORT $LN13@DarkKnight
  000a0	c7 45 f8 ca 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 458 ; 000001caH
  000a7	eb 23		 jmp	 SHORT $LN6@DarkKnight
$LN13@DarkKnight:

; 280  : 	else if (gObjGetMagicSearch(lpObj, 459) != NULL) SearchSkill = 459;

  000a9	68 cb 00 00 00	 push	 203			; 000000cbH
  000ae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000b1	50		 push	 eax
  000b2	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000b7	83 c4 08	 add	 esp, 8
  000ba	85 c0		 test	 eax, eax
  000bc	74 09		 je	 SHORT $LN15@DarkKnight
  000be	c7 45 f8 cb 01
	00 00		 mov	 DWORD PTR _SearchSkill$[ebp], 459 ; 000001cbH
  000c5	eb 05		 jmp	 SHORT $LN6@DarkKnight
$LN15@DarkKnight:

; 281  : 	else return;

  000c7	e9 71 01 00 00	 jmp	 $LN1@DarkKnight
$LN6@DarkKnight:

; 282  : 
; 283  : 	lpMagic = gObjGetMagicSearch(lpObj, SearchSkill);

  000cc	0f b6 45 f8	 movzx	 eax, BYTE PTR _SearchSkill$[ebp]
  000d0	50		 push	 eax
  000d1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000d4	51		 push	 ecx
  000d5	e8 00 00 00 00	 call	 ?gObjGetMagicSearch@@YAPAVCMagicInf@@PAVOBJECTSTRUCT@@E@Z ; gObjGetMagicSearch
  000da	83 c4 08	 add	 esp, 8
  000dd	89 45 f4	 mov	 DWORD PTR _lpMagic$[ebp], eax

; 284  : 	if (lpMagic == NULL) return;

  000e0	83 7d f4 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  000e4	75 05		 jne	 SHORT $LN17@DarkKnight
  000e6	e9 52 01 00 00	 jmp	 $LN1@DarkKnight
$LN17@DarkKnight:

; 285  : 
; 286  : 	gObjUseSkill.UseSkill(lpObj->m_Index, lpMagic, lpObj->X, lpObj->Y, 0, 0, -1);

  000eb	6a ff		 push	 -1
  000ed	6a 00		 push	 0
  000ef	6a 00		 push	 0
  000f1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000f4	0f b6 88 06 01
	00 00		 movzx	 ecx, BYTE PTR [eax+262]
  000fb	51		 push	 ecx
  000fc	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000ff	0f b6 82 04 01
	00 00		 movzx	 eax, BYTE PTR [edx+260]
  00106	50		 push	 eax
  00107	8b 4d f4	 mov	 ecx, DWORD PTR _lpMagic$[ebp]
  0010a	51		 push	 ecx
  0010b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0010e	8b 02		 mov	 eax, DWORD PTR [edx]
  00110	50		 push	 eax
  00111	b9 00 00 00 00	 mov	 ecx, OFFSET ?gObjUseSkill@@3VCObjUseSkill@@A ; gObjUseSkill
  00116	e8 00 00 00 00	 call	 ?UseSkill@CObjUseSkill@@QAEXHPAVCMagicInf@@EEEEH@Z ; CObjUseSkill::UseSkill

; 287  : 
; 288  : 	int dis;
; 289  : 	int tObjNum;
; 290  : 	BYTE attr;
; 291  : 	for (int n = 0; n<MAX_VIEWPORT_MONSTER; n++)

  0011b	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _n$1[ebp], 0
  00122	eb 09		 jmp	 SHORT $LN4@DarkKnight
$LN2@DarkKnight:
  00124	8b 45 e4	 mov	 eax, DWORD PTR _n$1[ebp]
  00127	83 c0 01	 add	 eax, 1
  0012a	89 45 e4	 mov	 DWORD PTR _n$1[ebp], eax
$LN4@DarkKnight:
  0012d	83 7d e4 14	 cmp	 DWORD PTR _n$1[ebp], 20	; 00000014H
  00131	0f 8d f8 00 00
	00		 jge	 $LN3@DarkKnight

; 292  : 	{
; 293  : 		tObjNum = lpObj->VpPlayer2[n].number;

  00137	6b 45 e4 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  0013b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0013e	0f bf 94 01 ea
	06 00 00	 movsx	 edx, WORD PTR [ecx+eax+1770]
  00146	89 55 ec	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 294  : 		if (lpObj->VpPlayer2[n].state == 0) continue;

  00149	6b 45 e4 0c	 imul	 eax, DWORD PTR _n$1[ebp], 12
  0014d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00150	0f be 94 01 e8
	06 00 00	 movsx	 edx, BYTE PTR [ecx+eax+1768]
  00158	85 d2		 test	 edx, edx
  0015a	75 02		 jne	 SHORT $LN18@DarkKnight
  0015c	eb c6		 jmp	 SHORT $LN2@DarkKnight
$LN18@DarkKnight:

; 295  : 		if (tObjNum >= 0)

  0015e	83 7d ec 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  00162	0f 8c c2 00 00
	00		 jl	 $LN19@DarkKnight

; 296  : 		{
; 297  : 			if (gObj[tObjNum].Type == OBJTYPE_MONSTER)

  00168	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0016f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00175	0f b7 54 01 64	 movzx	 edx, WORD PTR [ecx+eax+100]
  0017a	83 fa 02	 cmp	 edx, 2
  0017d	0f 85 a7 00 00
	00		 jne	 $LN19@DarkKnight

; 298  : 			{
; 299  : 				attr = MapC[gObj[tObjNum].MapNumber].GetAttr(gObj[tObjNum].X, gObj[tObjNum].Y);

  00183	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  0018a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00190	0f bf 94 01 06
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+262]
  00198	52		 push	 edx
  00199	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001a0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001a6	0f bf 94 01 04
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+260]
  001ae	52		 push	 edx
  001af	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001b6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001bc	0f b6 94 01 09
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+265]
  001c4	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  001ca	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  001d0	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  001d5	88 45 eb	 mov	 BYTE PTR _attr$[ebp], al

; 300  : 				if ((attr & 1) != 1)

  001d8	0f b6 45 eb	 movzx	 eax, BYTE PTR _attr$[ebp]
  001dc	83 e0 01	 and	 eax, 1
  001df	75 49		 jne	 SHORT $LN19@DarkKnight

; 301  : 				{
; 302  : 					dis = gObjCalDistance(lpObj, &gObj[tObjNum]);

  001e1	69 45 ec a0 1b
	00 00		 imul	 eax, DWORD PTR _tObjNum$[ebp], 7072
  001e8	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  001ee	50		 push	 eax
  001ef	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001f2	51		 push	 ecx
  001f3	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAVOBJECTSTRUCT@@0@Z ; gObjCalDistance
  001f8	83 c4 08	 add	 esp, 8
  001fb	89 45 f0	 mov	 DWORD PTR _dis$[ebp], eax

; 303  : 					if (2 >= dis)

  001fe	83 7d f0 02	 cmp	 DWORD PTR _dis$[ebp], 2
  00202	7f 26		 jg	 SHORT $LN19@DarkKnight

; 304  : 					{
; 305  : 						gObjAttack(lpObj, &gObj[tObjNum], lpMagic, 0, 1, 0, 0);

  00204	6a 00		 push	 0
  00206	6a 00		 push	 0
  00208	6a 01		 push	 1
  0020a	6a 00		 push	 0
  0020c	8b 45 f4	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  0020f	50		 push	 eax
  00210	69 4d ec a0 1b
	00 00		 imul	 ecx, DWORD PTR _tObjNum$[ebp], 7072
  00217	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0021d	51		 push	 ecx
  0021e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00221	52		 push	 edx
  00222	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAVOBJECTSTRUCT@@0PAVCMagicInf@@HEHH@Z ; gObjAttack
  00227	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN19@DarkKnight:

; 306  : 					}
; 307  : 				}
; 308  : 			}
; 309  : 		}
; 310  : 	}

  0022a	e9 f5 fe ff ff	 jmp	 $LN2@DarkKnight
$LN3@DarkKnight:

; 311  : 
; 312  : 	this->UseMana(lpObj->m_Index);

  0022f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00232	8b 08		 mov	 ecx, DWORD PTR [eax]
  00234	51		 push	 ecx
  00235	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00238	e8 00 00 00 00	 call	 ?UseMana@cOffExp@@QAEXH@Z ; cOffExp::UseMana
$LN1@DarkKnight:

; 313  : }

  0023d	5f		 pop	 edi
  0023e	5e		 pop	 esi
  0023f	5b		 pop	 ebx
  00240	8b e5		 mov	 esp, ebp
  00242	5d		 pop	 ebp
  00243	c2 04 00	 ret	 4
?DarkKnightOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ENDP	; cOffExp::DarkKnightOff
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?MainFunction@cOffExp@@QAEXXZ
_TEXT	SEGMENT
tv240 = -84						; size = 4
_Attack$1 = -13						; size = 1
_lpObj$2 = -12						; size = 4
_n$3 = -8						; size = 4
_this$ = -4						; size = 4
?MainFunction@cOffExp@@QAEXXZ PROC			; cOffExp::MainFunction, COMDAT
; _this$ = ecx

; 102  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 103  : 	if (!this->Enable) return;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 38 00	 cmp	 DWORD PTR [eax], 0
  00012	75 05		 jne	 SHORT $LN7@MainFuncti
  00014	e9 28 04 00 00	 jmp	 $LN1@MainFuncti
$LN7@MainFuncti:

; 104  : 
; 105  : 	for (int n = 0; n < MAX_OBJECT; n++)

  00019	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _n$3[ebp], 0
  00020	eb 09		 jmp	 SHORT $LN4@MainFuncti
$LN2@MainFuncti:
  00022	8b 45 f8	 mov	 eax, DWORD PTR _n$3[ebp]
  00025	83 c0 01	 add	 eax, 1
  00028	89 45 f8	 mov	 DWORD PTR _n$3[ebp], eax
$LN4@MainFuncti:
  0002b	81 7d f8 e8 1c
	00 00		 cmp	 DWORD PTR _n$3[ebp], 7400 ; 00001ce8H
  00032	0f 8d 09 04 00
	00		 jge	 $LN1@MainFuncti

; 106  : 	{
; 107  : 		LPOBJECTSTRUCT lpObj = &gObj[n];

  00038	69 45 f8 a0 1b
	00 00		 imul	 eax, DWORD PTR _n$3[ebp], 7072
  0003f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00045	89 45 f4	 mov	 DWORD PTR _lpObj$2[ebp], eax

; 108  : 
; 109  : 		if (lpObj->Connected > PLAYER_LOGGED &&	lpObj->Type == OBJTYPE_CHARACTER && lpObj->OffExp == true )

  00048	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0004b	83 78 04 02	 cmp	 DWORD PTR [eax+4], 2
  0004f	0f 8e e7 03 00
	00		 jle	 $LN8@MainFuncti
  00055	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00058	0f b7 48 64	 movzx	 ecx, WORD PTR [eax+100]
  0005c	83 f9 01	 cmp	 ecx, 1
  0005f	0f 85 d7 03 00
	00		 jne	 $LN8@MainFuncti
  00065	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00068	0f b6 88 8c 1a
	00 00		 movzx	 ecx, BYTE PTR [eax+6796]
  0006f	83 f9 01	 cmp	 ecx, 1
  00072	0f 85 c4 03 00
	00		 jne	 $LN8@MainFuncti

; 110  : 		{
; 111  : 			bool Attack = false;

  00078	c6 45 f3 00	 mov	 BYTE PTR _Attack$1[ebp], 0

; 112  : 
; 113  : 			if (lpObj->Dexterity > 0 && lpObj->Dexterity <= 3000)

  0007c	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0007f	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00086	85 c9		 test	 ecx, ecx
  00088	7e 49		 jle	 SHORT $LN9@MainFuncti
  0008a	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0008d	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00094	81 f9 b8 0b 00
	00		 cmp	 ecx, 3000		; 00000bb8H
  0009a	7f 37		 jg	 SHORT $LN9@MainFuncti

; 114  : 			{
; 115  : 				lpObj->OffExpSpeed++;

  0009c	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0009f	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  000a5	83 c1 01	 add	 ecx, 1
  000a8	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  000ab	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 116  : 				if (lpObj->OffExpSpeed == 10)

  000b1	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  000b4	83 b8 94 1a 00
	00 0a		 cmp	 DWORD PTR [eax+6804], 10 ; 0000000aH
  000bb	75 11		 jne	 SHORT $LN11@MainFuncti

; 117  : 				{
; 118  : 					Attack = true;

  000bd	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 119  : 					lpObj->OffExpSpeed = 0;

  000c1	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  000c4	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN11@MainFuncti:

; 120  : 				}
; 121  : 			}

  000ce	e9 94 02 00 00	 jmp	 $LN10@MainFuncti
$LN9@MainFuncti:

; 122  : 			else if (lpObj->Dexterity > 3000 && lpObj->Dexterity <= 6000)

  000d3	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  000d6	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  000dd	81 f9 b8 0b 00
	00		 cmp	 ecx, 3000		; 00000bb8H
  000e3	7e 49		 jle	 SHORT $LN12@MainFuncti
  000e5	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  000e8	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  000ef	81 f9 70 17 00
	00		 cmp	 ecx, 6000		; 00001770H
  000f5	7f 37		 jg	 SHORT $LN12@MainFuncti

; 123  : 			{
; 124  : 				lpObj->OffExpSpeed++;

  000f7	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  000fa	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  00100	83 c1 01	 add	 ecx, 1
  00103	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  00106	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 125  : 				if (lpObj->OffExpSpeed == 9)

  0010c	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0010f	83 b8 94 1a 00
	00 09		 cmp	 DWORD PTR [eax+6804], 9
  00116	75 11		 jne	 SHORT $LN14@MainFuncti

; 126  : 				{
; 127  : 					Attack = true;

  00118	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 128  : 					lpObj->OffExpSpeed = 0;

  0011c	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0011f	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN14@MainFuncti:

; 129  : 				}
; 130  : 			}

  00129	e9 39 02 00 00	 jmp	 $LN10@MainFuncti
$LN12@MainFuncti:

; 131  : 			else if (lpObj->Dexterity > 6000 && lpObj->Dexterity <= 9000)

  0012e	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00131	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00138	81 f9 70 17 00
	00		 cmp	 ecx, 6000		; 00001770H
  0013e	7e 49		 jle	 SHORT $LN15@MainFuncti
  00140	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00143	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  0014a	81 f9 28 23 00
	00		 cmp	 ecx, 9000		; 00002328H
  00150	7f 37		 jg	 SHORT $LN15@MainFuncti

; 132  : 			{
; 133  : 				lpObj->OffExpSpeed++;

  00152	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00155	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  0015b	83 c1 01	 add	 ecx, 1
  0015e	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  00161	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 134  : 				if (lpObj->OffExpSpeed == 8)

  00167	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0016a	83 b8 94 1a 00
	00 08		 cmp	 DWORD PTR [eax+6804], 8
  00171	75 11		 jne	 SHORT $LN17@MainFuncti

; 135  : 				{
; 136  : 					Attack = true;

  00173	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 137  : 					lpObj->OffExpSpeed = 0;

  00177	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0017a	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN17@MainFuncti:

; 138  : 				}
; 139  : 			}

  00184	e9 de 01 00 00	 jmp	 $LN10@MainFuncti
$LN15@MainFuncti:

; 140  : 			else if (lpObj->Dexterity > 9000 && lpObj->Dexterity <= 12000)

  00189	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0018c	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00193	81 f9 28 23 00
	00		 cmp	 ecx, 9000		; 00002328H
  00199	7e 49		 jle	 SHORT $LN18@MainFuncti
  0019b	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0019e	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  001a5	81 f9 e0 2e 00
	00		 cmp	 ecx, 12000		; 00002ee0H
  001ab	7f 37		 jg	 SHORT $LN18@MainFuncti

; 141  : 			{
; 142  : 				lpObj->OffExpSpeed++;

  001ad	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  001b0	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  001b6	83 c1 01	 add	 ecx, 1
  001b9	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  001bc	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 143  : 				if (lpObj->OffExpSpeed == 7)

  001c2	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  001c5	83 b8 94 1a 00
	00 07		 cmp	 DWORD PTR [eax+6804], 7
  001cc	75 11		 jne	 SHORT $LN20@MainFuncti

; 144  : 				{
; 145  : 					Attack = true;

  001ce	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 146  : 					lpObj->OffExpSpeed = 0;

  001d2	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  001d5	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN20@MainFuncti:

; 147  : 				}
; 148  : 			}

  001df	e9 83 01 00 00	 jmp	 $LN10@MainFuncti
$LN18@MainFuncti:

; 149  : 			else if (lpObj->Dexterity > 12000 && lpObj->Dexterity <= 15000)

  001e4	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  001e7	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  001ee	81 f9 e0 2e 00
	00		 cmp	 ecx, 12000		; 00002ee0H
  001f4	7e 49		 jle	 SHORT $LN21@MainFuncti
  001f6	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  001f9	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00200	81 f9 98 3a 00
	00		 cmp	 ecx, 15000		; 00003a98H
  00206	7f 37		 jg	 SHORT $LN21@MainFuncti

; 150  : 			{
; 151  : 				lpObj->OffExpSpeed++;

  00208	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0020b	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  00211	83 c1 01	 add	 ecx, 1
  00214	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  00217	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 152  : 				if (lpObj->OffExpSpeed == 5)

  0021d	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00220	83 b8 94 1a 00
	00 05		 cmp	 DWORD PTR [eax+6804], 5
  00227	75 11		 jne	 SHORT $LN23@MainFuncti

; 153  : 				{
; 154  : 					Attack = true;

  00229	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 155  : 					lpObj->OffExpSpeed = 0;

  0022d	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00230	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN23@MainFuncti:

; 156  : 				}
; 157  : 			}

  0023a	e9 28 01 00 00	 jmp	 $LN10@MainFuncti
$LN21@MainFuncti:

; 158  : 			else if (lpObj->Dexterity > 15000 && lpObj->Dexterity <= 18000)

  0023f	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00242	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00249	81 f9 98 3a 00
	00		 cmp	 ecx, 15000		; 00003a98H
  0024f	7e 49		 jle	 SHORT $LN24@MainFuncti
  00251	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00254	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  0025b	81 f9 50 46 00
	00		 cmp	 ecx, 18000		; 00004650H
  00261	7f 37		 jg	 SHORT $LN24@MainFuncti

; 159  : 			{
; 160  : 				lpObj->OffExpSpeed++;

  00263	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00266	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  0026c	83 c1 01	 add	 ecx, 1
  0026f	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  00272	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 161  : 				if (lpObj->OffExpSpeed == 4)

  00278	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0027b	83 b8 94 1a 00
	00 04		 cmp	 DWORD PTR [eax+6804], 4
  00282	75 11		 jne	 SHORT $LN26@MainFuncti

; 162  : 				{
; 163  : 					Attack = true;

  00284	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 164  : 					lpObj->OffExpSpeed = 0;

  00288	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0028b	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN26@MainFuncti:

; 165  : 				}
; 166  : 			}

  00295	e9 cd 00 00 00	 jmp	 $LN10@MainFuncti
$LN24@MainFuncti:

; 167  : 			else if (lpObj->Dexterity > 18000 && lpObj->Dexterity <= 21000)

  0029a	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0029d	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  002a4	81 f9 50 46 00
	00		 cmp	 ecx, 18000		; 00004650H
  002aa	7e 46		 jle	 SHORT $LN27@MainFuncti
  002ac	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  002af	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  002b6	81 f9 08 52 00
	00		 cmp	 ecx, 21000		; 00005208H
  002bc	7f 34		 jg	 SHORT $LN27@MainFuncti

; 168  : 			{
; 169  : 				lpObj->OffExpSpeed++;

  002be	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  002c1	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  002c7	83 c1 01	 add	 ecx, 1
  002ca	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  002cd	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 170  : 				if (lpObj->OffExpSpeed == 3)

  002d3	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  002d6	83 b8 94 1a 00
	00 03		 cmp	 DWORD PTR [eax+6804], 3
  002dd	75 11		 jne	 SHORT $LN29@MainFuncti

; 171  : 				{
; 172  : 					Attack = true;

  002df	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 173  : 					lpObj->OffExpSpeed = 0;

  002e3	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  002e6	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN29@MainFuncti:

; 174  : 				}
; 175  : 			}

  002f0	eb 75		 jmp	 SHORT $LN10@MainFuncti
$LN27@MainFuncti:

; 176  : 			else if (lpObj->Dexterity > 21000 && lpObj->Dexterity <= 24000)

  002f2	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  002f5	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  002fc	81 f9 08 52 00
	00		 cmp	 ecx, 21000		; 00005208H
  00302	7e 46		 jle	 SHORT $LN30@MainFuncti
  00304	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00307	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  0030e	81 f9 c0 5d 00
	00		 cmp	 ecx, 24000		; 00005dc0H
  00314	7f 34		 jg	 SHORT $LN30@MainFuncti

; 177  : 			{
; 178  : 				lpObj->OffExpSpeed++;

  00316	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00319	8b 88 94 1a 00
	00		 mov	 ecx, DWORD PTR [eax+6804]
  0031f	83 c1 01	 add	 ecx, 1
  00322	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  00325	89 8a 94 1a 00
	00		 mov	 DWORD PTR [edx+6804], ecx

; 179  : 				if (lpObj->OffExpSpeed == 2)

  0032b	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0032e	83 b8 94 1a 00
	00 02		 cmp	 DWORD PTR [eax+6804], 2
  00335	75 11		 jne	 SHORT $LN32@MainFuncti

; 180  : 				{
; 181  : 					Attack = true;

  00337	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 182  : 					lpObj->OffExpSpeed = 0;

  0033b	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0033e	c7 80 94 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6804], 0
$LN32@MainFuncti:

; 183  : 				}
; 184  : 			}

  00348	eb 1d		 jmp	 SHORT $LN10@MainFuncti
$LN30@MainFuncti:

; 185  : 			else if (lpObj->Dexterity > 24000)

  0034a	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0034d	0f b7 88 b6 00
	00 00		 movzx	 ecx, WORD PTR [eax+182]
  00354	81 f9 c0 5d 00
	00		 cmp	 ecx, 24000		; 00005dc0H
  0035a	7e 06		 jle	 SHORT $LN33@MainFuncti

; 186  : 			{
; 187  : 				Attack = true;

  0035c	c6 45 f3 01	 mov	 BYTE PTR _Attack$1[ebp], 1

; 188  : 			}

  00360	eb 05		 jmp	 SHORT $LN10@MainFuncti
$LN33@MainFuncti:

; 189  : 			else
; 190  : 			{
; 191  : 				continue;

  00362	e9 bb fc ff ff	 jmp	 $LN2@MainFuncti
$LN10@MainFuncti:

; 192  : 			}
; 193  : 
; 194  : 			if (Attack == false)

  00367	0f b6 45 f3	 movzx	 eax, BYTE PTR _Attack$1[ebp]
  0036b	85 c0		 test	 eax, eax
  0036d	75 05		 jne	 SHORT $LN35@MainFuncti

; 195  : 			{
; 196  : 				continue;

  0036f	e9 ae fc ff ff	 jmp	 $LN2@MainFuncti
$LN35@MainFuncti:

; 197  : 			}
; 198  : 
; 199  : 			if (!this->CheckTerrain(lpObj))

  00374	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00377	50		 push	 eax
  00378	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0037b	e8 00 00 00 00	 call	 ?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z ; cOffExp::CheckTerrain
  00380	0f b6 c8	 movzx	 ecx, al
  00383	85 c9		 test	 ecx, ecx
  00385	75 54		 jne	 SHORT $LN36@MainFuncti

; 200  : 			{
; 201  : 				if (this->KickFallen) lpObj->OffExp = 0;

  00387	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0038a	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  0038e	74 0a		 je	 SHORT $LN37@MainFuncti
  00390	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00393	c6 80 8c 1a 00
	00 00		 mov	 BYTE PTR [eax+6796], 0
$LN37@MainFuncti:

; 202  : 				LogAddTD("[OffExp] [%s][%s] Cierre porque mato: [%d]", lpObj->AccountID, lpObj->Name, lpObj->m_Index);

  0039a	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  0039d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0039f	51		 push	 ecx
  003a0	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$2[ebp]
  003a3	83 c2 73	 add	 edx, 115		; 00000073H
  003a6	52		 push	 edx
  003a7	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  003aa	83 c0 68	 add	 eax, 104		; 00000068H
  003ad	50		 push	 eax
  003ae	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@DPNGCPEP@?$FLOffExp?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Cierre?5porque@
  003b3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003b9	83 c4 10	 add	 esp, 16			; 00000010H

; 203  : 				GJPUserClose2(lpObj->AccountID);

  003bc	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  003bf	83 c0 68	 add	 eax, 104		; 00000068H
  003c2	50		 push	 eax
  003c3	e8 00 00 00 00	 call	 ?GJPUserClose2@@YAXPAD@Z ; GJPUserClose2
  003c8	83 c4 04	 add	 esp, 4

; 204  : 				gObjDel(lpObj->m_Index);

  003cb	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  003ce	8b 08		 mov	 ecx, DWORD PTR [eax]
  003d0	51		 push	 ecx
  003d1	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  003d6	83 c4 04	 add	 esp, 4

; 205  : 				return;

  003d9	eb 66		 jmp	 SHORT $LN1@MainFuncti
$LN36@MainFuncti:

; 206  : 			}
; 207  : 
; 208  : 			switch (lpObj->Class)

  003db	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  003de	0f b7 88 9c 00
	00 00		 movzx	 ecx, WORD PTR [eax+156]
  003e5	89 4d ac	 mov	 DWORD PTR tv240[ebp], ecx
  003e8	83 7d ac 04	 cmp	 DWORD PTR tv240[ebp], 4
  003ec	77 4e		 ja	 SHORT $LN8@MainFuncti
  003ee	8b 55 ac	 mov	 edx, DWORD PTR tv240[ebp]
  003f1	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN44@MainFuncti[edx*4]
$LN38@MainFuncti:

; 209  : 			{
; 210  : 			case 0:	this->DarkWizardOff(lpObj);		break;

  003f8	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  003fb	50		 push	 eax
  003fc	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  003ff	e8 00 00 00 00	 call	 ?DarkWizardOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ; cOffExp::DarkWizardOff
  00404	eb 36		 jmp	 SHORT $LN8@MainFuncti
$LN39@MainFuncti:

; 211  : 			case 1:	this->DarkKnightOff(lpObj);		break;

  00406	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00409	50		 push	 eax
  0040a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0040d	e8 00 00 00 00	 call	 ?DarkKnightOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ; cOffExp::DarkKnightOff
  00412	eb 28		 jmp	 SHORT $LN8@MainFuncti
$LN40@MainFuncti:

; 212  : 			case 2:	this->FairyElfOff(lpObj);		break;

  00414	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00417	50		 push	 eax
  00418	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0041b	e8 00 00 00 00	 call	 ?FairyElfOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ; cOffExp::FairyElfOff
  00420	eb 1a		 jmp	 SHORT $LN8@MainFuncti
$LN41@MainFuncti:

; 213  : 			case 3:	this->MagicGladiatorOff(lpObj);	break;

  00422	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00425	50		 push	 eax
  00426	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00429	e8 00 00 00 00	 call	 ?MagicGladiatorOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ; cOffExp::MagicGladiatorOff
  0042e	eb 0c		 jmp	 SHORT $LN8@MainFuncti
$LN42@MainFuncti:

; 214  : 			case 4:	this->DarkLordOff(lpObj);		break;

  00430	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$2[ebp]
  00433	50		 push	 eax
  00434	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00437	e8 00 00 00 00	 call	 ?DarkLordOff@cOffExp@@QAEXPAVOBJECTSTRUCT@@@Z ; cOffExp::DarkLordOff
$LN8@MainFuncti:

; 215  : 			}
; 216  : 		}
; 217  : 	}

  0043c	e9 e1 fb ff ff	 jmp	 $LN2@MainFuncti
$LN1@MainFuncti:

; 218  : }

  00441	5f		 pop	 edi
  00442	5e		 pop	 esi
  00443	5b		 pop	 ebx
  00444	8b e5		 mov	 esp, ebp
  00446	5d		 pop	 ebp
  00447	c3		 ret	 0
$LN44@MainFuncti:
  00448	00 00 00 00	 DD	 $LN38@MainFuncti
  0044c	00 00 00 00	 DD	 $LN39@MainFuncti
  00450	00 00 00 00	 DD	 $LN40@MainFuncti
  00454	00 00 00 00	 DD	 $LN41@MainFuncti
  00458	00 00 00 00	 DD	 $LN42@MainFuncti
?MainFunction@cOffExp@@QAEXXZ ENDP			; cOffExp::MainFunction
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?OffExpStart3@cOffExp@@QAEXH@Z
_TEXT	SEGMENT
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?OffExpStart3@cOffExp@@QAEXH@Z PROC			; cOffExp::OffExpStart3, COMDAT
; _this$ = ecx

; 87   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 88   : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  0000c	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00013	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00019	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 89   : 
; 90   : 	if (this->CheckTerrain(lpObj))

  0001c	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001f	50		 push	 eax
  00020	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00023	e8 00 00 00 00	 call	 ?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z ; cOffExp::CheckTerrain
  00028	0f b6 c8	 movzx	 ecx, al
  0002b	85 c9		 test	 ecx, ecx
  0002d	74 0c		 je	 SHORT $LN2@OffExpStar

; 91   : 	{
; 92   : 		lpObj->OffExp = false;

  0002f	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00032	c6 80 8c 1a 00
	00 00		 mov	 BYTE PTR [eax+6796], 0

; 93   : 	}

  00039	eb 13		 jmp	 SHORT $LN1@OffExpStar
$LN2@OffExpStar:

; 94   : 	else
; 95   : 	{
; 96   : 		GCServerMsgStringSend("[Ataque Automtico] No puedes utilizarlo en la ciudad. ", aIndex, 1);

  0003b	6a 01		 push	 1
  0003d	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00040	50		 push	 eax
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@BKOIEPMA@?$FLAtaque?5Autom?atico?$FN?5No?5puedes?5u@
  00046	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  0004b	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@OffExpStar:

; 97   : 	}
; 98   : }

  0004e	5f		 pop	 edi
  0004f	5e		 pop	 esi
  00050	5b		 pop	 ebx
  00051	8b e5		 mov	 esp, ebp
  00053	5d		 pop	 ebp
  00054	c2 04 00	 ret	 4
?OffExpStart3@cOffExp@@QAEXH@Z ENDP			; cOffExp::OffExpStart3
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?OffExpStart2@cOffExp@@QAEXH@Z
_TEXT	SEGMENT
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?OffExpStart2@cOffExp@@QAEXH@Z PROC			; cOffExp::OffExpStart2, COMDAT
; _this$ = ecx

; 73   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 74   : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  0000c	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00013	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00019	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 75   : 
; 76   : 	if (this->CheckTerrain(lpObj))

  0001c	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001f	50		 push	 eax
  00020	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00023	e8 00 00 00 00	 call	 ?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z ; cOffExp::CheckTerrain
  00028	0f b6 c8	 movzx	 ecx, al
  0002b	85 c9		 test	 ecx, ecx
  0002d	74 0c		 je	 SHORT $LN2@OffExpStar

; 77   : 	{
; 78   : 		lpObj->OffExp = true;

  0002f	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00032	c6 80 8c 1a 00
	00 01		 mov	 BYTE PTR [eax+6796], 1

; 79   : 	}

  00039	eb 13		 jmp	 SHORT $LN1@OffExpStar
$LN2@OffExpStar:

; 80   : 	else
; 81   : 	{
; 82   : 		GCServerMsgStringSend("[Ataque Automatico] No puedes utilizarlo en la ciudad. ", aIndex, 1);

  0003b	6a 01		 push	 1
  0003d	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00040	50		 push	 eax
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@EKHEINLH@?$FLAtaque?5Automatico?$FN?5No?5puedes?5u@
  00046	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  0004b	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@OffExpStar:

; 83   : 	}
; 84   : }

  0004e	5f		 pop	 edi
  0004f	5e		 pop	 esi
  00050	5b		 pop	 ebx
  00051	8b e5		 mov	 esp, ebp
  00053	5d		 pop	 ebp
  00054	c2 04 00	 ret	 4
?OffExpStart2@cOffExp@@QAEXH@Z ENDP			; cOffExp::OffExpStart2
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?OffExpStart@cOffExp@@QAEXH@Z
_TEXT	SEGMENT
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?OffExpStart@cOffExp@@QAEXH@Z PROC			; cOffExp::OffExpStart, COMDAT
; _this$ = ecx

; 33   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 34   : 	if (!this->Enable) return;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 38 00	 cmp	 DWORD PTR [eax], 0
  00012	75 02		 jne	 SHORT $LN2@OffExpStar
  00014	eb 64		 jmp	 SHORT $LN1@OffExpStar
$LN2@OffExpStar:

; 35   : 
; 36   : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  00016	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  0001d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00023	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 37   : 
; 38   : 	if (this->CheckTerrain(lpObj))

  00026	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00029	50		 push	 eax
  0002a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002d	e8 00 00 00 00	 call	 ?CheckTerrain@cOffExp@@QAE_NPAVOBJECTSTRUCT@@@Z ; cOffExp::CheckTerrain
  00032	0f b6 c8	 movzx	 ecx, al
  00035	85 c9		 test	 ecx, ecx
  00037	74 2e		 je	 SHORT $LN3@OffExpStar

; 39   : 	{
; 40   : 		CloseClientEx(aIndex);

  00039	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0003c	50		 push	 eax
  0003d	e8 00 00 00 00	 call	 ?CloseClientEx@@YAXH@Z	; CloseClientEx
  00042	83 c4 04	 add	 esp, 4

; 41   : 		lpObj->OffExp = true;

  00045	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00048	c6 80 8c 1a 00
	00 01		 mov	 BYTE PTR [eax+6796], 1

; 42   : 		if (this->EnableTime) 

  0004f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00052	83 78 08 00	 cmp	 DWORD PTR [eax+8], 0
  00056	74 0d		 je	 SHORT $LN5@OffExpStar

; 43   : 		{
; 44   : 			lpObj->OffExpTick = 0;

  00058	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0005b	c7 80 90 1a 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+6800], 0
$LN5@OffExpStar:

; 45   : 		}
; 46   : 	}

  00065	eb 13		 jmp	 SHORT $LN1@OffExpStar
$LN3@OffExpStar:

; 47   : 	else
; 48   : 	{
; 49   : 		GCServerMsgStringSend("[Ataque Automatico] No puedes utilizarlo en la ciudad. ", aIndex, 1);

  00067	6a 01		 push	 1
  00069	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0006c	50		 push	 eax
  0006d	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@EKHEINLH@?$FLAtaque?5Automatico?$FN?5No?5puedes?5u@
  00072	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  00077	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@OffExpStar:

; 50   : 	}
; 51   : }

  0007a	5f		 pop	 edi
  0007b	5e		 pop	 esi
  0007c	5b		 pop	 ebx
  0007d	8b e5		 mov	 esp, ebp
  0007f	5d		 pop	 ebp
  00080	c2 04 00	 ret	 4
?OffExpStart@cOffExp@@QAEXH@Z ENDP			; cOffExp::OffExpStart
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?LoadConfig@cOffExp@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?LoadConfig@cOffExp@@QAEXXZ PROC			; cOffExp::LoadConfig, COMDAT
; _this$ = ecx

; 22   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 23   : 	this->Enable = GetPrivateProfileInt("Common", "Enable", 1, OFF_EXP_DIR);

  0000c	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@
  00011	6a 01		 push	 1
  00013	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable@
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common@
  0001d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  00023	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00026	89 01		 mov	 DWORD PTR [ecx], eax

; 24   : 	this->KickFallen = GetPrivateProfileInt("Common", "KickFallen", 1, OFF_EXP_DIR);

  00028	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@
  0002d	6a 01		 push	 1
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0L@NIKPPPCH@KickFallen@
  00034	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common@
  00039	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  0003f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00042	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 25   : 	this->EnableTime = GetPrivateProfileInt("Common", "EnableTime", 0, OFF_EXP_DIR);

  00045	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@
  0004a	6a 00		 push	 0
  0004c	68 00 00 00 00	 push	 OFFSET ??_C@_0L@OCIIFDDH@EnableTime@
  00051	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common@
  00056	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  0005c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0005f	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 26   : 	this->TimeEnd = GetPrivateProfileInt("Common", "Time", 9999999, OFF_EXP_DIR);

  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@KFGAFONL@?4?4?2data?2OfflineAttack?4txt@
  00067	68 7f 96 98 00	 push	 9999999			; 0098967fH
  0006c	68 00 00 00 00	 push	 OFFSET ??_C@_04OKOFBOPB@Time@
  00071	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common@
  00076	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  0007c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0007f	89 41 0c	 mov	 DWORD PTR [ecx+12], eax

; 27   : 
; 28   : 
; 29   : }

  00082	5f		 pop	 edi
  00083	5e		 pop	 esi
  00084	5b		 pop	 ebx
  00085	8b e5		 mov	 esp, ebp
  00087	5d		 pop	 ebp
  00088	c3		 ret	 0
?LoadConfig@cOffExp@@QAEXXZ ENDP			; cOffExp::LoadConfig
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?__empty_global_delete@@YAXPAXI@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
___formal$ = 12						; size = 4
?__empty_global_delete@@YAXPAXI@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAXI@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\OffExp.cpp
;	COMDAT ?__empty_global_delete@@YAXPAX@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
?__empty_global_delete@@YAXPAX@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAX@Z ENDP			; __empty_global_delete
_TEXT	ENDS
END
