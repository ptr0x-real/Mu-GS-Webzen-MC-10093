; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29111.0 

	TITLE	C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_H@YGXPAXIIP6EPAX0@Z@Z			; `vector constructor iterator'
PUBLIC	?__empty_global_delete@@YAXPAX@Z		; __empty_global_delete
PUBLIC	?__empty_global_delete@@YAXPAXI@Z		; __empty_global_delete
PUBLIC	?Size@CTerrainManager@@QAE?BHXZ			; CTerrainManager::Size
PUBLIC	??0CItemBagAttrEx@@QAE@XZ			; CItemBagAttrEx::CItemBagAttrEx
PUBLIC	??0CItemBagDropMapInfo@@QAE@XZ			; CItemBagDropMapInfo::CItemBagDropMapInfo
PUBLIC	?Init@CItemBagDropMapInfo@@QAEXXZ		; CItemBagDropMapInfo::Init
PUBLIC	??0CItemBagEx@@QAE@XZ				; CItemBagEx::CItemBagEx
PUBLIC	??1CItemBagEx@@UAE@XZ				; CItemBagEx::~CItemBagEx
PUBLIC	?Init@CItemBagEx@@QAEXPAD@Z			; CItemBagEx::Init
PUBLIC	?LoadItem@CItemBagEx@@QAEXPAD@Z			; CItemBagEx::LoadItem
PUBLIC	?DropEventItem@CItemBagEx@@QAEHH@Z		; CItemBagEx::DropEventItem
PUBLIC	?DropItem@CItemBagEx@@QAEHH@Z			; CItemBagEx::DropItem
PUBLIC	?DropKundunEventItem@CItemBagEx@@QAEHHEEE@Z	; CItemBagEx::DropKundunEventItem
PUBLIC	?GetMinLevel@CItemBagEx@@QAEEH@Z		; CItemBagEx::GetMinLevel
PUBLIC	?GetMaxLevel@CItemBagEx@@QAEEH@Z		; CItemBagEx::GetMaxLevel
PUBLIC	?PickItem@CItemBagEx@@QAEHAAVCItem@@AAH@Z	; CItemBagEx::PickItem
PUBLIC	?GetBagCount@CItemBagEx@@AAEHXZ			; CItemBagEx::GetBagCount
PUBLIC	?IsEnableEventItemDrop@CItemBagEx@@AAEHH@Z	; CItemBagEx::IsEnableEventItemDrop
PUBLIC	?GetLevel@CItemBagEx@@AAEEH@Z			; CItemBagEx::GetLevel
PUBLIC	??_GCItemBagEx@@UAEPAXI@Z			; CItemBagEx::`scalar deleting destructor'
PUBLIC	??_7CItemBagEx@@6B@				; CItemBagEx::`vftable'
PUBLIC	??_C@_0BL@CIFNLNKN@?4?4?2data?2TerrainManager?4cfg@ ; `string'
PUBLIC	??_C@_01KDCPPGHE@r@				; `string'
PUBLIC	??_C@_03JBJLGPFL@end@				; `string'
PUBLIC	??_C@_0BO@PPHECIOP@ExEvent?5ItemBag?5LoadFail?5?$FL?$CFs?$FN@ ; `string'
PUBLIC	??_C@_0GL@LIMNLNHJ@?$FL?$CFs?$FN?5Eventitemnum?5?$DN?5?$CFd?0EventIte@ ; `string'
PUBLIC	??_C@_0CP@CFLKNDIJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5MonsterEventItemD@ ; `string'
PUBLIC	??_C@_0FF@LDONOBLP@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5Event?5ItemDrop?5?3?5@ ; `string'
PUBLIC	??_C@_0GP@IHPHEILG@?$FL?$KB?$NLKundun?5EVENT?$FN?5?$KB?ZKUNDUN?5Event@ ; `string'
PUBLIC	??_R4CItemBagEx@@6B@				; CItemBagEx::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCItemBagEx@@@8				; CItemBagEx `RTTI Type Descriptor'
PUBLIC	??_R3CItemBagEx@@8				; CItemBagEx::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CItemBagEx@@8				; CItemBagEx::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CItemBagEx@@8			; CItemBagEx::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	__real@437f0000
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	??_U@YAPAXI@Z:PROC				; operator new[]
EXTRN	??_V@YAXPAX@Z:PROC				; operator delete[]
EXTRN	??_V@YAXPAXI@Z:PROC				; operator delete[]
EXTRN	___report_rangecheckfailure:PROC
EXTRN	_isalpha:PROC
EXTRN	_isdigit:PROC
EXTRN	_isspace:PROC
EXTRN	_isalnum:PROC
EXTRN	_strcmp:PROC
EXTRN	_strcpy:PROC
EXTRN	__imp__wsprintfA:PROC
EXTRN	_fclose:PROC
EXTRN	_fgetc:PROC
EXTRN	_fopen:PROC
EXTRN	_getc:PROC
EXTRN	_ungetc:PROC
EXTRN	_rand:PROC
EXTRN	_atof:PROC
EXTRN	?MsgBox@@YAXPADZZ:PROC				; MsgBox
EXTRN	__imp_?Get@CMsg@@QAEPADH@Z:PROC
EXTRN	?ItemGetNumberMake@@YAHHH@Z:PROC		; ItemGetNumberMake
EXTRN	?Load@CTerrainManager@@QAEXPBD@Z:PROC		; CTerrainManager::Load
EXTRN	??_ECItemBagEx@@UAEPAXI@Z:PROC			; CItemBagEx::`vector deleting destructor'
EXTRN	?MakeItemNumber@@YAHHH@Z:PROC			; MakeItemNumber
EXTRN	?gObjMonsterTopHitDamageUser@@YAHPAVOBJECTSTRUCT@@@Z:PROC ; gObjMonsterTopHitDamageUser
EXTRN	?NewOptionRand@@YAEH@Z:PROC			; NewOptionRand
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z:PROC	; ItemSerialCreateSend
EXTRN	?MoneyItemDrop@MapClass@@QAEHHHH@Z:PROC		; MapClass::MoneyItemDrop
EXTRN	?GetNewPath@CDirPath@@QAEPADPAD@Z:PROC		; CDirPath::GetNewPath
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A:BYTE	; ItemAttribute
EXTRN	?gObj@@3PAVOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?g_TerrainManager@@3VCTerrainManager@@A:BYTE	; g_TerrainManager
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	?MapC@@3PAVMapClass@@A:DWORD			; MapC
EXTRN	?gDirPath@@3VCDirPath@@A:BYTE			; gDirPath
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?SMDFile@@3PAU_iobuf@@A DD 01H DUP (?)			; SMDFile
?TokenNumber@@3MA DD 01H DUP (?)			; TokenNumber
?TokenString@@3PADA DB 064H DUP (?)			; TokenString
?CurrentToken@@3W4SMDToken@@A DD 01H DUP (?)		; CurrentToken
_BSS	ENDS
;	COMDAT __real@437f0000
CONST	SEGMENT
__real@437f0000 DD 0437f0000r			; 255
CONST	ENDS
;	COMDAT ??_R1A@?0A@EA@CItemBagEx@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CItemBagEx@@8 DD FLAT:??_R0?AVCItemBagEx@@@8 ; CItemBagEx::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CItemBagEx@@8
rdata$r	ENDS
;	COMDAT ??_R2CItemBagEx@@8
rdata$r	SEGMENT
??_R2CItemBagEx@@8 DD FLAT:??_R1A@?0A@EA@CItemBagEx@@8	; CItemBagEx::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CItemBagEx@@8
rdata$r	SEGMENT
??_R3CItemBagEx@@8 DD 00H				; CItemBagEx::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CItemBagEx@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCItemBagEx@@@8
data$r	SEGMENT
??_R0?AVCItemBagEx@@@8 DD FLAT:??_7type_info@@6B@	; CItemBagEx `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCItemBagEx@@', 00H
data$r	ENDS
;	COMDAT ??_R4CItemBagEx@@6B@
rdata$r	SEGMENT
??_R4CItemBagEx@@6B@ DD 00H				; CItemBagEx::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCItemBagEx@@@8
	DD	FLAT:??_R3CItemBagEx@@8
rdata$r	ENDS
;	COMDAT ??_C@_0GP@IHPHEILG@?$FL?$KB?$NLKundun?5EVENT?$FN?5?$KB?ZKUNDUN?5Event@
CONST	SEGMENT
??_C@_0GP@IHPHEILG@?$FL?$KB?$NLKundun?5EVENT?$FN?5?$KB?ZKUNDUN?5Event@ DB '['
	DB	0a1H, 0dbH, 'Kundun EVENT] ', 0a1H, 0daH, 'KUNDUN Event ItemDr'
	DB	'op [%s][%s] [%s] : (%d)(%d/%d) Item:(%s)%d Level:%d op1:%d op'
	DB	'2:%d op3:%d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FF@LDONOBLP@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5Event?5ItemDrop?5?3?5@
CONST	SEGMENT
??_C@_0FF@LDONOBLP@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5Event?5ItemDrop?5?3?5@ DB '['
	DB	'%s][%s] [%s] Event ItemDrop : (%d)(%d/%d) Item:(%s)%d Level:%'
	DB	'd op1:%d op2:%d op3:%d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CP@CFLKNDIJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5MonsterEventItemD@
CONST	SEGMENT
??_C@_0CP@CFLKNDIJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5MonsterEventItemD@ DB '['
	DB	'%s][%s] [%s] MonsterEventItemDrop (%d)(%d/%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0GL@LIMNLNHJ@?$FL?$CFs?$FN?5Eventitemnum?5?$DN?5?$CFd?0EventIte@
CONST	SEGMENT
??_C@_0GL@LIMNLNHJ@?$FL?$CFs?$FN?5Eventitemnum?5?$DN?5?$CFd?0EventIte@ DB '['
	DB	'%s] Eventitemnum = %d,EventItemLevel = %d, EventItemDropRate '
	DB	'= %d, ItemDropRate = %d, ExItemDropRate = %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BO@PPHECIOP@ExEvent?5ItemBag?5LoadFail?5?$FL?$CFs?$FN@
CONST	SEGMENT
??_C@_0BO@PPHECIOP@ExEvent?5ItemBag?5LoadFail?5?$FL?$CFs?$FN@ DB 'ExEvent'
	DB	' ItemBag LoadFail [%s]', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_03JBJLGPFL@end@
CONST	SEGMENT
??_C@_03JBJLGPFL@end@ DB 'end', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r@
CONST	SEGMENT
??_C@_01KDCPPGHE@r@ DB 'r', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@CIFNLNKN@?4?4?2data?2TerrainManager?4cfg@
CONST	SEGMENT
??_C@_0BL@CIFNLNKN@?4?4?2data?2TerrainManager?4cfg@ DB '..\data\TerrainMa'
	DB	'nager.cfg', 00H				; `string'
CONST	ENDS
;	COMDAT ??_7CItemBagEx@@6B@
CONST	SEGMENT
??_7CItemBagEx@@6B@ DD FLAT:??_R4CItemBagEx@@6B@	; CItemBagEx::`vftable'
	DD	FLAT:??_ECItemBagEx@@UAEPAXI@Z
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?Init@CItemBagEx@@QAEXPAD@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?Init@CItemBagEx@@QAEXPAD@Z$0
__ehfuncinfo$?Init@CItemBagEx@@QAEXPAD@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?Init@CItemBagEx@@QAEXPAD@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\Include\ReadScript.h
;	COMDAT ?GetToken@@YA?AW4SMDToken@@XZ
_TEXT	SEGMENT
tv93 = -184						; size = 4
$T1 = -180						; size = 4
_TempString$ = -112					; size = 100
_p$ = -12						; size = 4
_ch$ = -5						; size = 1
__$ArrayPad$ = -4					; size = 4
?GetToken@@YA?AW4SMDToken@@XZ PROC			; GetToken, COMDAT

; 25   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b8 00 00
	00		 sub	 esp, 184		; 000000b8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi

; 26   : 	unsigned char ch;
; 27   : 	TokenString[0] = '\0';

  00016	b8 01 00 00 00	 mov	 eax, 1
  0001b	6b c8 00	 imul	 ecx, eax, 0
  0001e	89 8d 4c ff ff
	ff		 mov	 DWORD PTR $T1[ebp], ecx
  00024	83 bd 4c ff ff
	ff 64		 cmp	 DWORD PTR $T1[ebp], 100	; 00000064H
  0002b	73 02		 jae	 SHORT $LN31@GetToken
  0002d	eb 05		 jmp	 SHORT $LN32@GetToken
$LN31@GetToken:
  0002f	e8 00 00 00 00	 call	 ___report_rangecheckfailure
$LN32@GetToken:
  00034	8b 95 4c ff ff
	ff		 mov	 edx, DWORD PTR $T1[ebp]
  0003a	c6 82 00 00 00
	00 00		 mov	 BYTE PTR ?TokenString@@3PADA[edx], 0
$LN4@GetToken:

; 28   : 	do
; 29   : 	{
; 30   : 		if ( (ch =(unsigned char) fgetc(SMDFile)) == (BYTE)EOF) return END;

  00041	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  00046	50		 push	 eax
  00047	e8 00 00 00 00	 call	 _fgetc
  0004c	83 c4 04	 add	 esp, 4
  0004f	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  00052	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  00056	81 f9 ff 00 00
	00		 cmp	 ecx, 255		; 000000ffH
  0005c	75 0a		 jne	 SHORT $LN15@GetToken
  0005e	b8 02 00 00 00	 mov	 eax, 2
  00063	e9 d9 02 00 00	 jmp	 $LN7@GetToken
$LN15@GetToken:

; 31   : 		if (ch=='/' && (ch =(unsigned char) fgetc(SMDFile) )=='/')	

  00068	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  0006c	83 f8 2f	 cmp	 eax, 47			; 0000002fH
  0006f	75 56		 jne	 SHORT $LN17@GetToken
  00071	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  00076	50		 push	 eax
  00077	e8 00 00 00 00	 call	 _fgetc
  0007c	83 c4 04	 add	 esp, 4
  0007f	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  00082	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  00086	83 f9 2f	 cmp	 ecx, 47			; 0000002fH
  00089	75 3c		 jne	 SHORT $LN17@GetToken
$LN5@GetToken:

; 32   : 		{
; 33   : 			while((ch != '\n') && (ch != (BYTE)EOF)) {			// 2003.09.02 H.J.I 수정

  0008b	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  0008f	83 f8 0a	 cmp	 eax, 10			; 0000000aH
  00092	74 1e		 je	 SHORT $LN6@GetToken
  00094	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  00098	3d ff 00 00 00	 cmp	 eax, 255		; 000000ffH
  0009d	74 13		 je	 SHORT $LN6@GetToken

; 34   : 				ch = (unsigned char) fgetc( SMDFile);

  0009f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  000a4	50		 push	 eax
  000a5	e8 00 00 00 00	 call	 _fgetc
  000aa	83 c4 04	 add	 esp, 4
  000ad	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al

; 35   : 			}

  000b0	eb d9		 jmp	 SHORT $LN5@GetToken
$LN6@GetToken:

; 36   : 
; 37   : 			if (ch == (BYTE)EOF)

  000b2	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  000b6	3d ff 00 00 00	 cmp	 eax, 255		; 000000ffH
  000bb	75 0a		 jne	 SHORT $LN17@GetToken

; 38   : 				return END;

  000bd	b8 02 00 00 00	 mov	 eax, 2
  000c2	e9 7a 02 00 00	 jmp	 $LN7@GetToken
$LN17@GetToken:

; 39   : 		}
; 40   : 	} while(  isspace(ch) );

  000c7	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  000cb	50		 push	 eax
  000cc	e8 00 00 00 00	 call	 _isspace
  000d1	83 c4 04	 add	 esp, 4
  000d4	85 c0		 test	 eax, eax
  000d6	0f 85 65 ff ff
	ff		 jne	 $LN4@GetToken

; 41   : 	
; 42   : 	char *p, TempString[100];
; 43   : 	switch(ch)

  000dc	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  000e0	89 85 48 ff ff
	ff		 mov	 DWORD PTR tv93[ebp], eax
  000e6	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR tv93[ebp]
  000ec	83 e9 22	 sub	 ecx, 34			; 00000022H
  000ef	89 8d 48 ff ff
	ff		 mov	 DWORD PTR tv93[ebp], ecx
  000f5	83 bd 48 ff ff
	ff 5b		 cmp	 DWORD PTR tv93[ebp], 91	; 0000005bH
  000fc	0f 87 86 01 00
	00		 ja	 $LN27@GetToken
  00102	8b 95 48 ff ff
	ff		 mov	 edx, DWORD PTR tv93[ebp]
  00108	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR $LN33@GetToken[edx]
  0010f	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN34@GetToken[eax*4]
$LN18@GetToken:

; 44   : 	{	
; 45   : 	case '#':
; 46   : 		return CurrentToken = COMMAND;

  00116	c7 05 00 00 00
	00 23 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 35 ; 00000023H
  00120	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  00125	e9 17 02 00 00	 jmp	 $LN7@GetToken
$LN19@GetToken:

; 47   : 	case ';':
; 48   : 		return CurrentToken = SEMICOLON;

  0012a	c7 05 00 00 00
	00 3b 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 59 ; 0000003bH
  00134	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  00139	e9 03 02 00 00	 jmp	 $LN7@GetToken
$LN20@GetToken:

; 49   : 	case ',':
; 50   : 		return CurrentToken = COMMA;

  0013e	c7 05 00 00 00
	00 2c 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 44 ; 0000002cH
  00148	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  0014d	e9 ef 01 00 00	 jmp	 $LN7@GetToken
$LN21@GetToken:

; 51   : 	case '{':
; 52   : 		return CurrentToken = LP;

  00152	c7 05 00 00 00
	00 7b 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 123 ; 0000007bH
  0015c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  00161	e9 db 01 00 00	 jmp	 $LN7@GetToken
$LN22@GetToken:

; 53   : 	case '}':
; 54   : 		return CurrentToken = RP;

  00166	c7 05 00 00 00
	00 7d 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 125 ; 0000007dH
  00170	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  00175	e9 c7 01 00 00	 jmp	 $LN7@GetToken
$LN23@GetToken:

; 55   : 	case '0':	case '1':	case '2':	case '3':	case '4':
; 56   : 	case '5':	case '6':	case '7':	case '8':	case '9':
; 57   : 	case '.':	case '-':
; 58   : 		ungetc(ch,SMDFile);

  0017a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  0017f	50		 push	 eax
  00180	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  00184	51		 push	 ecx
  00185	e8 00 00 00 00	 call	 _ungetc
  0018a	83 c4 08	 add	 esp, 8

; 59   : 		p = TempString;

  0018d	8d 45 90	 lea	 eax, DWORD PTR _TempString$[ebp]
  00190	89 45 f4	 mov	 DWORD PTR _p$[ebp], eax
$LN9@GetToken:

; 60   : 		while ( (  (ch = getc(SMDFile) ) !=(BYTE)EOF) && (ch=='.' || isdigit(ch) || ch=='-') )

  00193	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  00198	50		 push	 eax
  00199	e8 00 00 00 00	 call	 _getc
  0019e	83 c4 04	 add	 esp, 4
  001a1	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  001a4	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  001a8	81 f9 ff 00 00
	00		 cmp	 ecx, 255		; 000000ffH
  001ae	74 36		 je	 SHORT $LN10@GetToken
  001b0	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  001b4	83 f8 2e	 cmp	 eax, 46			; 0000002eH
  001b7	74 1a		 je	 SHORT $LN24@GetToken
  001b9	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  001bd	50		 push	 eax
  001be	e8 00 00 00 00	 call	 _isdigit
  001c3	83 c4 04	 add	 esp, 4
  001c6	85 c0		 test	 eax, eax
  001c8	75 09		 jne	 SHORT $LN24@GetToken
  001ca	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  001ce	83 f8 2d	 cmp	 eax, 45			; 0000002dH
  001d1	75 13		 jne	 SHORT $LN10@GetToken
$LN24@GetToken:

; 61   : 			*p++ = ch;

  001d3	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  001d6	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  001d9	88 08		 mov	 BYTE PTR [eax], cl
  001db	8b 55 f4	 mov	 edx, DWORD PTR _p$[ebp]
  001de	83 c2 01	 add	 edx, 1
  001e1	89 55 f4	 mov	 DWORD PTR _p$[ebp], edx
  001e4	eb ad		 jmp	 SHORT $LN9@GetToken
$LN10@GetToken:

; 62   : 		*p = 0;

  001e6	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  001e9	c6 00 00	 mov	 BYTE PTR [eax], 0

; 63   : 		TokenNumber = (float)atof(TempString);

  001ec	8d 45 90	 lea	 eax, DWORD PTR _TempString$[ebp]
  001ef	50		 push	 eax
  001f0	e8 00 00 00 00	 call	 _atof
  001f5	83 c4 04	 add	 esp, 4
  001f8	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?TokenNumber@@3MA

; 64   : 		//			sscanf(TempString," %f ",&TokenNumber);
; 65   : 		return CurrentToken = NUMBER;

  001fe	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 1
  00208	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  0020d	e9 2f 01 00 00	 jmp	 $LN7@GetToken
$LN25@GetToken:

; 66   : 	case '"':
; 67   : 		p = TokenString;

  00212	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _p$[ebp], OFFSET ?TokenString@@3PADA
$LN11@GetToken:

; 68   : 		while ( (  (ch = getc(SMDFile) ) !=(BYTE)EOF) && (ch!='"'))// || isalnum(ch)) )

  00219	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  0021e	50		 push	 eax
  0021f	e8 00 00 00 00	 call	 _getc
  00224	83 c4 04	 add	 esp, 4
  00227	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  0022a	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  0022e	81 f9 ff 00 00
	00		 cmp	 ecx, 255		; 000000ffH
  00234	74 1c		 je	 SHORT $LN12@GetToken
  00236	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  0023a	83 f8 22	 cmp	 eax, 34			; 00000022H
  0023d	74 13		 je	 SHORT $LN12@GetToken

; 69   : 			*p++ = ch;

  0023f	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00242	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  00245	88 08		 mov	 BYTE PTR [eax], cl
  00247	8b 55 f4	 mov	 edx, DWORD PTR _p$[ebp]
  0024a	83 c2 01	 add	 edx, 1
  0024d	89 55 f4	 mov	 DWORD PTR _p$[ebp], edx
  00250	eb c7		 jmp	 SHORT $LN11@GetToken
$LN12@GetToken:

; 70   : 		if (ch!='"')

  00252	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  00256	83 f8 22	 cmp	 eax, 34			; 00000022H
  00259	74 13		 je	 SHORT $LN26@GetToken

; 71   : 			ungetc(ch,SMDFile);

  0025b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  00260	50		 push	 eax
  00261	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  00265	51		 push	 ecx
  00266	e8 00 00 00 00	 call	 _ungetc
  0026b	83 c4 08	 add	 esp, 8
$LN26@GetToken:

; 72   : 		*p = 0;

  0026e	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00271	c6 00 00	 mov	 BYTE PTR [eax], 0

; 73   : 		return CurrentToken = NAME;

  00274	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 0
  0027e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  00283	e9 b9 00 00 00	 jmp	 $LN7@GetToken
$LN27@GetToken:

; 74   : 	default:
; 75   : 		if (isalpha(ch))	

  00288	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  0028c	50		 push	 eax
  0028d	e8 00 00 00 00	 call	 _isalpha
  00292	83 c4 04	 add	 esp, 4
  00295	85 c0		 test	 eax, eax
  00297	0f 84 95 00 00
	00		 je	 $LN28@GetToken

; 76   : 		{
; 77   : 			p = TokenString;

  0029d	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _p$[ebp], OFFSET ?TokenString@@3PADA

; 78   : 			*p++ = ch;

  002a4	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  002a7	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  002aa	88 08		 mov	 BYTE PTR [eax], cl
  002ac	8b 55 f4	 mov	 edx, DWORD PTR _p$[ebp]
  002af	83 c2 01	 add	 edx, 1
  002b2	89 55 f4	 mov	 DWORD PTR _p$[ebp], edx
$LN13@GetToken:

; 79   : 			while ( (  (ch = getc(SMDFile) ) !=(BYTE)EOF) && (ch=='.' || ch=='_' || isalnum(ch)) )

  002b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  002ba	50		 push	 eax
  002bb	e8 00 00 00 00	 call	 _getc
  002c0	83 c4 04	 add	 esp, 4
  002c3	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  002c6	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  002ca	81 f9 ff 00 00
	00		 cmp	 ecx, 255		; 000000ffH
  002d0	74 36		 je	 SHORT $LN14@GetToken
  002d2	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  002d6	83 f8 2e	 cmp	 eax, 46			; 0000002eH
  002d9	74 1a		 je	 SHORT $LN29@GetToken
  002db	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  002df	83 f8 5f	 cmp	 eax, 95			; 0000005fH
  002e2	74 11		 je	 SHORT $LN29@GetToken
  002e4	0f b6 45 fb	 movzx	 eax, BYTE PTR _ch$[ebp]
  002e8	50		 push	 eax
  002e9	e8 00 00 00 00	 call	 _isalnum
  002ee	83 c4 04	 add	 esp, 4
  002f1	85 c0		 test	 eax, eax
  002f3	74 13		 je	 SHORT $LN14@GetToken
$LN29@GetToken:

; 80   : 				*p++ = ch;

  002f5	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  002f8	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  002fb	88 08		 mov	 BYTE PTR [eax], cl
  002fd	8b 55 f4	 mov	 edx, DWORD PTR _p$[ebp]
  00300	83 c2 01	 add	 edx, 1
  00303	89 55 f4	 mov	 DWORD PTR _p$[ebp], edx
  00306	eb ad		 jmp	 SHORT $LN13@GetToken
$LN14@GetToken:

; 81   : 			ungetc(ch,SMDFile);

  00308	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  0030d	50		 push	 eax
  0030e	0f b6 4d fb	 movzx	 ecx, BYTE PTR _ch$[ebp]
  00312	51		 push	 ecx
  00313	e8 00 00 00 00	 call	 _ungetc
  00318	83 c4 08	 add	 esp, 8

; 82   : 			*p = 0;

  0031b	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  0031e	c6 00 00	 mov	 BYTE PTR [eax], 0

; 83   : 			return CurrentToken = NAME;

  00321	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 0
  0032b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
  00330	eb 0f		 jmp	 SHORT $LN7@GetToken
$LN28@GetToken:

; 84   : 		}
; 85   : 		return CurrentToken = SMD_ERROR;

  00332	c7 05 00 00 00
	00 3c 00 00 00	 mov	 DWORD PTR ?CurrentToken@@3W4SMDToken@@A, 60 ; 0000003cH
  0033c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentToken@@3W4SMDToken@@A
$LN7@GetToken:

; 86   : 	}
; 87   : }

  00341	5f		 pop	 edi
  00342	5e		 pop	 esi
  00343	5b		 pop	 ebx
  00344	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00347	33 cd		 xor	 ecx, ebp
  00349	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0034e	8b e5		 mov	 esp, ebp
  00350	5d		 pop	 ebp
  00351	c3		 ret	 0
  00352	66 90		 npad	 2
$LN34@GetToken:
  00354	00 00 00 00	 DD	 $LN25@GetToken
  00358	00 00 00 00	 DD	 $LN18@GetToken
  0035c	00 00 00 00	 DD	 $LN20@GetToken
  00360	00 00 00 00	 DD	 $LN23@GetToken
  00364	00 00 00 00	 DD	 $LN19@GetToken
  00368	00 00 00 00	 DD	 $LN21@GetToken
  0036c	00 00 00 00	 DD	 $LN22@GetToken
  00370	00 00 00 00	 DD	 $LN27@GetToken
$LN33@GetToken:
  00374	00		 DB	 0
  00375	01		 DB	 1
  00376	07		 DB	 7
  00377	07		 DB	 7
  00378	07		 DB	 7
  00379	07		 DB	 7
  0037a	07		 DB	 7
  0037b	07		 DB	 7
  0037c	07		 DB	 7
  0037d	07		 DB	 7
  0037e	02		 DB	 2
  0037f	03		 DB	 3
  00380	03		 DB	 3
  00381	07		 DB	 7
  00382	03		 DB	 3
  00383	03		 DB	 3
  00384	03		 DB	 3
  00385	03		 DB	 3
  00386	03		 DB	 3
  00387	03		 DB	 3
  00388	03		 DB	 3
  00389	03		 DB	 3
  0038a	03		 DB	 3
  0038b	03		 DB	 3
  0038c	07		 DB	 7
  0038d	04		 DB	 4
  0038e	07		 DB	 7
  0038f	07		 DB	 7
  00390	07		 DB	 7
  00391	07		 DB	 7
  00392	07		 DB	 7
  00393	07		 DB	 7
  00394	07		 DB	 7
  00395	07		 DB	 7
  00396	07		 DB	 7
  00397	07		 DB	 7
  00398	07		 DB	 7
  00399	07		 DB	 7
  0039a	07		 DB	 7
  0039b	07		 DB	 7
  0039c	07		 DB	 7
  0039d	07		 DB	 7
  0039e	07		 DB	 7
  0039f	07		 DB	 7
  003a0	07		 DB	 7
  003a1	07		 DB	 7
  003a2	07		 DB	 7
  003a3	07		 DB	 7
  003a4	07		 DB	 7
  003a5	07		 DB	 7
  003a6	07		 DB	 7
  003a7	07		 DB	 7
  003a8	07		 DB	 7
  003a9	07		 DB	 7
  003aa	07		 DB	 7
  003ab	07		 DB	 7
  003ac	07		 DB	 7
  003ad	07		 DB	 7
  003ae	07		 DB	 7
  003af	07		 DB	 7
  003b0	07		 DB	 7
  003b1	07		 DB	 7
  003b2	07		 DB	 7
  003b3	07		 DB	 7
  003b4	07		 DB	 7
  003b5	07		 DB	 7
  003b6	07		 DB	 7
  003b7	07		 DB	 7
  003b8	07		 DB	 7
  003b9	07		 DB	 7
  003ba	07		 DB	 7
  003bb	07		 DB	 7
  003bc	07		 DB	 7
  003bd	07		 DB	 7
  003be	07		 DB	 7
  003bf	07		 DB	 7
  003c0	07		 DB	 7
  003c1	07		 DB	 7
  003c2	07		 DB	 7
  003c3	07		 DB	 7
  003c4	07		 DB	 7
  003c5	07		 DB	 7
  003c6	07		 DB	 7
  003c7	07		 DB	 7
  003c8	07		 DB	 7
  003c9	07		 DB	 7
  003ca	07		 DB	 7
  003cb	07		 DB	 7
  003cc	07		 DB	 7
  003cd	05		 DB	 5
  003ce	07		 DB	 7
  003cf	06		 DB	 6
?GetToken@@YA?AW4SMDToken@@XZ ENDP			; GetToken
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCItemBagEx@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCItemBagEx@@UAEPAXI@Z PROC				; CItemBagEx::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CItemBagEx@@UAE@XZ	; CItemBagEx::~CItemBagEx
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 11		 je	 SHORT $LN2@scalar
  0001c	68 d8 05 00 00	 push	 1496			; 000005d8H
  00021	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00024	50		 push	 eax
  00025	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  0002a	83 c4 08	 add	 esp, 8
$LN2@scalar:
  0002d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00030	5f		 pop	 edi
  00031	5e		 pop	 esi
  00032	5b		 pop	 ebx
  00033	8b e5		 mov	 esp, ebp
  00035	5d		 pop	 ebp
  00036	c2 04 00	 ret	 4
??_GCItemBagEx@@UAEPAXI@Z ENDP				; CItemBagEx::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?GetLevel@CItemBagEx@@AAEEH@Z
_TEXT	SEGMENT
_level$ = -12						; size = 4
_sub$ = -8						; size = 4
_this$ = -4						; size = 4
_n$ = 8							; size = 4
?GetLevel@CItemBagEx@@AAEEH@Z PROC			; CItemBagEx::GetLevel, COMDAT
; _this$ = ecx

; 292  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 293  : 	if( n < 0 || n > MAX_ITEMBAGEX-1 ) return 0;

  0000c	83 7d 08 00	 cmp	 DWORD PTR _n$[ebp], 0
  00010	7c 09		 jl	 SHORT $LN3@GetLevel
  00012	81 7d 08 95 00
	00 00		 cmp	 DWORD PTR _n$[ebp], 149	; 00000095H
  00019	7e 04		 jle	 SHORT $LN2@GetLevel
$LN3@GetLevel:
  0001b	32 c0		 xor	 al, al
  0001d	eb 72		 jmp	 SHORT $LN1@GetLevel
$LN2@GetLevel:

; 294  : 
; 295  : 	if( BagObject[n].m_minLevel == BagObject[n].m_maxLevel )

  0001f	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00022	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00025	0f b6 94 c1 2a
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+298]
  0002d	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00030	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00033	0f b6 84 c1 2b
	01 00 00	 movzx	 eax, BYTE PTR [ecx+eax*8+299]
  0003b	3b d0		 cmp	 edx, eax
  0003d	75 0f		 jne	 SHORT $LN4@GetLevel

; 296  : 	{
; 297  : 		return BagObject[n].m_minLevel;

  0003f	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00042	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00045	8a 84 c1 2a 01
	00 00		 mov	 al, BYTE PTR [ecx+eax*8+298]
  0004c	eb 43		 jmp	 SHORT $LN1@GetLevel
$LN4@GetLevel:

; 298  : 	}
; 299  : 	
; 300  : 	int sub = BagObject[n].m_maxLevel - BagObject[n].m_minLevel + 1;

  0004e	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00051	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00054	0f b6 94 c1 2b
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+299]
  0005c	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  0005f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00062	0f b6 84 c1 2a
	01 00 00	 movzx	 eax, BYTE PTR [ecx+eax*8+298]
  0006a	2b d0		 sub	 edx, eax
  0006c	83 c2 01	 add	 edx, 1
  0006f	89 55 f8	 mov	 DWORD PTR _sub$[ebp], edx

; 301  : 	int level = BagObject[n].m_minLevel+rand()%sub;

  00072	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00075	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00078	0f b6 b4 c1 2a
	01 00 00	 movzx	 esi, BYTE PTR [ecx+eax*8+298]
  00080	e8 00 00 00 00	 call	 _rand
  00085	99		 cdq
  00086	f7 7d f8	 idiv	 DWORD PTR _sub$[ebp]
  00089	03 f2		 add	 esi, edx
  0008b	89 75 f4	 mov	 DWORD PTR _level$[ebp], esi

; 302  : 
; 303  : 	return level;

  0008e	8a 45 f4	 mov	 al, BYTE PTR _level$[ebp]
$LN1@GetLevel:

; 304  : }

  00091	5f		 pop	 edi
  00092	5e		 pop	 esi
  00093	5b		 pop	 ebx
  00094	8b e5		 mov	 esp, ebp
  00096	5d		 pop	 ebp
  00097	c2 04 00	 ret	 4
?GetLevel@CItemBagEx@@AAEEH@Z ENDP			; CItemBagEx::GetLevel
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?IsEnableEventItemDrop@CItemBagEx@@AAEHH@Z
_TEXT	SEGMENT
_iLevel$ = -12						; size = 4
_iMapNumber$ = -8					; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?IsEnableEventItemDrop@CItemBagEx@@AAEHH@Z PROC		; CItemBagEx::IsEnableEventItemDrop, COMDAT
; _this$ = ecx

; 307  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 308  : 	int iMapNumber = gObj[aIndex].MapNumber;

  0000c	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00013	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00019	0f b6 94 01 09
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+265]
  00021	89 55 f8	 mov	 DWORD PTR _iMapNumber$[ebp], edx

; 309  : 	
; 310  : 	if( !DropMapInfo[iMapNumber].m_bIsDrop )

  00024	6b 45 f8 03	 imul	 eax, DWORD PTR _iMapNumber$[ebp], 3
  00028	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002b	8b 91 24 01 00
	00		 mov	 edx, DWORD PTR [ecx+292]
  00031	0f b6 04 02	 movzx	 eax, BYTE PTR [edx+eax]
  00035	85 c0		 test	 eax, eax
  00037	75 04		 jne	 SHORT $LN2@IsEnableEv

; 311  : 	{	// 드롭수 없는 맵이다
; 312  : 		return FALSE;

  00039	33 c0		 xor	 eax, eax
  0003b	eb 4f		 jmp	 SHORT $LN1@IsEnableEv
$LN2@IsEnableEv:

; 313  : 	}
; 314  : 
; 315  : 	int iLevel = gObj[aIndex].Level;

  0003d	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  00044	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  0004a	0f bf 94 01 a0
	00 00 00	 movsx	 edx, WORD PTR [ecx+eax+160]
  00052	89 55 f4	 mov	 DWORD PTR _iLevel$[ebp], edx

; 316  : 
; 317  : 	if( iLevel < DropMapInfo[iMapNumber].m_MinMonsterLevel || 

  00055	6b 45 f8 03	 imul	 eax, DWORD PTR _iMapNumber$[ebp], 3
  00059	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0005c	8b 91 24 01 00
	00		 mov	 edx, DWORD PTR [ecx+292]
  00062	0f b6 44 02 01	 movzx	 eax, BYTE PTR [edx+eax+1]
  00067	39 45 f4	 cmp	 DWORD PTR _iLevel$[ebp], eax
  0006a	7c 17		 jl	 SHORT $LN4@IsEnableEv
  0006c	6b 45 f8 03	 imul	 eax, DWORD PTR _iMapNumber$[ebp], 3
  00070	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00073	8b 91 24 01 00
	00		 mov	 edx, DWORD PTR [ecx+292]
  00079	0f b6 44 02 02	 movzx	 eax, BYTE PTR [edx+eax+2]
  0007e	39 45 f4	 cmp	 DWORD PTR _iLevel$[ebp], eax
  00081	7e 04		 jle	 SHORT $LN3@IsEnableEv
$LN4@IsEnableEv:

; 318  : 		iLevel > DropMapInfo[iMapNumber].m_MaxMonsterLevel )
; 319  : 	{	// 드롭 몬스터 레벨이 맞지 않다
; 320  : 		return FALSE;

  00083	33 c0		 xor	 eax, eax
  00085	eb 05		 jmp	 SHORT $LN1@IsEnableEv
$LN3@IsEnableEv:

; 321  : 	}
; 322  : 	return TRUE;	

  00087	b8 01 00 00 00	 mov	 eax, 1
$LN1@IsEnableEv:

; 323  : }

  0008c	5f		 pop	 edi
  0008d	5e		 pop	 esi
  0008e	5b		 pop	 ebx
  0008f	8b e5		 mov	 esp, ebp
  00091	5d		 pop	 ebp
  00092	c2 04 00	 ret	 4
?IsEnableEventItemDrop@CItemBagEx@@AAEHH@Z ENDP		; CItemBagEx::IsEnableEventItemDrop
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.h
;	COMDAT ?GetBagCount@CItemBagEx@@AAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetBagCount@CItemBagEx@@AAEHXZ PROC			; CItemBagEx::GetBagCount, COMDAT
; _this$ = ecx

; 153  : 	int		GetBagCount(){return m_iBagObjectCount;}

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 80 20 01 00
	00		 mov	 eax, DWORD PTR [eax+288]
  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
?GetBagCount@CItemBagEx@@AAEHXZ ENDP			; CItemBagEx::GetBagCount
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?PickItem@CItemBagEx@@QAEHAAVCItem@@AAH@Z
_TEXT	SEGMENT
_DropItemNum$ = -8					; size = 4
_this$ = -4						; size = 4
_objItem$ = 8						; size = 4
_nItemIndex$ = 12					; size = 4
?PickItem@CItemBagEx@@QAEHAAVCItem@@AAH@Z PROC		; CItemBagEx::PickItem, COMDAT
; _this$ = ecx

; 466  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 467  : 	if( !m_bLoad )					// 아이템 스크립트가 로드되지 않았다

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  00013	75 07		 jne	 SHORT $LN2@PickItem

; 468  : 		return FALSE;

  00015	33 c0		 xor	 eax, eax
  00017	e9 1f 02 00 00	 jmp	 $LN1@PickItem
$LN2@PickItem:

; 469  : 	
; 470  : 	int DropItemNum;
; 471  : //	int ExOption = 0;
; 472  : 
; 473  : 	if( GetBagCount() > 0 )

  0001c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0001f	e8 00 00 00 00	 call	 ?GetBagCount@CItemBagEx@@AAEHXZ ; CItemBagEx::GetBagCount
  00024	85 c0		 test	 eax, eax
  00026	0f 8e 0d 02 00
	00		 jle	 $LN3@PickItem

; 474  : 	{
; 475  : 		DropItemNum = (rand()%GetBagCount());

  0002c	e8 00 00 00 00	 call	 _rand
  00031	8b f0		 mov	 esi, eax
  00033	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00036	e8 00 00 00 00	 call	 ?GetBagCount@CItemBagEx@@AAEHXZ ; CItemBagEx::GetBagCount
  0003b	8b c8		 mov	 ecx, eax
  0003d	8b c6		 mov	 eax, esi
  0003f	99		 cdq
  00040	f7 f9		 idiv	 ecx
  00042	89 55 f8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 476  : 		nItemIndex	= DropItemNum;

  00045	8b 45 0c	 mov	 eax, DWORD PTR _nItemIndex$[ebp]
  00048	8b 4d f8	 mov	 ecx, DWORD PTR _DropItemNum$[ebp]
  0004b	89 08		 mov	 DWORD PTR [eax], ecx

; 477  : 
; 478  : 		// 타입
; 479  : 		objItem.m_Type	= ItemGetNumberMake(BagObject[DropItemNum].m_type, BagObject[DropItemNum].m_index);

  0004d	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00050	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00053	0f b6 94 c1 29
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+297]
  0005b	52		 push	 edx
  0005c	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0005f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00062	0f b6 94 c1 28
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+296]
  0006a	52		 push	 edx
  0006b	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00070	83 c4 08	 add	 esp, 8
  00073	8b 4d 08	 mov	 ecx, DWORD PTR _objItem$[ebp]
  00076	66 89 41 06	 mov	 WORD PTR [ecx+6], ax

; 480  : 		// 레벨
; 481  : 		objItem.m_Level	= GetLevel(DropItemNum);

  0007a	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0007d	50		 push	 eax
  0007e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00081	e8 00 00 00 00	 call	 ?GetLevel@CItemBagEx@@AAEEH@Z ; CItemBagEx::GetLevel
  00086	66 0f b6 c8	 movzx	 cx, al
  0008a	8b 55 08	 mov	 edx, DWORD PTR _objItem$[ebp]
  0008d	66 89 4a 08	 mov	 WORD PTR [edx+8], cx

; 482  : 
; 483  : 		if( objItem.m_Type == -1 )

  00091	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00094	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00098	83 f9 ff	 cmp	 ecx, -1
  0009b	75 07		 jne	 SHORT $LN4@PickItem

; 484  : 			return FALSE;

  0009d	33 c0		 xor	 eax, eax
  0009f	e9 97 01 00 00	 jmp	 $LN1@PickItem
$LN4@PickItem:

; 485  : 
; 486  : 		if( BagObject[DropItemNum].m_isskill )

  000a4	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000a7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000aa	0f b6 94 c1 2c
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+300]
  000b2	85 d2		 test	 edx, edx
  000b4	74 07		 je	 SHORT $LN5@PickItem

; 487  : 		{	// 스킬이 붙을 수 있으면
; 488  : 			objItem.m_Option1		= 1;

  000b6	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  000b9	c6 40 78 01	 mov	 BYTE PTR [eax+120], 1
$LN5@PickItem:

; 489  : 		}
; 490  : 
; 491  : 		if( BagObject[DropItemNum].m_isluck )

  000bd	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000c0	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c3	0f b6 94 c1 2d
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+301]
  000cb	85 d2		 test	 edx, edx
  000cd	74 07		 je	 SHORT $LN6@PickItem

; 492  : 		{	
; 493  : 			// 행운이 붙을 수 있으면
; 494  : 			objItem.m_Option2		= 1;

  000cf	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  000d2	c6 40 79 01	 mov	 BYTE PTR [eax+121], 1
$LN6@PickItem:

; 495  : 		}
; 496  : 
; 497  : 		if( BagObject[DropItemNum].m_isoption )

  000d6	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000d9	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000dc	0f b6 94 c1 2e
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+302]
  000e4	85 d2		 test	 edx, edx
  000e6	74 07		 je	 SHORT $LN7@PickItem

; 498  : 		{
; 499  : 			// 추가옵션이 붙을 수 있으면
; 500  : 			objItem.m_Option3		= 1;

  000e8	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  000eb	c6 40 7a 01	 mov	 BYTE PTR [eax+122], 1
$LN7@PickItem:

; 501  : 		}
; 502  : 
; 503  : 		if( BagObject[DropItemNum].m_isexitem )

  000ef	8b 45 f8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000f2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000f5	0f b6 94 c1 2f
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+303]
  000fd	85 d2		 test	 edx, edx
  000ff	74 15		 je	 SHORT $LN8@PickItem

; 504  : 		{
; 505  : 			// 액설런트 아이템은 행운이 붙지 않는다.
; 506  : 			objItem.m_NewOption	= 1;

  00101	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00104	c6 40 7b 01	 mov	 BYTE PTR [eax+123], 1

; 507  : 			objItem.m_Option1	= 0;

  00108	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  0010b	c6 40 78 00	 mov	 BYTE PTR [eax+120], 0

; 508  : 			objItem.m_Option2	= 0;

  0010f	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00112	c6 40 79 00	 mov	 BYTE PTR [eax+121], 0
$LN8@PickItem:

; 509  : 		}
; 510  : 		
; 511  : 		// 혼석, 축석, 영석은 레벨이 없게
; 512  : 		if( (objItem.m_Type == MAKE_ITEMNUM(12, 15)) ||
; 513  : 			(objItem.m_Type == MAKE_ITEMNUM(14, 13)) ||

  00116	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00119	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  0011d	6a 0f		 push	 15			; 0000000fH
  0011f	6a 0c		 push	 12			; 0000000cH
  00121	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00126	83 c4 08	 add	 esp, 8
  00129	3b f0		 cmp	 esi, eax
  0012b	74 2e		 je	 SHORT $LN10@PickItem
  0012d	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00130	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00134	6a 0d		 push	 13			; 0000000dH
  00136	6a 0e		 push	 14			; 0000000eH
  00138	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0013d	83 c4 08	 add	 esp, 8
  00140	3b f0		 cmp	 esi, eax
  00142	74 17		 je	 SHORT $LN10@PickItem
  00144	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00147	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  0014b	6a 0e		 push	 14			; 0000000eH
  0014d	6a 0e		 push	 14			; 0000000eH
  0014f	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00154	83 c4 08	 add	 esp, 8
  00157	3b f0		 cmp	 esi, eax
  00159	75 1e		 jne	 SHORT $LN9@PickItem
$LN10@PickItem:

; 514  : 			(objItem.m_Type == MAKE_ITEMNUM(14, 14)) )
; 515  : 		{	
; 516  : 			objItem.m_Option1	= 0; 

  0015b	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  0015e	c6 40 78 00	 mov	 BYTE PTR [eax+120], 0

; 517  : 			objItem.m_Option2	= 0;

  00162	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00165	c6 40 79 00	 mov	 BYTE PTR [eax+121], 0

; 518  : 			objItem.m_Option3	= 0;

  00169	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  0016c	c6 40 7a 00	 mov	 BYTE PTR [eax+122], 0

; 519  : 			objItem.m_Level		= 0;

  00170	33 c0		 xor	 eax, eax
  00172	8b 4d 08	 mov	 ecx, DWORD PTR _objItem$[ebp]
  00175	66 89 41 08	 mov	 WORD PTR [ecx+8], ax
$LN9@PickItem:

; 520  : 		}
; 521  : 
; 522  : 		if( (objItem.m_Type == MAKE_ITEMNUM(13, 0)) ||
; 523  : 			(objItem.m_Type == MAKE_ITEMNUM(13, 1)) ||				
; 524  : 			(objItem.m_Type == MAKE_ITEMNUM(13, 2)) ||
; 525  : 			(objItem.m_Type == MAKE_ITEMNUM(13, 8)) ||
; 526  : 			(objItem.m_Type == MAKE_ITEMNUM(13, 9)) ||
; 527  : 			(objItem.m_Type == MAKE_ITEMNUM(13, 12)) ||

  00179	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  0017c	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  00180	6a 00		 push	 0
  00182	6a 0d		 push	 13			; 0000000dH
  00184	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00189	83 c4 08	 add	 esp, 8
  0018c	3b f0		 cmp	 esi, eax
  0018e	0f 84 8a 00 00
	00		 je	 $LN12@PickItem
  00194	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  00197	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  0019b	6a 01		 push	 1
  0019d	6a 0d		 push	 13			; 0000000dH
  0019f	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001a4	83 c4 08	 add	 esp, 8
  001a7	3b f0		 cmp	 esi, eax
  001a9	74 73		 je	 SHORT $LN12@PickItem
  001ab	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  001ae	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  001b2	6a 02		 push	 2
  001b4	6a 0d		 push	 13			; 0000000dH
  001b6	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001bb	83 c4 08	 add	 esp, 8
  001be	3b f0		 cmp	 esi, eax
  001c0	74 5c		 je	 SHORT $LN12@PickItem
  001c2	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  001c5	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  001c9	6a 08		 push	 8
  001cb	6a 0d		 push	 13			; 0000000dH
  001cd	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001d2	83 c4 08	 add	 esp, 8
  001d5	3b f0		 cmp	 esi, eax
  001d7	74 45		 je	 SHORT $LN12@PickItem
  001d9	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  001dc	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  001e0	6a 09		 push	 9
  001e2	6a 0d		 push	 13			; 0000000dH
  001e4	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001e9	83 c4 08	 add	 esp, 8
  001ec	3b f0		 cmp	 esi, eax
  001ee	74 2e		 je	 SHORT $LN12@PickItem
  001f0	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  001f3	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  001f7	6a 0c		 push	 12			; 0000000cH
  001f9	6a 0d		 push	 13			; 0000000dH
  001fb	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00200	83 c4 08	 add	 esp, 8
  00203	3b f0		 cmp	 esi, eax
  00205	74 17		 je	 SHORT $LN12@PickItem
  00207	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  0020a	0f bf 70 06	 movsx	 esi, WORD PTR [eax+6]
  0020e	6a 0d		 push	 13			; 0000000dH
  00210	6a 0d		 push	 13			; 0000000dH
  00212	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00217	83 c4 08	 add	 esp, 8
  0021a	3b f0		 cmp	 esi, eax
  0021c	75 09		 jne	 SHORT $LN11@PickItem
$LN12@PickItem:

; 528  : 			(objItem.m_Type == MAKE_ITEMNUM(13, 13)) )
; 529  : 		{	// 반지류는 레벨 0
; 530  : 			objItem.m_Level		= 0;

  0021e	33 c0		 xor	 eax, eax
  00220	8b 4d 08	 mov	 ecx, DWORD PTR _objItem$[ebp]
  00223	66 89 41 08	 mov	 WORD PTR [ecx+8], ax
$LN11@PickItem:

; 531  : 		}
; 532  : 
; 533  : 		objItem.m_Durability	= 0;

  00227	8b 45 08	 mov	 eax, DWORD PTR _objItem$[ebp]
  0022a	0f 57 c0	 xorps	 xmm0, xmm0
  0022d	f3 0f 11 40 24	 movss	 DWORD PTR [eax+36], xmm0

; 534  : 
; 535  : 		return TRUE;

  00232	b8 01 00 00 00	 mov	 eax, 1
  00237	eb 02		 jmp	 SHORT $LN1@PickItem
$LN3@PickItem:

; 536  : 	}
; 537  : 
; 538  : 	return FALSE;

  00239	33 c0		 xor	 eax, eax
$LN1@PickItem:

; 539  : }

  0023b	5f		 pop	 edi
  0023c	5e		 pop	 esi
  0023d	5b		 pop	 ebx
  0023e	8b e5		 mov	 esp, ebp
  00240	5d		 pop	 ebp
  00241	c2 08 00	 ret	 8
?PickItem@CItemBagEx@@QAEHAAVCItem@@AAH@Z ENDP		; CItemBagEx::PickItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?GetMaxLevel@CItemBagEx@@QAEEH@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_n$ = 8							; size = 4
?GetMaxLevel@CItemBagEx@@QAEEH@Z PROC			; CItemBagEx::GetMaxLevel, COMDAT
; _this$ = ecx

; 459  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 460  : 	if( n < 0 || n > MAX_ITEMBAGEX-1 ) return 0;

  0000c	83 7d 08 00	 cmp	 DWORD PTR _n$[ebp], 0
  00010	7c 09		 jl	 SHORT $LN3@GetMaxLeve
  00012	81 7d 08 95 00
	00 00		 cmp	 DWORD PTR _n$[ebp], 149	; 00000095H
  00019	7e 04		 jle	 SHORT $LN2@GetMaxLeve
$LN3@GetMaxLeve:
  0001b	32 c0		 xor	 al, al
  0001d	eb 0d		 jmp	 SHORT $LN1@GetMaxLeve
$LN2@GetMaxLeve:

; 461  : 	
; 462  : 	return BagObject[n].m_maxLevel;

  0001f	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00022	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00025	8a 84 c1 2b 01
	00 00		 mov	 al, BYTE PTR [ecx+eax*8+299]
$LN1@GetMaxLeve:

; 463  : }

  0002c	5f		 pop	 edi
  0002d	5e		 pop	 esi
  0002e	5b		 pop	 ebx
  0002f	8b e5		 mov	 esp, ebp
  00031	5d		 pop	 ebp
  00032	c2 04 00	 ret	 4
?GetMaxLevel@CItemBagEx@@QAEEH@Z ENDP			; CItemBagEx::GetMaxLevel
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?GetMinLevel@CItemBagEx@@QAEEH@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_n$ = 8							; size = 4
?GetMinLevel@CItemBagEx@@QAEEH@Z PROC			; CItemBagEx::GetMinLevel, COMDAT
; _this$ = ecx

; 452  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 453  : 	if( n < 0 || n > MAX_ITEMBAGEX-1 ) return 0;

  0000c	83 7d 08 00	 cmp	 DWORD PTR _n$[ebp], 0
  00010	7c 09		 jl	 SHORT $LN3@GetMinLeve
  00012	81 7d 08 95 00
	00 00		 cmp	 DWORD PTR _n$[ebp], 149	; 00000095H
  00019	7e 04		 jle	 SHORT $LN2@GetMinLeve
$LN3@GetMinLeve:
  0001b	32 c0		 xor	 al, al
  0001d	eb 0d		 jmp	 SHORT $LN1@GetMinLeve
$LN2@GetMinLeve:

; 454  : 	
; 455  : 	return BagObject[n].m_minLevel;

  0001f	8b 45 08	 mov	 eax, DWORD PTR _n$[ebp]
  00022	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00025	8a 84 c1 2a 01
	00 00		 mov	 al, BYTE PTR [ecx+eax*8+298]
$LN1@GetMinLeve:

; 456  : }

  0002c	5f		 pop	 edi
  0002d	5e		 pop	 esi
  0002e	5b		 pop	 ebx
  0002f	8b e5		 mov	 esp, ebp
  00031	5d		 pop	 ebp
  00032	c2 04 00	 ret	 4
?GetMinLevel@CItemBagEx@@QAEEH@Z ENDP			; CItemBagEx::GetMinLevel
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?DropKundunEventItem@CItemBagEx@@QAEHHEEE@Z
_TEXT	SEGMENT
_lpObj$ = -48						; size = 4
_ExOption$ = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?DropKundunEventItem@CItemBagEx@@QAEHHEEE@Z PROC	; CItemBagEx::DropKundunEventItem, COMDAT
; _this$ = ecx

; 1782 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 70	 sub	 esp, 112		; 00000070H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 1783 : 	if( !m_bLoad )					// 아이템 스크립트가 로드되지 않았다

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  00013	75 07		 jne	 SHORT $LN2@DropKundun

; 1784 : 		return FALSE;

  00015	33 c0		 xor	 eax, eax
  00017	e9 2d 03 00 00	 jmp	 $LN1@DropKundun
$LN2@DropKundun:

; 1785 : 	
; 1786 : 	float dur;
; 1787 : 	int type, level, x, y;
; 1788 : 	int Option1 = 0;

  0001c	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1789 : 	int Option2 = 0;

  00023	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1790 : 	int Option3 = 0;

  0002a	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1791 : 	int DropItemNum;
; 1792 : 	int ExOption = 0;

  00031	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0

; 1793 : 
; 1794 : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  00038	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  0003f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00045	89 45 d0	 mov	 DWORD PTR _lpObj$[ebp], eax

; 1795 : 
; 1796 : #ifdef EXTEND_LOG_SYSTEM_20060202
; 1797 : 	// 쿤둔 사망시 쿤둔 이벤트 아이템 백의 리스트를 로그로 저장한다.
; 1798 : 	int iItemBagCount = GetBagCount();
; 1799 : 
; 1800 : 	for( int i = 0 ; i < iItemBagCount ; i++ )
; 1801 : 	{
; 1802 : 		type = ItemGetNumberMake(BagObject[i].m_type, BagObject[i].m_index);
; 1803 : 		LogAdd("[○KUNDUN EVENT][KUNDUN ITEM BAG LIST] Item:(%s)%d Level:%d-%d op1:%d op2:%d op3:%d expo:%d",
; 1804 : 				ItemAttribute[type].Name, type, BagObject[i].m_minLevel, BagObject[i].m_maxLevel,
; 1805 : 				BagObject[i].m_isskill, BagObject[i].m_isluck, BagObject[i].m_isoption, BagObject[i].m_isexitem );
; 1806 : 	}
; 1807 : #endif
; 1808 : 
; 1809 : 	if( GetBagCount() > 0 )

  00048	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0004b	e8 00 00 00 00	 call	 ?GetBagCount@CItemBagEx@@AAEHXZ ; CItemBagEx::GetBagCount
  00050	85 c0		 test	 eax, eax
  00052	0f 8e ec 02 00
	00		 jle	 $LN4@DropKundun

; 1810 : 	{
; 1811 : 		// 100% 확률로 이벤트용 아이템 증정
; 1812 : 		if( 1 )

  00058	b8 01 00 00 00	 mov	 eax, 1
  0005d	85 c0		 test	 eax, eax
  0005f	0f 84 df 02 00
	00		 je	 $LN4@DropKundun

; 1813 : 		{
; 1814 : 			DropItemNum = (rand()%GetBagCount());

  00065	e8 00 00 00 00	 call	 _rand
  0006a	8b f0		 mov	 esi, eax
  0006c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0006f	e8 00 00 00 00	 call	 ?GetBagCount@CItemBagEx@@AAEHXZ ; CItemBagEx::GetBagCount
  00074	8b c8		 mov	 ecx, eax
  00076	8b c6		 mov	 eax, esi
  00078	99		 cdq
  00079	f7 f9		 idiv	 ecx
  0007b	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 1815 : 			dur  = 0;

  0007e	0f 57 c0	 xorps	 xmm0, xmm0
  00081	f3 0f 11 45 f8	 movss	 DWORD PTR _dur$[ebp], xmm0

; 1816 : 
; 1817 : 			if( cX==0 && cY==0 )

  00086	0f b6 45 10	 movzx	 eax, BYTE PTR _cX$[ebp]
  0008a	85 c0		 test	 eax, eax
  0008c	75 24		 jne	 SHORT $LN5@DropKundun
  0008e	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  00092	85 c0		 test	 eax, eax
  00094	75 1c		 jne	 SHORT $LN5@DropKundun

; 1818 : 			{
; 1819 : 				x   = lpObj->X;

  00096	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00099	0f bf 88 04 01
	00 00		 movsx	 ecx, WORD PTR [eax+260]
  000a0	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 1820 : 				y   = lpObj->Y;

  000a3	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a6	0f bf 88 06 01
	00 00		 movsx	 ecx, WORD PTR [eax+262]
  000ad	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 1821 : 			}

  000b0	eb 0e		 jmp	 SHORT $LN6@DropKundun
$LN5@DropKundun:

; 1822 : 			else
; 1823 : 			{
; 1824 : 				x	= cX;

  000b2	0f b6 45 10	 movzx	 eax, BYTE PTR _cX$[ebp]
  000b6	89 45 ec	 mov	 DWORD PTR _x$[ebp], eax

; 1825 : 				y	= cY;

  000b9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  000bd	89 45 e8	 mov	 DWORD PTR _y$[ebp], eax
$LN6@DropKundun:

; 1826 : 			}
; 1827 : 			
; 1828 : 
; 1829 : 			// 레벨
; 1830 : 			level= GetLevel(DropItemNum);

  000c0	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000c3	50		 push	 eax
  000c4	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c7	e8 00 00 00 00	 call	 ?GetLevel@CItemBagEx@@AAEEH@Z ; CItemBagEx::GetLevel
  000cc	0f b6 c8	 movzx	 ecx, al
  000cf	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx

; 1831 : 			type = ItemGetNumberMake(BagObject[DropItemNum].m_type, BagObject[DropItemNum].m_index);

  000d2	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000d5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000d8	0f b6 94 c1 29
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+297]
  000e0	52		 push	 edx
  000e1	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000e4	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000e7	0f b6 94 c1 28
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+296]
  000ef	52		 push	 edx
  000f0	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000f5	83 c4 08	 add	 esp, 8
  000f8	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 1832 : 
; 1833 : 			if( type == -1 )

  000fb	83 7d f4 ff	 cmp	 DWORD PTR _type$[ebp], -1
  000ff	75 07		 jne	 SHORT $LN7@DropKundun

; 1834 : 				return FALSE;

  00101	33 c0		 xor	 eax, eax
  00103	e9 41 02 00 00	 jmp	 $LN1@DropKundun
$LN7@DropKundun:

; 1835 : 
; 1836 : 			if( BagObject[DropItemNum].m_isskill )

  00108	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0010b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0010e	0f b6 94 c1 2c
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+300]
  00116	85 d2		 test	 edx, edx
  00118	74 07		 je	 SHORT $LN8@DropKundun

; 1837 : 			{	// 스킬이 붙을수 있으면
; 1838 : 				Option1 = 1;

  0011a	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN8@DropKundun:

; 1839 : 			}
; 1840 : 
; 1841 : 			if( BagObject[DropItemNum].m_isluck )

  00121	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00124	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00127	0f b6 94 c1 2d
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+301]
  0012f	85 d2		 test	 edx, edx
  00131	74 23		 je	 SHORT $LN10@DropKundun

; 1842 : 			{	
; 1843 : 				// 행운이 붙을수 있으면
; 1844 : 				Option2 = 0;

  00133	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1845 : 				if( rand()%2 == 0 )

  0013a	e8 00 00 00 00	 call	 _rand
  0013f	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00144	79 05		 jns	 SHORT $LN20@DropKundun
  00146	48		 dec	 eax
  00147	83 c8 fe	 or	 eax, -2			; fffffffeH
  0014a	40		 inc	 eax
$LN20@DropKundun:
  0014b	85 c0		 test	 eax, eax
  0014d	75 07		 jne	 SHORT $LN10@DropKundun

; 1846 : 					Option2 = 1;

  0014f	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 1
$LN10@DropKundun:

; 1847 : 			}
; 1848 : 
; 1849 : 			if( BagObject[DropItemNum].m_isoption )

  00156	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00159	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0015c	0f b6 94 c1 2e
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+302]
  00164	85 d2		 test	 edx, edx
  00166	74 2b		 je	 SHORT $LN13@DropKundun

; 1850 : 			{
; 1851 : 				if( (rand()%5) < 1 )

  00168	e8 00 00 00 00	 call	 _rand
  0016d	99		 cdq
  0016e	b9 05 00 00 00	 mov	 ecx, 5
  00173	f7 f9		 idiv	 ecx
  00175	83 fa 01	 cmp	 edx, 1
  00178	7d 09		 jge	 SHORT $LN12@DropKundun

; 1852 : 				{
; 1853 : 					Option3 = 3;

  0017a	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 1854 : 				}

  00181	eb 10		 jmp	 SHORT $LN13@DropKundun
$LN12@DropKundun:

; 1855 : 				else Option3 = (rand()%3);

  00183	e8 00 00 00 00	 call	 _rand
  00188	99		 cdq
  00189	b9 03 00 00 00	 mov	 ecx, 3
  0018e	f7 f9		 idiv	 ecx
  00190	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN13@DropKundun:

; 1856 : 			}
; 1857 : 
; 1858 : #ifdef NEW_SKILL_FORSKYLAND
; 1859 : 			if( BagObject[DropItemNum].m_isexitem )

  00193	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00196	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00199	0f b6 94 c1 2f
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+303]
  001a1	85 d2		 test	 edx, edx
  001a3	74 1e		 je	 SHORT $LN14@DropKundun

; 1860 : 			{
; 1861 : 				ExOption = NewOptionRand(0);

  001a5	6a 00		 push	 0
  001a7	e8 00 00 00 00	 call	 ?NewOptionRand@@YAEH@Z	; NewOptionRand
  001ac	83 c4 04	 add	 esp, 4
  001af	0f b6 c0	 movzx	 eax, al
  001b2	89 45 d4	 mov	 DWORD PTR _ExOption$[ebp], eax

; 1862 : 				// 액설런트 아이템은 행운이 붙지 않는다.
; 1863 : 				Option2 = 0;

  001b5	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1864 : 				Option1 = 1;

  001bc	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN14@DropKundun:

; 1865 : 			}
; 1866 : #endif
; 1867 : 			
; 1868 : 			// 혼석, 축석, 영석은 레벨이 없게
; 1869 : 			if( (type == MAKE_ITEMNUM(12, 15)) ||
; 1870 : 				(type == MAKE_ITEMNUM(14, 13)) ||
; 1871 : 				(type == MAKE_ITEMNUM(14, 14)) ||

  001c3	6a 0f		 push	 15			; 0000000fH
  001c5	6a 0c		 push	 12			; 0000000cH
  001c7	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001cc	83 c4 08	 add	 esp, 8
  001cf	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  001d2	74 33		 je	 SHORT $LN16@DropKundun
  001d4	6a 0d		 push	 13			; 0000000dH
  001d6	6a 0e		 push	 14			; 0000000eH
  001d8	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001dd	83 c4 08	 add	 esp, 8
  001e0	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  001e3	74 22		 je	 SHORT $LN16@DropKundun
  001e5	6a 0e		 push	 14			; 0000000eH
  001e7	6a 0e		 push	 14			; 0000000eH
  001e9	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001ee	83 c4 08	 add	 esp, 8
  001f1	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  001f4	74 11		 je	 SHORT $LN16@DropKundun
  001f6	6a 10		 push	 16			; 00000010H
  001f8	6a 0e		 push	 14			; 0000000eH
  001fa	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001ff	83 c4 08	 add	 esp, 8
  00202	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00205	75 1c		 jne	 SHORT $LN15@DropKundun
$LN16@DropKundun:

; 1872 : 				(type == MAKE_ITEMNUM(14, 16)) )
; 1873 : 			{	
; 1874 : 				Option1 = 0; 

  00207	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1875 : 				Option2 = 0;

  0020e	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1876 : 				Option3 = 0;

  00215	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1877 : 				level   = 0;

  0021c	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN15@DropKundun:

; 1878 : 			}
; 1879 : 
; 1880 : 			if( (type == MAKE_ITEMNUM(13, 0)) ||
; 1881 : 				(type == MAKE_ITEMNUM(13, 1)) ||				
; 1882 : 				(type == MAKE_ITEMNUM(13, 2)) ||
; 1883 : 				(type == MAKE_ITEMNUM(13, 8)) ||
; 1884 : 				(type == MAKE_ITEMNUM(13, 9)) ||
; 1885 : 				(type == MAKE_ITEMNUM(13, 12)) ||

  00223	6a 00		 push	 0
  00225	6a 0d		 push	 13			; 0000000dH
  00227	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0022c	83 c4 08	 add	 esp, 8
  0022f	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00232	74 66		 je	 SHORT $LN18@DropKundun
  00234	6a 01		 push	 1
  00236	6a 0d		 push	 13			; 0000000dH
  00238	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0023d	83 c4 08	 add	 esp, 8
  00240	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00243	74 55		 je	 SHORT $LN18@DropKundun
  00245	6a 02		 push	 2
  00247	6a 0d		 push	 13			; 0000000dH
  00249	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0024e	83 c4 08	 add	 esp, 8
  00251	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00254	74 44		 je	 SHORT $LN18@DropKundun
  00256	6a 08		 push	 8
  00258	6a 0d		 push	 13			; 0000000dH
  0025a	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0025f	83 c4 08	 add	 esp, 8
  00262	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00265	74 33		 je	 SHORT $LN18@DropKundun
  00267	6a 09		 push	 9
  00269	6a 0d		 push	 13			; 0000000dH
  0026b	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00270	83 c4 08	 add	 esp, 8
  00273	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00276	74 22		 je	 SHORT $LN18@DropKundun
  00278	6a 0c		 push	 12			; 0000000cH
  0027a	6a 0d		 push	 13			; 0000000dH
  0027c	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00281	83 c4 08	 add	 esp, 8
  00284	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00287	74 11		 je	 SHORT $LN18@DropKundun
  00289	6a 0d		 push	 13			; 0000000dH
  0028b	6a 0d		 push	 13			; 0000000dH
  0028d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00292	83 c4 08	 add	 esp, 8
  00295	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00298	75 07		 jne	 SHORT $LN17@DropKundun
$LN18@DropKundun:

; 1886 : 				(type == MAKE_ITEMNUM(13, 13)) )
; 1887 : 			{	// 반지류는 레벨 0
; 1888 : 				level   = 0;

  0029a	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN17@DropKundun:

; 1889 : 			}
; 1890 : 
; 1891 : 			// MODIFY_ITEM_DROP_MAP_OF_EROHIM_KUNDUN_20050610
; 1892 : 			ItemSerialCreateSend(lpObj->m_Index, btMapNumber, (BYTE)x, (BYTE)y, type, level, (BYTE)dur, Option1, Option2, Option3, lpObj->m_Index, ExOption);

  002a1	6a 00		 push	 0
  002a3	6a 00		 push	 0
  002a5	0f b6 45 d4	 movzx	 eax, BYTE PTR _ExOption$[ebp]
  002a9	50		 push	 eax
  002aa	8b 4d d0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002ad	8b 11		 mov	 edx, DWORD PTR [ecx]
  002af	52		 push	 edx
  002b0	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  002b4	50		 push	 eax
  002b5	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  002b9	51		 push	 ecx
  002ba	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  002be	52		 push	 edx
  002bf	f3 0f 2c 45 f8	 cvttss2si eax, DWORD PTR _dur$[ebp]
  002c4	0f b6 c8	 movzx	 ecx, al
  002c7	51		 push	 ecx
  002c8	0f b6 55 f0	 movzx	 edx, BYTE PTR _level$[ebp]
  002cc	52		 push	 edx
  002cd	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  002d0	50		 push	 eax
  002d1	0f b6 4d e8	 movzx	 ecx, BYTE PTR _y$[ebp]
  002d5	51		 push	 ecx
  002d6	0f b6 55 ec	 movzx	 edx, BYTE PTR _x$[ebp]
  002da	52		 push	 edx
  002db	0f b6 45 0c	 movzx	 eax, BYTE PTR _btMapNumber$[ebp]
  002df	50		 push	 eax
  002e0	8b 4d d0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002e3	8b 11		 mov	 edx, DWORD PTR [ecx]
  002e5	52		 push	 edx
  002e6	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  002eb	83 c4 38	 add	 esp, 56			; 00000038H

; 1893 : 			LogAddTD("[○Kundun EVENT] ★KUNDUN Event ItemDrop [%s][%s] [%s] : (%d)(%d/%d) Item:(%s)%d Level:%d op1:%d op2:%d op3:%d", 

  002ee	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  002f1	50		 push	 eax
  002f2	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  002f5	51		 push	 ecx
  002f6	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  002f9	52		 push	 edx
  002fa	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  002fd	50		 push	 eax
  002fe	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  00301	51		 push	 ecx
  00302	6b 55 f4 6c	 imul	 edx, DWORD PTR _type$[ebp], 108
  00306	81 c2 00 00 00
	00		 add	 edx, OFFSET ?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A ; ItemAttribute
  0030c	52		 push	 edx
  0030d	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  00310	50		 push	 eax
  00311	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  00314	51		 push	 ecx
  00315	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  00319	52		 push	 edx
  0031a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0031d	83 c0 08	 add	 eax, 8
  00320	50		 push	 eax
  00321	8b 4d d0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00324	83 c1 73	 add	 ecx, 115		; 00000073H
  00327	51		 push	 ecx
  00328	8b 55 d0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0032b	83 c2 68	 add	 edx, 104		; 00000068H
  0032e	52		 push	 edx
  0032f	68 00 00 00 00	 push	 OFFSET ??_C@_0GP@IHPHEILG@?$FL?$KB?$NLKundun?5EVENT?$FN?5?$KB?ZKUNDUN?5Event@
  00334	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0033a	83 c4 34	 add	 esp, 52			; 00000034H

; 1894 : 					lpObj->AccountID, lpObj->Name, m_sEventName, 
; 1895 : 					btMapNumber, x, y,
; 1896 : 					ItemAttribute[type].Name, type, level, Option1, Option2, Option3 );
; 1897 : 			return TRUE;

  0033d	b8 01 00 00 00	 mov	 eax, 1
  00342	eb 05		 jmp	 SHORT $LN1@DropKundun
$LN4@DropKundun:

; 1898 : 		}
; 1899 : 	}
; 1900 : 
; 1901 : 	return TRUE;

  00344	b8 01 00 00 00	 mov	 eax, 1
$LN1@DropKundun:

; 1902 : 
; 1903 : }

  00349	5f		 pop	 edi
  0034a	5e		 pop	 esi
  0034b	5b		 pop	 ebx
  0034c	8b e5		 mov	 esp, ebp
  0034e	5d		 pop	 ebp
  0034f	c2 10 00	 ret	 16			; 00000010H
?DropKundunEventItem@CItemBagEx@@QAEHHEEE@Z ENDP	; CItemBagEx::DropKundunEventItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?DropItem@CItemBagEx@@QAEHH@Z
_TEXT	SEGMENT
_lpObj$ = -48						; size = 4
_ExOption$ = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?DropItem@CItemBagEx@@QAEHH@Z PROC			; CItemBagEx::DropItem, COMDAT
; _this$ = ecx

; 357  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 70	 sub	 esp, 112		; 00000070H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 358  : 	if( !m_bLoad )					// 아이템 스크립트가 로드되지 않았다

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  00013	75 07		 jne	 SHORT $LN2@DropItem

; 359  : 		return FALSE;

  00015	33 c0		 xor	 eax, eax
  00017	e9 55 03 00 00	 jmp	 $LN1@DropItem
$LN2@DropItem:

; 360  : 	
; 361  : 	float dur;
; 362  : 	int type, level, x, y;
; 363  : 	int Option1 = 0;

  0001c	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 364  : 	int Option2 = 0;

  00023	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 365  : 	int Option3 = 0;

  0002a	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 366  : 	int DropItemNum;
; 367  : 	int ExOption = 0;

  00031	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0

; 368  : 
; 369  : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  00038	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  0003f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00045	89 45 d0	 mov	 DWORD PTR _lpObj$[ebp], eax

; 370  : 
; 371  : 	if( GetBagCount() > 0 )

  00048	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0004b	e8 00 00 00 00	 call	 ?GetBagCount@CItemBagEx@@AAEHXZ ; CItemBagEx::GetBagCount
  00050	85 c0		 test	 eax, eax
  00052	0f 8e cd 02 00
	00		 jle	 $LN4@DropItem

; 372  : 	{
; 373  : 		// m_iItemDropRate/100 의 확률로 이벤트용 아이템 증정
; 374  : 		if( (rand()%100) < m_iItemDropRate )

  00058	e8 00 00 00 00	 call	 _rand
  0005d	99		 cdq
  0005e	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00063	f7 f9		 idiv	 ecx
  00065	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00068	3b 90 18 01 00
	00		 cmp	 edx, DWORD PTR [eax+280]
  0006e	0f 8d b1 02 00
	00		 jge	 $LN4@DropItem

; 375  : 		{
; 376  : 			DropItemNum = (rand()%GetBagCount());

  00074	e8 00 00 00 00	 call	 _rand
  00079	8b f0		 mov	 esi, eax
  0007b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0007e	e8 00 00 00 00	 call	 ?GetBagCount@CItemBagEx@@AAEHXZ ; CItemBagEx::GetBagCount
  00083	8b c8		 mov	 ecx, eax
  00085	8b c6		 mov	 eax, esi
  00087	99		 cdq
  00088	f7 f9		 idiv	 ecx
  0008a	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 377  : 			dur  = 0;

  0008d	0f 57 c0	 xorps	 xmm0, xmm0
  00090	f3 0f 11 45 f8	 movss	 DWORD PTR _dur$[ebp], xmm0

; 378  : 			x    = lpObj->X;

  00095	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00098	0f bf 88 04 01
	00 00		 movsx	 ecx, WORD PTR [eax+260]
  0009f	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 379  : 			y    = lpObj->Y;

  000a2	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a5	0f bf 88 06 01
	00 00		 movsx	 ecx, WORD PTR [eax+262]
  000ac	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 380  : 
; 381  : 			// 레벨
; 382  : 			level= GetLevel(DropItemNum);

  000af	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000b2	50		 push	 eax
  000b3	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000b6	e8 00 00 00 00	 call	 ?GetLevel@CItemBagEx@@AAEEH@Z ; CItemBagEx::GetLevel
  000bb	0f b6 c8	 movzx	 ecx, al
  000be	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx

; 383  : 			type = ItemGetNumberMake(BagObject[DropItemNum].m_type, BagObject[DropItemNum].m_index);

  000c1	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000c4	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c7	0f b6 94 c1 29
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+297]
  000cf	52		 push	 edx
  000d0	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000d3	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000d6	0f b6 94 c1 28
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+296]
  000de	52		 push	 edx
  000df	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000e4	83 c4 08	 add	 esp, 8
  000e7	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 384  : 
; 385  : 			if( type == -1 )

  000ea	83 7d f4 ff	 cmp	 DWORD PTR _type$[ebp], -1
  000ee	75 07		 jne	 SHORT $LN5@DropItem

; 386  : 				return FALSE;

  000f0	33 c0		 xor	 eax, eax
  000f2	e9 7a 02 00 00	 jmp	 $LN1@DropItem
$LN5@DropItem:

; 387  : 
; 388  : 			if( BagObject[DropItemNum].m_isskill )

  000f7	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  000fa	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000fd	0f b6 94 c1 2c
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+300]
  00105	85 d2		 test	 edx, edx
  00107	74 14		 je	 SHORT $LN6@DropItem

; 389  : 			{	// 스킬이 붙을수 있으면
; 390  : 				Option1 = rand()%2;

  00109	e8 00 00 00 00	 call	 _rand
  0010e	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00113	79 05		 jns	 SHORT $LN17@DropItem
  00115	48		 dec	 eax
  00116	83 c8 fe	 or	 eax, -2			; fffffffeH
  00119	40		 inc	 eax
$LN17@DropItem:
  0011a	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax
$LN6@DropItem:

; 391  : 			}
; 392  : 
; 393  : 			if( BagObject[DropItemNum].m_isluck )

  0011d	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00120	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00123	0f b6 94 c1 2d
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+301]
  0012b	85 d2		 test	 edx, edx
  0012d	74 14		 je	 SHORT $LN7@DropItem

; 394  : 			{	// 행운이 붙을수 있으면
; 395  : 				Option2 = rand()%2;

  0012f	e8 00 00 00 00	 call	 _rand
  00134	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00139	79 05		 jns	 SHORT $LN18@DropItem
  0013b	48		 dec	 eax
  0013c	83 c8 fe	 or	 eax, -2			; fffffffeH
  0013f	40		 inc	 eax
$LN18@DropItem:
  00140	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax
$LN7@DropItem:

; 396  : 			}
; 397  : 
; 398  : 			if( BagObject[DropItemNum].m_isoption )

  00143	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00146	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00149	0f b6 94 c1 2e
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+302]
  00151	85 d2		 test	 edx, edx
  00153	74 2b		 je	 SHORT $LN10@DropItem

; 399  : 			{
; 400  : 				if( (rand()%5) < 1 )

  00155	e8 00 00 00 00	 call	 _rand
  0015a	99		 cdq
  0015b	b9 05 00 00 00	 mov	 ecx, 5
  00160	f7 f9		 idiv	 ecx
  00162	83 fa 01	 cmp	 edx, 1
  00165	7d 09		 jge	 SHORT $LN9@DropItem

; 401  : 				{
; 402  : 					Option3 = 3;

  00167	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 403  : 				}

  0016e	eb 10		 jmp	 SHORT $LN10@DropItem
$LN9@DropItem:

; 404  : 				else Option3 = (rand()%3);

  00170	e8 00 00 00 00	 call	 _rand
  00175	99		 cdq
  00176	b9 03 00 00 00	 mov	 ecx, 3
  0017b	f7 f9		 idiv	 ecx
  0017d	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN10@DropItem:

; 405  : 			}
; 406  : 
; 407  : #ifdef NEW_SKILL_FORSKYLAND
; 408  : 			if( BagObject[DropItemNum].m_isexitem )

  00180	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00183	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00186	0f b6 94 c1 2f
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax*8+303]
  0018e	85 d2		 test	 edx, edx
  00190	74 17		 je	 SHORT $LN11@DropItem

; 409  : 			{
; 410  : 				ExOption = NewOptionRand(0);

  00192	6a 00		 push	 0
  00194	e8 00 00 00 00	 call	 ?NewOptionRand@@YAEH@Z	; NewOptionRand
  00199	83 c4 04	 add	 esp, 4
  0019c	0f b6 c0	 movzx	 eax, al
  0019f	89 45 d4	 mov	 DWORD PTR _ExOption$[ebp], eax

; 411  : 				Option1 = 1;

  001a2	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN11@DropItem:

; 412  : 			}
; 413  : #endif
; 414  : 			
; 415  : 			// 혼석, 축석, 영석은 레벨이 없게
; 416  : 			if( (type == MAKE_ITEMNUM(12, 15)) ||
; 417  : 				(type == MAKE_ITEMNUM(14, 13)) ||

  001a9	6a 0f		 push	 15			; 0000000fH
  001ab	6a 0c		 push	 12			; 0000000cH
  001ad	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001b2	83 c4 08	 add	 esp, 8
  001b5	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  001b8	74 22		 je	 SHORT $LN13@DropItem
  001ba	6a 0d		 push	 13			; 0000000dH
  001bc	6a 0e		 push	 14			; 0000000eH
  001be	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001c3	83 c4 08	 add	 esp, 8
  001c6	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  001c9	74 11		 je	 SHORT $LN13@DropItem
  001cb	6a 0e		 push	 14			; 0000000eH
  001cd	6a 0e		 push	 14			; 0000000eH
  001cf	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  001d4	83 c4 08	 add	 esp, 8
  001d7	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  001da	75 1c		 jne	 SHORT $LN12@DropItem
$LN13@DropItem:

; 418  : 				(type == MAKE_ITEMNUM(14, 14)) )
; 419  : 			{	
; 420  : 				Option1 = 0; 

  001dc	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 421  : 				Option2 = 0;

  001e3	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 422  : 				Option3 = 0;

  001ea	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 423  : 				level   = 0;

  001f1	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN12@DropItem:

; 424  : 			}
; 425  : 
; 426  : 			if( (type == MAKE_ITEMNUM(13, 0)) ||
; 427  : 				(type == MAKE_ITEMNUM(13, 1)) ||				
; 428  : 				(type == MAKE_ITEMNUM(13, 2)) ||
; 429  : 				(type == MAKE_ITEMNUM(13, 8)) ||
; 430  : 				(type == MAKE_ITEMNUM(13, 9)) ||
; 431  : 				(type == MAKE_ITEMNUM(13, 12)) ||

  001f8	6a 00		 push	 0
  001fa	6a 0d		 push	 13			; 0000000dH
  001fc	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00201	83 c4 08	 add	 esp, 8
  00204	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00207	74 66		 je	 SHORT $LN15@DropItem
  00209	6a 01		 push	 1
  0020b	6a 0d		 push	 13			; 0000000dH
  0020d	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00212	83 c4 08	 add	 esp, 8
  00215	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00218	74 55		 je	 SHORT $LN15@DropItem
  0021a	6a 02		 push	 2
  0021c	6a 0d		 push	 13			; 0000000dH
  0021e	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00223	83 c4 08	 add	 esp, 8
  00226	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  00229	74 44		 je	 SHORT $LN15@DropItem
  0022b	6a 08		 push	 8
  0022d	6a 0d		 push	 13			; 0000000dH
  0022f	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00234	83 c4 08	 add	 esp, 8
  00237	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  0023a	74 33		 je	 SHORT $LN15@DropItem
  0023c	6a 09		 push	 9
  0023e	6a 0d		 push	 13			; 0000000dH
  00240	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00245	83 c4 08	 add	 esp, 8
  00248	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  0024b	74 22		 je	 SHORT $LN15@DropItem
  0024d	6a 0c		 push	 12			; 0000000cH
  0024f	6a 0d		 push	 13			; 0000000dH
  00251	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00256	83 c4 08	 add	 esp, 8
  00259	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  0025c	74 11		 je	 SHORT $LN15@DropItem
  0025e	6a 0d		 push	 13			; 0000000dH
  00260	6a 0d		 push	 13			; 0000000dH
  00262	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  00267	83 c4 08	 add	 esp, 8
  0026a	39 45 f4	 cmp	 DWORD PTR _type$[ebp], eax
  0026d	75 07		 jne	 SHORT $LN14@DropItem
$LN15@DropItem:

; 432  : 				(type == MAKE_ITEMNUM(13, 13)) )
; 433  : 			{	// 반지류는 레벨 0
; 434  : 				level   = 0;

  0026f	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN14@DropItem:

; 435  : 			}
; 436  : 
; 437  : 			ItemSerialCreateSend(lpObj->m_Index, lpObj->MapNumber, (BYTE)x, (BYTE)y, type, level, (BYTE)dur, Option1, Option2, Option3, lpObj->m_Index, ExOption);

  00276	6a 00		 push	 0
  00278	6a 00		 push	 0
  0027a	0f b6 45 d4	 movzx	 eax, BYTE PTR _ExOption$[ebp]
  0027e	50		 push	 eax
  0027f	8b 4d d0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00282	8b 11		 mov	 edx, DWORD PTR [ecx]
  00284	52		 push	 edx
  00285	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  00289	50		 push	 eax
  0028a	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  0028e	51		 push	 ecx
  0028f	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  00293	52		 push	 edx
  00294	f3 0f 2c 45 f8	 cvttss2si eax, DWORD PTR _dur$[ebp]
  00299	0f b6 c8	 movzx	 ecx, al
  0029c	51		 push	 ecx
  0029d	0f b6 55 f0	 movzx	 edx, BYTE PTR _level$[ebp]
  002a1	52		 push	 edx
  002a2	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  002a5	50		 push	 eax
  002a6	0f b6 4d e8	 movzx	 ecx, BYTE PTR _y$[ebp]
  002aa	51		 push	 ecx
  002ab	0f b6 55 ec	 movzx	 edx, BYTE PTR _x$[ebp]
  002af	52		 push	 edx
  002b0	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002b3	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  002ba	51		 push	 ecx
  002bb	8b 55 d0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002be	8b 02		 mov	 eax, DWORD PTR [edx]
  002c0	50		 push	 eax
  002c1	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  002c6	83 c4 38	 add	 esp, 56			; 00000038H

; 438  : 			LogAddTD("[%s][%s] [%s] Event ItemDrop : (%d)(%d/%d) Item:(%s)%d Level:%d op1:%d op2:%d op3:%d", 

  002c9	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  002cc	50		 push	 eax
  002cd	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  002d0	51		 push	 ecx
  002d1	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  002d4	52		 push	 edx
  002d5	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  002d8	50		 push	 eax
  002d9	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  002dc	51		 push	 ecx
  002dd	6b 55 f4 6c	 imul	 edx, DWORD PTR _type$[ebp], 108
  002e1	81 c2 00 00 00
	00		 add	 edx, OFFSET ?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A ; ItemAttribute
  002e7	52		 push	 edx
  002e8	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  002eb	50		 push	 eax
  002ec	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  002ef	51		 push	 ecx
  002f0	8b 55 d0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002f3	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  002fa	50		 push	 eax
  002fb	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  002fe	83 c1 08	 add	 ecx, 8
  00301	51		 push	 ecx
  00302	8b 55 d0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00305	83 c2 73	 add	 edx, 115		; 00000073H
  00308	52		 push	 edx
  00309	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0030c	83 c0 68	 add	 eax, 104		; 00000068H
  0030f	50		 push	 eax
  00310	68 00 00 00 00	 push	 OFFSET ??_C@_0FF@LDONOBLP@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5Event?5ItemDrop?5?3?5@
  00315	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0031b	83 c4 34	 add	 esp, 52			; 00000034H

; 439  : 					lpObj->AccountID, lpObj->Name, m_sEventName, 
; 440  : 					lpObj->MapNumber, x, y,
; 441  : 					ItemAttribute[type].Name, type, level, Option1, Option2, Option3 );
; 442  : 			return TRUE;

  0031e	b8 01 00 00 00	 mov	 eax, 1
  00323	eb 4c		 jmp	 SHORT $LN1@DropItem
$LN4@DropItem:

; 443  : 		}
; 444  : 	}
; 445  : 	x    = lpObj->X;

  00325	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00328	0f bf 88 04 01
	00 00		 movsx	 ecx, WORD PTR [eax+260]
  0032f	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 446  : 	y    = lpObj->Y;	

  00332	8b 45 d0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00335	0f bf 88 06 01
	00 00		 movsx	 ecx, WORD PTR [eax+262]
  0033c	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 447  : 	MapC[lpObj->MapNumber].MoneyItemDrop(m_iDropZen, x ,y);	

  0033f	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  00342	50		 push	 eax
  00343	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  00346	51		 push	 ecx
  00347	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  0034a	8b 82 10 01 00
	00		 mov	 eax, DWORD PTR [edx+272]
  00350	50		 push	 eax
  00351	8b 4d d0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00354	0f b6 91 09 01
	00 00		 movzx	 edx, BYTE PTR [ecx+265]
  0035b	69 ca 8c 04 05
	00		 imul	 ecx, edx, 328844
  00361	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A ; MapC
  00367	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 448  : 	return TRUE;

  0036c	b8 01 00 00 00	 mov	 eax, 1
$LN1@DropItem:

; 449  : }

  00371	5f		 pop	 edi
  00372	5e		 pop	 esi
  00373	5b		 pop	 ebx
  00374	8b e5		 mov	 esp, ebp
  00376	5d		 pop	 ebp
  00377	c2 04 00	 ret	 4
?DropItem@CItemBagEx@@QAEHH@Z ENDP			; CItemBagEx::DropItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?DropEventItem@CItemBagEx@@QAEHH@Z
_TEXT	SEGMENT
_MaxHitUser$1 = -32					; size = 4
_dur$2 = -28						; size = 4
_y$3 = -24						; size = 4
_x$4 = -20						; size = 4
_level$5 = -16						; size = 4
_type$6 = -12						; size = 4
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?DropEventItem@CItemBagEx@@QAEHH@Z PROC			; CItemBagEx::DropEventItem, COMDAT
; _this$ = ecx

; 326  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 60	 sub	 esp, 96			; 00000060H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 327  : 	if( !m_bLoad )					// 아이템 스크립트가 로드되지 않았다

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  00013	75 07		 jne	 SHORT $LN2@DropEventI

; 328  : 		return FALSE;

  00015	33 c0		 xor	 eax, eax
  00017	e9 1d 01 00 00	 jmp	 $LN1@DropEventI
$LN2@DropEventI:

; 329  : 
; 330  : 	if( !IsEnableEventItemDrop(aIndex) )	

  0001c	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0001f	50		 push	 eax
  00020	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00023	e8 00 00 00 00	 call	 ?IsEnableEventItemDrop@CItemBagEx@@AAEHH@Z ; CItemBagEx::IsEnableEventItemDrop
  00028	85 c0		 test	 eax, eax
  0002a	75 07		 jne	 SHORT $LN3@DropEventI

; 331  : 		return FALSE;				// 드롭조건이 맞지 않다

  0002c	33 c0		 xor	 eax, eax
  0002e	e9 06 01 00 00	 jmp	 $LN1@DropEventI
$LN3@DropEventI:

; 332  : 
; 333  : 	LPOBJECTSTRUCT lpObj = &gObj[aIndex];

  00033	69 45 08 a0 1b
	00 00		 imul	 eax, DWORD PTR _aIndex$[ebp], 7072
  0003a	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAVOBJECTSTRUCT@@A ; gObj
  00040	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 334  : 
; 335  : 	if( (rand()%1000) < m_iEventItemDropRate )

  00043	e8 00 00 00 00	 call	 _rand
  00048	99		 cdq
  00049	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
  0004e	f7 f9		 idiv	 ecx
  00050	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00053	3b 90 14 01 00
	00		 cmp	 edx, DWORD PTR [eax+276]
  00059	0f 8d d8 00 00
	00		 jge	 $LN4@DropEventI

; 336  : 	{
; 337  : 		int type, level, x, y;
; 338  : 		float dur=0;

  0005f	0f 57 c0	 xorps	 xmm0, xmm0
  00062	f3 0f 11 45 e4	 movss	 DWORD PTR _dur$2[ebp], xmm0

; 339  : 
; 340  : 		dur  = 255;

  00067	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@437f0000
  0006f	f3 0f 11 45 e4	 movss	 DWORD PTR _dur$2[ebp], xmm0

; 341  : 		x    = lpObj->X;

  00074	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00077	0f bf 88 04 01
	00 00		 movsx	 ecx, WORD PTR [eax+260]
  0007e	89 4d ec	 mov	 DWORD PTR _x$4[ebp], ecx

; 342  : 		y    = lpObj->Y;

  00081	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00084	0f bf 88 06 01
	00 00		 movsx	 ecx, WORD PTR [eax+262]
  0008b	89 4d e8	 mov	 DWORD PTR _y$3[ebp], ecx

; 343  : 		level= m_iEventItemLevel;

  0008e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00091	8b 88 0c 01 00
	00		 mov	 ecx, DWORD PTR [eax+268]
  00097	89 4d f0	 mov	 DWORD PTR _level$5[ebp], ecx

; 344  : 		type = m_iEventItemType;

  0009a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0009d	8b 88 08 01 00
	00		 mov	 ecx, DWORD PTR [eax+264]
  000a3	89 4d f4	 mov	 DWORD PTR _type$6[ebp], ecx

; 345  : 
; 346  : 		int MaxHitUser = gObjMonsterTopHitDamageUser(lpObj);

  000a6	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000a9	50		 push	 eax
  000aa	e8 00 00 00 00	 call	 ?gObjMonsterTopHitDamageUser@@YAHPAVOBJECTSTRUCT@@@Z ; gObjMonsterTopHitDamageUser
  000af	83 c4 04	 add	 esp, 4
  000b2	89 45 e0	 mov	 DWORD PTR _MaxHitUser$1[ebp], eax

; 347  : 		ItemSerialCreateSend(lpObj->m_Index, lpObj->MapNumber, (BYTE)x, (BYTE)y, type, level, (BYTE)dur, 0, 0, 0, MaxHitUser);

  000b5	6a 00		 push	 0
  000b7	6a 00		 push	 0
  000b9	6a 00		 push	 0
  000bb	8b 45 e0	 mov	 eax, DWORD PTR _MaxHitUser$1[ebp]
  000be	50		 push	 eax
  000bf	6a 00		 push	 0
  000c1	6a 00		 push	 0
  000c3	6a 00		 push	 0
  000c5	f3 0f 2c 4d e4	 cvttss2si ecx, DWORD PTR _dur$2[ebp]
  000ca	0f b6 d1	 movzx	 edx, cl
  000cd	52		 push	 edx
  000ce	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$5[ebp]
  000d2	50		 push	 eax
  000d3	8b 4d f4	 mov	 ecx, DWORD PTR _type$6[ebp]
  000d6	51		 push	 ecx
  000d7	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$3[ebp]
  000db	52		 push	 edx
  000dc	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$4[ebp]
  000e0	50		 push	 eax
  000e1	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000e4	0f b6 91 09 01
	00 00		 movzx	 edx, BYTE PTR [ecx+265]
  000eb	52		 push	 edx
  000ec	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000ef	8b 08		 mov	 ecx, DWORD PTR [eax]
  000f1	51		 push	 ecx
  000f2	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEEH@Z ; ItemSerialCreateSend
  000f7	83 c4 38	 add	 esp, 56			; 00000038H

; 348  : 		LogAddTD("[%s][%s] [%s] MonsterEventItemDrop (%d)(%d/%d)",

  000fa	8b 45 e8	 mov	 eax, DWORD PTR _y$3[ebp]
  000fd	50		 push	 eax
  000fe	8b 4d ec	 mov	 ecx, DWORD PTR _x$4[ebp]
  00101	51		 push	 ecx
  00102	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00105	0f b6 82 09 01
	00 00		 movzx	 eax, BYTE PTR [edx+265]
  0010c	50		 push	 eax
  0010d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00110	83 c1 08	 add	 ecx, 8
  00113	51		 push	 ecx
  00114	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00117	83 c2 73	 add	 edx, 115		; 00000073H
  0011a	52		 push	 edx
  0011b	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0011e	83 c0 68	 add	 eax, 104		; 00000068H
  00121	50		 push	 eax
  00122	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@CFLKNDIJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$FL?$CFs?$FN?5MonsterEventItemD@
  00127	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0012d	83 c4 1c	 add	 esp, 28			; 0000001cH

; 349  : 				 lpObj->AccountID, lpObj->Name, m_sEventName, lpObj->MapNumber, x, y);
; 350  : 		return TRUE;

  00130	b8 01 00 00 00	 mov	 eax, 1
  00135	eb 02		 jmp	 SHORT $LN1@DropEventI
$LN4@DropEventI:

; 351  : 	}
; 352  : 	return FALSE;

  00137	33 c0		 xor	 eax, eax
$LN1@DropEventI:

; 353  : }

  00139	5f		 pop	 edi
  0013a	5e		 pop	 esi
  0013b	5b		 pop	 ebx
  0013c	8b e5		 mov	 esp, ebp
  0013e	5d		 pop	 ebp
  0013f	c2 04 00	 ret	 4
?DropEventItem@CItemBagEx@@QAEHH@Z ENDP			; CItemBagEx::DropEventItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?LoadItem@CItemBagEx@@QAEXPAD@Z
_TEXT	SEGMENT
tv93 = -360						; size = 4
tv94 = -356						; size = 4
_msg$1 = -288						; size = 255
_index$2 = -32						; size = 4
_type$3 = -28						; size = 4
_MapIndex$4 = -24					; size = 4
_Type$5 = -20						; size = 4
_n$ = -16						; size = 4
_Token$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_script_file$ = 8					; size = 4
?LoadItem@CItemBagEx@@QAEXPAD@Z PROC			; CItemBagEx::LoadItem, COMDAT
; _this$ = ecx

; 173  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 68 01 00
	00		 sub	 esp, 360		; 00000168H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 174  : 	m_bLoad = FALSE;

  00019	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0001c	c7 40 04 00 00
	00 00		 mov	 DWORD PTR [eax+4], 0

; 175  : 	if((SMDFile=fopen(script_file,"r")) == NULL)	

  00023	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r@
  00028	8b 45 08	 mov	 eax, DWORD PTR _script_file$[ebp]
  0002b	50		 push	 eax
  0002c	e8 00 00 00 00	 call	 _fopen
  00031	83 c4 08	 add	 esp, 8
  00034	a3 00 00 00 00	 mov	 DWORD PTR ?SMDFile@@3PAU_iobuf@@A, eax
  00039	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?SMDFile@@3PAU_iobuf@@A, 0
  00040	75 23		 jne	 SHORT $LN10@LoadItem

; 176  : 	{
; 177  : 		LogAdd(lMsg.Get(453), script_file);

  00042	8b 45 08	 mov	 eax, DWORD PTR _script_file$[ebp]
  00045	50		 push	 eax
  00046	68 c5 01 00 00	 push	 453			; 000001c5H
  0004b	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00050	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  00056	50		 push	 eax
  00057	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0005d	83 c4 08	 add	 esp, 8

; 178  : 		return ;

  00060	e9 5f 04 00 00	 jmp	 $LN1@LoadItem
$LN10@LoadItem:

; 179  : 	}	
; 180  : 
; 181  : 	SMDToken Token;
; 182  : 	int n=0;

  00065	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _n$[ebp], 0
$LN2@LoadItem:

; 183  : 	
; 184  : 	while( true )

  0006c	b8 01 00 00 00	 mov	 eax, 1
  00071	85 c0		 test	 eax, eax
  00073	0f 84 15 04 00
	00		 je	 $LN3@LoadItem

; 185  : 	{
; 186  : 		Token = (*GetToken)();

  00079	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0007e	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax

; 187  : 		if(Token == END) break;

  00081	83 7d f4 02	 cmp	 DWORD PTR _Token$[ebp], 2
  00085	75 05		 jne	 SHORT $LN11@LoadItem
  00087	e9 02 04 00 00	 jmp	 $LN3@LoadItem
$LN11@LoadItem:

; 188  : 		
; 189  : 		if(Token == NUMBER)

  0008c	83 7d f4 01	 cmp	 DWORD PTR _Token$[ebp], 1
  00090	0f 85 f3 03 00
	00		 jne	 $LN9@LoadItem

; 190  : 		{
; 191  : 			int Type = (int)TokenNumber;

  00096	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0009e	89 45 ec	 mov	 DWORD PTR _Type$5[ebp], eax

; 192  : 			if( Type == 0 )

  000a1	83 7d ec 00	 cmp	 DWORD PTR _Type$5[ebp], 0
  000a5	0f 85 12 01 00
	00		 jne	 $LN13@LoadItem
$LN4@LoadItem:

; 193  : 			{	// 드롭될 아이템 조건 정보(맵, 몬스터 레벨)
; 194  : 				while(true)

  000ab	b8 01 00 00 00	 mov	 eax, 1
  000b0	85 c0		 test	 eax, eax
  000b2	0f 84 00 01 00
	00		 je	 $LN5@LoadItem

; 195  : 				{
; 196  : 					Token = (*GetToken)();

  000b8	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  000bd	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax

; 197  : 					if(Token==NAME && strcmp("end",TokenString)==NULL) break;

  000c0	83 7d f4 00	 cmp	 DWORD PTR _Token$[ebp], 0
  000c4	75 1b		 jne	 SHORT $LN15@LoadItem
  000c6	68 00 00 00 00	 push	 OFFSET ?TokenString@@3PADA
  000cb	68 00 00 00 00	 push	 OFFSET ??_C@_03JBJLGPFL@end@
  000d0	e8 00 00 00 00	 call	 _strcmp
  000d5	83 c4 08	 add	 esp, 8
  000d8	85 c0		 test	 eax, eax
  000da	75 05		 jne	 SHORT $LN15@LoadItem
  000dc	e9 d7 00 00 00	 jmp	 $LN5@LoadItem
$LN15@LoadItem:

; 198  : 
; 199  : 					int	MapIndex = (int)TokenNumber;

  000e1	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  000e9	89 45 e8	 mov	 DWORD PTR _MapIndex$4[ebp], eax

; 200  : 					if( !CHECK_LIMIT(MapIndex, g_TerrainManager.Size()) )

  000ec	83 7d e8 00	 cmp	 DWORD PTR _MapIndex$4[ebp], 0
  000f0	7d 0c		 jge	 SHORT $LN26@LoadItem
  000f2	c7 85 9c fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv94[ebp], 0
  000fc	eb 34		 jmp	 SHORT $LN27@LoadItem
$LN26@LoadItem:
  000fe	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TerrainManager@@3VCTerrainManager@@A ; g_TerrainManager
  00103	e8 00 00 00 00	 call	 ?Size@CTerrainManager@@QAE?BHXZ ; CTerrainManager::Size
  00108	83 e8 01	 sub	 eax, 1
  0010b	39 45 e8	 cmp	 DWORD PTR _MapIndex$4[ebp], eax
  0010e	7e 0c		 jle	 SHORT $LN24@LoadItem
  00110	c7 85 98 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv93[ebp], 0
  0011a	eb 0a		 jmp	 SHORT $LN25@LoadItem
$LN24@LoadItem:
  0011c	c7 85 98 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR tv93[ebp], 1
$LN25@LoadItem:
  00126	8b 85 98 fe ff
	ff		 mov	 eax, DWORD PTR tv93[ebp]
  0012c	89 85 9c fe ff
	ff		 mov	 DWORD PTR tv94[ebp], eax
$LN27@LoadItem:
  00132	83 bd 9c fe ff
	ff 00		 cmp	 DWORD PTR tv94[ebp], 0
  00139	75 16		 jne	 SHORT $LN16@LoadItem

; 201  : 					{
; 202  : 						MsgBox("ExEvent ItemBag LoadFail [%s]", script_file);

  0013b	8b 45 08	 mov	 eax, DWORD PTR _script_file$[ebp]
  0013e	50		 push	 eax
  0013f	68 00 00 00 00	 push	 OFFSET ??_C@_0BO@PPHECIOP@ExEvent?5ItemBag?5LoadFail?5?$FL?$CFs?$FN@
  00144	e8 00 00 00 00	 call	 ?MsgBox@@YAXPADZZ	; MsgBox
  00149	83 c4 08	 add	 esp, 8

; 203  : 						return;

  0014c	e9 73 03 00 00	 jmp	 $LN1@LoadItem
$LN16@LoadItem:

; 204  : 					}
; 205  : 
; 206  : 					Token = (*GetToken)(); DropMapInfo[MapIndex].m_bIsDrop = (int)TokenNumber;

  00151	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00156	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00159	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  00161	6b 4d e8 03	 imul	 ecx, DWORD PTR _MapIndex$4[ebp], 3
  00165	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00168	8b 92 24 01 00
	00		 mov	 edx, DWORD PTR [edx+292]
  0016e	88 04 0a	 mov	 BYTE PTR [edx+ecx], al

; 207  : 					Token = (*GetToken)(); DropMapInfo[MapIndex].m_MinMonsterLevel = (int)TokenNumber;

  00171	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00176	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00179	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  00181	6b 4d e8 03	 imul	 ecx, DWORD PTR _MapIndex$4[ebp], 3
  00185	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00188	8b 92 24 01 00
	00		 mov	 edx, DWORD PTR [edx+292]
  0018e	88 44 0a 01	 mov	 BYTE PTR [edx+ecx+1], al

; 208  : 					Token = (*GetToken)(); DropMapInfo[MapIndex].m_MaxMonsterLevel = (int)TokenNumber;

  00192	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00197	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  0019a	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  001a2	6b 4d e8 03	 imul	 ecx, DWORD PTR _MapIndex$4[ebp], 3
  001a6	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  001a9	8b 92 24 01 00
	00		 mov	 edx, DWORD PTR [edx+292]
  001af	88 44 0a 02	 mov	 BYTE PTR [edx+ecx+2], al

; 209  : 				}

  001b3	e9 f3 fe ff ff	 jmp	 $LN4@LoadItem
$LN5@LoadItem:

; 210  : 				
; 211  : 			}

  001b8	e9 cc 02 00 00	 jmp	 $LN9@LoadItem
$LN13@LoadItem:

; 212  : 			else if( Type == 1 )

  001bd	83 7d ec 01	 cmp	 DWORD PTR _Type$5[ebp], 1
  001c1	0f 85 6e 01 00
	00		 jne	 $LN17@LoadItem
$LN6@LoadItem:

; 213  : 			{	// 이벤트 아이템 정보
; 214  : 				while(true)

  001c7	b8 01 00 00 00	 mov	 eax, 1
  001cc	85 c0		 test	 eax, eax
  001ce	0f 84 5c 01 00
	00		 je	 $LN7@LoadItem

; 215  : 				{
; 216  : 					int type, index;
; 217  : 					Token = (*GetToken)();

  001d4	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  001d9	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax

; 218  : 					if(Token==NAME && strcmp("end",TokenString)==NULL) break;

  001dc	83 7d f4 00	 cmp	 DWORD PTR _Token$[ebp], 0
  001e0	75 1b		 jne	 SHORT $LN19@LoadItem
  001e2	68 00 00 00 00	 push	 OFFSET ?TokenString@@3PADA
  001e7	68 00 00 00 00	 push	 OFFSET ??_C@_03JBJLGPFL@end@
  001ec	e8 00 00 00 00	 call	 _strcmp
  001f1	83 c4 08	 add	 esp, 8
  001f4	85 c0		 test	 eax, eax
  001f6	75 05		 jne	 SHORT $LN19@LoadItem
  001f8	e9 33 01 00 00	 jmp	 $LN7@LoadItem
$LN19@LoadItem:

; 219  : 
; 220  : 					strcpy(m_sEventName, TokenString);

  001fd	68 00 00 00 00	 push	 OFFSET ?TokenString@@3PADA
  00202	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00205	83 c0 08	 add	 eax, 8
  00208	50		 push	 eax
  00209	e8 00 00 00 00	 call	 _strcpy
  0020e	83 c4 08	 add	 esp, 8

; 221  : 					Token = (*GetToken)(); m_iDropZen = (int)TokenNumber;

  00211	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00216	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00219	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  00221	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00224	89 81 10 01 00
	00		 mov	 DWORD PTR [ecx+272], eax

; 222  : 
; 223  : 					Token = (*GetToken)(); type = (int)TokenNumber;

  0022a	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0022f	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00232	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0023a	89 45 e4	 mov	 DWORD PTR _type$3[ebp], eax

; 224  : 					Token = (*GetToken)(); index = (int)TokenNumber;

  0023d	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00242	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00245	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0024d	89 45 e0	 mov	 DWORD PTR _index$2[ebp], eax

; 225  : 					m_iEventItemType = MAKE_ITEMNUM(type, index);

  00250	8b 45 e0	 mov	 eax, DWORD PTR _index$2[ebp]
  00253	50		 push	 eax
  00254	8b 4d e4	 mov	 ecx, DWORD PTR _type$3[ebp]
  00257	51		 push	 ecx
  00258	e8 00 00 00 00	 call	 ?MakeItemNumber@@YAHHH@Z ; MakeItemNumber
  0025d	83 c4 08	 add	 esp, 8
  00260	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00263	89 82 08 01 00
	00		 mov	 DWORD PTR [edx+264], eax

; 226  : 
; 227  : 					Token = (*GetToken)(); m_iEventItemLevel = (int)TokenNumber;

  00269	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0026e	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00271	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  00279	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0027c	89 81 0c 01 00
	00		 mov	 DWORD PTR [ecx+268], eax

; 228  : 
; 229  : 					Token = (*GetToken)(); m_iEventItemDropRate = (int)TokenNumber;

  00282	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00287	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  0028a	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  00292	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00295	89 81 14 01 00
	00		 mov	 DWORD PTR [ecx+276], eax

; 230  : 					Token = (*GetToken)(); m_iItemDropRate = (int)TokenNumber;

  0029b	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  002a0	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  002a3	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  002ab	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  002ae	89 81 18 01 00
	00		 mov	 DWORD PTR [ecx+280], eax

; 231  : 					Token = (*GetToken)(); m_iExItemDropRate = (int)TokenNumber;

  002b4	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  002b9	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  002bc	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  002c4	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  002c7	89 81 1c 01 00
	00		 mov	 DWORD PTR [ecx+284], eax

; 232  : 
; 233  : 					char msg[255];
; 234  : 					wsprintf(msg, "[%s] Eventitemnum = %d,EventItemLevel = %d, EventItemDropRate = %d, ItemDropRate = %d, ExItemDropRate = %d",

  002cd	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  002d0	8b 88 1c 01 00
	00		 mov	 ecx, DWORD PTR [eax+284]
  002d6	51		 push	 ecx
  002d7	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  002da	8b 82 18 01 00
	00		 mov	 eax, DWORD PTR [edx+280]
  002e0	50		 push	 eax
  002e1	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  002e4	8b 91 14 01 00
	00		 mov	 edx, DWORD PTR [ecx+276]
  002ea	52		 push	 edx
  002eb	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  002ee	8b 88 0c 01 00
	00		 mov	 ecx, DWORD PTR [eax+268]
  002f4	51		 push	 ecx
  002f5	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  002f8	8b 82 08 01 00
	00		 mov	 eax, DWORD PTR [edx+264]
  002fe	50		 push	 eax
  002ff	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00302	83 c1 08	 add	 ecx, 8
  00305	51		 push	 ecx
  00306	68 00 00 00 00	 push	 OFFSET ??_C@_0GL@LIMNLNHJ@?$FL?$CFs?$FN?5Eventitemnum?5?$DN?5?$CFd?0EventIte@
  0030b	8d 95 e0 fe ff
	ff		 lea	 edx, DWORD PTR _msg$1[ebp]
  00311	52		 push	 edx
  00312	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  00318	83 c4 20	 add	 esp, 32			; 00000020H

; 235  : 						     m_sEventName, m_iEventItemType, m_iEventItemLevel, m_iEventItemDropRate, 
; 236  : 							 m_iItemDropRate, m_iExItemDropRate);
; 237  : 					LogAddTD(msg);

  0031b	8d 85 e0 fe ff
	ff		 lea	 eax, DWORD PTR _msg$1[ebp]
  00321	50		 push	 eax
  00322	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00328	83 c4 04	 add	 esp, 4

; 238  : 				}

  0032b	e9 97 fe ff ff	 jmp	 $LN6@LoadItem
$LN7@LoadItem:

; 239  : 			}

  00330	e9 54 01 00 00	 jmp	 $LN9@LoadItem
$LN17@LoadItem:

; 240  : 			else if( Type == 2 )

  00335	83 7d ec 02	 cmp	 DWORD PTR _Type$5[ebp], 2
  00339	0f 85 4a 01 00
	00		 jne	 $LN9@LoadItem
$LN8@LoadItem:

; 241  : 			{
; 242  : 				while(true)

  0033f	b8 01 00 00 00	 mov	 eax, 1
  00344	85 c0		 test	 eax, eax
  00346	0f 84 3d 01 00
	00		 je	 $LN9@LoadItem

; 243  : 				{				
; 244  : 					Token = (*GetToken)();

  0034c	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00351	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax

; 245  : 					if(Token==NAME && strcmp("end",TokenString)==NULL) break;

  00354	83 7d f4 00	 cmp	 DWORD PTR _Token$[ebp], 0
  00358	75 1b		 jne	 SHORT $LN21@LoadItem
  0035a	68 00 00 00 00	 push	 OFFSET ?TokenString@@3PADA
  0035f	68 00 00 00 00	 push	 OFFSET ??_C@_03JBJLGPFL@end@
  00364	e8 00 00 00 00	 call	 _strcmp
  00369	83 c4 08	 add	 esp, 8
  0036c	85 c0		 test	 eax, eax
  0036e	75 05		 jne	 SHORT $LN21@LoadItem
  00370	e9 14 01 00 00	 jmp	 $LN9@LoadItem
$LN21@LoadItem:

; 246  : 
; 247  : 					BagObject[n].m_type = (int)TokenNumber;					

  00375	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0037d	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  00380	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00383	88 84 ca 28 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+296], al

; 248  : 
; 249  : 					Token = (*GetToken)(); BagObject[n].m_index = (int)TokenNumber;

  0038a	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0038f	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00392	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0039a	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  0039d	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  003a0	88 84 ca 29 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+297], al

; 250  : 
; 251  : 					Token = (*GetToken)(); BagObject[n].m_minLevel = (int)TokenNumber;

  003a7	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  003ac	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  003af	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  003b7	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  003ba	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  003bd	88 84 ca 2a 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+298], al

; 252  : 					Token = (*GetToken)(); BagObject[n].m_maxLevel = (int)TokenNumber;

  003c4	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  003c9	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  003cc	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  003d4	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  003d7	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  003da	88 84 ca 2b 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+299], al

; 253  : 					Token = (*GetToken)(); BagObject[n].m_isskill = (int)TokenNumber;

  003e1	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  003e6	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  003e9	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  003f1	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  003f4	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  003f7	88 84 ca 2c 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+300], al

; 254  : 					Token = (*GetToken)(); BagObject[n].m_isluck = (int)TokenNumber;

  003fe	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00403	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00406	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0040e	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  00411	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00414	88 84 ca 2d 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+301], al

; 255  : 					Token = (*GetToken)(); BagObject[n].m_isoption = (int)TokenNumber;

  0041b	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00420	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00423	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  0042b	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  0042e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00431	88 84 ca 2e 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+302], al

; 256  : 					Token = (*GetToken)(); BagObject[n].m_isexitem = (int)TokenNumber;

  00438	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0043d	89 45 f4	 mov	 DWORD PTR _Token$[ebp], eax
  00440	f3 0f 2c 05 00
	00 00 00	 cvttss2si eax, DWORD PTR ?TokenNumber@@3MA
  00448	8b 4d f0	 mov	 ecx, DWORD PTR _n$[ebp]
  0044b	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0044e	88 84 ca 2f 01
	00 00		 mov	 BYTE PTR [edx+ecx*8+303], al

; 257  : 
; 258  : 					/*
; 259  : 					char msg[255];
; 260  : 					wsprintf(msg, "[%d] [%s] type=%d,index=%d,minLv=%d,MaxLv=%d,skill=%d,luck=%d,op=%d,Ex=%d\n",							
; 261  : 							n, 
; 262  : 							ItemAttribute[MAKE_ITEMNUM(BagObject[n].m_type, BagObject[n].m_index)].Name,
; 263  : 							BagObject[n].m_index,
; 264  : 							BagObject[n].m_minLevel,
; 265  : 							BagObject[n].m_maxLevel,
; 266  : 							BagObject[n].m_isskill,
; 267  : 							BagObject[n].m_isluck,
; 268  : 							BagObject[n].m_isoption,
; 269  : 							BagObject[n].m_isexitem);
; 270  : 
; 271  : 					wsprintf(msg, "%s\n",
; 272  : 									ItemAttribute[MAKE_ITEMNUM(BagObject[n].m_type, BagObject[n].m_index)].Name);									
; 273  : 
; 274  : 					OutputDebugString(msg);
; 275  : 					*/
; 276  : 					n++;

  00455	8b 45 f0	 mov	 eax, DWORD PTR _n$[ebp]
  00458	83 c0 01	 add	 eax, 1
  0045b	89 45 f0	 mov	 DWORD PTR _n$[ebp], eax

; 277  : 					m_iBagObjectCount++;

  0045e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00461	8b 88 20 01 00
	00		 mov	 ecx, DWORD PTR [eax+288]
  00467	83 c1 01	 add	 ecx, 1
  0046a	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0046d	89 8a 20 01 00
	00		 mov	 DWORD PTR [edx+288], ecx

; 278  : 					if( m_iBagObjectCount > MAX_ITEMBAGEX-1 ) break;

  00473	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00476	81 b8 20 01 00
	00 95 00 00 00	 cmp	 DWORD PTR [eax+288], 149 ; 00000095H
  00480	7e 02		 jle	 SHORT $LN22@LoadItem
  00482	eb 05		 jmp	 SHORT $LN9@LoadItem
$LN22@LoadItem:

; 279  : 				}

  00484	e9 b6 fe ff ff	 jmp	 $LN8@LoadItem
$LN9@LoadItem:

; 280  : 			}				
; 281  : 		}
; 282  : 	}

  00489	e9 de fb ff ff	 jmp	 $LN2@LoadItem
$LN3@LoadItem:

; 283  : 
; 284  : 	fclose(SMDFile);	

  0048e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SMDFile@@3PAU_iobuf@@A
  00493	50		 push	 eax
  00494	e8 00 00 00 00	 call	 _fclose
  00499	83 c4 04	 add	 esp, 4

; 285  : 	LogAdd(lMsg.Get(454), script_file);

  0049c	8b 45 08	 mov	 eax, DWORD PTR _script_file$[ebp]
  0049f	50		 push	 eax
  004a0	68 c6 01 00 00	 push	 454			; 000001c6H
  004a5	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  004aa	ff 15 00 00 00
	00		 call	 DWORD PTR __imp_?Get@CMsg@@QAEPADH@Z
  004b0	50		 push	 eax
  004b1	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  004b7	83 c4 08	 add	 esp, 8

; 286  : 
; 287  : 	m_bLoad = TRUE;

  004ba	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  004bd	c7 40 04 01 00
	00 00		 mov	 DWORD PTR [eax+4], 1
$LN1@LoadItem:

; 288  : }

  004c4	5f		 pop	 edi
  004c5	5e		 pop	 esi
  004c6	5b		 pop	 ebx
  004c7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004ca	33 cd		 xor	 ecx, ebp
  004cc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004d1	8b e5		 mov	 esp, ebp
  004d3	5d		 pop	 ebp
  004d4	c2 04 00	 ret	 4
?LoadItem@CItemBagEx@@QAEXPAD@Z ENDP			; CItemBagEx::LoadItem
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?Init@CItemBagEx@@QAEXPAD@Z
_TEXT	SEGMENT
tv140 = -96						; size = 4
$T2 = -92						; size = 4
$T3 = -88						; size = 4
$T4 = -84						; size = 4
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
_name$ = 8						; size = 4
?Init@CItemBagEx@@QAEXPAD@Z PROC			; CItemBagEx::Init, COMDAT
; _this$ = ecx

; 49   : {	

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?Init@CItemBagEx@@QAEXPAD@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	83 ec 54	 sub	 esp, 84			; 00000054H
  00014	53		 push	 ebx
  00015	56		 push	 esi
  00016	57		 push	 edi
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	50		 push	 eax
  0001f	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00022	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00028	89 4d f0	 mov	 DWORD PTR _this$[ebp], ecx

; 50   : 	m_bLoad = FALSE;

  0002b	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0002e	c7 40 04 00 00
	00 00		 mov	 DWORD PTR [eax+4], 0

; 51   : 	m_sEventName[0] = NULL;

  00035	b8 01 00 00 00	 mov	 eax, 1
  0003a	6b c8 00	 imul	 ecx, eax, 0
  0003d	8b 55 f0	 mov	 edx, DWORD PTR _this$[ebp]
  00040	c6 44 0a 08 00	 mov	 BYTE PTR [edx+ecx+8], 0

; 52   : 	m_iEventItemType = -1;

  00045	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00048	c7 80 08 01 00
	00 ff ff ff ff	 mov	 DWORD PTR [eax+264], -1

; 53   : 	m_iEventItemLevel = 0;

  00052	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00055	c7 80 0c 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+268], 0

; 54   : 	m_iDropZen = 0;

  0005f	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00062	c7 80 10 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+272], 0

; 55   : 	m_iEventItemDropRate = 0;

  0006c	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0006f	c7 80 14 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+276], 0

; 56   : 	m_iItemDropRate = 0;

  00079	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0007c	c7 80 18 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+280], 0

; 57   : 	m_iExItemDropRate = 0;

  00086	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00089	c7 80 1c 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+284], 0

; 58   : 	
; 59   : 	m_iBagObjectCount = 0;	

  00093	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00096	c7 80 20 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+288], 0

; 60   : 
; 61   : 	if(g_TerrainManager.Size() < 1)

  000a0	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TerrainManager@@3VCTerrainManager@@A ; g_TerrainManager
  000a5	e8 00 00 00 00	 call	 ?Size@CTerrainManager@@QAE?BHXZ ; CTerrainManager::Size
  000aa	83 f8 01	 cmp	 eax, 1
  000ad	7d 0f		 jge	 SHORT $LN2@Init

; 62   : 		g_TerrainManager.Load();

  000af	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@CIFNLNKN@?4?4?2data?2TerrainManager?4cfg@
  000b4	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TerrainManager@@3VCTerrainManager@@A ; g_TerrainManager
  000b9	e8 00 00 00 00	 call	 ?Load@CTerrainManager@@QAEXPBD@Z ; CTerrainManager::Load
$LN2@Init:

; 63   : 
; 64   : 	if(DropMapInfo == NULL)

  000be	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  000c1	83 b8 24 01 00
	00 00		 cmp	 DWORD PTR [eax+292], 0
  000c8	75 75		 jne	 SHORT $LN3@Init

; 65   : 		DropMapInfo = new CItemBagDropMapInfo[g_TerrainManager.Size()];

  000ca	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TerrainManager@@3VCTerrainManager@@A ; g_TerrainManager
  000cf	e8 00 00 00 00	 call	 ?Size@CTerrainManager@@QAE?BHXZ ; CTerrainManager::Size
  000d4	89 45 ac	 mov	 DWORD PTR $T4[ebp], eax
  000d7	33 c9		 xor	 ecx, ecx
  000d9	8b 45 ac	 mov	 eax, DWORD PTR $T4[ebp]
  000dc	ba 03 00 00 00	 mov	 edx, 3
  000e1	f7 e2		 mul	 edx
  000e3	0f 90 c1	 seto	 cl
  000e6	f7 d9		 neg	 ecx
  000e8	0b c8		 or	 ecx, eax
  000ea	51		 push	 ecx
  000eb	e8 00 00 00 00	 call	 ??_U@YAPAXI@Z		; operator new[]
  000f0	83 c4 04	 add	 esp, 4
  000f3	89 45 a4	 mov	 DWORD PTR $T2[ebp], eax
  000f6	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  000fd	83 7d a4 00	 cmp	 DWORD PTR $T2[ebp], 0
  00101	74 1c		 je	 SHORT $LN5@Init
  00103	68 00 00 00 00	 push	 OFFSET ??0CItemBagDropMapInfo@@QAE@XZ ; CItemBagDropMapInfo::CItemBagDropMapInfo
  00108	8b 45 ac	 mov	 eax, DWORD PTR $T4[ebp]
  0010b	50		 push	 eax
  0010c	6a 03		 push	 3
  0010e	8b 4d a4	 mov	 ecx, DWORD PTR $T2[ebp]
  00111	51		 push	 ecx
  00112	e8 00 00 00 00	 call	 ??_H@YGXPAXIIP6EPAX0@Z@Z
  00117	8b 55 a4	 mov	 edx, DWORD PTR $T2[ebp]
  0011a	89 55 a0	 mov	 DWORD PTR tv140[ebp], edx
  0011d	eb 07		 jmp	 SHORT $LN6@Init
$LN5@Init:
  0011f	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv140[ebp], 0
$LN6@Init:
  00126	8b 45 a0	 mov	 eax, DWORD PTR tv140[ebp]
  00129	89 45 a8	 mov	 DWORD PTR $T3[ebp], eax
  0012c	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  00133	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00136	8b 55 a8	 mov	 edx, DWORD PTR $T3[ebp]
  00139	89 91 24 01 00
	00		 mov	 DWORD PTR [ecx+292], edx
$LN3@Init:

; 66   : 	
; 67   : #ifdef SCRIPT_DECODE_WORK
; 68   : 	LoadItemDecode(gDirPath.GetNewPath(name));	
; 69   : #else
; 70   : 	LoadItem(gDirPath.GetNewPath(name));	

  0013f	8b 45 08	 mov	 eax, DWORD PTR _name$[ebp]
  00142	50		 push	 eax
  00143	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  00148	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  0014d	50		 push	 eax
  0014e	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00151	e8 00 00 00 00	 call	 ?LoadItem@CItemBagEx@@QAEXPAD@Z ; CItemBagEx::LoadItem

; 71   : #endif
; 72   : }

  00156	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00159	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00160	59		 pop	 ecx
  00161	5f		 pop	 edi
  00162	5e		 pop	 esi
  00163	5b		 pop	 ebx
  00164	8b e5		 mov	 esp, ebp
  00166	5d		 pop	 ebp
  00167	c2 04 00	 ret	 4
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?Init@CItemBagEx@@QAEXPAD@Z$0:
  00000	33 db		 xor	 ebx, ebx
  00002	8b 45 ac	 mov	 eax, DWORD PTR $T4[ebp]
  00005	b9 03 00 00 00	 mov	 ecx, 3
  0000a	f7 e1		 mul	 ecx
  0000c	0f 90 c3	 seto	 bl
  0000f	f7 db		 neg	 ebx
  00011	0b d8		 or	 ebx, eax
  00013	53		 push	 ebx
  00014	8b 45 a4	 mov	 eax, DWORD PTR $T2[ebp]
  00017	50		 push	 eax
  00018	e8 00 00 00 00	 call	 ??_V@YAXPAXI@Z		; operator delete[]
  0001d	83 c4 08	 add	 esp, 8
  00020	c3		 ret	 0
  00021	cc		 int	 3
  00022	cc		 int	 3
  00023	cc		 int	 3
  00024	cc		 int	 3
  00025	cc		 int	 3
__ehhandler$?Init@CItemBagEx@@QAEXPAD@Z:
  00026	90		 npad	 1
  00027	90		 npad	 1
  00028	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  0002c	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0002f	8b 4a 9c	 mov	 ecx, DWORD PTR [edx-100]
  00032	33 c8		 xor	 ecx, eax
  00034	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00039	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?Init@CItemBagEx@@QAEXPAD@Z
  0003e	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?Init@CItemBagEx@@QAEXPAD@Z ENDP			; CItemBagEx::Init
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ??1CItemBagEx@@UAE@XZ
_TEXT	SEGMENT
$T1 = -72						; size = 4
_this$ = -4						; size = 4
??1CItemBagEx@@UAE@XZ PROC				; CItemBagEx::~CItemBagEx, COMDAT
; _this$ = ecx

; 43   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CItemBagEx@@6B@

; 44   : 	delete[] DropMapInfo;

  00015	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00018	8b 88 24 01 00
	00		 mov	 ecx, DWORD PTR [eax+292]
  0001e	89 4d b8	 mov	 DWORD PTR $T1[ebp], ecx
  00021	8b 55 b8	 mov	 edx, DWORD PTR $T1[ebp]
  00024	52		 push	 edx
  00025	e8 00 00 00 00	 call	 ??_V@YAXPAX@Z		; operator delete[]
  0002a	83 c4 04	 add	 esp, 4

; 45   : }

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c3		 ret	 0
??1CItemBagEx@@UAE@XZ ENDP				; CItemBagEx::~CItemBagEx
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.h
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ??0CItemBagEx@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CItemBagEx@@QAE@XZ PROC				; CItemBagEx::CItemBagEx, COMDAT
; _this$ = ecx

; 38   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CItemBagEx@@6B@
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.h

; 75   : 	CItemBagDropMapInfo	*DropMapInfo;		// 이벤트 아이템이 드롭될 맵 정보

  00015	68 00 00 00 00	 push	 OFFSET ??0CItemBagAttrEx@@QAE@XZ ; CItemBagAttrEx::CItemBagAttrEx
  0001a	68 96 00 00 00	 push	 150			; 00000096H
  0001f	6a 08		 push	 8
  00021	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00024	05 28 01 00 00	 add	 eax, 296		; 00000128H
  00029	50		 push	 eax
  0002a	e8 00 00 00 00	 call	 ??_H@YGXPAXIIP6EPAX0@Z@Z
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp

; 39   : 	this->DropMapInfo = NULL;

  0002f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00032	c7 80 24 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+292], 0

; 40   : }

  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	5f		 pop	 edi
  00040	5e		 pop	 esi
  00041	5b		 pop	 ebx
  00042	8b e5		 mov	 esp, ebp
  00044	5d		 pop	 ebp
  00045	c3		 ret	 0
??0CItemBagEx@@QAE@XZ ENDP				; CItemBagEx::CItemBagEx
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.h
;	COMDAT ?Init@CItemBagDropMapInfo@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Init@CItemBagDropMapInfo@@QAEXXZ PROC			; CItemBagDropMapInfo::Init, COMDAT
; _this$ = ecx

; 54   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 55   : 		m_bIsDrop = 0;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c6 00 00	 mov	 BYTE PTR [eax], 0

; 56   : 		m_MinMonsterLevel = 0;

  00012	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00015	c6 40 01 00	 mov	 BYTE PTR [eax+1], 0

; 57   : 		m_MaxMonsterLevel = 0;

  00019	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001c	c6 40 02 00	 mov	 BYTE PTR [eax+2], 0

; 58   : 	}

  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
?Init@CItemBagDropMapInfo@@QAEXXZ ENDP			; CItemBagDropMapInfo::Init
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.h
;	COMDAT ??0CItemBagDropMapInfo@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CItemBagDropMapInfo@@QAE@XZ PROC			; CItemBagDropMapInfo::CItemBagDropMapInfo, COMDAT
; _this$ = ecx

; 48   : 	CItemBagDropMapInfo()

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 49   : 	{		
; 50   : 		Init();

  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ?Init@CItemBagDropMapInfo@@QAEXXZ ; CItemBagDropMapInfo::Init

; 51   : 	}

  00014	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c3		 ret	 0
??0CItemBagDropMapInfo@@QAE@XZ ENDP			; CItemBagDropMapInfo::CItemBagDropMapInfo
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.h
;	COMDAT ??0CItemBagAttrEx@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CItemBagAttrEx@@QAE@XZ PROC				; CItemBagAttrEx::CItemBagAttrEx, COMDAT
; _this$ = ecx

; 28   : 	CItemBagAttrEx()

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 29   : 	{
; 30   : 		m_type  =0;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c6 00 00	 mov	 BYTE PTR [eax], 0

; 31   : 		m_index  =0;

  00012	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00015	c6 40 01 00	 mov	 BYTE PTR [eax+1], 0

; 32   : 		m_minLevel  =0;

  00019	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001c	c6 40 02 00	 mov	 BYTE PTR [eax+2], 0

; 33   : 		m_maxLevel  =0;

  00020	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00023	c6 40 03 00	 mov	 BYTE PTR [eax+3], 0

; 34   : 		m_isskill  =0;

  00027	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002a	c6 40 04 00	 mov	 BYTE PTR [eax+4], 0

; 35   : 		m_isluck  =0;

  0002e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00031	c6 40 05 00	 mov	 BYTE PTR [eax+5], 0

; 36   : 		m_isoption  =0;

  00035	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00038	c6 40 06 00	 mov	 BYTE PTR [eax+6], 0

; 37   : 		m_isexitem = 0;

  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	c6 40 07 00	 mov	 BYTE PTR [eax+7], 0

; 38   : 	}

  00043	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00046	5f		 pop	 edi
  00047	5e		 pop	 esi
  00048	5b		 pop	 ebx
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
??0CItemBagAttrEx@@QAE@XZ ENDP				; CItemBagAttrEx::CItemBagAttrEx
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\TerrainManager.h
;	COMDAT ?Size@CTerrainManager@@QAE?BHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Size@CTerrainManager@@QAE?BHXZ PROC			; CTerrainManager::Size, COMDAT
; _this$ = ecx

; 22   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 23   : 		return m_iSize;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 40 08	 mov	 eax, DWORD PTR [eax+8]

; 24   : 	}

  00012	5f		 pop	 edi
  00013	5e		 pop	 esi
  00014	5b		 pop	 ebx
  00015	8b e5		 mov	 esp, ebp
  00017	5d		 pop	 ebp
  00018	c3		 ret	 0
?Size@CTerrainManager@@QAE?BHXZ ENDP			; CTerrainManager::Size
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?__empty_global_delete@@YAXPAXI@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
___formal$ = 12						; size = 4
?__empty_global_delete@@YAXPAXI@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAXI@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File C:\Mu Online\Mu-GS-Webzen-MC-10093\GameServer\ItemBagEx.cpp
;	COMDAT ?__empty_global_delete@@YAXPAX@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
?__empty_global_delete@@YAXPAX@Z PROC			; __empty_global_delete, COMDAT

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?__empty_global_delete@@YAXPAX@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIIP6EPAX0@Z@Z
_TEXT	SEGMENT
tv66 = -68						; size = 4
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIIP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	89 45 bc	 mov	 DWORD PTR tv66[ebp], eax
  0000f	8b 4d 10	 mov	 ecx, DWORD PTR ___n$[ebp]
  00012	83 e9 01	 sub	 ecx, 1
  00015	89 4d 10	 mov	 DWORD PTR ___n$[ebp], ecx
  00018	83 7d bc 00	 cmp	 DWORD PTR tv66[ebp], 0
  0001c	76 11		 jbe	 SHORT $LN1@vector
  0001e	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00021	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  00024	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  00027	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  0002a	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  0002d	eb da		 jmp	 SHORT $LN2@vector
$LN1@vector:
  0002f	5f		 pop	 edi
  00030	5e		 pop	 esi
  00031	5b		 pop	 ebx
  00032	8b e5		 mov	 esp, ebp
  00034	5d		 pop	 ebp
  00035	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIIP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
END
